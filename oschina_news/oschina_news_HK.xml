<?xml version="1.0" encoding="UTF-8"?>
<rss
    xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"


>
    <channel>
        <title>
            <![CDATA[開源中國-最新資訊]]>
        </title>
        <link>https://www.oschina.net/news/project</link>
        <atom:link href="https://rsshub.app/oschina/news" rel="self" type="application/rss+xml" />
        <description>
            <![CDATA[開源中國-最新資訊 - Made with love by RSSHub(https://github.com/DIYgod/RSSHub)]]>
        </description>
        <generator>RSSHub</generator>
        <webMaster>i@diygod.me (DIYgod)</webMaster>
        <language>zh-cn</language>
        <lastBuildDate>Wed, 28 Feb 2024 02:42:41 GMT</lastBuildDate>
        <ttl>120</ttl>
        <item>
            <title>
                <![CDATA[MFiX —— 開源多相流 CFD 軟件]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>MFiX 是美國能源部開發的一款用於模擬顆粒流體多相流的開源軟件，CFD 部分使用 SIMPLE 算法，而顆粒部分包含了 TFM、MPPIC 以及 DEM 等模型，且可以模擬連續相和離散相之間的傳質傳熱。</p><p>MFiX 基於 fortran 語言開發，核心特性包括：並行、開源、跨平台、一鍵安裝、用户圖形界面、支持 TFM/DEM/PIC 多種模型。</p><ul><li>跨平台：該軟件支持 Windows\Linux\macOS，使得用户既能在 windows 下學習、測試算例，也可以直接在超算平台上進行計算</li><li>一鍵安裝：該開源軟件可以通過 anaconda 方便的一鍵安裝，解決了大規模開源軟件難以編譯安裝的痛點</li><li>用户圖形界面：該軟件支持用户圖形界面，可以方便的設置計算參數、監控計算結果。</li><li>Cutcell 網格：該軟件採用 cutcell 網格處理複雜結構，可以通過 stl 文件或軟件內置的幾何結構生成器構建模擬計算區域。</li><li>物性數據庫：軟件自帶物性數據庫，方便傳熱、化學反應的計算</li><li>Stiff Chem Solver: 燃燒等化學反應的特徵時間遠遠小於流動的特徵時間，通過 stiff 化學求解器分步求解化學反應和流體流動，該軟件可以方便的模擬多相反應流動</li><li>該軟件自帶多個演示算例，學習曲線平滑</li><li>模型豐富：採用 SIMPLE 算法的流體求解器、雙流體 TFM 求解器、離散單元法 DEM 顆粒模擬、CFD-DEM 模擬、MP-PIC 模擬</li><li>MPI 多機並行，方便在超算平台上大規模計算</li></ul><p><strong>運行截圖</strong></p><p><img alt="" src="https://oscimg.oschina.net/oscnet/up-be3c669b3b0de4ac6c4bd620524919062f8.png" referrerpolicy="no-referrer"></p></div>
                                                                ]]>
            </description>
            <pubDate>Wed, 28 Feb 2024 02:22:36 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/p/mfix</guid>
            <link>https://www.oschina.net/p/mfix</link>
        </item>
        <item>
            <title>
                <![CDATA[Gitee 推薦 | 小紅書自主研發的跨平台播放器 REDPlayer]]>
            </title>
            <description>
                <![CDATA[<h1><a id="redplayer" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#redplayer"></a>REDPlayer</h1><p><img src="https://gitee.com/rte-dev/RedPlayer/raw/main/redplayer.jpg" alt="示例圖片" referrerpolicy="no-referrer"></p><p><img src="https://img.shields.io/badge/release-v1.0.0-blue" alt="GitHub release (latest by date including pre-releases)" referrerpolicy="no-referrer"><img src="https://img.shields.io/badge/license-LGPL2.1-blue" alt="GitHub license" referrerpolicy="no-referrer"></p><h2><a id="about-redplayer" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#about-redplayer"></a>About REDPlayer</h2><p>REDPlayer 是一款由小紅書自主研發的跨平台 (支持 Android、iOS、HarmonyOS 等平台) 播放器。不同於行業其他播放器，REDPlayer 具有結構簡單、耦合度低、功能邊界清晰等特點，提供了多種接入方式，技術人員可根據需要靈活選擇，既可快速集成 SDK 使用，也可基於源碼進行定製開發。</p><p>REDPlayer 的宗旨是讓開發者可以快速明確地瞭解播放器的基本構造，並可根據個人需求進行簡單擴展，滿足不同用户的多樣需求，可作為學生學習的基礎工具，也可作為企業的商用平台。</p><p>REDPlayer 支持點播、直播場景下的多種協議和格式 (如 HLS、MP4、FLV 等)，並可二次擴展更多協議 (如：RTC 等)。每個模塊均是解耦的，開發者可以根據需要掛載自定義模塊，如自研解碼器、渲染器等。</p><table><thead><tr><th>Platform</th><th>Build Status</th></tr></thead><tbody><tr><td>Android</td><td>Done</td></tr><tr><td>iOS</td><td>Done</td></tr><tr><td>others</td><td>In Coming</td></tr></tbody></table><h3><a id="quickstartdemo" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#quickstartdemo"></a>Quickstart/Demo</h3><ul><li><p>Android <a href="https://gitee.com/rte-dev/RedPlayer/blob/main/source/android/README.md">Quickstart</a>/ <a href="https://gitee.com/rte-dev/RedPlayer/blob/main/source/android/app/README.md">Demo</a></p></li><li><p>IOS <a href="https://gitee.com/rte-dev/RedPlayer/blob/main/source/ios/README.md">Quickstart</a>/ <a href="https://gitee.com/rte-dev/RedPlayer/blob/main/source/ios/RedPlayerDemo">Demo</a></p></li><li><p>In coming...</p></li></ul><h3><a id="features" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#features"></a>Features</h3><table><thead><tr><th>Function</th><th>Function Description</th><th>Current Support Situation</th><th>Other Notes</th></tr></thead><tbody><tr><td>Rich Format</td><td>Supports rich audio and video formats such as FLV, HLS, MP4, MP3, and Vorbis</td><td>✅</td><td></td></tr><tr><td>DASH Protocol</td><td>Supports standard protocol DASH</td><td>✅</td><td>Optimized version of DASH for on-demand support in the later stage</td></tr><tr><td>HDR</td><td>Supports multiple HDR formats such as HDR10/HLG. Distribution and playback support are provided according to the model</td><td>✅</td><td></td></tr><tr><td>URL Playback</td><td>Supports playback of local and network videos via URL</td><td>✅</td><td></td></tr><tr><td>Log Reporting</td><td>Supports reporting player logs and statistics related to playback point information</td><td>✅</td><td></td></tr><tr><td>Abnormal Analysis</td><td>Supports obtaining corresponding abnormal information through log analysis</td><td>✅</td><td></td></tr><tr><td>H.264 Playback &amp; Hardware Decoding</td><td>Supports H.264 video sources and hardware decoding</td><td>✅</td><td></td></tr><tr><td>H.265 Playback &amp; Hardware Decoding</td><td>Supports H.265 video sources and hardware decoding</td><td>✅</td><td>Software decoding capabilities will be supported in the later stage</td></tr><tr><td>Automatic switching between software and hardware decoding</td><td>Automatically switches to software decoding when the terminal does not support hardware decoding</td><td>✅</td><td></td></tr><tr><td>Playback Control</td><td>Supports playback control functions such as start, end, pause, and resume</td><td>✅</td><td></td></tr><tr><td>Accurate Seeking</td><td>Supports accurate seeking to a specified position, which can be accurate to the frame level</td><td>✅</td><td></td></tr><tr><td>Dynamic Dropping</td><td>Start dynamic dropping when the frame rate exceeds 60 fps</td><td>✅</td><td></td></tr><tr><td>Replay</td><td>Supports manually triggered replay after the video ends</td><td>✅</td><td></td></tr><tr><td>Continue playing</td><td>Supports setting the continuous playing time point</td><td>✅</td><td></td></tr><tr><td>Loop Playback</td><td>Supports automatic replay after video playback ends</td><td>✅</td><td>Parameter configuration is required</td></tr><tr><td>Variable Speed Playback</td><td>Supports variable speed playback of 0.5-2 times, and the audio 實現 variable speed without changing the pitch</td><td>✅</td><td></td></tr><tr><td>Definition Adjustment</td><td>Supports switching between multiple definitions for on-demand and transcoding</td><td>✅</td><td></td></tr><tr><td>Seeking within the Cache</td><td>Supports seeking without clearing the buffer for cached video content</td><td>✅</td><td></td></tr><tr><td>Packing Mode</td><td>Supports picture cropping and filling</td><td>✅</td><td></td></tr><tr><td>Private DRM</td><td>Supports private DRM encryption schemes</td><td>✅</td><td></td></tr><tr><td>Adaptive Bitrate</td><td>When playing HLS/DASH, it supports automatically selecting the definition for playback through bandwidth prediction</td><td>✅</td><td>Currently only supports selection before playback, and does not support abr during playback</td></tr><tr><td>Volume Settings</td><td>Supports real-time adjustment of system volume and mute operation</td><td>✅</td><td></td></tr><tr><td>Pure Audio Playback</td><td>Supports playing audio only</td><td>✅</td><td></td></tr><tr><td>Preload</td><td>Supports setting the preload size to reduce the time spent on the first screen</td><td>✅</td><td></td></tr><tr><td>Play While Downloading</td><td>Supports playing while caching and downloading subsequent content, and you can set network policies</td><td>✅</td><td></td></tr><tr><td>Playback Callback</td><td>Supports playback status callback, first frame callback, playback completion or failure callback</td><td>✅</td><td></td></tr><tr><td>Retry on Playback Failure</td><td>Automatically retries on playback failure</td><td>✅</td><td>Only supports retries for non-4XX and 5XX classes</td></tr><tr><td>Real-time Download Speed</td><td>Supports getting real-time download speed</td><td>❌</td><td>Will be supported in later versions</td></tr><tr><td>Encrypted Streaming PlayBack</td><td>Support for on-demand transcoding of encrypted streams</td><td>❌</td><td>Need for custom development</td></tr><tr><td>Screenshot Function</td><td>Support for capturing any frame of the playback picture</td><td>❌</td><td>Will be supported in later versions</td></tr><tr><td>Thumbnail Preview</td><td>Support for previewing progress bar thumbnails (sprite map)</td><td>❌</td><td>Related to business, not currently supported</td></tr><tr><td>Set player size</td><td>Support for customizing the width and height of the player</td><td>❌</td><td>Will be supported in later versions</td></tr><tr><td>External subtitles</td><td>Support for two docking modes of external subtitles: full-link solution and pure client solution</td><td>❌</td><td>Will be supported in later versions</td></tr><tr><td>Client super-resolution</td><td>The client performs super-resolution enhancement on low-quality videos</td><td>❌</td><td>Will be supported in later versions</td></tr><tr><td>H.266 playback</td><td>Support for video playback in H.266 encoding format</td><td>❌</td><td>Will be supported in later versions</td></tr><tr><td>AV1 playback</td><td>Support for video playback in AV1 encoding format</td><td>❌</td><td>Will be supported in later versions</td></tr></tbody></table><h3><a id="open-content" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#open-content"></a>Open Content</h3><div class="white"><div class="highlight markdown-code-block"><pre><span id="LC1" class="line">```bash</span><span id="LC2" class="line"># Describe the main contents of current open source and the estimated time and contents of the next open source</span><span id="LC3" class="line">```</span></pre><div class="markdown-code-block-copy-btn"></div></div></div><ul><li><a href="https://gitee.com/rte-dev/RedPlayer/blob/main/CONTENTS.md">CONTENTS.md</a></li></ul><h3><a id="usage" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#usage"></a>Usage</h3><ul><li>You can directly integrate your project by calling the interface or compile independently.</li><li><a href="https://gitee.com/rte-dev/RedPlayer/blob/main/INTERFACES.md">INTERFACES.md</a></li></ul><h3><a id="build-environment" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#build-environment"></a>Build Environment</h3><ul><li><p><strong>Install Homebrew &amp; Git</strong></p><div class="white"><div class="highlight markdown-code-block"><pre><span id="LC1" class="line"> /bin/bash <span class="nt">-c</span><span class="s2">"</span><span class="si">$(</span>curl <span class="nt">-fsSL</span> https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="si">)</span><span class="s2">"</span></span><span id="LC2" class="line"> brew <span class="nb">install </span>git</span></pre><div class="markdown-code-block-copy-btn"></div></div></div></li><li><p><strong>Build Android</strong></p><p><strong>Using Android SDK</strong></p><p><a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.android.com%2Fstudio%3Fhl%3Den">Andrioid SDK</a> is android project base dependency. You should download and then config with the following command:</p><div class="white"><div class="highlight markdown-code-block"><pre><span id="LC1" class="line"><span class="c"># add this line to your ~/.bash_profile or ~/.profile, the android sdk will work</span></span><span id="LC2" class="line"><span class="nb">export </span><span class="nv">ANDROID_SDK</span><span class="o">=</span>&lt;your sdk path&gt;</span><span id="LC3" class="line"></span><span id="LC4" class="line"><span class="c"># My build environment:</span></span><span id="LC5" class="line"><span class="c"># macOS 14.0</span></span><span id="LC6" class="line"><span class="c"># Android Studio Flamingo | 2022.2.1 Patch 2</span></span><span id="LC7" class="line"><span class="c"># gradle version: 7.5.0</span></span></pre><div class="markdown-code-block-copy-btn"></div></div></div></li><li><p><strong>Build iOS</strong></p><p><strong>Using CocoaPods</strong></p><p><a href="https://gitee.com/link?target=http%3A%2F%2Fcocoapods.org">CocoaPods</a> is a dependency manager for Cocoa projects. You can install it with the following command:</p><div class="white"><div class="highlight markdown-code-block"><pre><span id="LC1" class="line"><span class="nv">$ </span>gem <span class="nb">install </span>cocoapods</span><span id="LC2" class="line"></span><span id="LC3" class="line"><span class="c"># My build environment:</span></span><span id="LC4" class="line"><span class="c"># macOS 14.0</span></span><span id="LC5" class="line"><span class="c"># Xcode 15.2 (15C500b)</span></span><span id="LC6" class="line"><span class="c"># Cocoapods version: 1.10.2</span></span><span id="LC7" class="line"><span class="c"># Ruby 3.0.6p216</span></span></pre><div class="markdown-code-block-copy-btn"></div></div></div></li></ul><h3><a id="latest-changes" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#latest-changes"></a>Latest Changes</h3><ul><li><a href="https://gitee.com/rte-dev/RedPlayer/blob/main/NEWS.md">NEWS.md</a></li></ul><h3><a id="support" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#support"></a>Support</h3><ul><li>Please try to discuss technical issues (<a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FRTE-Dev%2FRedPlayer%2Fissues">https://github.com/RTE-Dev/RedPlayer/issues</a>) publicly on github, and do not inquire privately by email. We will not reply one by one.</li></ul><h3><a id="licence" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#licence"></a>Licence</h3><h4><a id="self-licence" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#self-licence"></a>Self Licence</h4><div class="white"><div class="highlight markdown-code-block"><pre><span id="LC1" class="line">Copyright (c) 2024 xiaohongshu</span><span id="LC2" class="line">Licensed under LGPLv2.1 or later</span></pre><div class="markdown-code-block-copy-btn"></div></div></div><h4><a id="dependence-licence" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#dependence-licence"></a>Dependence Licence</h4><ul><li>ffmpeg: LGPL v2.1+</li><li>soundtouch: LGPL v2.1</li><li>libcurl: MIT License</li><li>c-ares: MIT License</li><li>glide: MIT License</li><li>Masonry: MIT License</li><li>openssl: Apache License 2.0</li><li>PictureSelector: Apache License 2.0</li></ul><h3><a id="law-and-rule" class="anchor" href="https://gitee.com/rte-dev/RedPlayer#law-and-rule"></a>Law And Rule</h3><p>All rights and explanations belong to Xiaohongshu，you should always ask your lawyer for these stuffs before use it in your product.</p>]]>
            </description>
            <pubDate>Wed, 28 Feb 2024 02:14:36 GMT</pubDate>
            <guid isPermaLink="false">https://gitee.com/rte-dev/RedPlayer</guid>
            <link>https://gitee.com/rte-dev/RedPlayer</link>
        </item>
        <item>
            <title>
                <![CDATA[RXThinkCMF 敏捷開發框架 Laravel10.x+Layui 版本 v2.0.0 發佈]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="background-color:#ffffff; color:#40485b">v2.0.0 更新如下:</span><br><span style="background-color:#ffffff; color:#40485b">1、新增 Docker 容器化解決方案；</span><br><span style="background-color:#ffffff; color:#40485b">2、優化系統功能模塊和文件結構；</span><br><span style="background-color:#ffffff; color:#40485b">3、優化編碼規範，統一命名和描述；</span><br><span style="background-color:#ffffff; color:#40485b">4、優化數據庫表結構和編碼；</span><br><span style="background-color:#ffffff; color:#40485b">5、優化模塊頁面，提升使用體驗度；</span><br><span style="background-color:#ffffff; color:#40485b">6、修復近期用户反饋的問題；</span></p><div><div><div><h2>項目介紹</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">一款 PHP 語言基於 Laravel10.x、Layui、MySQL 等框架精心打造的一款模塊化、插件化、高性能的前後端分離架構敏捷開發框架，可用於快速搭建前後端分離後台管理系統，本着簡化開發、提升開發效率的初衷，框架自研了一套個性化的組件，實現了可插拔的組件式開發方式：單圖上傳、多圖上傳、下拉選擇、開關按鈕、單選按鈕、多選按鈕、圖片裁剪等等一系列個性化、輕量級的組件，是一款真正意義上實現組件化開發的敏捷開發框架，框架已集成了完整的 RBAC 權限架構和常規基礎模塊，為了敏捷快速開發，提升研發效率，框架內置了一鍵 CRUD 代碼生成器，自定義了模塊生成模板，可以根據已建好的表結構 (字段註釋需規範) 快速的一鍵生成整個模塊的所有代碼和增刪改查等等功能業務，真正實現了低代碼開發，極大的節省了人力成本的同時提高了開發效率，縮短了研發週期，是一款真正意義上實現組件化、低代碼敏捷開發框架。</p><h2>內置模塊</h2><ul><li>用户管理：用於維護管理系統的用户，常規信息的維護與賬號設置。</li><li>角色管理：角色菜單管理與權限分配、設置角色所擁有的菜單權限。</li><li>菜單管理：配置系統菜單，操作權限，按鈕權限標識等。</li><li>職級管理：主要管理用户擔任的職級。</li><li>崗位管理：主要管理用户擔任的崗位。</li><li>部門管理：主要管理系統組織架構，對組織架構進行統一管理維護。</li><li>操作日誌：系統正常操作日誌記錄和查詢；系統異常信息日誌記錄和查詢。</li><li>登錄日誌：系統登錄日誌記錄查詢包含登錄異常。</li><li>字典管理：對系統中常用的較為固定的數據進行統一維護。</li><li>配置管理：對系統的常規配置信息進行維護，網站配置管理功能進行統一維護。</li><li>城市管理：統一對全國行政區劃進行維護，對其他模塊提供行政區劃數據支撐。</li><li>友鏈管理：對系統友情鏈接、合作伙伴等相關外鏈進行集成維護管理的模塊。</li><li>個人中心：主要是對當前登錄用户的個人信息進行便捷修改的功能。</li><li>廣告管理：主要對各終端的廣告數據進行管理維護。</li><li>站點欄目：主要對大型系統網站等欄目進行劃分和維護的模塊。</li><li>會員管理：對各終端註冊的會員進行統一的查詢與管理的模塊。</li><li>網站配置：對配置管理模塊的數據源動態解析與統一維護管理的模塊。</li><li>通知公告：系統通知公告信息發佈維護。</li><li>代碼生成：一鍵生成模塊 CRUD 的功能，包括後端和前端等相關代碼。</li><li>案例演示：常規代碼生成器一鍵生成後的演示案例。</li></ul><h2>軟件信息</h2><ul><li>軟件名稱：RXThinkCMF 敏捷開發框架 Laravel10.x+Layui 版本</li><li>官網網址：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.rxthink.cn" target="_blank">https://www.rxthink.cn</a></li><li>文檔網址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fdocs.laravel10.layui.rxthink.cn" target="_blank">http://docs.laravel10.layui.rxthink.cn</a></li><li>演示地址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fmanage.laravel10.layui.rxthink.cn" target="_blank">http://manage.laravel10.layui.rxthink.cn</a></li></ul><h2>核心組件</h2><ul><li>單圖上傳組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'UploadImageComponent'</span>, [<span style="color:#032f62">'name'</span>=&gt;<span style="color:#032f62">'avatar|頭像|90x90|建議上傳尺寸 450x450|450x450'</span>,<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($info[<span style="color:#032f62">'avatar_url'</span>]) ? $info[<span style="color:#032f62">'avatar_url'</span>] : <span style="color:#032f62">''</span>])</span></pre></div></div><ul><li>多圖上傳組件</li></ul><div><div><pre><span> @render(<span style="color:#032f62">'UploadAlbumComponent'</span>, [<span style="color:#032f62">'name'</span>=&gt;<span style="color:#032f62">'imgs|圖集|90x90|20|建議上傳尺寸 450x450|450x450'</span>,<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($info[<span style="color:#032f62">'imgsList'</span>]) ? $info[<span style="color:#032f62">'imgsList'</span>] : []])</span></pre></div></div><ul><li>下拉選擇組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'SelectComponent'</span>, [<span style="color:#032f62">'name'</span>=&gt;<span style="color:#032f62">'gender|1|性別|name|id'</span>,<span style="color:#032f62">'data'</span>=&gt;config(<span style="color:#032f62">"admin.gender_list"</span>),<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($info[<span style="color:#032f62">'gender'</span>]) ? $info[<span style="color:#032f62">'gender'</span>] : <span>1</span>])</span></pre></div></div><ul><li>單選按鈕組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'RadioComponent'</span>, [<span style="color:#032f62">'name'</span>=&gt;<span style="color:#032f62">'gender|name|id'</span>,<span style="color:#032f62">'data'</span>=&gt;config(<span style="color:#032f62">"admin.gender_list"</span>),<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($vo[<span style="color:#032f62">'gender'</span>]) ? $vo[<span style="color:#032f62">'gender'</span>] : <span>0</span>])</span></pre></div></div><ul><li>複選框組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'CheckboxComponent'</span>, [<span style="color:#032f62">'name'</span>=&gt;<span style="color:#032f62">'type|name|id'</span>,<span style="color:#032f62">'data'</span>=&gt;<span style="color:#032f62">"1=雲計算,2=數據庫,3=大數據"</span>,<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($vo[<span style="color:#032f62">'type'</span>]) ? $vo[<span style="color:#032f62">'type'</span>] : []])</span></pre></div></div><ul><li>城市選擇組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'CityComponent'</span>, [<span style="color:#032f62">'cityId'</span>=&gt;<span style="color:#d73a49">isset</span>($info[<span style="color:#032f62">'district_id'</span>]) ? $info[<span style="color:#032f62">'district_id'</span>] : <span>0</span>,<span style="color:#032f62">'limit'</span>=&gt;<span>3</span>])</span></pre></div></div><ul><li>開關組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'SwitchComponent'</span>, [<span style="color:#032f62">'name'</span>=&gt;<span style="color:#032f62">'status'</span>,<span style="color:#032f62">'title'</span>=&gt;<span style="color:#032f62">'在用|禁用'</span>,<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($info[<span style="color:#032f62">'status'</span>]) ? $info[<span style="color:#032f62">'status'</span>] : <span>1</span>])</span></pre></div></div><ul><li>日期組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'DateComponent'</span>, [<span style="color:#032f62">'name'</span>=&gt;<span style="color:#032f62">'entry_date|入職時間|date'</span>,<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($info[<span style="color:#032f62">'format_entry_date'</span>]) ? $info[<span style="color:#032f62">'format_entry_date'</span>] : <span style="color:#032f62">''</span>])</span></pre></div></div><ul><li>圖標組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'IconComponent'</span>, [<span style="color:#032f62">'name'</span>=&gt;<span style="color:#032f62">'icon'</span>,<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($info[<span style="color:#032f62">'icon'</span>]) ? $info[<span style="color:#032f62">'icon'</span>] : <span style="color:#032f62">'layui-icon-component'</span>])</span></pre></div></div><ul><li>穿梭組件</li></ul><div><div><pre><span>@render(<span style="color:#032f62">'TransferComponent'</span>, [<span style="color:#032f62">'param'</span>=&gt;<span style="color:#032f62">'func|0|全部節點,已賦予節點|name|id|220x350'</span>,<span style="color:#032f62">'data'</span>=&gt;config(<span style="color:#032f62">'admin.menu_func'</span>),<span style="color:#032f62">'value'</span>=&gt;<span style="color:#d73a49">isset</span>($info[<span style="color:#032f62">'funcList'</span>]) ? $info[<span style="color:#032f62">'funcList'</span>] : <span style="color:#032f62">""</span>])</span></pre></div></div><h2>模塊展示</h2><p style="margin-left:0; margin-right:0"><img alt="" height="1080" src="https://oscimg.oschina.net/oscnet/up-78efa203fa062e8476dd5b727f6eb121d55.png" width="1920" referrerpolicy="no-referrer"></p></div></div></div></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 22:59:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280552</guid>
            <link>https://www.oschina.net/news/280552</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[墨幹理工套件 V1.2.5 LTS 發佈了]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:rgba(255, 255, 245, 0.86); margin-left:0; margin-right:0; text-align:start">墨幹理工套件 V1.2.5LTS<span>本次更新主要是修復既有錯誤、改進用户體驗。</span></p><blockquote><p style="color:var(--vp-c-text-2); margin-left:0; margin-right:0">注意：一個重大的變更是默認開啓了實驗選項<code>DO NOT use UTF-8 for CJK in TM format</code>，保持和 GNU TeXmacs 2.1.2 的兼容性。之前在墨幹 V1.1.x 使用了 TM 格式中顯示中文特性的用户，可以關閉這個選項以正確加載墨幹 V1.1.x 生成的可以在純文本編輯器中正常顯示中文的文檔。v1.1.x 的在 tm 文檔中顯示中文的特性可能會帶來一些嚴重的兼容性問題，故而不建議用户使用可以在純文本編輯器中正常顯示中文的 TM 文檔。從墨幹 V1.2.6 開始，我們會實驗性地支持 TMU 格式以 UTF-8 編碼顯示中文。TMU 格式經過多個版本迭代，最終才會對所有用户開放。</p></blockquote><p>墨幹理工套件 V1.2.5 LTS 包含以下組件：</p><ul><li>墨幹 V1.2.5LTS (Mogan Research v1.2.5 LTS)</li></ul><p>墨幹 V1.2.5 LTS 這個版本標誌着墨幹作為 GNU TeXmacs 的一個發行版，基本完成了從 Qt 4 到 Qt 6 的升級，從 GNU Guile 1.8 到 S7 Scheme 的執行引擎切換，從 Autotools 到 xmake 的構建工具切換等重要的基礎設施的建設。在這個堅實的基礎上，從 V1.2.0 開始，我們以一月一版本的愉快的高強度研發迭代下，大大改善了墨乾的可用性和易用性。</p><p>墨幹 V1.2.5 LTS 是為期至少一年的長期支持版，其目的是服務教育工作者。一年的長期支持，是為了覆蓋 2024 年的春季學期和秋季學期。歡迎教育工作者們使用墨乾製作試卷、幻燈片、講義以及撰寫書籍。在未來的一個月內，我們會發布 V1.2.5.1，以修復 V1.2.5 中仍舊存在的錯誤。後續的補丁版本會按需發佈，歡迎教育工作者們使用墨幹並反饋錯誤。</p><p>墨幹 V1.2.5 LTS 保留了對 Qt 5 的支持，這是為了以一種比較低的維護成本為老舊系統提供構建墨乾的可行性：比如 Windows 7，macOS 10.x，龍芯生態的舊世界。</p><p>從墨幹 V1.2.6 開始，我們移除了對 Qt 5 的支持，輕裝上陣；另外，我們也會放慢研發迭代的節奏，每兩個月發佈一個版本，作為 TeXmacs 發行版中的先行者，穩步迭代進化。</p><h2>影響用户體驗的詳細更新<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmogan.app%2Fzh%2Fguide%2FChangeLog_v1.2.5.html%23%25E5%25BD%25B1%25E5%2593%258D%25E7%2594%25A8%25E6%2588%25B7%25E4%25BD%2593%25E9%25AA%258C%25E7%259A%2584%25E8%25AF%25A6%25E7%25BB%2586%25E6%259B%25B4%25E6%2596%25B0" target="_blank">​</a></h2><ul><li>安裝包 
  <ul><li>提供 Ubuntu 20.04 的 deb 安裝包</li><li>提供 Debian 12 (bookworm) 的 deb 安裝包</li><li>提供 Windows 平台的便攜版安裝包</li></ul></li><li>幻燈片模式 
  <ul><li>修復在 macOS 平台切換幻燈片主題無法切換幻燈片背景圖的問題</li></ul></li><li>快捷鍵 
  <ul><li>macOS：Command 和+/-的組合無論是否按下 Shift 都可以放大或者縮小</li><li>修復未知快捷鍵被作為文本插入到文檔中的問題</li></ul></li><li>用户界面 
  <ul><li>修復在 macOS 平台雙擊打開含有中文字符的文件失敗的問題</li></ul></li><li>排版引擎 
  <ul><li>修復在文檔中刪除內容出現殘影的問題</li><li>修復在幻燈片設置部分內容為雙欄時出錯的問題</li><li>number 原語支持漢字的數字：一、二、三等</li></ul></li><li>性能優化 
  <ul><li>改進解析 TeXmacs 文檔的性能</li><li>改進渲染 Pine 幻燈片主題的性能</li></ul></li><li>PDF 導入 
  <ul><li>新增<code>文件-&gt;導入-&gt;可編輯 PDF</code>用於導入可編輯 PDF，而不是直接使用<code>文件-&gt;打開</code>來打開可編輯 PDF</li></ul></li><li>版本控制 
  <ul><li>修復在 Windows 平台進入<code>版本-&gt;歷史</code>之後，無法查看文檔歷史版本的問題</li></ul></li><li>圖像插件 
  <ul><li>改進對 Postscript 圖像格式的支持（需要用户手動安裝 Ghostscript）</li><li>改進對 SVG 圖像格式的支持（需要用户手動安裝 Inkscape）</li></ul></li><li>會話插件 
  <ul><li>改進 Scheme 會話中中文變量名、中文字符串的支持</li></ul></li><li>代碼插件 
  <ul><li>重新添加了 Python 的代碼高亮</li></ul></li></ul><p>&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 12:40:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280535/mogan-1-2-5-released</guid>
            <link>https://www.oschina.net/news/280535/mogan-1-2-5-released</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[aiohttp < 3.9.2 路徑遍歷漏洞]]>
            </title>
            <description>
                <![CDATA[<div class="content"><h2>漏洞描述</h2><p>aiohttp 是一個開源的用於 asyncio 和 Python 的異步 HTTP 客户端/服務器框架。</p><p>當使用 aiohttp 作為 Web 服務器並設置靜態路由時，若 follow_symlinks 選項設為 True，則不會驗證指定文件路徑是否位於根目錄內。攻擊者可以通過構造惡意的請求，訪問服務器任意文件。</p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fray-project%2Fray%EF%BC%88ray" target="_blank">https://github.com/ray-project/ray（ray</a> dashboard）等多個項目中並未正確配置該參數，也會受到漏洞影響。</p><table><tbody><tr><th>漏洞名稱</th><th>aiohttp &lt; 3.9.2 路徑遍歷漏洞</th></tr></tbody><tbody><tr><td>漏洞類型</td><td>路徑遍歷</td></tr><tr><td>發現時間</td><td>2024-01-30</td></tr><tr><td>漏洞影響廣度</td><td>廣</td></tr><tr><td>MPS 編號</td><td>MPS-rxvm-9042</td></tr><tr><td>CVE 編號</td><td>CVE-2024-23334</td></tr><tr><td>CNVD 編號</td><td>-</td></tr></tbody></table><h2>影響範圍</h2><p>aiohttp@[1.0.5, 3.9.2)</p><p>python-aiohttp@影響所有版本</p><p>aiohttp@[1.0.5, 3.9.2)</p><h2>修復方案</h2><p>將 aiohttp 升級至 3.9.2 及以上版本</p><p>如果應用程序的靜態資源服務不需要符號鏈接功能，將 follow_symlinks 設置為 False</p><h2>參考鏈接</h2><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.oscs1024.com%2Fhd%2FMPS-rxvm-9042" target="_blank">https://www.oscs1024.com/hd/MPS-rxvm-9042</a></p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fnvd.nist.gov%2Fvuln%2Fdetail%2FCVE-2024-23334" target="_blank">https://nvd.nist.gov/vuln/detail/CVE-2024-23334</a></p><h2>免費情報訂閲&amp;代碼安全檢測</h2><p>OSCS 是國內首個開源軟件供應鏈安全社區，社區聯合開發者幫助全球頂級開源項目解決安全問題，並提供實時的安全漏洞情報，同時提供專業的代碼安全檢測工具為開發者免費使用。社區開發者可以通過配置飛書、釘釘、企業微信機器人獲取一手的情報。</p><p>免費代碼安全檢測工具： <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.murphysec.com%2F%3Fsrc%3Dosc" target="_blank">https://www.murphysec.com/?src=osc</a></p><p>免費情報訂閲： <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.oscs1024.com%2Fcm%2F%3Fsrc%3Dosc" target="_blank">https://www.oscs1024.com/cm/?src=osc</a></p><p>具體訂閲方式詳見： <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.oscs1024.com%2Fdocs%2Fvuln-warning%2Fintro%2F%3Fsrc%3Dosc" target="_blank">https://www.oscs1024.com/docs/vuln-warning/intro/?src=osc</a></p><p><img alt="" src="https://oscimg.oschina.net/oscnet/up-4aeef4048430ca1baea7afb51fe0f5dc3dd.png" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 11:10:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280528</guid>
            <link>https://www.oschina.net/news/280528</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[馬斯克抱怨微軟 Windows 難用，V 神：加入 Linux！]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>特斯拉 CEO 埃隆・馬斯克在社交平台説道，上週末他購買了一台新款的 Windows 11 筆記本電腦，卻發現必須創建微軟賬户 (MSA) 才能使用系統，這讓他感到非常憤怒，認為這變相地讓微軟的人工智能 (AI) 訪問了他的數據。</p><blockquote><p><img src="https://oscimg.oschina.net/oscnet/up-e5e820c2d6e02c58e0b272f4e8447623295.png" referrerpolicy="no-referrer"><em><u><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftwitter.com%2FVitalikButerin%2Fstatus%2F1762363524918227423" target="_blank">https://twitter.com/VitalikButerin/status/1762363524918227423</a></u></em></p></blockquote><p>對此，<span style="background-color:#ffffff; color:#333333">以太坊聯合創始人 Vitalik Buterin</span>&nbsp;建議馬斯克改用 Linux 桌面發行版。</p><p>X 上的一些用户稱讚 V 神推廣了開源軟件。但也有人指出，Linux 可能不是馬斯克的最佳選擇，因為他使用 PC 的主要目的是玩遊戲。</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 09:59:34 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280524</guid>
            <link>https://www.oschina.net/news/280524</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[GPL 抗辯成功——織夢 CMS「系列」版權糾紛迎來重大轉折]]>
            </title>
            <description>
                <![CDATA[<div class="content"><div><blockquote><p style="text-align:justify"><span style="color:#27ae60"><strong>摘要</strong></span></p><p style="text-align:justify"><span style="color:#4e5f70">原告：上海卓卓網絡科技有限公司（以下簡稱：卓卓公司）</span></p><p style="text-align:justify"><span style="color:#4e5f70">被告：****醫院</span></p><p style="text-align:justify"><span style="color:#4e5f70">事件：****醫院使用 DedeCMSV5.7-sp1 軟件開發網站，卓卓公司以擁有 DedeCMS Biz V1.0 以及後續多個版本的著作權為由，認為醫院侵犯了自己的著作權，要求***醫院賠償 5800 元的授權許可費和 8700 元的訴訟費用。</span></p><p style="text-align:justify"><span style="color:#4e5f70">判決：一審法院認為 DedeCMSV5.7-sp1 中包含 GPL 協議下開源的代碼，整體應遵守 GPL 協議，****醫院使用軟件不用支付授權費用，但仍需遵守署名權的要求。</span></p></blockquote><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>持續近 3 年、涉及 300 萬用户的織夢 CMS 「系列」版權糾紛案在</span></span></span><span><span><span>近</span></span></span><span><span><span>日迎來第一份抗辯成功判決。上海卓卓網絡科技有限公司自 2021 年起，以「織夢商業網站內容管理系統【簡稱：DedeCMS Biz】V1.0」著作權方的身份，在全國各地起訴多個網站中含有 DedeCMS 相關代碼的公司，要求賠償。</span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>2023 年 9 月 11 日，卓卓公司訴****醫院侵害計算機軟件著作權糾紛案件立案。2024 年 2 月 19 日，江蘇省無錫市中級人民法院</span></span></span><span><span><span>作出</span></span></span><span><span><span>一審判決書，認可了 GPL 的</span></span></span><span><span><span>「</span></span></span><span><span><span>傳染性</span></span></span><span><span><span>」</span></span></span><span><span><span>，涉案軟件（具體版本為 DedeCMSV5.7-sp1）整體按 GPL 對外許可，但要求使用者（被告）在網頁底部添加原告網址鏈接，不得侵犯原告的署名權。</span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>一審判決書在判決書送達之日起十五日，當事人沒有提起上訴的，就會生效。據案件知情人士分析，卓卓公司肯定會上訴。</span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>開源中國</span></span></span><span><span><span>從知情人處</span></span></span><span><span><span>獲取並查閲判決書。據判決書顯示，卓卓公司提出，卓卓通過受讓取得了 DedeCMS Biz V1.0 的軟件著作權，又在 DedeCMS Biz V1.0 版本的基礎上迭代出 DedeCMSV5.5、DedeCMSV5.6、DedeCMSV5.7 等版本。****醫院名下網站相關網頁相關源代碼與卓卓公司享有著作權的涉案軟件代碼相同，證據包括授權協議中的卓卓公司名稱、Powered By DedeCMS、織夢內容管理系統 DEDECMS 的 logo/mark 等等。但****醫院並未向卓卓公司購買正版涉案軟件，也從未獲得過卓卓公司商業使用授權許可。因此卓卓要求****醫院支付涉案軟件 DedeCMS 軟件的授權許可費 5800 元，以及卓卓公司為訴訟所指出的 8700 元費用，共計 14500 元。</span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>而****醫院辯稱：卓卓雖然通過受取得 DedeCMS Biz V1.0 的軟件著作權，但沒有證據能夠證明卓卓公司是織夢內容管理系統 DedeCMS 軟件的著作權人。此外，DedeCMS 是一款以 GPL 協議對外許可發佈的開源軟件，DedeCMS 後續版本包括涉案權利軟件都是在 DedeCMSV3 版本基礎上迭代升級的，因此受 GPL 約束。根據 GPL 協議禁止添加商業使用的限制條款，也不允許著作權人就軟件本身收取授權許可費。</span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>此外，圍繞案件，卓卓公司和****醫院還列舉了多項訴求與證據，詳情可查看一審判決書（尚未生效）。</span></span></span></span></span></span></p><div><blockquote><div><span style="color:#4e5f70">此份判決書由知情人提供並脱密：https://report.oschina.net/api/files/jhim80u9qm1ofsw/79ci47r1rrt9yqm/2023_02_482_cEvUNytTpS.pdf</span></div></blockquote></div><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>法院總結此案件爭議焦點有兩個：</span></span></span></span></span></span></p><div><blockquote><div><span style="color:#4e5f70">綜合雙方的訴辯主張，並經雙方確認，本院對本案的爭議焦點歸納為：</span></div><div><span style="color:#4e5f70">一、涉案權利軟件的著作權人是否是卓卓公司；</span></div><div><span style="color:#4e5f70">二、****醫院是否有權依據 GPL 協議免費使用涉案權利軟件</span></div></blockquote></div><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>針對第一點，法院認為：</span></span></span></span></span></span></p><blockquote><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span style="color:#4e5f70">涉案權利軟件的著作權人是卓卓公司。</span></p></blockquote><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>針對第二點，法院認為：</span></span></span></span></span></span></p><blockquote><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span>&nbsp;</span><span><span><span><span style="color:#646a73">涉案軟件 DedeCMSV5.7-sp1&nbsp;是包含採用 GPLV2.0 及以後版本做為協議的 sphinxclient 的派生作品。……由此本案中卓卓公司將涉案軟件進行發佈代表卓卓公司已經接受 GPL 協議。</span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span><span style="color:#646a73">……</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span style="color:#646a73">涉案軟件應當遵守 GPL 協議，卓卓公司在涉案軟件的許可協議中的「商業用途需獲得授權」的條款與 GPL 協議</span></span></span><span><span><span style="color:#646a73">相</span></span></span><span><span><span style="color:#646a73">牴觸，卓卓公司有義務按照 GPL 協議將涉案軟件整體授權給獲得許可的人，****醫院因 GPL 協議獲得了對涉案軟件使用的授權，並未侵犯卓卓公司的複製權，卓卓公司無權對此行為請求支付授權費用。</span></span></span></span></span><span>&nbsp;</span></p></blockquote><p><span>不過，法院認為****醫院需在網站註明來源是卓卓公司。</span></p><blockquote><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span>&nbsp;</span><span><span><span><span style="color:#646a73">卓卓公司在許可協議中載明用户應在使用涉案軟件建成網站的主頁標註網站鏈接 www.dedecms.com，該條款並不構成對下游接收者對軟件複製、分發、修改權利的限制，應當有效。</span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span><span style="color:#646a73">……</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span style="color:#646a73">GPL 協議作為許可協議有雙務性，被許可人在行使複製、發佈修改開源軟件的權利時，也需要按照協議要求承擔相應義務，****醫院使用涉案軟件 DedeCMS 建成了網站，但未在主頁標註卓卓公司創作印記或官網鏈接，違反了該附加條款，侵害了卓卓公司的署名權，損害了卓卓公司的身份權益。故卓卓公司請求****醫院賠償損失並賠禮道歉，具有事實和法律依據，本院予以支持。</span></span></span></span></span><span>&nbsp;</span></p></blockquote><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>最終，法院判定由****醫院賠償卓卓公司經濟損失及合理維權開支共 800 元，並在判決生效之日起十日內在其公司網站主頁發佈為期三十日的賠禮道歉聲明。在關於賠償金額的表述中，法院的考量因素中還提到兩點值得關注：</span></span></span></span></span></span></p><blockquote><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span style="color:#4e5f70">第三，卓卓公司主張****醫院在內的用户需遵守涉案軟件的許可協議，但卓卓公司在使用他人代碼時卻未遵守他人軟件的 GPL 許可協議，其行為本身有違誠信原則，具有不正當性。卓卓公司自身對涉案軟件的著作權也存在管理不周的情況，軟件源代碼中記錄的版權信息、署名都未直接指向卓卓公司，源代碼中不同位置的許可協議條款存在不一致的情形。</span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span style="color:#4e5f70">第四，卓卓公司以涉案軟件為權利基礎，在全國法院提起大量侵害計算機軟件著作權糾紛案件，並因此獲得較大收益，該種維權模式既不利於有效打擊侵權源頭，又大量佔用解決糾紛的公共資源，不宜提倡和鼓勵。</span></p></blockquote><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>此外，據企查查信息顯示，上海卓卓發起了多起侵害計算機軟件著作權糾紛訴訟，自 2 月 28 日-3 月 30 日將陸續有案件開庭。</span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><img height="522" src="https://static.oschina.net/uploads/space/2024/0227/170855_5DFc_4489239.png" width="600" referrerpolicy="no-referrer"></p><p style="margin-left:.0001pt; margin-right:0; text-align:left"><span><span><span><span><span><span>開源中國將持續關注 DedeCMS 系列版權糾紛案件進展，本週內也將梳理此係列糾紛的時間線，歡迎知情者私信爆料。</span></span></span></span></span></span></p></div></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 09:10:34 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280518/gpl-dedecms</guid>
            <link>https://www.oschina.net/news/280518/gpl-dedecms</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[白宮敦促開發者改用內存安全的編程語言]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="color:#000000">白宮國家網絡主任辦公室 (ONCD) <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.whitehouse.gov%2Foncd%2Fbriefing-room%2F2024%2F02%2F26%2Fpress-release-technical-report%2F" target="_blank">發佈</a>了一份報告，呼籲科技界主動減少網絡空間的攻擊面；通過改用 Rust 等內存安全編程語言，減少內存安全漏洞的數量來提高軟件安全性。同時鼓勵研究界解決軟件可測量性問題，以便開發出更好的測量網絡安全質量的診斷方法。</span></p><p><img height="390" src="https://oscimg.oschina.net/oscnet/up-7cb1183993aa2d8ce4f54a8bb5787fa09a7.png" width="300" referrerpolicy="no-referrer"></p><p><span style="color:#000000">ONCD 例舉了歷史上一些著名的網絡攻擊事件，包括：1988 年的 Morris 蠕蟲病毒、2003 年的 Slammer 蠕蟲病毒、2014 年的 Heartbleed 漏洞、2016 年的 Trident 漏洞、2023 年的 Blastpass 漏洞。並指出，所有這些問題的背後都有一個共同的根本原因，即內存安全漏洞。</span></p><p><span style="color:#000000">報告稱：「35 年來，三十五年來，內存安全漏洞一直困擾着數字生態系統，但情況本不必如此。消除整類軟件漏洞的挑戰是一個緊迫而複雜的問題。展望未來，必須採取新方法來減輕這種風險。」</span></p><p><span style="color:#000000">「減少內存安全漏洞的最高槓桿方法是保護網絡空間的構建模塊之一：編程語言。使用內存安全編程語言可以消除大多數內存安全錯誤。」</span></p><p><span style="color:#000000">在此之前，</span><span style="background-color:#ffffff"><span style="color:#000000">美國國家安全局 (NSA) 曾於 2022 年 11 月發佈了關於軟件開發人員如何防止軟件內存安全問題的</span><a href="https://www.oschina.net/news/217425/nsa-memory-safe-programming-language" target="_blank">指南。</a></span><span style="background-color:#ffffff; color:#000000">美國網絡安全與基礎設施安全局 (CISA)<span>&nbsp;</span></span><span style="color:#070707"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>也在 2023 年 12 月發佈了類似<a href="https://www.oschina.net/news/269933/cisa-the-case-for-memory-safe-roadmaps">報告</a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#000000"><span style="background-color:#ffffff">，</span>要求過渡到內存安全編程語言，通過消除與內存相關的漏洞來減少軟件產品的攻擊面。</span></p><p><span style="color:#000000">ONCD 報告以美國總統拜登於 2023 年 3 月簽署的</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bleepingcomputer.com%2Fnews%2Fsecurity%2Fwhite-house-releases-new-us-national-cybersecurity-strategy%2F" target="_blank">國家網絡安全戰略</a><span style="color:#000000">為基礎，將網絡安全的責任從個人和小型企業轉移到技術公司和聯邦政府等更有能力管理不斷變化的威脅的大型組織身上。並在與整個聯邦政府的安全設計計劃和研發工作保持一致的同時更進一步，涵蓋了由 CISA、NSA、FBI 和 NIST 領導的計劃和研發工作。</span></p><p><span style="color:#000000">報告中有關內存安全的工作還補充了美國國會對此主題的興趣。此外，美國參議院國土安全和政府事務委員會主席 Gary Peters (D-MI) 和美國參議員 Ron Wyden (D-OR) 也向 ONCD 強調了他們在內存安全方面的立法努力。</span></p><p><span style="color:#000000">更多詳情可<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.whitehouse.gov%2Fwp-content%2Fuploads%2F2024%2F02%2FFinal-ONCD-Technical-Report.pdf" target="_blank">查看完整報告</a>。</span></p><p><strong><span style="color:#000000">相關閲讀：</span></strong></p><ul><li><a href="https://www.oschina.net/news/217425/nsa-memory-safe-programming-language" target="_blank">美國國家安全局建議從 C/C++ 切換到內存安全語言</a></li><li><a href="https://www.oschina.net/news/269933/cisa-the-case-for-memory-safe-roadmaps" target="_blank">美國 CISA 建議放棄 C/C++，消除內存安全漏洞</a></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 08:33:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280505/white-house-memory-safe-programming-languages</guid>
            <link>https://www.oschina.net/news/280505/white-house-memory-safe-programming-languages</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[南京大學將開通全國高校首家 AI 課程]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="color:#000000">南京大學正式發佈全國高校首家面向 3700 餘名新生開設的「1+X+Y」三層次的人工智能通識核心課總體方案。</span></p><p><span style="color:#000000">該方案包含 1 門必修的人工智能通識核心課，X 門人工智能素養課，Y 門各學科與人工智能深度融合的前沿拓展課。其中，1 門人工智能通識核心課面向對象為 2024 年起面向全體本科新生。</span></p><p><span style="color:#000000"><img height="256" src="https://oscimg.oschina.net/oscnet/up-c46928165fcc29d00ea987b62dd6db02a66.png" width="500" referrerpolicy="no-referrer"></span></p><p><span style="color:#000000">南京大學黨委書記、中國科學院院士譚鐵牛指出，當今世界，由人工智能引領的新一輪科技革命和產業變革方興未艾。在移動互聯網、大數據、超級計算、傳感網、腦科學等新理論新技術驅動下，人工智能已經對經濟發展、社會進步、全球治理等各方面產生重大而深遠的影響。只有緊跟時代步伐，把握時代脈搏，才能順勢而上，應勢而為，把創新主動權、發展主動權牢牢掌握在自己手中。</span></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 08:03:42 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280497</guid>
            <link>https://www.oschina.net/news/280497</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[0201-0225 開放籤團隊工作日記]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="margin-left:0.0001pt; margin-right:0px"><span><span><span><span><span><span><span>2022 年底</span></span></span><span><span><span>團隊決定</span></span></span><span><span><span>以全新的產品運營和設計思路重回電子簽章行業，重新做</span></span></span><span><span><span>電子簽章</span></span></span><span><span><span>產品。至於當時如何離開電子簽章，又是如何回來的，具體原因等後面再敍。在這麼多年的創業的過程中，我們團隊經歷了從迷茫無助到方向堅定（我們認為的），從一點點構建基礎技術架構到基本成熟，有太多的不容易，每一個不容易都可以是個故事，具體的也在將來一一再敍，這次單説最近的一些工作感受和工作概況。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>經過努力</span></span></span><span><span><span>，23 年底（12 月 15 日）</span></span></span><span><span><span>產品</span></span></span><span><span><span>上線</span></span></span><span><span><span>後</span></span></span><span><span><span>，我們深知自己在</span></span></span><span><span><span>市場競爭中與頭部企業仍存在功能層面的差距</span></span></span><span><span><span>，不敢妄想有什麼好的反饋和成果。但是首</span></span></span><span><span><span>月</span></span></span><span><span><span>便</span></span></span><span><span><span>迎來了</span></span></span><span><span><span>付費用户</span></span></span><span><span><span>（企業版）和近</span></span></span><span><span><span>百</span></span></span><span><span><span>個開源用户</span></span></span><span><span><span>，</span></span></span><span><span><span>這完全出乎我和同事的意料</span></span></span><span><span><span>。剛開始我們以為這些用户至少要在 3-5 個月內才能積累到。事實證明我們錯了，我們保守了，但是方向貌似對了（還需要更多的付出和積累）。在與客户溝通過程中，很快就收集到</span></span></span><span><span><span>首批客户集中提出</span></span></span><span><span><span>的眾多需求，主要體現在</span></span></span><span><span><span>移動端簽署、API 集成、</span></span></span><span><span><span>國產化</span></span></span><span><span><span>及優化交互體驗</span></span></span><span><span><span>四大方面。也有很多我們在設計過程中沒有考慮到的，沒有考慮到的方面對我們來説尤其珍貴，價值巨大。</span></span></span><span><span><span>所以</span></span></span><span><span><span>我們在年前</span></span></span><span><span><span>加快工作節奏，</span></span></span><span><span><span>年後規劃新年一季度目標。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>首要任務是</span></span></span><span><span><span>移動端開發，並承諾於春節後第一週交付新功能。</span></span></span><span><span><span>這段時間的工作節奏是這樣的：</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>1、</span></span></span><span><span><span>臨近春節</span></span></span><span><span><span>（</span></span></span><span><span><span>農曆 28 日</span></span></span><span><span><span>）</span></span></span><span><span><span>我們完成了功能開</span></span></span><span><span><span>發，勉強通過冒煙測試</span></span></span><span><span><span>。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>2、</span></span></span><span><span><span>年後進行系統和功能測試時，</span></span></span><span><span><span>出乎意料的事情接踵而至</span></span></span><span><span><span>，</span></span></span><span><span><span>出現了</span></span></span><span><span><span>移動端鏈接邏輯</span></span></span><span><span><span>跳轉混亂</span></span></span><span><span><span>、文件簽署內存異常、</span></span></span><span><span><span>簽署</span></span></span><span><span><span>圖片丟失、簽署控件重複等</span></span></span><span><span><span>問題</span></span></span><span><span><span>。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>3、</span></span></span><span><span><span>測試同學「大壯」在羣裏</span></span></span><span><span><span>發飆了，</span></span></span><span><span><span>講述上線風險和延期上線的請求</span></span></span><span><span><span>。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>4、不動聲色的產品負責人老胡看到</span></span></span><span><span><span>請求</span></span></span><span><span><span>後</span></span></span><span><span><span>一直未回覆（他的性格很剛強，表面不説，內心很要強）</span></span></span><span><span><span>。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>5、老胡</span></span></span><span><span><span>開始</span></span></span><span><span><span>着手</span></span></span><span><span><span>理清工作任務，</span></span></span><span><span><span>逐條分析 BUG，確定優先級。</span></span></span><span><span><span>···········（結果：原定計劃</span></span></span><span><span><span>（2 月 25 日）</span></span></span><span><span><span>未完成上線）只好協調大家</span></span></span><span><span><span>週六日</span></span></span><span><span><span>繼續</span></span></span><span><span><span>通宵奮戰</span></span></span><span><span><span>。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>6、</span></span></span><span><span><span>直至</span></span></span><span><span><span>2 月 26 日</span></span></span><span><span><span>凌晨五點成功修復所有問題並上線新版本</span></span></span><span><span><span>。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>這個過程真是酸爽，自從決定做開放籤以來，首先內心是非常欣慰的，工作狀態也超好，整個團隊也是熱情澎湃的，甚至自然而然的解決了一些團隊管理問題。</span></span></span><span><span><span>同樣的產品不同的公司，都是為了服務客户</span></span></span><span><span><span>和理想在</span></span></span><span><span><span>奮鬥</span></span></span><span><span><span>、在</span></span></span><span><span><span>熬夜，感謝</span></span></span><span><span><span>團</span></span></span><span><span><span>隊成員的努力付出</span></span></span><span><span><span>！加油！（會想盡一切辦法和努力給大家加雞腿，讓我們</span></span></span><span><span><span>的</span></span></span><span><span><span>產品更好</span></span></span><span><span><span>，</span></span></span><span><span><span>團隊更頑強</span></span></span><span><span><span>，客户更放心</span></span></span><span><span><span>........）</span></span></span><span><span><span>。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:justify"><span><span><span><span><span><span><span>值得欣喜的是，按照約定我們成功完成版本更新</span></span></span><span><span><span>，</span></span></span><span><span><span>並與兩家新客户簽約。接下來，我們將採取敏捷迭代策略，小步快跑地滿足需求</span></span></span><span><span><span>。</span></span></span><span><span><span>同時大膽創新簽約場景模式，使更多企業在真實場景下實現高效合規</span></span></span><span><span><span>簽署，讓電子籤更簡單不是説説而已</span></span></span><span><span><span>。</span></span></span></span></span></span></span></p><p style="margin-left:.0001pt; margin-right:0; text-align:right"><span><span><span><span><span><span><span>2024 年 02 月 27 日</span></span></span></span></span></span></span></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 07:32:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280492</guid>
            <link>https://www.oschina.net/news/280492</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Spring Boot 拒絕用 AI 為倉庫自動生成註釋]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="color:#000000">一名開發者近日在 Spring Boot 提交了一項 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fspring-projects%2Fspring-boot%2Fpull%2F39754%2F" target="_blank">PR</a>，旨在使用 AI 模型為整個 Spring Boot 代碼庫添加註釋：</span></p><blockquote><p><span style="color:#000000">此代碼變更為整個 Spring Boot 代碼庫添加了註釋。本 PR 的內容完全由自定義微調 AI 模型創建。</span></p><p><span style="color:#000000">我們正在對我們的工具進行大規模實驗，在數百萬行代碼上運行該工具，以識別任何 bug 或錯誤。在此代碼庫中運行時，該工具的編譯成功率高達 99.9%。</span></p><p><span style="color:#000000">我們可以選擇放棄這些代碼，或者將其發佈並作為一項貢獻。我們選擇了後者，並決定打開此 Pull Request。</span></p></blockquote><p><img height="280" src="https://oscimg.oschina.net/oscnet/up-c694ca89e5d80a24accaf670c4f099452bc.png" width="700" referrerpolicy="no-referrer"></p><p><span style="color:#000000">但 Spring Boot 項目負責人 Phil Webb 對此進行了婉拒。並表示，相較自動生成，團隊成員更喜歡人工手動的方式；且自動生成這種無差別的方式，很可能給整個倉庫增添許多不必要的麻煩。</span></p><p><span style="color:#000000">「我認為您的工具對於正在學習代碼庫或需要某些部分的額外幫助的人來説可能非常有用。」</span></p><p>Reddit 上的一些討論也表達了對這一提議的<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.reddit.com%2Fr%2Fprogramming%2Fcomments%2F1b0n9kx%2Fai_added_comments_for_the_entire_code_base_of%2F" target="_blank">不看好</a>：</p><blockquote><p>「哇，這太可怕了。我真希望這只是個玩笑，提出要求的人只是在嘲笑這個想法。」</p><p>「如果這不是純粹為了吸引眼球，那麼我想公關背後的開發人員可以説是真的缺乏開發技能。」</p></blockquote><p>目前，相關 PR 已被關閉。&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 06:21:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280473/ai-comments-spring-boot</guid>
            <link>https://www.oschina.net/news/280473/ai-comments-spring-boot</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[開源日報 | 鴻蒙程序員平均月薪超 1 萬 8；中美 AI 差距有多大？]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>歡迎閲讀 OSCHINA 編輯部出品的開源日報，每天更新一期。</p><h3><span style="color:#e67e22"><strong># 2024.2.26</strong></span></h3><h2><strong><span style="color:#16a085">今日要點</span></strong></h2><p><strong>OpenSource Daily</strong></p><h3><a href="https://www.oschina.net/news/280197/warp-for-linux" target="_blank">基於 Rust 開發的終端應用 Warp 發佈 Linux 版本</a></h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">Warp 是一個基於 Rust 開發的現代化終端應用，內置 AI 功能，支持 CPU 加速。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">此前 Warp 僅面向 Mac 平台提供，近日其開發團隊終於<u><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.warp.dev%2Fblog%2Fwarp-for-linux" target="_blank">發佈</a></u>了 Linux 版本，用户可在大多數主流 Linux 發行版上安裝 Warp，包括 Ubuntu、Fedora、Arch Linux 或 Red Hat。</p><h3><a href="https://www.oschina.net/news/280083/wubuntu-windows-ubuntu" target="_blank">Wubuntu：披着 Windows 11 外衣的 Ubuntu</a></h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>Wubuntu，又稱 "Windows Ubuntu"</strong>，是基於 Ubuntu 開發的操作系統，其最具特色之處在於<strong>完全復刻了 Windows 的所有外觀和功能</strong>，而且運行時不需要具備 TPM、安全啓動或任何其他硬件要求。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span>此外，Wubuntu</span>&nbsp;通過集成 Wine 提供了與 Windows 應用的兼容性，開發者稱 Wubuntu 支持運行 Windows 的 .exe 和 .msi&nbsp;程序，以及支持 Android 應用。</p><p><img src="https://oscimg.oschina.net/oscnet/up-b78011bce450db4cf20d1bb7cc559cd4cb6.png" referrerpolicy="no-referrer"></p><hr><h2><strong><span style="color:#16a085">今日觀察</span></strong></h2><p><img src="https://oscimg.oschina.net/oscnet/up-a5cb30243de8b0b91be1d481043c473ad9e.png" referrerpolicy="no-referrer"></p><p><span style="background-color:#ffffff; color:#333333">- </span><u><em><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.tmtpost.com%2F6949344.html" target="_blank">鈦媒體</a></em></u></p><hr><h2><span style="color:#16a085"><strong>今日推薦</strong></span></h2><p><img src="https://oscimg.oschina.net/oscnet/up-dd0b05ccdc75b8e461bccd191d8b02a887a.png" referrerpolicy="no-referrer"></p><hr><h2><span style="color:#16a085"><strong>開源之聲</strong></span></h2><p><img height="376" src="https://oscimg.oschina.net/oscnet/up-61ab492b02eb694af46583aa700ca993ddd.png" width="1104" referrerpolicy="no-referrer"></p><p><img src="https://oscimg.oschina.net/oscnet/up-393f28205ac4c95982b1545e5541957f5f9.png" referrerpolicy="no-referrer"></p><hr><h2><span style="color:#16a085"><strong>每日項目榜</strong></span></h2><p><strong><span style="background-color:#e67e22">每日 Gitee 精選</span></strong></p><p><img src="https://oscimg.oschina.net/oscnet/up-f0e8ff0ed6f05f1864bb5c951acca5d3893.png" referrerpolicy="no-referrer"></p><blockquote><h4><strong><span style="background-color:#e67e22">在線閲讀完整日報內容，訪問：</span></strong><br><u><em><strong><a href="https://report.oschina.net/api/files/jhim80u9qm1ofsw/6typ9w3u98f5mxn/16_1_8_2efTeNfFjN.pdf">開源日報第 016 期：鴻蒙程序員平均月薪超 1 萬 8；中美 AI 差距有多大？</a></strong></em></u></h4></blockquote><hr><p><strong>往期回顧</strong></p><ul><li><a href="https://report.oschina.net/api/files/jhim80u9qm1ofsw/92n4c9ryegpcq1z/015_sora_KcAkRNX93Y.pdf">開源日報第 015 期：為什麼擋不住英偉達；Sora 不靠蠻力</a></li><li><a href="https://report.oschina.net/api/files/jhim80u9qm1ofsw/s7n800w84o6guyv/014_kyezhNxOGD.pdf">開源日報第 014 期：目前的人工智能技術連貓的智能水平都沒達到</a></li><li><a href="https://oscimg.oschina.net/public_shard/%E5%BC%80%E6%BA%90%E6%97%A5%E6%8A%A5%E7%AC%AC013%E6%9C%9F%EF%BC%9A%E7%AD%89%E5%88%B0%20Sora%20%E5%BC%80%E6%BA%90%E4%BA%86%E7%AB%8B%E5%88%BB%E6%8E%A8%E5%87%BA%E5%B1%9E%E4%BA%8E%E6%88%91%E4%BB%AC%E8%87%AA%E5%B7%B1%E7%9A%84%E5%A4%A7%E6%A8%A1%E5%9E%8B.pdf">開源日報第 013 期：等到 Sora 開源了立刻推出屬於我們自己的大模型</a></li><li><a href="https://oscimg.oschina.net/public_shard/%E5%BC%80%E6%BA%90%E6%97%A5%E6%8A%A5%E7%AC%AC012%E6%9C%9F%EF%BC%9ASora%20%E7%BB%99%E4%B8%AD%E5%9B%BD%20AI%20%E5%B8%A6%E6%9D%A5%E7%9A%84%E7%9C%9F%E5%AE%9E%E5%8F%98%E5%8C%96%EF%BC%9BDart%203.3%20%E5%8F%91%E5%B8%83.pdf">開源日報第 012 期：Sora 給中國 AI 帶來的真實變化；Dart 3.3 發佈</a></li><li><a href="https://oscimg.oschina.net/public_shard/%E5%BC%80%E6%BA%90%E6%97%A5%E6%8A%A5%E7%AC%AC11%E6%9C%9F%EF%BC%9A%E7%9B%AE%E5%89%8D%E8%BF%98%E6%B2%A1%E6%9C%89%E2%80%9C%E5%A4%A7%E6%A8%A1%E5%9E%8B%E7%89%88Linux%E2%80%9D.pdf">開源日報第 011 期：目前還沒有「大模型版 Linux」</a></li><li><a href="https://oscimg.oschina.net/public_shard/%E5%BC%80%E6%BA%90%E6%97%A5%E6%8A%A5%E7%AC%AC010%E6%9C%9F%EF%BC%9ATauri%20v2%20%E6%94%AF%E6%8C%81%20Android%20%E5%92%8C%20iOS%EF%BC%8C%E8%B7%A8%E5%B9%B3%E5%8F%B0%E5%BC%80%E5%8F%91%E6%96%B0%E9%80%89%E6%8B%A9.pdf">開源日報第 010 期：Tauri v2 支持 Android 和 iOS，跨平台開發新選擇</a></li><li><a href="https://oscimg.oschina.net/public_shard/%E5%BC%80%E6%BA%90%E6%97%A5%E6%8A%A5009%E6%9C%9F%EF%BC%9AVue.js%E8%AF%9E%E7%94%9F10%E5%91%A8%E5%B9%B4%EF%BC%9B%E6%89%8E%E5%85%8B%E4%BC%AF%E6%A0%BC%E8%A7%A3%E9%87%8AMeta%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%BC%80%E6%BA%90%E5%85%B6AI%E6%8A%80%E6%9C%AF.pdf">開源日報第 009 期：Vue.js 誕生 10 週年；扎克伯格解釋 Meta 為什麼要開源其 AI 技術</a></li><li><a href="https://www.oschina.net/news/277585">開源日報第 008 期：推動中國開源軟硬件發展的經驗與建議</a></li><li><a href="https://www.oschina.net/news/277415">開源日報第 007 期：「Linux 中國」 開源社區宣佈停止運營</a></li><li><a href="https://www.oschina.net/news/277214">開源日報第 006 期：選擇技術棧一定要選擇開源的</a></li><li><a href="http://www.oschina.net/news/277040">開源日報第 005 期：RISC-V 萬兆開源交換機發售；npm 存在大量武林外傳視頻</a></li><li><a href="https://www.oschina.net/news/276864">開源日報第 004 期：百度輸入法在候選詞區域植入廣告；大神用 Excel 構建 CPU</a></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 04:23:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280457</guid>
            <link>https://www.oschina.net/news/280457</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[OSI 發佈報告，研究 BSL 這樣的「延遲開源發佈」]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="background-color:#ffffff">Open Source Initiative（OSI）近期發佈了一個報告《Delayed Open Source Publication:&nbsp;</span>A Survey of Historical and Current Practices<span style="background-color:#ffffff; color:#060607">》（</span>延遲開源發佈：歷史與當前實踐調研<span style="background-color:#ffffff; color:#060607">），作者是 Seth Schoen、James Vasile 和 Karl Fogel。</span></p><p>&nbsp;</p><p style="color:#060607; margin-left:0; margin-right:0; text-align:start">Delayed Open Source Publication，簡稱 DOSP，延遲開源發佈的意思，這份報告研究了它的歷史和現狀。報告核心要點：</p><p style="margin-left:0; margin-right:0"><strong>延遲開源發佈（DOSP）定義</strong>：DOSP 是指軟件最初在專有許可下發布，然後計劃性地在某個時間點將源代碼以開源許可的形式公開。</p><p style="margin-left:0; margin-right:0"><strong>歷史背景</strong>：DOSP 的做法可以追溯到 GNU 項目，並且一直延續至今。公司嘗試各種商業模式，以在有限時間內保持獨家權利，然後過渡到 OSI（開放源代碼倡議）批准的許可。</p><p style="margin-left:0; margin-right:0"><strong>策略類型</strong>：DOSP 分為三種類型：無條件計劃性重新許可、事件驅動的重新許可和有條件的重新許可。</p><p style="margin-left:0; margin-right:0"><strong>商業源許可（BUSL）</strong>：BUSL 是一種新興的 DOSP 許可方式，它要求在特定的「變更日期」後，軟件的許可將變為開源許可。這種做法在數據庫系統中尤為常見。（以往也叫 BSL）</p><p style="margin-left:0; margin-right:0">以下是當前知名的 16 個使用 BUSL 的項目，都是延遲幾年後轉型成開源協議：</p><p style="margin-left:0; margin-right:0"><img height="1588" src="https://static.oschina.net/uploads/space/2024/0227/115012_ybIG_3820517.png" width="1434" referrerpolicy="no-referrer"></p><p style="margin-left:0; margin-right:0"><strong>反競爭條款</strong>：一些 DOSP 許可中包含反競爭條款，旨在防止許可證持有者使用軟件提供與許可方直接競爭的服務。</p><p style="margin-left:0; margin-right:0"><strong>後果和影響</strong>：從開源許可轉變為 DOSP 許可的項目可能會受到批評，有時會導致用户轉向其他項目或維護競爭性的分支。</p><p style="margin-left:0; margin-right:0"><strong>未來研究問題</strong>：報告提出了一些未來研究的問題，包括 AGPL 與 DOSP 許可的比較、DOSP 對外部貢獻的影響、BUSL 額外使用授權的分類、以及在初始開源發佈後重新許可的策略。</p><p style="margin-left:0; margin-right:0"><strong>結論</strong>：DOSP 自開源運動早期以來一直在使用，公司通常利用它來保持商業優勢，同時儘可能保留開源的優勢。報告強調，DOSP 的實驗性和多樣性比預期的要多，且這種趨勢可能會繼續。</p><p>詳情可以查看<a href="https://apiv1.oschina.net/api/files/jhim80u9qm1ofsw/27nfbrttho0ynu9/delayed_open_source_publication_2FzjpHTElG.pdf?token=">報告原文</a>。</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 03:57:03 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280456/osi-delayed-open-source-publication-report</guid>
            <link>https://www.oschina.net/news/280456/osi-delayed-open-source-publication-report</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[終於，我們拿下了硅谷的那個 Linear]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><img src="https://oscimg.oschina.net/oscnet/up-0963fd788787982101b5435a54ca146c2ab.png" alt="file" referrerpolicy="no-referrer"></p><p>就像設計領域的 Figma，文檔領域的 Notion，Linear 同樣在軟件開發管理領域推出了革命性的工具。而且以其名字 Linear Style 命名的設計風格，也成為了一股軟件設計潮流。</p><p><img src="https://oscimg.oschina.net/oscnet/up-19feb8c039e4eb58e00760e5e8abaeba7f9.png" alt="file" referrerpolicy="no-referrer"></p><p>Linear 於 2019 年在美國 🇺🇸 舊金山創立。目前服務的對象涵蓋了從新興初創到知名上市公司的廣泛範圍，其中包括 Vercel、Arc、Runway，Supercell 和 OpenSea 等知名企業。其產品因能顯著提升團隊生產力和協作效率而成為近幾年硅谷新興公司的首選。</p><p><img src="https://oscimg.oschina.net/oscnet/up-29fa5d140ca7408dad14b59ffc2cef3023a.png" alt="file" referrerpolicy="no-referrer"></p><p><strong>Linear 使用 Bytebase 管理其數據庫的全開發生命週期。收口員工查詢數據庫操作，通過 Bytebase API 將數據庫變更集成進現有 CI/CD 工作流。</strong></p><p>Linear 的員工統一在 SQL 編輯器查詢數據，通過權限管控、數據脱敏及行為審計，限制查詢範圍、監控行為並滿足合規需求。</p><p>通過 Bytebase API 將數據庫變更的審核部署集成進現有的代碼提交部署工作流中，觸發在 Bytebase 中建立工單，自動進行 SQL 預審核以減少人力降低錯誤可能性；根據變更的風險等級，通過自定義審批流確保相應的審批管理；並且，通過變更記錄的查詢功能，便於鎖定特定的變更，以利於後續的審計。此外，單點登錄 (SSO)，雙因子身份驗證 (2FA) 等功能進一步為賬户管理帶來了便利性和安全性保障。</p><p>未來 Linear 還將利用 Bytebase 的批量變更能力管理部署在不同地域的同構數據庫。</p><p><img src="https://oscimg.oschina.net/oscnet/up-07cce1911ea9af359d0b945ffb3b6a4eca4.png" alt="file" referrerpolicy="no-referrer"></p><p>對開發者工具極其挑剔的 Linear 最終選擇了 Bytebase。正如我們在 <a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkzMjI2MDY5OQ%3D%3D%26mid%3D2247483664%26idx%3D1%26sn%3Dbd6be60909c156c2d54687ad90ba4825%26chksm%3Dc25f3f24f528b63261d5d86fb9ddcad8f36826bdaa16fdb43da555d5457313c5036aa1665b78%26scene%3D21%23wechat_redirect" target="_blank">2021 年發佈 Bytebase</a> 時設想的那樣，<strong>Bytebase 會站上世界最高的舞台，成為現代軟件研發工具鏈上的核心一環</strong>。</p><p><img src="https://oscimg.oschina.net/oscnet/up-551f266a1ef72674d8516e4795c1c18b9b4.png" alt="file" referrerpolicy="no-referrer"></p><hr><p>💡 更多資訊，請關注 Bytebase 公號：Bytebase</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 03:52:03 GMT</pubDate>
            <guid isPermaLink="false">https://my.oschina.net/u/6148470/blog/11044874</guid>
            <link>https://my.oschina.net/u/6148470/blog/11044874</link>
            <author>
                <![CDATA[原創]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Ubuntu 工程師使用 Rust 為 Linux 開發內核調度程序]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>Ubuntu 內核團隊工程師 Andrea Righi 使用&nbsp;Rust 編寫了一個 Linux 內核調度程序，並利用 eBPF 在運行時動態加載。Ubuntu 還沒有承諾將其作為發行版的一部分，Righi 也在博客表示這是一個實驗性內核項目，用於探索 Rust 在 Ubuntu 的應用，並談到了未來<strong>利用 Rust 和 eBPF 進行「微內核設計」</strong>的可能性。</p><p><img alt="" src="https://oscimg.oschina.net/oscnet/up-c0d741c436f514bc20978b2df98eb1e23a1.png" referrerpolicy="no-referrer"></p><p>Righi 在博客介紹稱，用 Rust 開發的內核調度程序 sched-ext 不僅為開發者提供了便利，還能讓用户也受益，比如可以根據用户的工作負載和其他特殊情況加載優化的調度程序。</p><p>博客文章最後寫道：</p><blockquote><p>「我們正朝着一種微內核設計邁進，它有可能為 Linux 認證鋪平道路：在上述情況下，如果用户空間調度程序崩潰，任務將無縫過渡到默認的內核調度程序，確保系統的持續可用性，而不會出現任何停機時間。</p><p>這表明，類似的方法也可用於其他子系統，從而使 Linux 內核能夠提供完全冗餘和崩潰安全的系統。」</p></blockquote><p>相關鏈接</p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsched-ext%2Fscx%2Fpull%2F161" target="_blank">https://github.com/sched-ext/scx/pull/161</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fubuntu.com%2F%2Fblog%2Fcrafting-new-linux-schedulers-with-sched-ext-rust-and-ubuntu" target="_blank">https://ubuntu.com//blog/crafting-new-linux-schedulers-with-sched-ext-rust-and-ubuntu</a></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 03:25:03 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280450/ubuntu-rust-scheduler-micro</guid>
            <link>https://www.oschina.net/news/280450/ubuntu-rust-scheduler-micro</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Linkerd 2.15 推出，調整了發佈方式]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>Linkerd 2.15 現已<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flinkerd.io%2F2024%2F02%2F21%2Fannouncing-linkerd-2.15%2F" target="_blank">發佈</a>，該版本增加了對 Kubernetes 以外工作負載的支持。新的「網格擴展（mesh expansion）」功能首次允許 Linkerd 用户將運行在虛擬機、物理機和其他非 Kubernetes 位置上的應用程序引入到網格中，為 Kubernetes 和非 Kubernetes 工作負載提供統一的安全、可靠和可觀測的連接。</p><p>2.15 版本還引入了對 SPIFFE 的支持，SPIFFE 是一種工作負載身份標準，它使 Linkerd 能夠為集羣外的工作負載提供加密身份驗證。此外，還新增了原生的 Sidecar 容器支持，這是 Kubernetes 的一個新特性，它簡化了 Sidecar 模型在 Kubernetes 中的使用，特別是對於作業工作負載而言。</p><p>以及對 Linkerd 的發佈方式進行了一些重要調整。公告指出，「儘管 Linkerd 將始終是開源的，但從 2.15 版開始，我們將不再發布開源的穩定版本工件」。如果你目前正在生產環境中使用 Linkerd，可查看"<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flinkerd.io%2F2024%2F02%2F21%2Fannouncing-linkerd-2.15%2F%23a-new-model-for-stable-releases" target="_blank">A new model for stable releases</a>"部分進行了解。</p><p>與往常一樣，2.15 版本還包含了大量的錯誤修復和改進。</p><h4><strong>網格擴展</strong></h4><p>Linkerd 2.15 引入了網格擴展功能：可以在 Kubernetes 之外的任何地方部署 Linkerd 的超輕量級 Rust 微代理，並將它們連接到運行在 Kubernetes 集羣上的 Linkerd 控制平面。這使得 Linkerd 能夠處理非 Kubernetes 工作負載，將所有 TCP 通信與這些工作負載之間的通信升級為安全、可靠和可觀測的連接。非 Kubernetes 應用程序可以獲得 Linkerd 的全部功能，包括互相 TLS、重試、超時、斷路器、基於延遲的負載均衡、動態的每個請求路由、零信任授權策略等等。</p><p>網格擴展是實現 Linkerd 成為雲原生組織的通用網絡層目標的重要組成部分。官方認為，這一舉措在很大程度上得益於 Linkerd 的核心設計，即用 Rust 編寫的超輕量級微代理。Rust 語言具備"防止內存相關錯誤、管理併發、生成小型、高效的二進制文件"的能力，使得 Linkerd 不僅避免了 C 和 C++等語言普遍存在的內存漏洞，而且提供了最小的資源佔用和最重要的是對用户的最小操作負擔。</p><p>「Linkerd 的 Rust 微代理是其以簡單為先的方法的關鍵所在，我們能夠提供小型、靜態的二進制文件，可以編譯為各種架構和平台，這是解鎖 Linkerd 新的網格擴展功能的關鍵所在。」</p><h4><strong>SPIFFE 支持</strong></h4><p>網格擴展的一個主要挑戰是如何為非 Kubernetes 工作負載生成工作負載標識。為瞭解決這個問題，項目團隊引入了對 SPIFFE 的支持。通過 Linkerd 2.15，用户現在可以默認加密所有與虛擬機工作負載的通信，並在特定客户端的每個 HTTP 路由和 gRPC 方法級別上添加零信任控制。</p><h4><strong>原生 sidecar 支持</strong></h4><p>Linkerd 2.15 添加了對原生 sidecar 容器的支持，這是 Kubernetes 1.28 引入的一個新的 Kubernetes 特性，並在 Kubernetes 1.29 中默認啓用。使用原生 sidecar 容器部署 Linkerd 解決了在 Kubernetes 中使用 sidecar 容器時長期存在的一些煩惱，特別是在支持 Job 和容器啓動過程中的 race conditions 問題。</p><p><strong>穩定版本的新模式</strong></p><p>從 Linkerd 2.15 開始對交付方式進行了一些重大更改。雖然 Linkerd 始終是開源的，但從 Linkerd 2.15 開始，穩定的 Linkerd 發佈將由供應商社區負責。</p><p>這不僅包括 Linkerd 2.15.0，還包括即將推出的 Linkerd 2.15.1 這樣的 point releases、即將推出的 2.16.0 這樣的重大版本，以及即將推出的 Linkerd 2.14.11 這樣的 backports 版本，所有這些都將由供應商社區處理。</p><blockquote><p>「我們將一如既往地在 GitHub 代碼庫中發佈 edge releases，其中包含最新的 Linkerd 代碼，包括錯誤修復、新功能等。這些版本一直是社區進行早期測試和審查的重要機制，我們希望在新框架下能看到更多這樣的版本。當然，Linkerd 的開發工作仍將照常進行，包括功能開發、我們的安全漏洞響應政策，以及其他所有讓 Linkerd 變得更出色的活動。</p><p>需要明確的是：Linkerd 始終是開源的。這一改變只涉及 release artifacts，而不是關於代碼、管理、社區或其他任何方面。早在創建 Linkerd 之前，我們就已經是開源用户、貢獻者和倡導者，我們對健康、包容、協作和不斷髮展的開源 Linkerd 的承諾一如既往。」</p></blockquote><h4><strong>下一步</strong></h4><p>項目團隊計劃在接下來的版本中：擴展對網格擴展的支持，以包括私有網絡；使 Gateway API 和非 Gateway API 接口達到一致；支持 IPv6；致力於處理入口流量和增加對出口流量的控制；探索以其他方式提供 Linkerd，包括「ambient」和其他方法等等。</p><p>更多詳情可查看官方<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flinkerd.io%2F2024%2F02%2F21%2Fannouncing-linkerd-2.15%2F" target="_blank">公告</a>。</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 03:06:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280444/linkerd-2-15-released</guid>
            <link>https://www.oschina.net/news/280444/linkerd-2-15-released</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[GIMP 2.99.18 發佈 —— 3.0 之前的最後一個開發者預覽版]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>開源圖像編輯器 GIMP 發佈了 3.0 之前的最後一個開發者預覽版本<u><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.gimp.org%2Fnews%2F2024%2F02%2F21%2Fgimp-2-99-18-released%2F" target="_blank"> GIMP 2.99.18</a></u>。該版本旨在預覽開發進展，讓社區能更早發現問題和報告問題。它是一個不穩定版本，不適合用於生產環境。</p><p>GIMP 3.0 使用 GTK3 進行重構，並且支持 Wayland，同時還有許多其他的改進和功能增強。對於這個版本，廣大用户已經期待了十年。GIMP 團隊計劃在 2024 年 5 月<a href="https://www.oschina.net/news/268067/gimp-3-0-may-2024-schedule">發佈</a>備受矚目的 GIMP 3.0。</p><p><img alt="" src="https://oscimg.oschina.net/oscnet/up-d08a7bf4228037e192418e690efa9306020.png" referrerpolicy="no-referrer"></p><p>GIMP 2.99.18 包含了大量更新，其中包括</p><ul><li>正確校正顏色的 Space Invasion 項目</li><li>改進色彩算法</li><li>非破壞性編輯的基本實現</li><li>改進字體處理</li><li>自動擴展層</li></ul><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.gimp.org%2Fnews%2F2024%2F02%2F21%2Fgimp-2-99-18-released%2F" target="_blank">詳情查看發佈公告</a>。</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 02:54:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280439/gimp-2-99-18-released</guid>
            <link>https://www.oschina.net/news/280439/gimp-2-99-18-released</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Rebebuca —— 桌面端 ffmpeg 管理器]]>
            </title>
            <description>
                <![CDATA[<div class="content"><ul style="list-style-type:square; margin-left:0; margin-right:0"><li><p>Rebebuca（發音：瑞貝不卡） 是一個使用 Rust 開發的桌面端 ffmpeg 管理器，在不卡系列中處於推流端的生態位（Monibuca 為服務端，Jessibuca 為播放端）。</p></li><li><p>Rebebuca 在不久的將來會支持管理 Monibuca&nbsp;進程。</p></li><li><p><strong style="color:black"><span style="color:#010101">Rebebuca&nbsp;</span>可以在 30 秒內完成創建、運行、管理你的 ffmpeg 命令</strong></p><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div class="ckeditor-html5-video" style="text-align:center"><video controls="controls" src="https://rebebuca.com/quick.mp4">&nbsp;</video></div></div><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0">&nbsp;</div><div style="margin-left:0; margin-right:0">&nbsp;</div></div></div></div></div></div></div></div></div></div></li><li><p>幫助我們更好的管理繁多複雜的 ffmpeg 參數和 ffmpeg 命令運行狀態</p></li></ul><h2 style="margin-left:30px; margin-right:30px; text-align:center"><span>功能特性</span></h2><ul style="list-style-type:square; margin-left:0; margin-right:0"><li><p>ffmpeg 命令全週期管理</p><ul style="list-style-type:circle; margin-left:0; margin-right:0"><li style="list-style-type:circle"><p>支持 ffmpeg 命令運行、停止、重啓等操作</p></li><li style="list-style-type:circle"><p>支持 ffmpeg 命令參數可視化配置、導入終端命令</p></li><li style="list-style-type:circle"><p>支持，按項目維度管理各種 ffmpeg 命令</p></li><li style="list-style-type:circle"><p>支持，數據導出</p></li></ul></li><li><p>列表+詳情交互模式</p></li><li><p>支持 ffmpeg 源切換、中英語言、深色淺色主題切換、窗口關閉方式選擇</p><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0">&nbsp;</div><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0"><div style="margin-left:0; margin-right:0; text-align:center"><div class="ckeditor-html5-video" style="text-align:center"><video controls="controls" src="https://rebebuca.com/quick.mp4">&nbsp;</video></div></div><div style="margin-left:0; margin-right:0">&nbsp;</div></div></div></div></div></div></div></div></div></div></li><li><p>支持軟件自動更新</p></li><li><p>支持 mac 和 window 平台</p></li><li><p>簡單好用、能力豐富、長期維護</p></li></ul><h2 style="margin-left:30px; margin-right:30px; text-align:center"><span>下載安裝</span></h2><ul style="list-style-type:square; margin-left:0; margin-right:0"><li><p>Windows：https://download.m7s.live/rb/Rebebuca_0.1.0_x64_en-US.msi</p></li><li><p>Mac：https://download.m7s.live/rb/Rebebuca_0.1.0_x64.dmg</p></li><li><p>Mac(arm64) ：https://download.m7s.live/rb/Rebebuca_0.1.0_aarch64.dmg</p></li></ul><h2 style="margin-left:30px; margin-right:30px; text-align:center"><span>官方地址</span></h2><ul style="list-style-type:square; margin-left:0; margin-right:0"><li><p>官方網站：https://rebebuca.com</p></li><li><p>github：https://github.com/rebebuca/rebebuca</p></li></ul></div>
                                                                ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 02:44:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/p/rebebuca</guid>
            <link>https://www.oschina.net/p/rebebuca</link>
        </item>
        <item>
            <title>
                <![CDATA[華為發佈首個 5.5G 智能核心網：計劃 2024 年商用]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>在 MWC24 巴塞羅那期間，華為雲核心網產品線總裁高治國發布 5.5G 智能核心網解決方案。</p><p>據悉，2023 年新通話已在中國 31 省部署，可支撐 5000 萬用户，同時在歐洲、拉美、中東、亞太等多個區域得到了廣泛驗證，計劃 2024 年商用。高治國表示：「華為發佈的業界首個新通話-A 通過智能能力和 DC（Data Channel）交互能力升級，正式邁入多模態通信時代。」</p><p><img height="333" src="https://oscimg.oschina.net/oscnet/up-b019072789c268abb1883dc58f6487ea5eb.png" width="500" referrerpolicy="no-referrer"></p><p>5.5G 也就是 5G-A，全稱為 5G-Advanced，是 5G 的技術演進，具備更大帶寬、更廣連接、確定性時延等能力。作為 5G-A 的重要技術之一，三載波聚合（3CC）是 5G-A 的基礎體驗網，5G-A 三載波聚合可以通過三載波組網方案，結合確定性體驗保障等技術，進一步提升網絡質量與體驗。</p><p>華為倡導的 5.5G 時代，是包含 5.5G、F5.5G、Net5.5G 等全面演進升級的端到端解決方案，會帶來 10 倍的網絡性能提升，可實現下行萬兆、上行千兆的峯值能力。同時在時延、定位、可靠性方面也有了 10 倍的提升，還能實現毫秒級時延和低成本千億物聯。</p><p>在 2023 MWC 上海展會上， 華為董事、ICT 產品與解決方案總裁楊超斌曾宣佈，華為 2024 年將會推出面向商用的 5.5G 全套網絡設備。</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 27 Feb 2024 02:40:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/280433</guid>
            <link>https://www.oschina.net/news/280433</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[糟糕，被 SimpleDateFormat 坑到啦！| 京東雲技術團隊]]>
            </title>
            <description>
                <![CDATA[<div class="content"><span id="OSC_h3_1"></span><h3><span><span><span>1. 問題背景</span></span></span></h3><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>問題的背景是這樣的，在最近需求開發中遇到需要將給定</span></span></span><span><span><strong><span>目標數據</span></strong></span></span><span><span><span>通過某一固定的</span></span></span><span><span><strong><span>計量規則</span></strong></span></span><span><span><span>進行過濾並打標生成</span></span></span><span><span><strong><span>明細數據</span></strong></span></span><span><span><span>，其中發現存在一筆</span></span></span><span><span><strong><span>目標數據</span></strong></span></span><span><span><span>的時間在</span></span></span><span><span><strong><span>不符合</span></strong></span></span><span><span><span>現有</span></span></span><span><span><strong><span>日期規則</span></strong></span></span><span><span><span>的條件下，還是通過了規則引擎的匹配打標操作。故而需要對該</span></span></span><span><span><strong><span>錯誤匹配場景</span></strong></span></span><span><span><span>進行排查，</span></span></span><span><span><strong><span>定位</span></strong></span></span><span><span><span>其</span></span></span><span><span><strong><span>根本原因</span></strong></span></span><span><span><span>所在。</span></span></span></p><span id="OSC_h3_2"></span><h3><span><span><span>2. 排查思路</span></span></span></h3><span id="OSC_h4_3"></span><h4><span><span><span>2.1 數據定位</span></span></span></h4><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>在開始排查問題之初，先假定現有的</span></span></span><span><span><strong><span>Aviator 規則引擎</span></strong></span></span><span><span><span>能夠對現有的數據進行正常的匹配打標，查詢在存在問題數據（圖中紅框所示）同一時刻進行規則匹配時的數據都有哪些。發現存在五筆數據在同一時刻進行規則匹配落庫。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-02-01-17-01Xmnw6twL44j44ufD6.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p>&nbsp;</p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>繼續查詢具體的</span></span></span><span><span><strong><span>匹配規則表達式</span></strong></span></span><span><span><span>，發現針對</span></span></span><span><span><strong><span>loanPayTime</span></strong></span></span><span><span><span>時間區間在</span></span></span><span><span><strong><span>[2022-07-16 00:00:00, 2023-05-11 23:59:59]</span></strong></span></span><span><span><span>的範圍內進行匹配，</span></span></span><span><span><strong><span>目標數據</span></strong></span></span><span><span><span>的時間為</span></span></span><span><span><strong><span>2023-09-19 11:27:29</span></strong></span></span><span><span><span>，理論上應該不會被匹配到。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-34VqCxKbos8IpYoic.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>但是觀測匹配打標的明細數據發現確實打標</span></span></span><span><span><strong><span>成功</span></strong></span></span><span><span><span>了（如紅框所示）。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-02-01-17-02wRWsgztvSkjaVTx.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>所以</span></span></span><span><span><strong><span>重新</span></strong></span></span><span><span><span>回到最初的和目標數據同時落庫的</span></span></span><span><span><strong><span>五筆數據</span></strong></span></span><span><span><span>發現，這五筆數據的</span></span></span><span><span><strong><span>loanPayTime</span></strong></span></span><span><span><span>時間確實在規則</span></span></span><span><span><strong><span>[2022-07-16 00:00:00, 2023-05-11 23:59:59]</span></strong></span></span><span><span><span>之內，所以在想</span></span></span><span><span><strong><span>有沒有可能</span></strong></span></span><span><span><span>是在目標數據匹配規則引擎</span></span></span><span><span><strong><span>前</span></strong></span></span><span><span><span>，其它的五筆數據中的其中一筆對該數據進行了</span></span></span><span><span><strong><span>修改</span></strong></span></span><span><span><span>導致</span></span></span><span><span><strong><span>誤匹配</span></strong></span></span><span><span><span>到了這個規則。順着這個思路，首先需要確認下 Aviator 規則引擎</span></span></span><span><span><strong><span>在併發場景下是否線程安全</span></strong></span></span><span><span><span>的。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-02-01-17-04oLk40Ts40iXT140sSf.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><span id="OSC_h4_4"></span><h4><span><span><span>2.2 規則引擎</span></span></span></h4><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>由於在需求中使用到用於給數據匹配打標的是</span></span></span><span><span><strong><span>Aviator 規則引擎</span></strong></span></span><span><span><span>，所以第一直覺是懷疑 Aviator 規則引擎在併發的場景中可能會存在</span></span></span><span><span><strong><span>線程不安全</span></strong></span></span><span><span><span>的情況。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-36NNJAleyXLMv67L7.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>首先簡單介紹下 Aviator 規則引擎是什麼，Aviator 是一個</span></span></span><span><span><strong><span>高性能</span></strong></span></span><span><span><span>的、</span></span></span><span><span><strong><span>輕量級</span></strong></span></span><span><span><span>的 java 語言實現的表達式求值引擎，主要用於各種表達式的動態求值，相較於其它的開源可用的規則引擎而言，Aviator 的設計目標是</span></span></span><span><span><code><span>輕量級</span></code></span></span><span><span><span>和</span></span></span><span><span><code><span>高性能</span></code></span></span><span><span><span> ，相比於 Groovy、JRuby 的笨重，Aviator 非常小，加上依賴包也才</span></span></span><span><span><strong><span>450</span></strong></span></span><span><span><span>K,不算依賴包的話只有</span></span></span><span><span><strong><span>70</span></strong></span></span><span><span><span>K；</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>當然，Aviator 的語法是受限的，它不是一門完整的語言，而只是語言的一小部分集合。其次，Aviator 的實現思路與其他輕量級的求值器很不相同，其他求值器一般都是通過解釋的方式運行，而 Aviator 則是直接將表達式</span></span></span><span><span><code><span>編譯成 Java 字節碼</span></code></span></span><span><span><span>，交給 JVM 去執行。簡單來説，Aviator 的定位是介於 Groovy 這樣的重量級腳本語言和 IKExpression 這樣的輕量級表達式引擎之間。（具體 Aviator 的相關介紹不是本文的重點，具體可</span></span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F608829" target="_blank" rel="nofollow"><span><span><span>參見</span></span></span></a><span><span><span>）</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>通過查閲相關資料發現，Aviator 中的 AviatorEvaluator.execute() 方法本身是線程安全的，也就是説只要表達式執行邏輯和傳入的 env 是線程安全的，理論上是不會出現併發場景下線程不安全問題的。（</span></span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fkillme2008%2Faviatorscript%2Fissues%2F91" target="_blank" rel="nofollow"><span><span><span>詳見</span></span></span></a><span><span><span>）</span></span></span></p><span id="OSC_h4_5"></span><h4><span><span><span>2.3 匹配規則引擎的 env</span></span></span></h4><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-38QGCcHoTw0KIgKpf.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>通過前面 Aviator 的相關資料發現</span></span></span><span><span><strong><span>傳入的 env</span></strong></span></span><span><span><span>如果在多線程場景下不安全也會導致最終的結果是錯誤的，故而定位使用的 env 發現使用的是</span></span></span><span><span><strong><span>HashMap</span></strong></span></span><span><span><span>，該集合類確實是線程不安全的（具體可</span></span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fblog.51cto.com%2Fknifeedge%2F5011416" target="_blank" rel="nofollow"><span><span><span>詳見</span></span></span></a><span><span><span>），但是線程不安全的前提是多個線程同時對其進行修改，定位代碼發現在每次調用方式時都會</span></span></span><span><span><strong><span>重新生成</span></strong></span></span><span><span><span>一個 HashMap，故而應該</span></span></span><span><span><strong><span>不會</span></strong></span></span><span><span><span>是由於這個線程不安全類導致的。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-40XifGzYMnY6zLzQq.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>繼續定位發現，</span></span></span><span><span><strong><span>loanPayTime</span></strong></span></span><span><span><span>這個字段在進行 Aviator 規則引擎匹配前使用</span></span></span><span><span><strong><span>SimpleDateFormat</span></strong></span></span><span><span><span>進行了格式化，所以</span></span></span><span><span><strong><span>有可能</span></strong></span></span><span><span><span>是由於該類的</span></span></span><span><span><strong><span>線程不安全</span></strong></span></span><span><span><span>導致的</span></span></span><span><span><strong><span>數據錯亂</span></strong></span></span><span><span><span>問題，但是這個類應該只是對日期進行格式化處理，難不成還能影響最終的數據。帶着這個疑問查詢資料發現，emm 確實是線程不安全的。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-40XFWp8NlBcdsIElo.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>好傢伙，</span></span></span><span><span><strong><span>嫌疑對象</span></strong></span></span><span><span><span>目前已經有了，現在就是尋找相關證據來</span></span></span><span><span><strong><span>佐證</span></strong></span></span><span><span><span>了。</span></span></span></p><span id="OSC_h3_6"></span><h3><span><span><span>3. SimpleDateFormat 還能線程不安全？</span></span></span></h3><span id="OSC_h4_7"></span><h4><span><span><span>3.1 先寫個 demo 試試</span></span></span></h4><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>話不多説，直接去測試一下在</span></span></span><span><span><strong><span>併發場景</span></strong></span></span><span><span><span>下，SimpleDateFormat 類會不會對需要格式化的日期進行</span></span></span><span><span><strong><span>錯亂</span></strong></span></span><span><span><span>格式化。先模擬一個場景，對多線程併發場景下格式化日期，即在</span></span></span><span><span><strong><span>[0,9]</span></strong></span></span><span><span><span>的數據範圍內，在</span></span></span><span><span><strong><span>偶數</span></strong></span></span><span><span><span>情況下對 2024 年 1 月 23 日進行格式化，在</span></span></span><span><span><strong><span>奇數</span></strong></span></span><span><span><span>情況下對 2024 年 1 月 22 日進行格式化，然後觀測日誌打印效果。</span></span></span></p><pre><code><span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.time.</span></span><span><span style="color:#dd4a68">Duration</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.time.</span></span><span><span style="color:#dd4a68">LocalDateTime</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.util.</span></span><span><span style="color:#dd4a68">Date</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.util.concurrent.</span></span><span><span style="color:#dd4a68">ExecutorService</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.util.concurrent.</span></span><span><span style="color:#dd4a68">Executors</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.util.concurrent.</span></span><span><span style="color:#dd4a68">TimeUnit</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">class</span></span><span><span></span></span><span><span style="color:#dd4a68">ThreadSafeDateFormatDemo</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span> dateFormat </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"yyyy-MM-dd HH:mm:ss"</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#0077aa">void</span></span><span><span></span></span><span><span style="color:#dd4a68">main</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">String</span></span><span><span style="color:#999999">[</span></span><span><span style="color:#999999">]</span></span><span><span> args</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#dd4a68">ExecutorService</span></span><span><span> executor </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#dd4a68">Executors</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">newFixedThreadPool</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#990055">10</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#dd4a68">LocalDateTime</span></span><span><span> startDateTime </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#dd4a68">LocalDateTime</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">now</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#dd4a68">Date</span></span><span><span> date </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">Date</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">for</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span style="color:#0077aa">int</span></span><span><span> i </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#990055">0</span></span><span><span style="color:#999999">;</span></span><span><span> i </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">&lt;</span></span><span><span></span></span><span><span style="color:#990055">1000</span></span><span><span style="color:#999999">;</span></span><span><span> i</span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">++</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">int</span></span><span><span> finalI </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span> i</span></span><span><span style="color:#999999">;</span></span><span><span>
            executor</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">submit</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">-&gt;</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">try</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">if</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span>finalI </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">%</span></span><span><span></span></span><span><span style="color:#990055">2</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">==</span></span><span><span></span></span><span><span style="color:#990055">0</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#dd4a68">String</span></span><span><span> formattedDate </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span> dateFormat</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span>date</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#708090">//第一種</span></span><span><span></span></span><span><span style="color:#708090">//                        String formattedDate = DateUtil.formatDate(date);</span></span><span><span></span></span><span><span style="color:#708090">//第二種</span></span><span><span></span></span><span><span style="color:#708090">//                        String formattedDate = DateSyncUtil.formatDate(date);</span></span><span><span></span></span><span><span style="color:#708090">//第三種</span></span><span><span></span></span><span><span style="color:#708090">//                        String formattedDate = ThreadLocalDateUtil.formatDate(date);</span></span><span><span></span></span><span><span style="color:#dd4a68">System</span></span><span><span style="color:#999999">.</span></span><span><span>out</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">println</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"線程 "</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#dd4a68">Thread</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">currentThread</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">getName</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#669900">" 時間為: "</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span> formattedDate </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#669900">" 偶數 i:"</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span> finalI</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">else</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#dd4a68">Date</span></span><span><span> now </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">Date</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span>
                        now</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">setTime</span></span><span><span style="color:#999999">(</span></span><span><span>now</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">getTime</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">-</span></span><span><span></span></span><span><span style="color:#dd4a68">TimeUnit</span></span><span><span style="color:#999999">.</span></span><span><span>MILLISECONDS</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">convert</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#990055">1</span></span><span><span style="color:#999999">,</span></span><span><span></span></span><span><span style="color:#dd4a68">TimeUnit</span></span><span><span style="color:#999999">.</span></span><span><span>DAYS</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#dd4a68">String</span></span><span><span> formattedDate </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span> dateFormat</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span>now</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#708090">//第一種</span></span><span><span></span></span><span><span style="color:#708090">//                        String formattedDate = DateUtil.formatDate(now);</span></span><span><span></span></span><span><span style="color:#708090">//第二種</span></span><span><span></span></span><span><span style="color:#708090">//                        String formattedDate = DateSyncUtil.formatDate(now);</span></span><span><span></span></span><span><span style="color:#708090">//第三種</span></span><span><span></span></span><span><span style="color:#708090">//                        String formattedDate = ThreadLocalDateUtil.formatDate(now);</span></span><span><span></span></span><span><span style="color:#dd4a68">System</span></span><span><span style="color:#999999">.</span></span><span><span>out</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">println</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"線程 "</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#dd4a68">Thread</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">currentThread</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">getName</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#669900">" 時間為: "</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span> formattedDate </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#669900">" 奇數 i:"</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span> finalI</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">catch</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">Exception</span></span><span><span> e</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#dd4a68">System</span></span><span><span style="color:#999999">.</span></span><span><span>err</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">println</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"線程 "</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#dd4a68">Thread</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">currentThread</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">getName</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#669900">" 出現了異常: "</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span> e</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">getMessage</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span>

        executor</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">shutdown</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">try</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span>
            executor</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">awaitTermination</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#990055">30</span></span><span><span style="color:#999999">,</span></span><span><span></span></span><span><span style="color:#dd4a68">TimeUnit</span></span><span><span style="color:#999999">.</span></span><span><span>SECONDS</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">catch</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">InterruptedException</span></span><span><span> e</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span>
            e</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">printStackTrace</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#708090">// 計算總耗時</span></span><span><span></span></span><span><span style="color:#dd4a68">LocalDateTime</span></span><span><span> endDateTime </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#dd4a68">LocalDateTime</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">now</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#dd4a68">Duration</span></span><span><span> duration </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#dd4a68">Duration</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">between</span></span><span><span style="color:#999999">(</span></span><span><span>startDateTime</span></span><span><span style="color:#999999">,</span></span><span><span> endDateTime</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#dd4a68">System</span></span><span><span style="color:#999999">.</span></span><span><span>out</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">println</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"所有任務執行完畢，總耗時: "</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span> duration</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">toMillis</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+</span></span><span><span></span></span><span><span style="color:#669900">" 毫秒"</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span></span></code></pre><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:start"><span><span><span>具體 demo 代碼如上所示，執行結果如下，</span></span></span><span><span><strong><span>理論上來説</span></strong></span></span><span><span><span>應該是</span></span></span><span><span><strong><span>2024 年 1 月 23 日</span></strong></span></span><span><span><span>和</span></span></span><span><span><strong><span>2024 年 1 月 22 日</span></strong></span></span><span><span><span>打印日誌的次數各</span></span></span><span><span><strong><span>5</span></strong></span></span><span><span><span>次。實際結果發現在</span></span></span><span><span><strong><span>偶數的場景下</span></strong></span></span><span><span><span>仍然會出現打印格式化</span></span></span><span><span><strong><span>2024 年 1 月 22 日</span></strong></span></span><span><span><span>的場景。</span></span></span><span><span><strong><span>明顯</span></strong></span></span><span><span><span>出現了數據錯亂賦值的問題，所以到這裏大概可以</span></span></span><span><span><strong><span>基本確定</span></strong></span></span><span><span><span>就是 SimpleDateFormat 類</span></span></span><span><span><strong><span>在併發場景下線程不安全導致的</span></strong></span></span><span><span><span>。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-45kR19RdH8Q7I17dZ1.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><span id="OSC_h4_8"></span><h4><span><span><span>3.2 SimpleDateFormat 為什麼線程不安全？</span></span></span></h4><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>查詢相關資料發現，從 SimpleDateFormat 類提供的接口來看，實在讓人看不出它與線程安全有什麼關係，進入 SimpleDateFormat 源碼發現類上面確實存在註釋提醒：意思就是， SimpleDateFormat 中的日期格式不是同步的。推薦（建議）為每個線程創建獨立的格式實例。如果多個線程同時訪問一個格式，則它必須保持外部同步。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-458aUeKXZwkvHOeut.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>繼續分析源碼發現，SimpleDateFormat 線程不安全的真正原因是繼承了</span></span></span><span><span><strong><span>DateFormat,</span></strong></span></span><span><span><span>在</span></span></span><span><span><strong><span>DateFormat</span></strong></span></span><span><span><span>中定義了一個</span></span></span><span><span><strong><span>protected</span></strong></span></span><span><span><span>屬性的 </span></span></span><span><span><strong><span>Calendar</span></strong></span></span><span><span><span>類的對象：calendar。由於 Calendar 類的概念複雜，牽扯到</span></span></span><span><span><strong><span>時區與本地化</span></strong></span></span><span><span><span>等等，jdk 的實現中使用了成員變量來傳遞參數，這就造成在多線程的時候會出現錯誤。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-467HfyoDMo1leYIUL.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>注意到在 format 方法中有一段如下代碼：</span></span></span></p><pre><code><span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#dd4a68">StringBuffer</span></span><span><span></span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">Date</span></span><span><span> date</span></span><span><span style="color:#999999">,</span></span><span><span></span></span><span><span style="color:#dd4a68">StringBuffer</span></span><span><span> toAppendTo</span></span><span><span style="color:#999999">,</span></span><span><span></span></span><span><span style="color:#dd4a68">FieldPosition</span></span><span><span> pos</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span>
        pos</span></span><span><span style="color:#999999">.</span></span><span><span>beginIndex </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span> pos</span></span><span><span style="color:#999999">.</span></span><span><span>endIndex </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#990055">0</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span></span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span>date</span></span><span><span style="color:#999999">,</span></span><span><span> toAppendTo</span></span><span><span style="color:#999999">,</span></span><span><span> pos</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">getFieldDelegate</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#708090">// Called from Format after creating a FieldDelegate</span></span><span><span></span></span><span><span style="color:#0077aa">private</span></span><span><span></span></span><span><span style="color:#dd4a68">StringBuffer</span></span><span><span></span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">Date</span></span><span><span> date</span></span><span><span style="color:#999999">,</span></span><span><span></span></span><span><span style="color:#dd4a68">StringBuffer</span></span><span><span> toAppendTo</span></span><span><span style="color:#999999">,</span></span><span><span></span></span><span><span style="color:#dd4a68">FieldDelegate</span></span><span><span> delegate</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#708090">// Convert input date to time field list</span></span><span><span>
        calendar</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">setTime</span></span><span><span style="color:#999999">(</span></span><span><span>date</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">boolean</span></span><span><span> useDateFormatSymbols </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#dd4a68">useDateFormatSymbols</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">for</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span style="color:#0077aa">int</span></span><span><span> i </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#990055">0</span></span><span><span style="color:#999999">;</span></span><span><span> i </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">&lt;</span></span><span><span> compiledPattern</span></span><span><span style="color:#999999">.</span></span><span><span>length</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">int</span></span><span><span> tag </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span> compiledPattern</span></span><span><span style="color:#999999">[</span></span><span><span>i</span></span><span><span style="color:#999999">]</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">&gt;&gt;&gt;</span></span><span><span></span></span><span><span style="color:#990055">8</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">int</span></span><span><span> count </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span> compiledPattern</span></span><span><span style="color:#999999">[</span></span><span><span>i</span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">++</span></span><span><span style="color:#999999">]</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">&amp;</span></span><span><span></span></span><span><span style="color:#990055">0xff</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">if</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span>count </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">==</span></span><span><span></span></span><span><span style="color:#990055">255</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span>
                count </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span> compiledPattern</span></span><span><span style="color:#999999">[</span></span><span><span>i</span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">++</span></span><span><span style="color:#999999">]</span></span><span><span></span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">&lt;&lt;</span></span><span><span></span></span><span><span style="color:#990055">16</span></span><span><span style="color:#999999">;</span></span><span><span>
                count </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">|=</span></span><span><span> compiledPattern</span></span><span><span style="color:#999999">[</span></span><span><span>i</span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">++</span></span><span><span style="color:#999999">]</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">switch</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span>tag</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">case</span></span><span><span> TAG_QUOTE_ASCII_CHAR</span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">:</span></span><span><span>
                toAppendTo</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">append</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#0077aa">char</span></span><span><span style="color:#999999">)</span></span><span><span>count</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">break</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">case</span></span><span><span> TAG_QUOTE_CHARS</span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">:</span></span><span><span>
                toAppendTo</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">append</span></span><span><span style="color:#999999">(</span></span><span><span>compiledPattern</span></span><span><span style="color:#999999">,</span></span><span><span> i</span></span><span><span style="color:#999999">,</span></span><span><span> count</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span>
                i </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">+=</span></span><span><span> count</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">break</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">default</span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">:</span></span><span><span></span></span><span><span style="color:#dd4a68">subFormat</span></span><span><span style="color:#999999">(</span></span><span><span>tag</span></span><span><span style="color:#999999">,</span></span><span><span> count</span></span><span><span style="color:#999999">,</span></span><span><span> delegate</span></span><span><span style="color:#999999">,</span></span><span><span> toAppendTo</span></span><span><span style="color:#999999">,</span></span><span><span> useDateFormatSymbols</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">break</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span> toAppendTo</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span></span></code></pre><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><strong><span>calendar.setTime(date)</span></strong></span></span><span><span><span>這條語句改變了 calendar，稍後，calendar 還會用到（在 subFormat 方法裏），而這就是引發問題的根源。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>想象一下，在一個多線程環境下，有兩個線程持有了同一個 SimpleDateFormat 的實例，分別調用 format 方法： 線程 1 調用 format 方法，改變了 calendar 這個字段。 中斷來了。 線程 2 開始執行，它也改變了 calendar。 又中斷了。 線程 1 回來了，此時，calendar 已然不是它所設的值，而是走上了線程 2 設計的道路。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>如果多個線程同時爭搶 calendar 對象，則會出現各種問題，</span></span></span><span><span><strong><span>時間不對</span></strong></span></span><span><span><span>，</span></span></span><span><span><strong><span>線程掛死</span></strong></span></span><span><span><span>等等。 分析一下 format 的實現，我們不難發現，用到成員變量 calendar，唯一的好處，就是在調用 subFormat 時，少了一個參數，卻帶來了這許多的問題。</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>其實，只要在這裏用一個局部變量，一路傳遞下去，所有問題都將迎刃而解。 這個問題背後隱藏着一個更為重要的問題–</span></span></span><span><span><strong><span>無狀態</span></strong></span></span><span><span><span>：無狀態方法的好處之一，就是它在各種環境下，都可以安全的調用。衡量一個方法是否是有狀態的，就看它是否改動了其它的東西，比如全局變量，比如實例的字段。format 方法在運行過程中改動了 SimpleDateFormat 的 calendar 字段，所以，它是有狀態的。</span></span></span></p><span id="OSC_h3_9"></span><h3><span><span><span>4. 如何解決？</span></span></span></h3><span id="OSC_h4_10"></span><h4><span><span><span>4.1 每次在需要時新創建實例</span></span></span></h4><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>在需要進行格式化日期的地方新建一個實例，不管什麼時候，將有線程安全問題的對象由共享變為局部私有都能避免多線程問題，不過也加重了創建對象的負擔。在一般情況下，這樣其實對性能影響比不是很明顯的。代碼示例如下。</span></span></span></p><pre><code><span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.util.</span></span><span><span style="color:#dd4a68">Date</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#708090">/**
 * @author 
 * @date 2024/1/23 20:04
 */</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">class</span></span><span><span></span></span><span><span style="color:#dd4a68">DateUtil</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">String</span></span><span><span></span></span><span><span style="color:#dd4a68">formatDate</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">Date</span></span><span><span> date</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#0077aa">throws</span></span><span><span></span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span> sdf </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"yyyy-MM-dd HH:mm:ss"</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span> sdf</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span>date</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">Date</span></span><span><span></span></span><span><span style="color:#dd4a68">parse</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">String</span></span><span><span> strDate</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#0077aa">throws</span></span><span><span></span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span> sdf </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"yyyy-MM-dd HH:mm:ss"</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span> sdf</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">parse</span></span><span><span style="color:#999999">(</span></span><span><span>strDate</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span>​</span></span></span></code></pre><span id="OSC_h4_11"></span><h4><span><span><span>4.2 同步 SimpleDateFormat 對象</span></span></span></h4><pre><code><span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.util.</span></span><span><span style="color:#dd4a68">Date</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#708090">/**
 * @author 
 * @date 2024/1/23 20:04
 */</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">class</span></span><span><span></span></span><span><span style="color:#dd4a68">DateSyncUtil</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">private</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span> sdf </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"yyyy-MM-dd HH:mm:ss"</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">String</span></span><span><span></span></span><span><span style="color:#dd4a68">formatDate</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">Date</span></span><span><span> date</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#0077aa">throws</span></span><span><span></span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">synchronized</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span>sdf</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span> sdf</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span>date</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">Date</span></span><span><span></span></span><span><span style="color:#dd4a68">parse</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">String</span></span><span><span> strDate</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#0077aa">throws</span></span><span><span></span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">synchronized</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span>sdf</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span> sdf</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">parse</span></span><span><span style="color:#999999">(</span></span><span><span>strDate</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span></span></code></pre><span id="OSC_h4_12"></span><h4><span><span><strong><span>説明：</span></strong></span></span><span><span><span>當線程較多時，當一個線程調用該方法時，其他想要調用此方法的線程就要 block，多線程併發量大的時候會對性能有一定的影響。</span></span></span></h4><span id="OSC_h4_13"></span><h4><span><span><span>4.3 ThreadLocal</span></span></span></h4><pre><code><span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">DateFormat</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.util.</span></span><span><span style="color:#dd4a68">Date</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">class</span></span><span><span></span></span><span><span style="color:#dd4a68">ConcurrentDateUtil</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">private</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">ThreadLocal</span></span><span><span>&lt;DateFormat&gt;</span></span><span><span> threadLocal </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">ThreadLocal</span></span><span><span>&lt;DateFormat&gt;</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span>@Override</span></span><span><span></span></span><span><span style="color:#0077aa">protected</span></span><span><span></span></span><span><span style="color:#dd4a68">DateFormat</span></span><span><span></span></span><span><span style="color:#dd4a68">initialValue</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#669900">"yyyy-MM-dd HH:mm:ss"</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">Date</span></span><span><span></span></span><span><span style="color:#dd4a68">parse</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">String</span></span><span><span> dateStr</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#0077aa">throws</span></span><span><span></span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span> threadLocal</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">get</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">parse</span></span><span><span style="color:#999999">(</span></span><span><span>dateStr</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">String</span></span><span><span></span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">Date</span></span><span><span> date</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span> threadLocal</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">get</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span>date</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span></span></code></pre><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:left"><span><span><span>另一種寫法</span></span></span></p><pre><code><span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">DateFormat</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.text.</span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">import</span></span><span><span></span></span><span><span>java.util.</span></span><span><span style="color:#dd4a68">Date</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#708090">/**
 * @author 
 * @date 2024/1/23 15:44
 * @description 線程安全的日期處理類
 */</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">class</span></span><span><span></span></span><span><span style="color:#dd4a68">ThreadLocalDateUtil</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#708090">/**
     * 日期格式
     */</span></span><span><span></span></span><span><span style="color:#0077aa">private</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#0077aa">final</span></span><span><span></span></span><span><span style="color:#dd4a68">String</span></span><span><span> date_format </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#669900">"yyyy-MM-dd HH:mm:ss"</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#708090">/**
     * 線程安全處理
     */</span></span><span><span></span></span><span><span style="color:#0077aa">private</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">ThreadLocal</span></span><span><span>&lt;DateFormat&gt;</span></span><span><span> threadLocal </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">ThreadLocal</span></span><span><span>&lt;&gt;</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#708090">/**
     * 線程安全處理
     */</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">DateFormat</span></span><span><span></span></span><span><span style="color:#dd4a68">getDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#dd4a68">DateFormat</span></span><span><span> df </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span> threadLocal</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">get</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#0077aa">if</span></span><span><span></span></span><span><span style="color:#999999">(</span></span><span><span>df </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">==</span></span><span><span></span></span><span><span style="color:#0077aa">null</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span>
            df </span></span><span><span style="background-color:rgba(255, 255, 255, 0.5)">=</span></span><span><span></span></span><span><span style="color:#0077aa">new</span></span><span><span></span></span><span><span style="color:#dd4a68">SimpleDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span>date_format</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span>
            threadLocal</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">set</span></span><span><span style="color:#999999">(</span></span><span><span>df</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span> df</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#708090">/**
     * 線程安全處理日期格式化
     */</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">String</span></span><span><span></span></span><span><span style="color:#dd4a68">formatDate</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">Date</span></span><span><span> date</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span></span></span><span><span style="color:#dd4a68">getDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">format</span></span><span><span style="color:#999999">(</span></span><span><span>date</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#708090">/**
     * 線程安全處理日期解析
     */</span></span><span><span></span></span><span><span style="color:#0077aa">public</span></span><span><span></span></span><span><span style="color:#0077aa">static</span></span><span><span></span></span><span><span style="color:#dd4a68">Date</span></span><span><span></span></span><span><span style="color:#dd4a68">parse</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#dd4a68">String</span></span><span><span> strDate</span></span><span><span style="color:#999999">)</span></span><span><span></span></span><span><span style="color:#0077aa">throws</span></span><span><span></span></span><span><span style="color:#dd4a68">ParseException</span></span><span><span></span></span><span><span style="color:#999999">{</span></span><span><span></span></span><span><span style="color:#0077aa">return</span></span><span><span></span></span><span><span style="color:#dd4a68">getDateFormat</span></span><span><span style="color:#999999">(</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">.</span></span><span><span style="color:#dd4a68">parse</span></span><span><span style="color:#999999">(</span></span><span><span>strDate</span></span><span><span style="color:#999999">)</span></span><span><span style="color:#999999">;</span></span><span><span></span></span><span><span style="color:#999999">}</span></span><span><span></span></span><span><span style="color:#999999">}</span></span></span></code></pre><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:left"><span><span><strong><span>説明：</span></strong></span></span><span><span><span>使用 ThreadLocal, 也是將共享變量變為獨享，線程獨享肯定能比方法獨享在併發環境中能減少不少創建對象的開銷。如果對性能要求比較高的情況下，一般推薦使用這種方法</span></span></span></p><span id="OSC_h4_14"></span><h4><span><span><span>4.4 拋棄 JDK，使用其他類庫中的時間格式化類</span></span></span></h4><div><span>•</span><span><span><span><span>使用</span></span></span><span><span><strong><span>Apache commons</span></strong></span></span><span><span><span> 裏的</span></span></span><span><span><strong><span>FastDateFormat</span></strong></span></span><span><span><span>，宣稱是既快又線程安全的 SimpleDateFormat, 可惜它</span></span></span><span><span><strong><span>只能</span></strong></span></span><span><span><span>對日期進行 format, </span></span></span><span><span><strong><span>不能</span></strong></span></span><span><span><span>對日期串進行解析。</span></span></span></span></div><div><span>•</span><span><span><span><span>使用</span></span></span><span><span><strong><span>Joda-Time</span></strong></span></span><span><span><span>類庫來處理時間相關問題。</span></span></span></span></div><span id="OSC_h3_15"></span><h3><span><span><span>5. 性能比較</span></span></span></h3><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>通過追加時間監控，將原有數據範圍擴充到</span></span></span><span><span><strong><span>[0,999]</span></strong></span></span><span><span><span>，線程池保留</span></span></span><span><span><strong><span>10</span></strong></span></span><span><span><span>個線程不變，觀察三種情況下性能情況。</span></span></span></p><div><span>•</span><span><span><span><span>第一種：耗時 40ms</span></span></span></span></div><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-50ClKey6zU1zuFpod.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><div><span>•</span><span><span><span><span>第二種：耗時 33ms</span></span></span></span></div><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-50smFz50TPZ7DlxqV42.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><div><span>•</span><span><span><span><span>第三種：耗時 30ms</span></span></span></span></div><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>﻿</span></span></span></p><div><img alt="" src="https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2024-01-23-20-50fvjvOXvwRBDEKsW.png" referrerpolicy="no-referrer"></div><p><span style="color:transparent"><span><span><span>﻿</span></span></span></span><span><span><span>﻿</span></span></span></p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>通過性能壓測發現</span></span></span><span><span><strong><span>4.3</span></strong></span></span><span><span><span>中的 ThreadLocal 性能最優，耗時 30ms，</span></span></span><span><span><strong><span>4.1</span></strong></span></span><span><span><span>每次新創建實例性能最差，需要耗時 40ms，當然了在極致的高併發場景下提升效果應該會更加明顯。性能問題不是本文探討的重點，在此不多做贅述。</span></span></span></p><span id="OSC_h3_16"></span><h3><span><span><span>6. 總結</span></span></span></h3><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify"><span><span><span>以上就是針對本次問題排查的</span></span></span><span><span><strong><span>主要思路及流程</span></strong></span></span><span><span><span>，剛開始的排查思路也一直</span></span></span><span><span><strong><span>侷限於</span></strong></span></span><span><span><span>規則引擎的線程不安全或者是傳入的 env（由於使用的是 HashMap）線程不安全，還是受到</span></span></span><span><span><strong><span>組內大佬</span></strong></span></span><span><span><span>的啓發和幫助才進一步去分析</span></span></span><span><span><strong><span>SimpleDateFormat</span></strong></span></span><span><span><span>類可能會存在線程不安全。本次問題排查確實提供一個</span></span></span><span><span><strong><span>經驗</span></strong></span></span><span><span><span>，</span></span></span><span><span><strong><span>打破常規思路</span></strong></span></span><span><span><span>，比如</span></span></span><span><span><strong><span>SimpleDateFormat</span></strong></span></span><span><span><span>類看起來</span></span></span><span><span><strong><span>只是</span></strong></span></span><span><span><span>對日期進行格式化，</span></span></span><span><span><strong><span>很難</span></strong></span></span><span><span><span>和在併發場景下線程不安全會導致數據錯亂</span></span></span><span><span><strong><span>關聯起來</span></strong></span></span><span><span><span>。</span></span></span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">作者：京東科技，宋慧超</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">來源：京東雲開發者社區，轉載請註明來源</p><p style="color:#393c5a; margin-left:0; margin-right:0; text-align:justify">&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Sun, 18 Feb 2024 02:40:00 GMT</pubDate>
            <guid isPermaLink="false">https://my.oschina.net/u/4090830/blog/11043880</guid>
            <link>https://my.oschina.net/u/4090830/blog/11043880</link>
            <author>
                <![CDATA[京東雲開發者]]>
            </author>
        </item>
    </channel>
</rss>
