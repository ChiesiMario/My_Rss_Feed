<?xml version="1.0" encoding="UTF-8"?>
<rss
    xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"


>
    <channel>
        <title>
            <![CDATA[開源中國-軟件更新資訊]]>
        </title>
        <link>https://www.oschina.net/news/project</link>
        <atom:link href="https://rsshub.app/oschina/news/project" rel="self" type="application/rss+xml" />
        <description>
            <![CDATA[開源中國-軟件更新資訊 - Made with love by RSSHub(https://github.com/DIYgod/RSSHub)]]>
        </description>
        <generator>RSSHub</generator>
        <webMaster>i@diygod.me (DIYgod)</webMaster>
        <language>zh-cn</language>
        <lastBuildDate>Thu, 04 Jan 2024 20:13:45 GMT</lastBuildDate>
        <ttl>120</ttl>
        <item>
            <title>
                <![CDATA[Lazarus 3.0 發佈，Pascal 集成開發環境]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><strong>Lazarus</strong><span style="background-color:#ffffff; color:#333333"><span>&nbsp;</span>是以<span>&nbsp;</span></span><a href="http://www.oschina.net/p/freepascal">Free Pascal</a><span style="background-color:#ffffff; color:#333333"><span>&nbsp;</span>編譯器為基礎的 Pascal 語言的整合開發環境（IDE），和<span>&nbsp;</span></span><a href="http://www.oschina.net/p/delphi">Delphi</a><span style="background-color:#ffffff; color:#333333"><span>&nbsp;</span>高度兼容，被視作後者的開源替代品。目前已有中文界面。</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.getlazarus.org%2Frelease%2F%23minimum_requirements" target="_blank">3.0 版本</a>已經發布，這個版本是用 Free Pascal 3.2.2 構建的，上一個版本 Lazarus2.2.6 也是用 Free Pascal 3.2.2 構建的，以下是 Lazarus 和 Free Pascal 的更改列表：</p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fwiki.lazarus.freepascal.org%2FLazarus_3.0_release_notes" target="_blank">Lazarus 3.0&nbsp;發佈説明</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fwiki.lazarus.freepascal.org%2FUser_Changes_3.2.2" target="_blank">Free Pascal 3.2.2&nbsp;發佈詳情</a></li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://video.getlazarus.org/tutorial-intro.mp4" referrerpolicy="no-referrer">視頻演示：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvideo.getlazarus.org%2Ftutorial-intro.mp4" target="_blank">https://video.getlazarus.org/tutorial-intro.mp4</a></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">選擇屬於自己的 CPU、操作系統、發行版，然後選擇 「Lazarus 3.0」 目錄，下載地址：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.lazarus-ide.org%2Findex.php%3Fpage%3Dchecksums%233_0" target="_blank">https://www.lazarus-ide.org/index.php?page=checksums#3_0</a></p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 03:47:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274133/lazarus-3-0-released</guid>
            <link>https://www.oschina.net/news/274133/lazarus-3-0-released</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[KCL 動態速遞 | Crossplane 與 KCL 集成簡化雲資源配置與抽象]]>
            </title>
            <description>
                <![CDATA[<div class="content"><div><div><div><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fkcl-lang" target="_blank">KCL</a>&nbsp;是一個 CNCF 基金會託管的基於約束的記錄及函數語言，期望通過成熟的編程語言技術和實踐來改進對大量繁雜配置比如雲原生 Kubernetes 配置場景的編寫，致力於構建圍繞配置的更好的模塊化、擴展性和穩定性，更簡單的邏輯編寫，以及更簡單的自動化和生態工具集成。</p><p>本欄目將會雙週更新 KCL 語言社區最新動態，包括功能、官網更新和最新的社區動態等，幫助大家更好地瞭解 KCL 社區！</p><p><em><strong>KCL 官網：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252F" target="_blank">kcl-lang.io</a></strong></em></p><h2>內容概述<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%252586%252585%2525E5%2525AE%2525B9%2525E6%2525A6%252582%2525E8%2525BF%2525B0" target="_blank">​</a></h2><p>感謝所有貢獻者過去兩週 (2023 12.22 - 2024.01.04) 的傑出工作，以下是重點內容概述</p><p><strong>🔧 工具鏈更新</strong></p><ul><li><p><strong>包管理工具更新</strong></p><ul><li>支持帶&nbsp;<code>-</code>&nbsp;符號的外部包自動轉義為 KCL 可以識別的&nbsp;<code>_</code>&nbsp;符號如&nbsp;<code>set-annotation</code>&nbsp;-&gt;&nbsp;<code>set_annotation</code></li><li>修復&nbsp;<code>kcl mod add</code>&nbsp;在 Registry 包版本和本地已有包版本不同時引起的空指針錯誤</li></ul></li></ul><p><strong>💻 IDE 更新</strong></p><ul><li><p><strong>語義高亮</strong></p><ul><li>KCL IDE 目前支持語義級別的高亮，避免不同 IDE 插件高亮差異</li></ul></li><li><p><strong>補全功能增強</strong></p><ul><li>區分 Schema 類型和實例補全符號</li><li>統一 Schema 註釋文檔補全的格式</li><li>修復不同語法補全符號類型不統一的問題</li></ul></li></ul><h2>特別鳴謝<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E7%252589%2525B9%2525E5%252588%2525AB%2525E9%2525B8%2525A3%2525E8%2525B0%2525A2" target="_blank">​</a></h2><p>以下排名不分先後</p><ul><li>感謝 @FLAGLORD, @YiuTerran, @flyinox, @steeling, @Anoop, @Phillip Neumann 和 @Even Solberg 在使用 KCL 過程中的交流與寶貴反饋 🙌</li></ul><h2>精選更新<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E7%2525B2%2525BE%2525E9%252580%252589%2525E6%25259B%2525B4%2525E6%252596%2525B0" target="_blank">​</a></h2><h3>使用 KCL 編寫 Crossplane 函數<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E4%2525BD%2525BF%2525E7%252594%2525A8-kcl-%2525E7%2525BC%252596%2525E5%252586%252599-crossplane-%2525E5%252587%2525BD%2525E6%252595%2525B0" target="_blank">​</a></h3><p>Crossplane 及其 Composite Function 功能被用於解耦 XR（CompositeResource）和複合資源定義。XR 允許開發者創建更高級別的抽象，這些抽象能夠封裝和組合來自不同提供商和服務的多種類型雲資源。</p><p>使用 Crossplane 的 Composite Function 功能來渲染這些抽象能夠有效增強各種提供商資源的模板能力，同時減少所需的 YAML 代碼量。</p><p>將 KCL 與 Crossplane Composite Function 功能結合可以獲得如下能力</p><ul><li><strong>簡化複雜配置</strong>：KCL 作為 DSL 提供了更簡潔的語法和結構，可以減少配置的複雜性。當與 Crossplane 的複合資源結合時，可以創建更直觀、易於理解的配置模板，比如編寫循環和條件語句降低模版，編寫 Schema 和 Rule 進行模型抽象和校驗，使用 KCL 簡化資源的定義和維護，而不是編寫重複的 YAML 或者使用 Go 代碼編寫並部署 Crossplane Function，降低配置和策略的開發及維護成本。此外，因為 Crosssplane Composition 資源本身缺乏強大的模版能力且雲 API 豐富且複雜，因此有些 Composition 資源可能需要上千行 YAML 才能完成渲染資源編寫，維護成本較高，使用 KCL 可以平替 YAML 提升動態配置能力。</li><li><strong>可重用和模塊化</strong>：KCL 通過 OCI Registry 支持模塊化和代碼複用，這意味着可以創建可重用的配置模型，為 Crossplane Composition 資源帶來模塊化能力，且可同時在運行時和客戶端使用，方便不同的平台團隊之間進行協作。</li><li><strong>自動化和策略</strong>：可以使用 KCL 的強大功能來編寫策略和約束，與 Crossplane 的聲明式資源管理結合使用，並且在集羣中自動執行，確保雲資源或者 Kubernetes 資源的合規性，而無需引入額外的策略引擎。</li></ul><h4>前置工作<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%252589%25258D%2525E7%2525BD%2525AE%2525E5%2525B7%2525A5%2525E4%2525BD%25259C" target="_blank">​</a></h4><ul><li>準備一個 Kubernetes 集羣</li><li>安裝 Kubectl</li><li>安裝&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fdocs.crossplane.io%252F" target="_blank">Crossplane 及 Crossplane CLI 1.14+</a></li><li>安裝 KCL</li><li>安裝 Go 1.21+ (可選，需要本地調試函數時才用到)</li></ul><h4>快速開始<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%2525BF%2525AB%2525E9%252580%25259F%2525E5%2525BC%252580%2525E5%2525A7%25258B" target="_blank">​</a></h4><p>我們編寫一個&nbsp;<code>Network</code>&nbsp;抽象模型，並使用 KCL 代碼對其進行渲染得到託管資源&nbsp;<code>VPC</code>&nbsp;和&nbsp;<code>InternetGateway</code></p><p>1. 安裝 Crossplane KCL 函數<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25231-%2525E5%2525AE%252589%2525E8%2525A3%252585-crossplane-kcl-%2525E5%252587%2525BD%2525E6%252595%2525B0" target="_blank">​</a></p><p><code>Function</code>&nbsp;資源會創建一個函數 Pod，當您創建一個 Crossplane Composition Resource 時，Crossplane 會向這個 Pod 發送請求，詢問它要創建什麼資源。</p><p>通過設置&nbsp;<code>spec.package</code>&nbsp;值為&nbsp;<code>kcllang/crossplane-kcl</code>&nbsp;表示我們這裏使用 KCL 函數</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>vbnet</span><div>
      複製代碼
     </div></div></div><code class="language-vbnet"><span>kubectl apply -f- &lt;&lt; EOF</span><span><span>apiVersion:</span> pkg.crossplane.io/v1beta1</span><span><span>kind:</span><span>Function</span></span><span><span>metadata:</span></span><span> name: kcl-<span>function</span></span><span><span>spec:</span></span><span> package: kcllang/crossplane-kcl</span><span>EOF</span></code><p>2. 下發 Composition Resource<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25232-%2525E4%2525B8%25258B%2525E5%25258F%252591-composition-resource" target="_blank">​</a></p><p>就像渲染函數一樣，在這裏我們指定 KCL 如何接受輸入&nbsp;<code>Network</code>&nbsp;資源並生成&nbsp;<code>VPC</code>&nbsp;資源和&nbsp;<code>InternetGateway</code>&nbsp;資源。KCL 函數可以引用自 OCI Registry 或者 GitHub 上面的代碼，當然也可以直接書寫在&nbsp;<code>Composition</code>&nbsp;資源中。</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>ini</span><div>
      複製代碼
     </div></div></div><code class="language-ini"><span>kubectl apply -f- &lt;&lt; EOF</span><span>apiVersion: apiextensions.crossplane.io/v1</span><span>kind: Composition</span><span>metadata:</span><span> name: xlabels.fn-demo.crossplane.io</span><span> labels:</span><span> provider: aws</span><span>spec:</span><span> writeConnectionSecretsToNamespace: crossplane-system</span><span> compositeTypeRef:</span><span> apiVersion: fn-demo.crossplane.io/v1alpha1</span><span> kind: XNetwork</span><span> mode: Pipeline</span><span> pipeline:</span><span> - step: normal</span><span> functionRef:</span><span> name: kcl-function</span><span> input:</span><span> apiVersion: krm.kcl.dev/v1alpha1</span><span> kind: KCLRun</span><span> metadata:</span><span> name: basic</span><span> spec:</span><span><span># Generate new resources</span></span><span> target: Resources</span><span><span># OCI, Git or inline source</span></span><span><span># source: oci://ghcr.io/kcl-lang/crossplane-xnetwork-kcl-function</span></span><span><span># source: github.com/kcl-lang/modules/crossplane-xnetwork-kcl-function</span></span><span> source: |</span><span><span># Get the XR spec fields</span></span><span><span>id</span> = option(<span>"params"</span>)?.oxr?.spec.id or <span>""</span></span><span><span># Render XR to crossplane managed resources</span></span><span><span>network_id_labels</span> = {<span>"networks.meta.fn.crossplane.io/network-id"</span> = id} if id else {}</span><span><span>vpc</span> = {</span><span><span>apiVersion</span> = <span>"ec2.aws.upbound.io/v1beta1"</span></span><span><span>kind</span> = <span>"VPC"</span></span><span><span>metadata.name</span> = <span>"vpc"</span></span><span><span>metadata.labels</span> = network_id_labels</span><span><span>spec.forProvider</span> = {</span><span><span>region</span> = <span>"eu-west-1"</span></span><span><span>cidrBlock</span> = <span>"192.168.0.0/16"</span></span><span><span>enableDnsSupport</span> = <span>True</span></span><span><span>enableDnsHostnames</span> = <span>True</span></span><span> }</span><span> }</span><span><span>gateway</span> = {</span><span><span>apiVersion</span> = <span>"ec2.aws.upbound.io/v1beta1"</span></span><span><span>kind</span> = <span>"InternetGateway"</span></span><span><span>metadata.name</span> = <span>"gateway"</span></span><span><span>metadata.labels</span> = network_id_labels</span><span><span>spec.forProvider</span> = {</span><span><span>region</span> = <span>"eu-west-1"</span></span><span><span>vpcIdSelector.matchControllerRef</span> = <span>True</span></span><span> }</span><span> }</span><span><span>items</span> = [vpc, gateway]</span><span>EOF</span></code><p>3. 創建輸入資源類型 (Crossplane XRD)<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25233-%2525E5%252588%25259B%2525E5%2525BB%2525BA%2525E8%2525BE%252593%2525E5%252585%2525A5%2525E8%2525B5%252584%2525E6%2525BA%252590%2525E7%2525B1%2525BB%2525E5%25259E%25258B-crossplane-xrd" target="_blank">​</a></p><p>我們使用 Crossplane XRD 為輸入資源 Network 定義了一個 Schema，它有一個名為 id 的字段，表示網絡 id。</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>yaml</span><div>
      複製代碼
     </div></div></div><code class="language-yaml"><span><span>kubectl</span><span>apply</span><span>-f-</span><span>&lt;&lt;</span><span>EOF</span></span><span><span>apiVersion:</span><span>apiextensions.crossplane.io/v1</span></span><span><span>kind:</span><span>CompositeResourceDefinition</span></span><span><span>metadata:</span></span><span><span>name:</span><span>xnetworks.fn-demo.crossplane.io</span></span><span><span>spec:</span></span><span><span>group:</span><span>fn-demo.crossplane.io</span></span><span><span>names:</span></span><span><span>kind:</span><span>XNetwork</span></span><span><span>plural:</span><span>xnetworks</span></span><span><span>claimNames:</span></span><span><span>kind:</span><span>Network</span></span><span><span>plural:</span><span>networks</span></span><span><span>versions:</span></span><span><span>-</span><span>name:</span><span>v1alpha1</span></span><span><span>served:</span><span>true</span></span><span><span>referenceable:</span><span>true</span></span><span><span>schema:</span></span><span><span>openAPIV3Schema:</span></span><span><span>type:</span><span>object</span></span><span><span>properties:</span></span><span><span>spec:</span></span><span><span>type:</span><span>object</span></span><span><span>properties:</span></span><span><span>id:</span></span><span><span>type:</span><span>string</span></span><span><span>description:</span><span>ID</span><span>of</span><span>this</span><span>Network</span><span>that</span><span>other</span><span>objects</span><span>will</span><span>use</span><span>to</span><span>refer</span><span>to</span><span>it.</span></span><span><span>required:</span></span><span><span>-</span><span>id</span></span><span><span>EOF</span></span></code><p>4. 下發輸入資源 (Crossplane XR)<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25234-%2525E4%2525B8%25258B%2525E5%25258F%252591%2525E8%2525BE%252593%2525E5%252585%2525A5%2525E8%2525B5%252584%2525E6%2525BA%252590-crossplane-xr" target="_blank">​</a></p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>yaml</span><div>
      複製代碼
     </div></div></div><code class="language-yaml"><span><span>kubectl</span><span>apply</span><span>-f-</span><span>&lt;&lt;</span><span>EOF</span></span><span><span>apiVersion:</span><span>fn-demo.crossplane.io/v1alpha1</span></span><span><span>kind:</span><span>Network</span></span><span><span>metadata:</span></span><span><span>name:</span><span>network-test-functions</span></span><span><span>namespace:</span><span>default</span></span><span><span>spec:</span></span><span><span>id:</span><span>network-test-functions</span></span><span><span>EOF</span></span></code><p>5. 檢查生成的託管資源<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25235-%2525E6%2525A3%252580%2525E6%25259F%2525A5%2525E7%252594%25259F%2525E6%252588%252590%2525E7%25259A%252584%2525E6%252589%252598%2525E7%2525AE%2525A1%2525E8%2525B5%252584%2525E6%2525BA%252590" target="_blank">​</a></p><ul><li>VPC</li></ul><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>python</span><div>
      複製代碼
     </div></div></div><code class="language-python"><span>kubectl get VPC -o yaml | grep network-<span>id</span></span><span> networks.meta.fn.crossplane.io/network-<span>id</span>: network-test-functions</span></code><ul><li>InternetGateway</li></ul><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>python</span><div>
      複製代碼
     </div></div></div><code class="language-python"><span>kubectl get InternetGateway -o yaml | grep network-<span>id</span></span><span> networks.meta.fn.crossplane.io/network-<span>id</span>: network-test-functions</span></code><p>可以看到我們確實成功生成了&nbsp;<code>VPC</code>&nbsp;和&nbsp;<code>InternetGateway</code>&nbsp;資源，並且它們的字段符合預期 (接受 XR 輸入的 id 字段並轉換為&nbsp;<code>VPC</code>&nbsp;資源和&nbsp;<code>InternetGateway</code>&nbsp;資源的標籤)。</p><h4>客戶端渲染<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%2525AE%2525A2%2525E6%252588%2525B7%2525E7%2525AB%2525AF%2525E6%2525B8%2525B2%2525E6%25259F%252593" target="_blank">​</a></h4><p>可以看到，上述 KCL 抽象代碼常常需要 Crossplane 作為控制平面中介，但是我們仍然可以完全擺脫 Crossplane 控制平面在客戶端完成抽象，並直接生成 Crossplane 管理的資源，以減輕集羣負擔和操作成本的同時並獲得更好的配置編寫體驗。</p><p>因為 KCL 模型並不侷限於在客戶端還是運行時進行使用，因此我們在客戶端僅通過一條命令就可以完成上述所有功能:</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>makefile</span><div>
      複製代碼
     </div></div></div><code class="language-makefile"><span>kcl run oci://ghcr.io/kcl-lang/crossplane-xnetwork-kcl-function -S items -D params='{<span>"oxr"</span>: {<span>"spec"</span>: {<span>"id"</span>: <span>"network-test-functions"</span>}}}'</span></code><p>輸出為:</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>yaml</span><div>
      複製代碼
     </div></div></div><code class="language-yaml"><span><span>apiVersion:</span><span>ec2.aws.upbound.io/v1beta1</span></span><span><span>kind:</span><span>VPC</span></span><span><span>metadata:</span></span><span><span>name:</span><span>vpc</span></span><span><span>labels:</span></span><span><span>networks.meta.fn.crossplane.io/network-id:</span><span>network-test-functions</span></span><span><span>spec:</span></span><span><span>forProvider:</span></span><span><span>region:</span><span>eu-west-1</span></span><span><span>cidrBlock:</span><span>192.168</span><span>.0</span><span>.0</span><span>/16</span></span><span><span>enableDnsSupport:</span><span>true</span></span><span><span>enableDnsHostnames:</span><span>true</span></span><span><span>---</span></span><span><span>apiVersion:</span><span>ec2.aws.upbound.io/v1beta1</span></span><span><span>kind:</span><span>InternetGateway</span></span><span><span>metadata:</span></span><span><span>name:</span><span>gateway</span></span><span><span>labels:</span></span><span><span>networks.meta.fn.crossplane.io/network-id:</span><span>network-test-functions</span></span><span><span>spec:</span></span><span><span>forProvider:</span></span><span><span>region:</span><span>eu-west-1</span></span><span><span>vpcIdSelector:</span></span><span><span>matchControllerRef:</span><span>true</span></span></code><p>當然，後續我們會結合&nbsp;<code>crossplane-provider-aws</code>&nbsp;等模型庫進一步詳細介紹如何獲得一個更好的客戶端抽象，盡情期待!</p><p>此外，可以在這裏查看到更多 Crossplane 和 KCL 結合的用例：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fkcl-lang%252Fcrossplane-kcl" target="_blank">github.com/kcl-lang/cr…</a></p><h2>其他資源<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%252585%2525B6%2525E4%2525BB%252596%2525E8%2525B5%252584%2525E6%2525BA%252590" target="_blank">​</a></h2><p>❤️ 感謝所有 KCL 用戶和社區小夥伴在社區中提出的寶貴反饋與建議。後續我們會發布更多 KCL 雲原生模型和工具集成文章，敬請期待! 查看&nbsp;<em><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fkcl-lang%252Fcommunity" target="_blank">KCL 社區</a></em>&nbsp;加入我們。</p><p>更多其他資源請參考：</p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252F" target="_blank">KCL 網站</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkusionstack.io%252F" target="_blank">KusionStack 網站</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fkcl-lang%252Fkcl%252Fmilestone%252F8" target="_blank">KCL v0.8.0 Milestone</a></li></ul></div></div></div></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 10:58:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274219</guid>
            <link>https://www.oschina.net/news/274219</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[BeeCP-3.5.0 發佈，一款高性能 JDBC 連接池]]>
            </title>
            <description>
                <![CDATA[<div class="content"><div><div><p style="text-align:left"><span style="color:#333333"><strong>一：基本介紹</strong></span></p><p style="text-align:left"><span style="color:#333333">BeeCP (小蜜蜂連接池), 一款高性能 JDBC 連接池</span><span style="color:#333333">，</span><span style="color:#333333">下面是它與其他一些連接池的性能對比圖</span></p><p style="text-align:left"><img height="467" src="https://oscimg.oschina.net/oscnet/up-2e161d313f95b64730dd9af36aaff25732b.png" width="1036" referrerpolicy="no-referrer"></p><p style="text-align:left"><span style="color:#333333"><strong>測試機器</strong>：CPU:&nbsp; I3-7100，內存: 8G，操作系統：Win7_64&nbsp;</span></p><p style="text-align:left"><strong>測試代碼:</strong><span style="color:#333333"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FChris2018998%2FBeeCP%2Fblob%2Fmaster%2Fdoc%2Fperformance%2FHikariCP-benchmark_BeeCP.zip" target="_blank"><strong>&nbsp;</strong> https://github.com/Chris2018998/BeeCP/blob/master/doc/performance/HikariCP-benchmark_BeeCP</a></span></p><p style="text-align:left"><span style="color:#333333"><strong>二：本次修改內容</strong></span></p><p>1：連接對象創建優化，在批量創建初始連接的方法上進行加鎖處理<br> 2：增加新的解碼器，可支持對 URL,User,Password 解碼操作，並移除老的解碼器<br> 3：從外部 Properties 集合讀取配置信息時，增加代碼塊式的安全控制<br> 4：調整連接池初始化方法的內部步驟，CAS 成功後再執行後續操作<br> 5：調整池內信息號量上的中斷處理</p><p><span style="color:#333333"><strong>三：版本 Maven 座標</strong></span></p><pre><span style="color:#d73a49"><span><span>&lt;</span></span></span><span><span><span><span>dependency</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span><span><span><span>groupId</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span>com<span style="color:#d73a49">.</span>github<span style="color:#d73a49">.</span>chris2018998<span style="color:#d73a49"><span><span>&lt;</span></span></span><span style="color:#d73a49"><span><span>/</span></span></span><span><span><span><span>groupId</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span><span><span><span>artifactId</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span>beecp<span style="color:#d73a49"><span><span>&lt;</span></span></span><span style="color:#d73a49"><span><span>/</span></span></span><span><span><span><span>artifactId</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span><span><span><span>version</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#005cc5">3.5</span><span style="color:#d73a49">.</span><span style="color:#005cc5">0</span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span style="color:#d73a49"><span><span>/</span></span></span><span><span><span><span>version</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span style="color:#d73a49"><span><span>/</span></span></span><span><span><span><span>dependency</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span></pre><pre><code><span><span>&lt;</span><span><span><span>dependency</span></span></span><span>&gt;</span></span><span><span>&lt;</span><span><span><span>groupId</span></span></span><span>&gt;</span></span>com.github.chris2018998<span><span>&lt;/</span><span><span><span>groupId</span></span></span><span>&gt;</span></span><span><span>&lt;</span><span><span><span>artifactId</span></span></span><span>&gt;</span></span>beecp-spring-boot-starter<span><span>&lt;/</span><span><span><span>artifactId</span></span></span><span>&gt;</span></span><span><span>&lt;</span><span><span><span>version</span></span></span><span>&gt;</span></span>1.7.3<span><span>&lt;/</span><span><span><span>version</span></span></span><span>&gt;</span></span><span><span>&lt;/</span><span><span><span>dependency</span></span></span><span>&gt;</span></span></code></pre><p><strong>四：項目地址</strong></p><ul><li>國內地址：&nbsp;<a href="https://gitee.com/Chris2018998/BeeCP">https://gitee.com/Chris2018998/BeeCP</a></li><li>國外地址：&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FChris2018998%2FBeeCP" target="_blank">https://github.com/Chris2018998/BeeCP</a></li></ul></div></div></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 09:59:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274206/beecp-3-5-0-released</guid>
            <link>https://www.oschina.net/news/274206/beecp-3-5-0-released</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Semi Design v2.50.1 發佈，抖音企業級 UI 庫]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="color:#000000">Semi Design 是現代、全面、靈活的設計系統和 UI 庫，由字節跳動抖音前端與 UED 團隊設計、開發並維護，是一款包含設計語言、React 組件、主題等開箱即用的中後台解決方案，可用於快速搭建美觀的 React 應用。</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="color:#000000"><span style="background-color:#ffffff">Semi Design v2.50.1 現已發佈，</span>此版本帶來如下更新內容：</span></p><ul><li>【Fix】 
  <ul><li>修復 Tree 在支持 showLine 後， renderFullLabel 時縮進錯誤問題（影響範圍：v2.50.0）<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FDouyinFE%2Fsemi-design%2Fpull%2F2007" target="_blank">#2007</a></li><li>修復 Tree 在支持 showLine 後， rtl 模式下連接線和選項文字部分重合問題（影響範圍：v2.50.0）<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FDouyinFE%2Fsemi-design%2Fpull%2F2007" target="_blank">#2007</a></li></ul></li><li>【Style】 
  <ul><li>修復 BreadCrumb 中 active 項 font-weight 錯誤問題 （影響範圍 v2.47-2.50）<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FDouyinFE%2Fsemi-design%2Fpull%2F2008" target="_blank">#2008</a></li></ul></li></ul><p>更新説明：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FDouyinFE%2Fsemi-design%2Freleases%2Ftag%2Fv2.50.1" target="_blank">https://github.com/DouyinFE/semi-design/releases/tag/v2.50.1</a></p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 08:13:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274187/semi-design-2-50-1-released</guid>
            <link>https://www.oschina.net/news/274187/semi-design-2-50-1-released</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[NumPy 1.26.3 發佈，Python 科學計算包]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>NumPy 1.26.3 <span style="background-color:#ffffff; color:#333333">現已發佈，這是一個維護版本。</span>修復了 1.26.2 發佈後發現的錯誤和迴歸，最顯著的變化是 f2py 的錯誤修復。此版本支持的 Python 版本為 3.9-3.12。</p><p style="text-align:start"><strong><span><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>兼容性</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p><p style="text-align:start"><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><code>f2py</code>將不再接受不明確的組合<code>-m</code>和<code>.pyf</code>CLI 組合。當傳遞多個<code>.pyf</code>文件時，會引發錯誤。當同時傳遞<code>-m</code>和 a<code>.pyf</code>時，會發出警告並忽略<code>-m</code>提供的名稱。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p style="text-align:start"><strong><span><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>改進</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p><p style="text-align:start"><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><code>f2py</code>現在可以處理具有模塊<code>kind</code>規範的<code>common</code>塊。這進一步擴展了<code>iso_fortran_env</code>和<code>iso_c_binding</code>等內在函數的可用性。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p style="text-align:start"><span style="background-color:#ffffff; color:#24292f">此版本共合併了 42 個拉取請求，更多詳情可<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fnumpy%2Fnumpy%2Freleases%2Ftag%2Fv1.26.3" target="_blank">查看發佈説明</a>。</span></p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 06:19:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274160/numpy-1-26-3-released</guid>
            <link>https://www.oschina.net/news/274160/numpy-1-26-3-released</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[SQLAlchemy 2.0.25 發佈，Python ORM 框架]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>SQLAlchemy 2.0.25 現已<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.sqlalchemy.org%2Fblog%2F2024%2F01%2F03%2Fsqlalchemy-2.0.25-released%2F" target="_blank">發佈</a>。</p><blockquote><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">SQLAlchemy 是一個 Python 的 SQL 工具包以及數據庫對象映射 (ORM) 框架。它包含整套企業級持久化模式，專門用於高效和高性能的數據庫訪問。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" height="228" src="https://static.oschina.net/uploads/space/2022/1207/071040_PUaS_4252687.png" width="300" referrerpolicy="no-referrer"></p></blockquote><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="color:#000000"><span style="background-color:#ffffff">2.0.25 版本修復了在 asyncio 系統中發現的一個問題，即使用 Engine.dispose() 方法處理過的引擎（在跨進程移動引擎時會這樣做），然後再次用於新的連接時，會無意中在內部使用線程鎖（threading.Lock），這在 asyncio 上下文中使用時可能會導致死鎖。</span></span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span><span><span><span style="color:#110000"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>該版本還包括使用 oracledb&nbsp;DBAPI 庫中新引入的 asyncio 支持的 Oracle 異步兼容方言的「preview」backport。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#110000"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>更多 2.0.25 的詳細變更日誌可查看&nbsp;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.sqlalchemy.org%2Fchangelog%2FCHANGES_2_0_25" target="_blank">Changelog</a>。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><span style="background-color:#ffffff; color:#000000"><span style="background-color:#ffffff">下載地址：</span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.sqlalchemy.org%2Fdownload.html" target="_blank">https://www.sqlalchemy.org/download.html</a></p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 05:57:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274157/sqlalchemy-2-0-25-released</guid>
            <link>https://www.oschina.net/news/274157/sqlalchemy-2-0-25-released</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[🎉 領域模型即服務 | Wow 2.12.4 發佈]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><a href="https://ahoowang.gitee.io/wow/"><img alt="Wow:基於 DDD、EventSourcing 的現代響應式 CQRS 架構微服務開發框架" src="https://static.oschina.net/uploads/img/202312/13135012_Zb9v.svg" width="150" referrerpolicy="no-referrer"></a></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong>領域驅動</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>事件驅動</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>測試驅動</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>聲明式設計</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>響應式編程</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>命令查詢職責分離</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>事件溯源</strong></p><blockquote><p style="margin-left:0; margin-right:0"><strong>官方文檔：</strong><img alt="👉" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_right-8d392cf32998e3bca12bb7b4ee10dae0.png" width="14" referrerpolicy="no-referrer"><span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/" target="_blank">https://ahoowang.gitee.io/wow/</a><span>&nbsp;</span><img alt="👈" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_left-4570b6929b8880ab2e8b8031007fef18.png" width="14" referrerpolicy="no-referrer"></p></blockquote><h2>更新內容</h2><ul><li>特性 (core): 支持通過<span>&nbsp;</span><code>ErrorCodeMapping</code><span>&nbsp;</span>自定義異常代碼（<code>ErrorCode</code>）</li><li>依賴 (core): 升級<span>&nbsp;</span><code>CosId</code><span>&nbsp;</span>到<span>&nbsp;</span><code>v2.6.4</code></li><li>依賴 (doc): 升級<span>&nbsp;</span><code>angular-cli</code><span>&nbsp;</span>到<span>&nbsp;</span><code>v17.0.9</code></li></ul><h2>簡介</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>Wow</em><span>&nbsp;</span>是一個基於領域驅動設計和事件溯源的現代響應式<span>&nbsp;</span><em>CQRS</em><span>&nbsp;</span>微服務開發框架，歷經多年生產環境驗證。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">旨在幫助開發者構建現代化的、高性能且易於維護的微服務應用程序，充分發揮領域驅動設計和事件溯源等模式優勢的同時降低應用的複雜性以及實踐成本。</p><blockquote><p style="margin-left:0; margin-right:0">值得一提的是，領域驅動設計和事件溯源並非微服務架構的專屬，<em>Wow</em><span>&nbsp;</span>框架不僅適用於微服務開發，同樣也可用於構建基於領域驅動設計的單體應用程序。</p></blockquote><h2>快速開始</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://ahoowang.gitee.io/wow/guide/getting-started.html">使用 Wow 項目模板快速創建基於 Wow 框架的 DDD 項目</a></p><h2>特性概覽</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-Features" src="https://gitee.com/AhooWang/Wow/raw/main/documentation/docs/public/images/Features.png" referrerpolicy="no-referrer"></p><h2>架構圖</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-Architecture" src="https://gitee.com/AhooWang/Wow/raw/main/documentation/docs/public/images/Architecture.svg" referrerpolicy="no-referrer"></p><h2>背景</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">隨着業務的發展和複雜性的增加，傳統的架構和開發方式逐漸顯露出瓶頸。<em>領域驅動設計</em>和<em>事件溯源</em>等理念在提高系統設計的靈活性和可維護性方面表現出色，但在實踐中常常需要面對複雜性和學習曲線的挑戰。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>Wow</em><span>&nbsp;</span>框架的目標是以簡單易用的方式將領域驅動設計和事件溯源等理念融入到微服務應用開發中，降低開發者的學習成本，提高開發效率。 通過提供現代響應式的<span>&nbsp;</span><em>CQRS</em><span>&nbsp;</span>架構和相關組件，<em>Wow</em><span>&nbsp;</span>框架旨在讓開發者更專注於業務邏輯的實現，而不必過多關心底層技術細節。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">經過多年的實踐和不斷的演進，<em>Wow</em><span>&nbsp;</span>框架在生產環境中得到了驗證，積累了豐富的經驗。這些經驗和反饋不僅豐富了框架的功能和性能，也為持續的改進和優化提供了寶貴的指導。</p><h2>對於開發者而言，<em>Wow</em><span>&nbsp;</span>框架意味着什麼？</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">我曾告誡我的團隊：如果我們過於依賴<em>數據驅動設計</em>而忽視<em>領域驅動設計</em>，我們最終將淪為<span>&nbsp;</span><em>CRUD</em><span>&nbsp;</span>工程師。</p><blockquote><p style="margin-left:0; margin-right:0"><em>CRUD</em><span>&nbsp;</span>工程師的競爭力和可替代性可想而知，這或許是為何會有<span>&nbsp;</span><em>35</em><span>&nbsp;</span>歲效應，企業顯然更傾向於招募沒有太多生活羈絆、更加廉價的<span>&nbsp;</span><em>25</em><span>&nbsp;</span>歲<span>&nbsp;</span><em>CRUD</em><span>&nbsp;</span>工程師。</p></blockquote><h3>業務價值</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">軟件系統的核心價值體現在業務價值上，研發人員不應只關注技術實現上，而是應該更多地關注業務價值的實現。 這其中的好處顯而易見，當你開發完一個業務系統之後，你將變成一個業務專家，甚至比跟你合作的領域專家還要專業，因為你需要洞察業務細節。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，意味着你將關注點放在圍繞領域模型設計上，與業務專家一起探索業務領域，而不是關注於技術實現上。 你僅需編寫領域模型，即可完成服務開發，<em>Wow</em><span>&nbsp;</span>框架自動為你準備好<span>&nbsp;</span><em>OpenAPI</em><span>&nbsp;</span>接口。</p><blockquote><p style="margin-left:0; margin-right:0">在《實現領域驅動設計》一書中，作者 Vaughn Vernon 提到：核心域才值得投入精力進行領域驅動設計， 但如果你使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，你將發現，因為低廉開發成本、快速的開發效率，即使是次要的支撐子域也值得<span>&nbsp;</span><em>DDD</em>。</p></blockquote><h3>性能與伸縮性</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">隨着業務的發展，你需要開始思考系統的性能和伸縮性問題。 在傳統架構中，這牽扯到數據庫關係模式、分片規則等複雜問題，同時你還需要處理因數據庫分片導致的跨分片事務問題。 這時，你不得不修改你的業務代碼，以適應水平拆分後的數據庫架構。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">然而，如果你選擇使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，你將不再需要過多關注數據庫關係模式、分片規則等問題。你的業務代碼無需變更，系統能夠輕鬆實現水平伸縮。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">你可以在這裏瞭解更多關於<span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/guide/perf-test.html">Wow 框架的性能</a>。</p><h3>讀寫分離與同步延遲</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">讀寫分離是一種極為普遍的性能優化架構模式。 然而，同步延遲問題常伴隨而來，事務執行成功後寫庫落庫成功，但讀庫同步延遲，用戶刷新頁面後無法獲取最新數據，從而對用戶的體驗產生影響。例如：</p><ul><li>用戶發起下單事務，寫庫執行成功，但由於某種原因，讀庫同步延遲，用戶刷新頁面後發現訂單未成功創建。</li><li>商家編輯完商品後，同步到<span>&nbsp;</span><em>Elasticsearch</em><span>&nbsp;</span>索引庫，但由於某種原因，同步延遲，導致商家刷新頁面後搜索不到該商品。</li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">通常，大家採用最簡便的方法，等待 1 秒後刷新頁面。 雖然這種方式能解決大多數數據同步延遲的問題，但效率不夠高。 因為大多數情況下，同步在 100 毫秒內就已完成，剩餘的 900 毫秒成了<em>浪費</em>。 然而，有時 1 秒無法完成同步，這就導致用戶獲取的數據變得<strong>無效</strong>。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，你可以通過等待<span>&nbsp;</span><em>PROJECTED</em><span>&nbsp;</span>信號完成，然後再將結果返回給用戶，以更為優雅和高效的方式處理數據同步延遲的問題。</p><h3>工程質量</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>單元測試</em>是確保代碼質量且符合預期業務需求的重要手段，但在傳統架構中，單元測試往往是一項相當困難的任務，因為你需要考慮數據庫連接、事務管理、數據清理等問題。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，你將會發現基於<span>&nbsp;</span><em>Given-&gt;When-&gt;Expect</em><span>&nbsp;</span>模式的測試套件，使得單元測試變得異常簡單。 你只需關注領域模型是否符合預期，而無需為數據庫連接等問題煩惱。</p><blockquote><p style="margin-left:0; margin-right:0">在實際應用中，我們將領域模型的單元測試覆蓋率下限閾值設置為<span>&nbsp;</span><strong>85%</strong>，也是可以輕鬆實現的。</p><p style="margin-left:0; margin-right:0">在沒有刻意要求的情況下，開發人員甚至自覺地將覆蓋率提升至<span>&nbsp;</span><strong>95%</strong>。</p><p style="margin-left:0; margin-right:0">因此，每次提交代碼都變得輕鬆自在，因為你確信你的代碼經過了充分的測試，並且真正意義上從單元測試中獲得了收益。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">在研發同級別的項目中，我們的測試團隊在系統<span>&nbsp;</span><em>API</em><span>&nbsp;</span>測試中發現，基於 Wow 框架的項目，其<span>&nbsp;</span><em>BUG</em><span>&nbsp;</span>數僅為傳統架構項目的<span>&nbsp;</span><strong>1/3</strong>。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">你可以在這裏瞭解更多關於<span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/guide/test-suite.html">Wow 單元測試套件</a>。</p><h2>對於企業而言，<em>Wow</em><span>&nbsp;</span>框架意味着什麼？</h2><h3>商業智能</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>商業智能</em>是企業決策的關鍵支持，而數據則是商業智能的分析原料。業務數據越為豐富有價值，商業智能的分析結果越準確，決策也就更加可靠。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">與傳統架構有着顯著差異，<em>Wow</em><span>&nbsp;</span>提供了實時聚合根狀態事件（<code>StateEvent</code>）和聚合命令（<code>Command</code>）作為數據分析的數據源，同時極大降低了實時<span>&nbsp;</span><em>ETL</em>（<code>Extract</code>,<span>&nbsp;</span><code>Transform</code>,<span>&nbsp;</span><code>Load</code>）的難度。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">在傳統架構中，實現實時<span>&nbsp;</span><em>ETL</em><span>&nbsp;</span>通常需要經過繁瑣的流程，包括<span>&nbsp;</span><code>DB-&gt;CDC-&gt;Process-&gt;DB</code>，而在<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架中，僅需一段簡單的<span>&nbsp;</span><em>SQL</em><span>&nbsp;</span>腳本即可完成這一過程。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">另外，在傳統架構中，使用<span>&nbsp;</span><em>CDC</em>（<code>MySql Binlog</code>）數據僅記錄數據的變化，缺乏明確的業務語義。進行業務分析時，需要基於數據狀態的變化推斷出業務語義，這往往需要進行大量的數據處理。 相較之下，<em>Wow</em><span>&nbsp;</span>框架直接提供了聚合根狀態事件和聚合命令作為數據分析的數據源，極大降低了數據處理的難度。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>Wow</em><span>&nbsp;</span>提供的實時同步機制將數據實時同步至數據倉庫（<em>ClickHouse</em>），為實時數據分析提供了極大的便利。這種方法為商業智能提供了強有力的支持，構建了一個實時數據分析系統，使決策制定能夠基於及時而準確的信息。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">你可以在這裏瞭解更多關於<span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/guide/bi.html">Wow 商業智能</a>。</p><h3>操作審計</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>操作審計</em>是企業中保障安全性和合規性的重要組成部分，同時也是對系統操作進行監控和追蹤的關鍵手段。<em>Wow</em><span>&nbsp;</span>框架在這方面為企業帶來了顯著的優勢。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">通過記錄聚合命令（<code>Command</code>）作為操作審計的數據源，<em>Wow</em><span>&nbsp;</span>框架能夠詳細追蹤系統中的各種操作。 這些記錄不僅包含了操作本身的內容，還涵蓋了操作觸發的副作用（<em>領域事件</em>），為審計提供了更為全面和準確的數據基礎。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">相較於傳統審計方法，<em>Wow</em><span>&nbsp;</span>框架的操作審計的數據源具備更加明確的業務語義，以及操作後產生的明確領域事件。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">此外，Wow 框架提供的實時數據同步機制也為操作審計帶來了便利，確保了審計數據的及時性和一致性。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">瞭解更多關於<span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/guide/bi.html#%E8%81%9A%E5%90%88%E5%91%BD%E4%BB%A4">Wow 操作審計</a>。</p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 04:44:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274149</guid>
            <link>https://www.oschina.net/news/274149</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Golang 通用代碼生成器仙童已發佈 2.4.0 電音仙女嚐鮮版三及視頻，詳細介紹了 Oracle 代碼生成]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><strong>Golang 通用代碼生成器仙童已發佈 2.4.0 電音仙女嚐鮮版三及其介紹視頻，詳細介紹了 Oracle 代碼生成</strong></p><p>Golang 通用代碼生成器仙童已發佈 2.4.0 電音仙女嚐鮮版三及其介紹視頻。詳細介紹了 Oracle 代碼生成。即生成後端數據庫為 Oracle 的 golang web 代碼。並同時生成對應的 Nodejs 的 ElementUI 的前端項目。<br> 視頻請見：<br><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Jc411b7N6%2F" target="_blank">https://www.bilibili.com/video/BV1Jc411b7N6/</a></p><p>三大部分生成功能羣即高級定製功能羣，部分生成功能羣和自動生成差異版本功能羣。此三個功能羣為用戶在整個軟件開發週期中多次，迭代式的全程使用通用代碼生成器設計。極大的提高了工作效率，歡迎試用。<br> 嚐鮮版二的視頻請見：</p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV15N4y1x75p%2F" target="_blank">https://www.bilibili.com/video/BV15N4y1x75p/</a></p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Q64y1H75r%2F" target="_blank">https://www.bilibili.com/video/BV1Q64y1H75r/</a></p><p>嚐鮮版一介紹視頻請見：</p><p>正常模式：</p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1fw411V77i%2F" target="_blank">https://www.bilibili.com/video/BV1fw411V77i/</a></p><p>啞數據模式：</p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1nu4y1K7sz%2F" target="_blank">https://www.bilibili.com/video/BV1nu4y1K7sz/</a></p><p>電音仙女版本支持日期和日期時間。支持三大部分生成功能羣。支持枚舉。支持啞數據模式。支持用戶管理自己的資料和密碼。技術狀態和最新版的 Rust 通用代碼生成器紅蓮的技術狀態一致。非常便利大家的使用。</p><p><span style="background-color:#ffffff; color:#333333">代碼生成器項目地址：</span><a href="https://gitee.com/jerryshensjf/Fairchild">https://gitee.com/jerryshensjf/Fairchild</a><br><span style="background-color:#ffffff; color:#333333">二進制發佈包下載地址：</span><a href="https://gitee.com/jerryshensjf/Fairchild/attach_files">https://gitee.com/jerryshensjf/Fairchild/attach_files</a></p><h3>項目圖片</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1104/210826_16fb1ca2_1203742.jpeg" referrerpolicy="no-referrer"></p><h3>最新大版本號</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">正在研發的最新大版本號是仙童 2.4.0 電音仙女　TechnoFairy 短名 TF。對標 java 通用代碼生成器光 2.4.0 電音之王和 Rust 通用代碼生成器紅蓮。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="輸入圖片説明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/tf2.jpg" referrerpolicy="no-referrer"></p><h3>百度話題</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">＃通用代碼生成器＃</p><h3>代碼生成器截圖</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1112/202857_c7a40dc0_1203742.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1112/202911_c2b9a341_1203742.png" referrerpolicy="no-referrer"></p><h3>Vue 獨立前端截圖</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="輸入圖片説明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/Fc_login.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="輸入圖片説明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/fc_list.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="輸入圖片説明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/fc_img.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="輸入圖片説明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/fc_mtm2.png" referrerpolicy="no-referrer"></p><h3>代碼生成物截圖</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1122/151921_f4271962_1203742.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1122/151935_cf6c7223_1203742.png" referrerpolicy="no-referrer"></p><h3>&nbsp;</h3><p>&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 04:31:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274140</guid>
            <link>https://www.oschina.net/news/274140</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[凌鯊 0.7.5 版本更新]]>
            </title>
            <description>
                <![CDATA[<div class="content"><h1>凌鯊 0.7.5 版本更新</h1><ul><li>服務端版本: 0.2.21&nbsp;</li><li>新增: 新增註冊界面&nbsp;</li><li>新增: GitPro 新增 remote 界面&nbsp;</li><li>新增: GitPro 新增創建標記功能&nbsp;</li><li>新增: GitPro 新增刪除標記功能&nbsp;</li><li>新增: GitPro 新增同步遠程數據功能&nbsp;</li><li>改進: 調整 GitPro 界面樣式</li></ul><h1>相關截圖</h1><p><img height="750" src="https://oscimg.oschina.net/oscnet/up-a985b3a8f6fc661521226a5edbadb7681bb.png" width="1300" referrerpolicy="no-referrer"></p><p><img height="639" src="https://oscimg.oschina.net/oscnet/up-7230a4119c55aa6fc19cd739f45f64e4e4d.png" width="1131" referrerpolicy="no-referrer"></p><p><img height="639" src="https://oscimg.oschina.net/oscnet/up-538b2f11edb88b8596861ea259fc7c3cd5d.png" width="1131" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 02:54:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274122</guid>
            <link>https://www.oschina.net/news/274122</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[PureScript v0.15.14 發佈，小巧而強大的靜態類型語言]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="background-color:#ffffff; color:#333333">PureScript&nbsp; v0.15.14 發佈了。PureScript 是個小巧而強大的靜態類型語言，可以編譯成 JavaScript。PureScript 主要是由 Haskell 和 PureScript 編寫的。</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong style="color:#333333"><span style="background-color:#ffffff; color:#24292f">Bug&nbsp;</span></strong><strong style="color:#333333"><span style="background-color:#ffffff; color:#24292f">修復</span></strong><strong><span style="background-color:#ffffff; color:#24292f">：</span></strong></p><ul><li><p><span><span>修復超大文件的編譯內存迴歸（<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpurescript%2Fpurescript%2Fpull%2F4521" target="_blank">#4521</a>）</span></span></p><p><span><span>編譯超大文件（&gt;12K 行）時，CSE pass 可能會導致內存膨脹並導致編譯時間增加。</span></span></p><p><span><span>此修復使用了&nbsp;strict Map 而非 lazy Map 來避免在優化過程中構建不必要的 thunk。</span></span></p></li><li><p><span><span>修復編譯多個模塊時的兩個 space leaks 問題（<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpurescript%2Fpurescript%2Fpull%2F4517" target="_blank">#4517</a>）</span></span></p><p><span><span>第一個會同時交錯編譯太多模塊，這會增加內存使用量，特別是對於使用<code>+RTS -N1 -RTS</code>的單線程編譯。現在，併發模塊的數量受限於&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdownloads.haskell.org%2Fghc%2Flatest%2Fdocs%2Fusers_guide%2Fusing-concurrent.html%23rts-options-for-smp-parallelism" target="_blank">GHC 運行時系統</a>可用的線程數量。</span></span></p><p><span><span>第二個將保留編譯有警告的模塊的內存，直到構建結束，打印警告並釋放內存。現在已通過額外的<code>NFData</code>實例修復了此問題。</span></span></p></li></ul><p>更新説明：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpurescript%2Fpurescript%2Freleases%2Ftag%2Fv0.15.14" target="_blank">https://github.com/purescript/purescript/releases/tag/v0.15.14</a></p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 02:28:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274116/purescript-0-15-14-released</guid>
            <link>https://www.oschina.net/news/274116/purescript-0-15-14-released</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[👍 JeeSite V5.6.0 發佈，Java 快速開發平台，Spring Boot，Vue3]]>
            </title>
            <description>
                <![CDATA[<div class="content"><h4><span>升級內容</span></h4><ul><li><p style="margin-left:.3rem; margin-right:.3rem">升級 spring boot 2.7.18、jackson 2.16.0、mybatis 3.5.14、shiro 1.13.0</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 DataGrid editGridInputFormListIsMap 參數，支持 Map 格式的提交參數</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 DictUtils.setDictList 方法的 List 參數，方便構建字典緩存</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，代碼生成模板 Vue 路由表單、Vue 彈窗表單、僅後端模板</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，文件標籤管理、標籤分配、標籤查詢、分享點擊次數</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，文件管理 upload 表，數據管理更高效</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，大屏輪播功能、輪播選項、排序</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，系統數據庫初始化基礎數據腳本</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，用戶管理，解凍用戶功能提示信息</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，不同場景下的修改密碼後的跳轉頁面操作</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，在線用戶列表，超時時間數值類型的排序</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，當不設置 adminPath 的時候，oauth2 的地址認證排除</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化 Layer 彈窗後首先關閉獲取焦點，防止回車彈出多個</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，登錄超時後，導出 Excel，不提示登錄界面，則提示超時信息</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，生成模板選擇框寬一點，顯示更多內容</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化 DataGrid 拖拽行的顏色違和感</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，點擊流程圖空白處關閉 tip</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，配置類 ShiroConfig 改為 ShiroAutoConfiguration 方便重寫</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正，不調用自定義的消息推送類型的 buildReceiveCode 方法的問題</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 Vue 路由 ureport 多個預覽文件只顯示一個的問題。</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 select2 組件 i18n 顯示不正確</p></li></ul><p style="color:#002127; text-align:start"><strong>Spring Boot 3 版本升級</strong></p><ul><li><p style="margin-left:0; margin-right:0">升級 spring boot 3.2.0、jackson 2.16.0、mybatis 3.5.14、shiro 2.0.0-a4、swagger3 2.2.19</p></li><li><p style="margin-left:0; margin-right:0">升級 elasticsearch 8.11.1</p></li><li><p style="margin-left:0; margin-right:0">包含上述的所有升級內容</p></li></ul><p style="color:#002127; text-align:start"><strong>Vue 分離端版本</strong></p><ul><li><p style="margin-left:.3rem; margin-right:.3rem">升級依賴 antdv 4.0.7、axios 1.6.2、vue 3.3.11 等等</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">升級，樹表的局部刷新改進，刪除、停用、啓用、修改父節點的情況下完美體驗</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 TreeSelect 增加 returnFullName 和 returnFullNameSplit 屬性，支持返回樹的全路徑名返回</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 ListSelect 組件 configFile 參數，可將選擇配置文件放到業務目錄，不是組件目錄了</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 ListSelect 增加 isShowCode 可設置右側選擇列表中是否顯示編碼的參數開關</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BasicTable 增加 defaultRowSelection 屬性，通過右上角給表格設置複選框的時候加載默認參數</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BasicTable 編輯表格增加 ListSelect、TextArea 組件</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BasicTable 編輯表格組件大小調整為正常</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BasicModal 增加 appendHeader 標題後插槽</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BpmButton 將提交審批信息移動到提交對話框中開關</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BpmButton 增加 Size 參數，可以調整按鈕和邊距大小</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 listToTree 列表到樹的轉換方法，添加全名字段，方便 TreeSelect 時返回樹全路徑名</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，用戶管理新增批量刪除，點擊表格右上角設置按鈕，選中複選框後，列表行打鈎，即可顯示刪除按鈕</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，強化路由表單、可摺疊表單示例、用戶個性化表單示例、主子表的列表選擇示例</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，文件標籤管理、標籤分配、標籤查詢 Vue 版</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化 BasicTable 的 reload 增強，支持樹表修改父節點情況下的局部刷新</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化 BasicTable 標題後面加按鈕的樣式美化</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">優化，修改密碼後提示成功後，自動跳轉到登錄頁</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正，上傳組件文件查看列表黑暗模式下的顯示</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 Upload 組件，新增表單某些情況下 dataMap 為字符串的問題</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 BasicTable 下的插槽，必須有 tableTitle 否則，插槽 toolbar 中的內容無法顯示</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 BasicTable 指定 rowSelection 的 onChange 事件後，然後在表格設置裏關閉和開啓複選框一次操作後 onChange 失效問題</p></li></ul><h4><span>升級方法</span></h4><ul><li><p style="margin-left:0; margin-right:0">修改所有&nbsp;<code>pom.xml</code>&nbsp;文件中的&nbsp;<code>jeesite-parent</code>&nbsp;版本號為&nbsp;<code>5.6.0-SNAPSHOT</code></p></li><li><p style="margin-left:0; margin-right:0">如果您修改了&nbsp;<code>parent</code>、<code>common</code>、<code>modules</code>&nbsp;等項目源碼，請與&nbsp;<code>git</code>&nbsp;上的代碼進行同步</p></li><li><p style="margin-left:0; margin-right:0">配置類 ShiroConfig 改為 ShiroAutoConfiguration 方便重寫，請升級該類，兩個類保留一個</p></li><li><p style="margin-left:0; margin-right:0">配置參數 spring.data.elasticsearch.enabled 替換為 spring.elasticsearch.enabled</p></li><li><p style="margin-left:0; margin-right:0">如果您是跨版本升級，請注意每一個版本的升級方法，業務上有調整的地方進行修改</p></li><li><p style="margin-left:0; margin-right:0">執行&nbsp;<code>root/package.bat(sh)</code>&nbsp;打包腳本，強制更新依賴。</p></li></ul><p style="color:#002127; text-align:start"><strong>Spring Boot 3 版本升級</strong></p><ul><li><p style="margin-left:0; margin-right:0">修改所有&nbsp;<code>pom.xml</code>&nbsp;文件中的&nbsp;<code>jeesite-parent</code>&nbsp;版本號為&nbsp;<code>5.6.0.springboot3-SNAPSHOT</code></p></li><li><p style="margin-left:0; margin-right:0">如果您修改了&nbsp;<code>parent</code>、<code>common</code>、<code>modules</code>&nbsp;等項目源碼，請與&nbsp;<code>git</code>&nbsp;上的代碼進行同步</p></li><li><p style="margin-left:0; margin-right:0">配置類 ShiroConfig 改為 ShiroAutoConfiguration 方便重寫，請升級該類，兩個類保留一個</p></li><li><p style="margin-left:0; margin-right:0">配置參數 spring.data.elasticsearch.enabled 替換為 spring.elasticsearch.enabled</p></li><li><p style="margin-left:0; margin-right:0">Elasticsearch 從 7 升級到 8，會有很多 API 變化，參見 ElasticsearchTest.java</p></li><li><p style="margin-left:0; margin-right:0">如果您是跨版本升級，請注意每一個版本的升級方法，業務上有調整的地方進行修改</p></li><li><p style="margin-left:0; margin-right:0">執行&nbsp;<code>root/package.bat(sh)</code>&nbsp;打包腳本，強制更新依賴。</p></li></ul><p style="color:#002127; text-align:start"><strong>Vue 分離端升級</strong></p><ul><li><p style="margin-left:0; margin-right:0">請與&nbsp;<code>jeesite-vue</code>&nbsp;代碼倉庫源碼進行同步，合併代碼，手動解決衝突代碼。</p></li><li><p style="margin-left:0; margin-right:0">匹配後端版本為&nbsp;<code>JeeSite v5.6.0</code></p></li></ul><h2>瞭解更多</h2><ul><li><p style="margin-left:0; margin-right:0">JeeSite 官網地址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fjeesite.com" target="_blank">http://jeesite.com</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 在線文檔：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fdocs.jeesite.com" target="_blank">http://docs.jeesite.com</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 演示地址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fdemo.jeesite.com" target="_blank">http://demo.jeesite.com</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite Vue 演示地址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fvue.jeesite.com" target="_blank">http://vue.jeesite.com</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 源碼倉庫：<a href="https://gitee.com/thinkgem/jeesite4" target="_blank">https://gitee.com/thinkgem/jeesite4</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite Vue 前端源碼：<a href="https://gitee.com/thinkgem/jeesite-vue" target="_blank">https://gitee.com/thinkgem/jeesite-vue</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 跨平台手機端：<a href="https://gitee.com/thinkgem/jeesite-uniapp" target="_blank">https://gitee.com/thinkgem/jeesite-uniapp</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite Cloud 微服務：<a href="https://gitee.com/thinkgem/jeesite-cloud" target="_blank">https://gitee.com/thinkgem/jeesite-cloud</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 客戶端安裝程序：<a href="https://gitee.com/thinkgem/jeesite-client" target="_blank">https://gitee.com/thinkgem/jeesite-client</a></p></li></ul><h2>JeeSite 生態系統</h2><ul><li><p style="margin-left:0; margin-right:0">分佈式微服務（Spring Cloud）：<a href="https://gitee.com/thinkgem/jeesite-cloud">https://gitee.com/thinkgem/jeesite-cloud</a></p></li><li><p style="margin-left:0; margin-right:0">Flowable 業務流程引擎（BPM）：<a href="https://gitee.com/link?target=http%3A%2F%2Fjeesite.com%2Fdocs%2Fbpm%2F">http://jeesite.com/docs/bpm/</a></p></li><li><p style="margin-left:0; margin-right:0">JFlow 工作流引擎：<a href="https://gitee.com/thinkgem/jeesite-jflow">https://gitee.com/thinkgem/jeesite-jflow</a></p></li><li><p style="margin-left:0; margin-right:0">多站點內容管理模塊（CMS）：<a href="https://gitee.com/link?target=https%3A%2F%2Fjeesite.com%2Fdocs%2Fcms%2F">https://jeesite.com/docs/cms/</a></p></li><li><p style="margin-left:0; margin-right:0">手機端移動端：<a href="https://gitee.com/thinkgem/jeesite-uniapp">https://gitee.com/thinkgem/jeesite-uniapp</a></p></li><li><p style="margin-left:0; margin-right:0">PC 客戶端程序：<a href="https://gitee.com/thinkgem/jeesite-client">https://gitee.com/thinkgem/jeesite-client</a></p></li><li><p style="margin-left:0; margin-right:0">Vue3 分離版本：<a href="https://gitee.com/thinkgem/jeesite-vue">https://gitee.com/thinkgem/jeesite-vue</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 統一認證：<a href="https://gitee.com/link?target=https%3A%2F%2Fjeesite.com%2Fdocs%2Foauth2-server">https://jeesite.com/docs/oauth2-server</a></p></li><li><p style="margin-left:0; margin-right:0">TopIAM 統一認證：<a href="https://gitee.com/thinkgem/jeesite-topiam">https://gitee.com/thinkgem/jeesite-topiam</a></p></li><li><p style="margin-left:0; margin-right:0">MaxKey 統一認證：<a href="https://gitee.com/thinkgem/jeesite-maxkey">https://gitee.com/thinkgem/jeesite-maxkey</a></p></li><li><p style="margin-left:0; margin-right:0">MybatisPlus:<span>&nbsp;</span><a href="https://gitee.com/thinkgem/jeesite-mybatisplus">https://gitee.com/thinkgem/jeesite-mybatisplus</a></p></li><li><p style="margin-left:0; margin-right:0">Magic 接口快速開發：<a href="https://gitee.com/thinkgem/jeesite-magic-api">https://gitee.com/thinkgem/jeesite-magic-api</a></p></li><li><p style="margin-left:0; margin-right:0">內外網中間件：<a href="https://gitee.com/link?target=https%3A%2F%2Fmy.oschina.net%2Fthinkgem%2Fblog%2F4624519">https://my.oschina.net/thinkgem/blog/4624519</a></p></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 23:51:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274093</guid>
            <link>https://www.oschina.net/news/274093</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[基於 mybatis 的 orm：mybatis-mp 1.3.1 發佈 - 超豐富的 api！]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">mybatis-mp 包含豐富的 api：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">1：基於註解，映射數據庫；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">2：支持多表 join 和返回；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">3：api 採用 lambda 和 stream 流式設計；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">4：內置分頁以及超強的 sql 優化功能；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">5：穩定且性能極優；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">6：輕量級封裝 mybatis，幾乎沒有侵入；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">7：api 豐富，支持數據庫函數、多表、樂觀鎖、多租戶、邏輯刪除、默認值（可動態值） 等眾多功能；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">8：零學習成本，和寫 sql 一樣方便。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">9：支持複雜的返回關係映射：例如一對一 ，一對多，多對多；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">10：支持自定義 sql 模板，再也不用擔心框架支持不足；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">11：內置代碼生成器，通過配置，可定製自身規範；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">12：全新的框架，全新的設計理念，新的就是好！</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">本次更新：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">1.適配無主鍵實體映射</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">2.兼容多個@TableId 配置</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">3.升級 springboot3 至 3.2.1</p><p>&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 12:26:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274048</guid>
            <link>https://www.oschina.net/news/274048</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[國產數據遷移同步工具 CloudCanal v3.3.3.0 發佈]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><strong><span style="background-color:#ffffff; color:#333333">CloudCanal<span>&nbsp;免費社區版&nbsp;</span></span></strong><span style="background-color:#ffffff; color:#333333">是<span>&nbsp;</span>ClouGence<span>&nbsp;</span>公司推出的一款<strong>全自研</strong>、<strong>可視化</strong>、<strong>自動化</strong>數據遷移同步工具，具備&nbsp;<strong>結構遷移</strong>、<strong>數據遷移</strong>、<strong>數據同步</strong>、<strong>數據校驗</strong>、<strong>數據訂正&nbsp;</strong>等功能，支持 <strong>30+ 款</strong>流行關係型數據庫、實時數倉、消息中間件、緩存數據庫和搜索引擎之間數據互通，其中包含國產數據庫&nbsp;<strong>OceanBase</strong>,<strong>PolarDB</strong>, <strong>TiDB</strong>,&nbsp;<strong>StarRocks</strong>, <strong>Doris</strong>, <strong>RocketMQ </strong>等。</span></p><p>結合開源項目&nbsp;<a href="https://gitee.com/clougence/cloudcanal-data-process">CloudCanalProcess</a>&nbsp;，可方便實現如下功能</p><ul><li><strong>wide-table</strong><span>&nbsp;</span>: 打寬表數據處理插件，主要包括事實表和單維表組合處理</li><li><strong>data-transform</strong><span>&nbsp;</span>: 數據通用轉換插件，比如做操作變幻、額外加字段、清洗回填數據</li><li><strong>data-gather</strong><span>&nbsp;</span>: 數據匯聚插件，將分庫分表、垂直拆分、異地數據進行實時匯聚</li><li><strong>data-compare</strong><span>&nbsp;</span>: 數據對比插件，根據源端數據變化進行業務對賬</li><li><strong>business-alert</strong><span>&nbsp;</span>: 業務告警插件，根據數據變化趨勢做出相應告警</li></ul><p><strong><span style="background-color:#ffffff; color:#333333">CloudCanal </span></strong><span style="background-color:#ffffff; color:#333333">產品功能對標阿里雲 DTS,&nbsp; 亞馬遜 DMS,&nbsp; StreamSets, AirByte，助力開發、DBA 或運維同學快速構建在線數據應用。</span></p><p style="text-align:center"><img alt="" height="622" src="https://oscimg.oschina.net/oscnet/up-e272e9fc5e6af50fcf4e5a39da62d43cbef.png" width="1080" referrerpolicy="no-referrer"></p><h1><strong>Release-Note</strong></h1><h2>重點功能</h2><ul><li>支持 Hana 1.x 版本，目前支持 Hana 版本為 1.x、2.x</li><li>支持 Hana 增量任務自定義增量表</li><li>支持 Hana 修改訂閲取消表後自動刪除觸發器</li></ul><h3><img alt="" height="530" src="https://oscimg.oschina.net/oscnet/up-ba445406fc1016df17c5caf33e2db5b430c.png" width="1024" referrerpolicy="no-referrer"></h3><h2>新特性<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FreleaseNote%2Frn-cloudcanal-3-3-3-0%23%25E6%2596%25B0%25E7%2589%25B9%25E6%2580%25A7" target="_blank">​</a></h2><ul><li>支持 MySQL &lt;-&gt; Tunnel &lt;-&gt; MySQL 雙向同步，包括增、刪、改操作 (不包括 DDL), 此能力為 MySQL 雙向同步增強版本，兩端數據庫均可不開公網地址</li><li>支持<span>&nbsp;阿里雲全託管 SelectDB</span></li><li>支持 StarRocks、Doris、SelectDB、Oracle、MariaDB 對端全量前清除數據能力，方便用戶重新遷移同步數據</li><li>支持 MySQL、OceanBase、TiDB、StarRocks、Doris、SelectDB、Oracle、MariaDB 對端創建任務或修改訂閲重建對端表</li><li>支持 MySQL -&gt; TiDB/OceanBase 鏈路同步 Online DDL 工具語句</li><li>支持，任務詳情 &gt; 更多功能 &gt; 修改任務配置，包括全量前清除對端數據開關、創建任務時重建對端表開關、修改定時全量/增量 Java Cron 表達式</li><li>支持 MySQL -&gt; MySQL 創建任務第二步可勾選 DROP 操作</li><li>支持，任務告警按時間段關閉</li><li>支持，創建任務篩選表可以批量篩選，即選表頁面可粘貼 table1;table2;table3;...tableN 進行搜索並自動勾選，解決用戶創建任務選表複雜問題</li><li>支持，任務批量調度到另外一台機器，提高手動任務調度效率</li><li>支持 CloudCanal 顯示 LicenseID，方便後續用戶對照 license 到期提醒信息</li></ul><h2>優化<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FreleaseNote%2Frn-cloudcanal-3-3-3-0%23%25E4%25BC%2598%25E5%258C%2596" target="_blank">​</a></h2><ul><li>優化<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FdataMigrationAndSync%2Fconnection%2Fredis2" target="_blank">Redis &lt;-&gt; Redis</a><span>&nbsp;</span>雙向同步防循環策略，且支持更多指令雙向同步防循環</li><li>優化<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FdataMigrationAndSync%2Fconnection%2Fredis2" target="_blank">Redis -&gt; Redis</a><span>&nbsp;</span>數據初始化能力，包括 Set、ZSet、List 類型數據初始化</li><li>優化<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FdataMigrationAndSync%2Fconnection%2Fredis2" target="_blank">Redis -&gt; Redis</a><span>&nbsp;</span>指令集 Rename、Incr、Incrby、Hsetnx、Hmset、Lpush、Rpush、Lset、Sadd、Zadd、Zrem、Zremrangebyscore</li><li>優化 Kafka Debezium Json 支持 Bytes 類型（具體參考：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2Freference%2Fdebezium_json_notice" target="_blank">源端 Kafka Debezium Json 使用説明</a><span>&nbsp;</span>）</li><li>優化 TiDB 作為源端 Stub 超時處理邏輯，將超時被動上報調整為主動上報，實現任務不重啓，重新訂閲 Region</li><li>優化 TiDB 作為源端獲取表信息方案，大幅度優化獲取多表信息的速度</li><li>優化 TiDB 作為源端維護多版本表結構的策略，實現主動清理過期的表結構</li><li>優化 TiDB 作為源端 DML 事件 sink 條件，使得 DDL 與 DML 消費更有序，降低數據不一致的風險</li><li>優化 TiDB 作為源端 Error 事件的處理方案，降低 Region 增量掃消費時間</li><li>優化 TiDB 作為源端性能指標圖，新增 5 個指標（ CDC 提交事件總數、10 秒內 Region 異常總數、10 秒內 Region 活躍總數、任務增量掃階段 Region 總數、Region 總數）</li><li>優化 MariaDB -&gt; Oracle、Oracle -&gt; Oracle 使用新版本結構遷移</li><li>優化 PostgreSQL/MySQL -&gt; StarRocks Json 類型字段同步（優化映射規則）</li><li>優化，修改訂閲時規則映射只應用到新增表</li><li>優化，修改訂閲頁面防止重複點擊</li><li>優化 CloudCanal 未激活時無法顯示控制枱監控信息，方便用戶在未激活狀態下查看當前 Console 狀態</li></ul><h2>問題修復<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FreleaseNote%2Frn-cloudcanal-3-3-3-0%23%25E9%2597%25AE%25E9%25A2%2598%25E4%25BF%25AE%25E5%25A4%258D" target="_blank">​</a></h2><ul><li>修復 Hana 源端表字段過多，導致創建觸發器報錯問題</li><li>修復 Hana 無主鍵表創建任務報錯的問題</li><li>修復 Hana 小寫 Schema/Table/Column 創建任務報錯的問題</li><li>修復 Hana 增量同步無主鍵表重複插入數據的問題</li><li>修復 Hana 源端刪除任務時導致多次訂閲表的觸發器被誤刪除的問題</li><li>修復 Hana 源端增量階段數據中存在特殊字符而導致的解析報錯問題</li><li>修復，數據校驗任務頁面顯示丟失、不一致和實際不相符的問題</li><li>修復 SQL Server 增量同步 LSN 位點排序時被修改而導致的同步中斷問題</li><li>修復 TiDB 作為源端大表多 Region 訂閲導致的超時問題，支持設置超時時間</li><li>修復 TiDB 作為源端任務位點小於 GC 安全點導致的數據不一致問題</li><li>修復 TiDB 作為源端 Create Database ... 等非同步業務 DDL 導致的解析異常問題</li><li>修復 TiDB 源端 v6.5.0 以上版本因時間精度導致的增量 GC 安全點檢測報錯的問題</li><li>修復 MySQL -&gt; Doris 結構遷移註釋未同步到對端的問題</li><li>修復 MySQL -&gt; StarRocks DDL 新增列默認值丟失的問題</li><li>修復 MySQL -&gt; StarRocks DDL 修改列屬性中帶有 Not Null 導致同步失敗的問題</li><li>修復 MySQL -&gt; StarRocks DDL 新增 Text 類型字段同步失敗的問題</li><li>修復 MySQL -&gt; Oracle 表映射無效的問題</li><li>修復 PostgreSQL -&gt; MySQL 修改訂閲對同一張表進行多次加/減操作，導致任務報錯的問題</li><li>修復，任務重跑之後增量位點沒有重置的問題</li><li>修復 Oracle 對端只有外網 Host 情況下，無法刪除任務的問題</li><li>修復 Oracle -&gt; Oracle Schema 不存在映射的情況下修改訂閲或創建相似任務默認設置目標端 Schema 為 Public 的問題</li><li>修復 Kafka/MQ -&gt; MySQL 創建任務頁面中消息結構展示與實際選擇不一致的問題</li><li>修復 PostgreSQL -&gt; StarRocks 修改訂閲原映射關係失效的問題</li><li>修復，結構遷移任務創建相似任務報錯的問題</li><li>修復，重置文件位點時，時間位點改變不正確的問題</li></ul><h2>免費下載與使用</h2><ul><li>快速上手：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2Fquick%2Fquick_start" target="_blank">https://www.clougence.com/cc-doc/quick/quick_start</a></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 08:43:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274002/cloudcanal-3-3-3-0-released</guid>
            <link>https://www.oschina.net/news/274002/cloudcanal-3-3-3-0-released</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[🎉 通用、靈活、高性能分佈式 ID 生成器 | CosId 2.6.4 發佈]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CosId Logo" height="206" src="https://oscimg.oschina.net/oscnet/up-63e6250bd72c3e4d2dde12bc154ad9f06d2.png" width="300" referrerpolicy="no-referrer"></p><h1>CosId<span>&nbsp;</span>通用、靈活、高性能分佈式 ID 生成器</h1><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/link?target=https%3A%2F%2Fwww.apache.org%2Flicenses%2FLICENSE-2.0.html"><img alt="License" src="https://img.shields.io/badge/license-Apache%202-4EB1BA.svg" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId%2Freleases"><img alt="GitHub release" src="https://img.shields.io/github/release/Ahoo-Wang/CosId.svg" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fapp.codacy.com%2Fgh%2FAhoo-Wang%2FCosId%3Futm_source%3Dgithub.com%26utm_medium%3Dreferral%26utm_content%3DAhoo-Wang%2FCosId%26utm_campaign%3DBadge_Grade_Settings"><img alt="Codacy Badge" src="https://api.codacy.com/project/badge/Grade/dfd1d6237a1644409548ebfbca300dc1" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fcodecov.io%2Fgh%2FAhoo-Wang%2FCosId"><img alt="codecov" src="https://codecov.io/gh/Ahoo-Wang/CosId/branch/main/graph/badge.svg?token=L0N51NB7ET" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><img alt="Integration Test Status" src="https://github.com/Ahoo-Wang/CosId/actions/workflows/integration-test.yml/badge.svg" referrerpolicy="no-referrer"></p><h2>更新內容</h2><blockquote><p style="margin-left:0; margin-right:0"><strong>全新的</strong><em>官方文檔</em><span>&nbsp;</span>發佈！<img alt="🎉" height="14" src="https://cn-assets.gitee.com/assets/emoji/tada-be741eadd68f6c33355db4b50a6c141b.png" width="14" referrerpolicy="no-referrer"><span>&nbsp;</span><img alt="👉" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_right-8d392cf32998e3bca12bb7b4ee10dae0.png" width="14" referrerpolicy="no-referrer"><span>&nbsp;</span><a href="https://ahoowang.gitee.io/cosid/" target="_blank">https://ahoowang.gitee.io/cosid/</a><span>&nbsp;</span><img alt="👈" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_left-4570b6929b8880ab2e8b8031007fef18.png" width="14" referrerpolicy="no-referrer"></p></blockquote><ul><li>特性 (doc): 使用<span>&nbsp;</span><em>VitePress</em><span>&nbsp;</span>替換<span>&nbsp;</span><em>VuePress</em><span>&nbsp;</span>作為靜態文檔站點生成器</li><li>依賴: 升級<span>&nbsp;</span><code>dependency org.springframework.boot:spring-boot-dependencies</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v3.2.1</code></li><li>依賴: 升級<span>&nbsp;</span><code>com.google.guava:guava</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v33</code></li><li>依賴: 升級<span>&nbsp;</span><code>com.github.spotbugs</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v6.0.4</code></li><li>依賴 (擴展): 升級<span>&nbsp;</span><code>org.axonframework:axon-bom</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v4.9.2</code></li><li>依賴 (擴展): 升級<span>&nbsp;</span><code>org.mybatis:mybatis</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v3.5.15</code></li></ul><h2>簡介</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId">CosId</a></em><span>&nbsp;</span>旨在提供通用、靈活、高性能的分佈式 ID 生成器。</p><ul><li><code>CosIdGenerator</code><span>&nbsp;</span>:<span>&nbsp;</span><em>單機 TPS 性能：1557W/s</em>，三倍於<span>&nbsp;</span><code>UUID.randomUUID()</code>，基於時鐘的全局趨勢遞增 ID。</li><li><code>SnowflakeId</code><span>&nbsp;</span>:<span>&nbsp;</span><em>單機 TPS 性能：409W/s</em><span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fcosid.ahoo.me%2Fguide%2Fperf-test.html">JMH 基準測試</a><span>&nbsp;</span>, 主要解決<span>&nbsp;</span><em>時鐘回撥問題</em><span>&nbsp;</span>、<em>機器號分配問題</em>、<em>取模分片不均勻問題</em><span>&nbsp;</span>並且提供更加友好、靈活的使用體驗。</li><li><code>SegmentId</code>: 每次獲取一段 (<code>Step</code>) ID，來降低號段分發器的網絡 IO 請求頻次提升性能。 
  <ul><li><code>IdSegmentDistributor</code>: 號段分發器（號段存儲器） 
    <ul><li><code>RedisIdSegmentDistributor</code>: 基於<span>&nbsp;</span><em>Redis</em><span>&nbsp;</span>的號段分發器。</li><li><code>JdbcIdSegmentDistributor</code>: 基於<span>&nbsp;</span><em>Jdbc</em><span>&nbsp;</span>的號段分發器，支持各種關係型數據庫。</li><li><code>ZookeeperIdSegmentDistributor</code>: 基於<span>&nbsp;</span><em>Zookeeper</em><span>&nbsp;</span>的號段分發器。</li><li><code>MongoIdSegmentDistributor</code>: 基於<span>&nbsp;</span><em>MongoDB</em><span>&nbsp;</span>的號段分發器。</li></ul></li></ul></li><li><code>SegmentChainId</code>(<strong>推薦</strong>):<code>SegmentChainId</code><span>&nbsp;</span>(<em>lock-free</em>) 是對<span>&nbsp;</span><code>SegmentId</code><span>&nbsp;</span>的增強。性能可達到近似<span>&nbsp;</span><code>AtomicLong</code><span>&nbsp;</span>的<span>&nbsp;</span><em>TPS 性能:12743W+/s</em><span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fcosid.ahoo.me%2Fguide%2Fperf-test.html">JMH 基準測試</a><span>&nbsp;</span>。 
  <ul><li><code>PrefetchWorker</code><span>&nbsp;</span>維護安全距離 (<code>safeDistance</code>), 並且支持基於飢餓狀態的動態<code>safeDistance</code>擴容/收縮。</li></ul></li></ul><h2><a href="https://ahoowang.gitee.io/cosid/guide/getting-started.html">快速開始</a></h2><h2>背景（為什麼需要<em>分佈式 ID</em>）</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">在軟件系統演進過程中，隨着業務規模的增長 (TPS / 存儲容量)，我們需要通過集羣化部署來分攤計算、存儲壓力。 應用服務的無狀態設計使其具備了伸縮性。在使用<span>&nbsp;</span><strong>Kubernetes</strong><span>&nbsp;</span>部署時我們只需要一行命令即可完成服務伸縮 (<code>kubectl scale --replicas=5 deployment/order-service</code>)。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">但對於有狀態的數據庫就不那麼容易了，此時數據庫變成系統的性能瓶頸是顯而易見的。</p><h3>分庫分表</h3><blockquote><p style="margin-left:0; margin-right:0">從微服務的角度來理解垂直拆分其實就是微服務拆分。以限界上下文來定義服務邊界將大服務 / 單體應用拆分成多個自治的粒度更小的服務，因為自治性規範要求，數據庫也需要進行業務拆分。 但垂直拆分後的單個微服務依然會面臨 TPS / 存儲容量，的挑戰，所以這裏我們重點討論水平拆分的方式。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="分庫分表" src="https://oscimg.oschina.net/oscnet/up-bf3f59559837c87fe828f12113f2ec6269c.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">數據庫分庫分表方案是邏輯統一，物理分區自治的方案。其核心設計在於中間層映射方案的設計 (上圖<span>&nbsp;</span><strong>Mapping</strong>)，即分片算法的設計。 幾乎所有編程語言都內置實現了散列表 (java:<code>HashMap</code>/csharp:<code>Dictionary</code>/python:<code>dict</code>/go:<code>map</code><span>&nbsp;</span>...)。分片算法跟散列表高度相似 (<code>hashCode</code>)，都得通過<span>&nbsp;</span><code>key</code>/<code>shardingValue</code><span>&nbsp;</span>映射到對應的槽位 (<code>slot</code>)。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">那麼<span>&nbsp;</span><code>shardingValue</code><span>&nbsp;</span>從哪裏來呢？<strong>CosId</strong>！！</p><blockquote><p style="margin-left:0; margin-right:0">當然還有很多分佈式場景需要<em>分佈式 ID</em>，這裏不再一一列舉。</p></blockquote><h2>分佈式 ID 方案的核心指標</h2><ul><li><strong>全局（相同業務）唯一性</strong>：唯一性保證是<span>&nbsp;</span><strong>ID</strong><span>&nbsp;</span>的必要條件，假設 ID 不唯一就會產生主鍵衝突，這點很容易可以理解。 
  <ul><li>通常所説的全局唯一性並不是指所有業務服務都要唯一，而是相同業務服務不同部署副本唯一。 比如 Order 服務的多個部署副本在生成<span>&nbsp;</span><code>t_order</code><span>&nbsp;</span>這張表的<span>&nbsp;</span><code>Id</code><span>&nbsp;</span>時是要求全局唯一的。至於<span>&nbsp;</span><code>t_order_item</code><span>&nbsp;</span>生成的<span>&nbsp;</span><code>ID</code><span>&nbsp;</span>與<span>&nbsp;</span><code>t_order</code><span>&nbsp;</span>是否唯一，並不影響唯一性約束，也不會產生什麼副作用。 不同業務模塊間也是同理。即唯一性主要解決的是 ID 衝突問題。</li></ul></li><li><strong>有序性</strong>：有序性保證是面向查詢的數據結構算法（除了 Hash 算法）所必須的，是<strong>二分查找法</strong><span>&nbsp;</span>(分而治之) 的前提。 
  <ul><li>MySq-InnoDB B + 樹是使用最為廣泛的，假設 Id 是無序的，B+ 樹，為了維護 ID 的有序性，就會頻繁的在索引的中間位置插入而挪動後面節點的位置，甚至導致頻繁的頁分裂，這對於性能的影響是極大的。那麼如果我們能夠保證 ID 的有序性這種情況就完全不同了，只需要進行追加寫操作。所以 ID 的有序性是非常重要的，也是 ID 設計不可避免的特性。</li></ul></li><li><strong>吞吐量 / 性能 (ops/time)</strong>：即單位時間（每秒）能產生的 ID 數量。生成 ID 是非常高頻的操作，也是最為基本的。假設 ID 生成的性能緩慢，那麼不管怎麼進行系統優化也無法獲得更好的性能。 
  <ul><li>一般我們會首先生成 ID，然後再執行寫入操作，假設 ID 生成緩慢，那麼整體性能上限就會受到限制，這一點應該不難理解。</li></ul></li><li><strong>穩定性 (time/op)</strong>：穩定性指標一般可以採用<strong>每個操作的時間進行百分位採樣</strong>來分析，比如<span>&nbsp;</span><em><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId">CosId</a></em><span>&nbsp;</span>百分位採樣<span>&nbsp;</span><strong>P9999=0.208 us/op</strong>，即<span>&nbsp;</span><strong>0% ~ 99.99%</strong><span>&nbsp;</span>的單位操作時間小於等於<span>&nbsp;</span><strong>0.208 us/op</strong>。 
  <ul><li><a href="https://gitee.com/link?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E7%2599%25BE%25E5%2588%2586%25E4%25BD%258D%25E6%2595%25B0">百分位數 WIKI</a><span>&nbsp;</span>：統計學術語，若將一組數據從小到大排序，並計算相應的累計百分點，則某百分點所對應數據的值，就稱為這百分點的百分位數，以 Pk 表示第 k 百分位數。百分位數是用來比較個體在羣體中的相對地位量數。</li><li>為什麼不用平均<em>每個操作的時間</em>：馬老師的身價跟你的身價能平均麼？平均後的值有意義不？</li><li>可以使用最小<em>每個操作的時間</em>、最大<em>每個操作的時間</em>作為參考嗎？因為最小、最大值只説明瞭零界點的情況，雖説可以作為穩定性的參考，但依然不夠全面。而且<em>百分位數</em>已經覆蓋了這倆個指標。</li></ul></li><li><strong>自治性（依賴）</strong>：主要是指對外部環境有無依賴，比如<strong>號段模式</strong>會強依賴第三方存儲中間件來獲取<span>&nbsp;</span><code>NexMaxId</code>。自治性還會對可用性造成影響。</li><li><strong>可用性</strong>：分佈式 ID 的可用性主要會受到自治性影響，比如<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>會受到時鐘回撥影響，導致處於短暫時間的不可用狀態。而<strong>號段模式</strong>會受到第三方發號器（<code>NexMaxId</code>）的可用性影響。 
  <ul><li><a href="https://gitee.com/link?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%258F%25AF%25E7%2594%25A8%25E6%2580%25A7">可用性 WIKI</a><span>&nbsp;</span>：在一個給定的時間間隔內，對於一個功能個體來講，總的可用時間所佔的比例。</li><li>MTBF：平均故障間隔</li><li>MDT：平均修復 / 恢復時間</li><li>Availability=MTBF/(MTBF+MDT)</li><li>假設 MTBF 為 1 年，MDT 為 1 小時，即<span>&nbsp;</span><code>Availability=(365*24)/(365*24+1)=0.999885857778792≈99.99%</code>，也就是我們通常所説對可用性 4 個 9。</li></ul></li><li><strong>適應性</strong>：是指在面對外部環境變化的自適應能力，這裏我們主要説的是面對流量突發時動態伸縮分佈式 ID 的性能， 
  <ul><li><strong>SegmentChainId</strong><span>&nbsp;</span>可以基於<strong>飢餓狀態</strong>進行<strong>安全距離</strong>的動態伸縮。</li><li><strong>SnowflakeId</strong><span>&nbsp;</span>常規位分配方案性能恆定 409.6W，雖然可以通過調整位分配方案來獲得不同的 TPS 性能，但是位分配方法的變更是破壞性的，一般根據業務場景確定位分配方案後不再變更。</li></ul></li><li><strong>存儲空間</strong>：還是用 MySq-InnoDB B + 樹來舉例，普通索引（二級索引）會存儲主鍵值，主鍵越大佔用的內存緩存、磁盤空間也會越大。Page 頁存儲的數據越少，磁盤 IO 訪問的次數會增加。總之在滿足業務需求的情況下，儘可能小的存儲空間佔用在絕大多數場景下都是好的設計原則。</li></ul><h3>不同分佈式 ID 方案核心指標對比</h3><table cellspacing="0" style="--darkreader-inline-bgcolor:#181a1b; --darkreader-inline-border-bottom:currentcolor; --darkreader-inline-border-left:currentcolor; --darkreader-inline-border-right:currentcolor; --darkreader-inline-border-top:currentcolor; --darkreader-inline-color:#b7b1a7; -webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; border:medium none; box-sizing:border-box; color:#40485b; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Liberation Sans&quot;,&quot;PingFang SC&quot;,&quot;Microsoft YaHei&quot;,&quot;Hiragino Sans GB&quot;,&quot;Wenquanyi Micro Hei&quot;,&quot;WenQuanYi Zen Hei&quot;,&quot;ST Heiti&quot;,SimHei,SimSun,&quot;WenQuanYi Zen Hei Sharp&quot;,sans-serif; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; line-height:inherit; margin:0px 0px 16px; max-width:100%; orphans:2; overflow:auto; text-align:left; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; word-break:initial; word-spacing:0px"><tbody><tr><th>分佈式 ID</th><th>全局唯一性</th><th>有序性</th><th>吞吐量</th><th>穩定性（1s=1000,000us）</th><th>自治性</th><th>可用性</th><th>適應性</th><th>存儲空間</th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">UUID/GUID</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">完全無序</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">3078638(ops/s)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">P9999=0.325(us/op)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">完全自治</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">100%</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">否</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">128-bit</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">SnowflakeId</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">本地單調遞增，全局趨勢遞增 (受全局時鐘影響)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">4096000(ops/s)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">P9999=0.244(us/op)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">依賴時鐘</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">時鐘回撥會導致短暫不可用</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">否</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">64-bit</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">SegmentId</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">本地單調遞增，全局趨勢遞增 (受 Step 影響)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">29506073(ops/s)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">P9999=46.624(us/op)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">依賴第三方號段分發器</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">受號段分發器可用性影響</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">否</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">64-bit</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">SegmentChainId</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">本地單調遞增，全局趨勢遞增 (受 Step、安全距離影響)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">127439148(ops/s)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">P9999=0.208(us/op)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">依賴第三方號段分發器</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">受號段分發器可用性影響，但因安全距離存在，預留 ID 段，所以高於 SegmentId</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">64-bit</td></tr></tbody></table><h3>有序性 (要想分而治之・二分查找法，必須要維護我)</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">剛剛我們已經討論了 ID 有序性的重要性，所以我們設計 ID 算法時應該儘可能地讓 ID 是單調遞增的，比如像表的自增主鍵那樣。但是很遺憾，因全局時鐘、性能等分佈式系統問題，我們通常只能選擇局部單調遞增、全局趨勢遞增的組合（就像我們在分佈式系統中不得不的選擇最終一致性那樣）以獲得多方面的權衡。下面我們來看一下什麼是單調遞增與趨勢遞增。</p><h4>有序性之單調遞增</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="單調遞增" src="https://oscimg.oschina.net/oscnet/up-8ba6ce51f3f87c5ad8768ebf6ef32e854d9.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">單調遞增：T 表示全局絕對時點，假設有 Tn+1&gt;Tn（絕對時間總是往前進的，這裏不考慮相對論、時間機器等），那麼必然有 F (Tn+1)&gt;F (Tn)，數據庫自增主鍵就屬於這一類。 另外需要特別説明的是單調遞增跟連續性遞增是不同的概念。 連續性遞增：<code>F(n+1)=(F(n)+step)</code><span>&nbsp;</span>即下一次獲取的 ID 一定等於當前<span>&nbsp;</span><code>ID+Step</code>，當<span>&nbsp;</span><code>Step=1</code><span>&nbsp;</span>時類似於這樣一個序列:<code>1-&gt;2-&gt;3-&gt;4-&gt;5</code>。</p><blockquote><p style="margin-left:0; margin-right:0">擴展小知識：數據庫的自增主鍵也不是連續性遞增的，相信你一定遇到過這種情況，請思考一下數據庫為什麼這樣設計？</p></blockquote><h4>有序性之趨勢遞增</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="趨勢遞增" src="https://oscimg.oschina.net/oscnet/up-c1c18e3548c373db0f634c1d0183739b41b.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">趨勢遞增：Tn&gt;Tn-s，那麼大概率有 F (Tn)&gt;F (Tn-s)。雖然在一段時間間隔內有亂序，但是整體趨勢是遞增。從上圖上看，是有上升趨勢的（趨勢線）。</p><ul><li>在<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>中 n-s 受到全局時鐘同步影響。</li><li>在號段模式 (<strong>SegmentId</strong>) 中 n-s 受到號段可用區間 (<code>Step</code>) 影響。</li></ul><h2>分佈式 ID 分配方案</h2><h3>UUID/GUID</h3><ul><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer">不依賴任何第三方中間件</li><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer">性能高</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">完全無序</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">空間佔用大，需要佔用 128 位存儲空間。</li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">UUID 最大的缺陷是隨機的、無序的，當用於主鍵時會導致數據庫的主鍵索引效率低下（為了維護索引樹，頻繁的索引中間位置插入數據，而不是追加寫）。這也是 UUID 不適用於數據庫主鍵的最為重要的原因。</p><h3>SnowflakeId</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Snowflake 雪花算法" src="https://oscimg.oschina.net/oscnet/up-8d58346c8e62fdd525df8ed4bc1b1458710.png" referrerpolicy="no-referrer"></p><blockquote><p style="margin-left:0; margin-right:0"><em>SnowflakeId</em><span>&nbsp;</span>使用<span>&nbsp;</span><code>Long</code>（64-bit）位分區來生成 ID 的一種分佈式 ID 算法。 通用的位分配方案為：<code>timestamp</code>(41-bit)+<code>machineId</code>(10-bit)+<code>sequence</code>(12-bit)=63-bit。</p></blockquote><ul><li>41-bit<code>timestamp</code>=(1L&lt;&lt;41)/(1000/3600/365)，約可以存儲 69 年的時間戳，即可以使用的絕對時間為<span>&nbsp;</span><code>EPOCH</code>+69 年，一般我們需要自定義<span>&nbsp;</span><code>EPOCH</code><span>&nbsp;</span>為產品開發時間，另外還可以通過壓縮其他區域的分配位數，來增加時間戳位數來延長可用時間。</li><li>10-bit<code>machineId</code>=(1L&lt;&lt;10)=1024，即相同業務可以部署 1024 個副本 (在 Kubernetes 概念裏沒有主從副本之分，這裏直接沿用 Kubernetes 的定義)。一般情況下沒有必要使用這麼多位，所以會根據部署規模需要重新定義。</li><li>12-bit<code>sequence</code>=(1L&lt;&lt;12)*1000=4096000，即單機每秒可生成約 409W 的 ID，全局同業務集羣可產生<span>&nbsp;</span><code>4096000*1024=419430W=41.9 億 (TPS)</code>。</li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">從<span>&nbsp;</span><em>SnowflakeId</em><span>&nbsp;</span>設計上可以看出:</p><ul><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer"><code>timestamp</code><span>&nbsp;</span>在高位，單實例<span>&nbsp;</span><em>SnowflakeId</em><span>&nbsp;</span>是會保證時鐘總是向前的（校驗本機時鐘回撥），所以是本機單調遞增的。受全局時鐘同步 / 時鐘回撥影響<span>&nbsp;</span><em>SnowflakeId</em><span>&nbsp;</span>是全局趨勢遞增的。</li><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer"><em>SnowflakeId</em><span>&nbsp;</span>不對任何第三方中間件有強依賴關係，並且性能也非常高。</li><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer">位分配方案可以按照業務系統需要靈活配置，來達到最優使用效果。</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">強依賴本機時鐘，潛在的時鐘回撥問題會導致 ID 重複、處於短暫的不可用狀態。</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer"><code>machineId</code><span>&nbsp;</span>需要手動設置，實際部署時如果採用手動分配<span>&nbsp;</span><code>machineId</code>，會非常低效。</li></ul><h4>SnowflakeId 之機器號分配問題</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">在<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>中根據業務設計的位分配方案確定了基本上就不再有變更了，也很少需要維護。但是<span>&nbsp;</span><code>machineId</code><span>&nbsp;</span>總是需要配置的，而且集羣中是不能重複的，否則分區原則就會被破壞而導致 ID 唯一性原則破壞，當集羣規模較大時<span>&nbsp;</span><code>machineId</code><span>&nbsp;</span>的維護工作是非常繁瑣，低效的。</p><blockquote><p style="margin-left:0; margin-right:0">有一點需要特別説明的，<strong>SnowflakeId</strong><span>&nbsp;</span>的<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>是邏輯上的概念，而不是物理概念。 想象一下假設<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>是物理上的，那麼意味着一台機器擁有隻能擁有一個<span>&nbsp;</span><strong>MachineId</strong>，那會產生什麼問題呢？</p></blockquote><blockquote><p style="margin-left:0; margin-right:0">目前<span>&nbsp;</span><em><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId">CosId</a></em><span>&nbsp;</span>提供了以下五種<span>&nbsp;</span><code>MachineId</code><span>&nbsp;</span>分配器。</p></blockquote><ul><li>ManualMachineIdDistributor: 手動配置<span>&nbsp;</span><code>machineId</code>，一般只有在集羣規模非常小的時候才有可能使用，不推薦。</li><li>StatefulSetMachineIdDistributor: 使用<span>&nbsp;</span><code>Kubernetes</code><span>&nbsp;</span>的<span>&nbsp;</span><code>StatefulSet</code><span>&nbsp;</span>提供的穩定的標識 ID（HOSTNAME=service-01）作為機器號。</li><li>RedisMachineIdDistributor: 使用<span>&nbsp;</span><strong>Redis</strong><span>&nbsp;</span>作為機器號的分發存儲，同時還會存儲<span>&nbsp;</span><code>MachineId</code><span>&nbsp;</span>的上一次時間戳，用於<strong>啓動時時鐘回撥</strong>的檢查。</li><li>JdbcMachineIdDistributor: 使用<strong>關係型數據庫</strong>作為機器號的分發存儲，同時還會存儲<span>&nbsp;</span><code>MachineId</code><span>&nbsp;</span>的上一次時間戳，用於<strong>啓動時時鐘回撥</strong>的檢查。</li><li>ZookeeperMachineIdDistributor: 使用<span>&nbsp;</span><strong>ZooKeeper</strong><span>&nbsp;</span>作為機器號的分發存儲，同時還會存儲<span>&nbsp;</span><code>MachineId</code><span>&nbsp;</span>的上一次時間戳，用於<strong>啓動時時鐘回撥</strong>的檢查。</li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Redis MachineId Distributor" src="https://oscimg.oschina.net/oscnet/up-e5966f62f7f64aff097899743596a6ca385.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Machine Id Safe Guard" src="https://oscimg.oschina.net/oscnet/up-ce3a0238995e354fa22e1d7fcdb5f0e13c1.png" referrerpolicy="no-referrer"></p><h4>SnowflakeId 之時鐘回撥問題</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">時鐘回撥的致命問題是會導致 ID 重複、衝突（這一點不難理解），ID 重複顯然是不能被容忍的。 在<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>算法中，按照<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>分區 ID，我們不難理解的是不同<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>是不可能產生相同 ID 的。所以我們解決的時鐘回撥問題是指當前<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>的時鐘回撥問題，而不是所有集羣節點的時鐘回撥問題。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong>MachineId</strong><span>&nbsp;</span>時鐘回撥問題大體可以分為倆種情況：</p><ul><li>運行時時鐘回撥：即在運行時獲取的當前時間戳比上一次獲取的時間戳小。這個場景的時鐘回撥是很容易處理的，一般<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>代碼實現時都會存儲<span>&nbsp;</span><code>lastTimestamp</code><span>&nbsp;</span>用於運行時時鐘回撥的檢查，並拋出時鐘回撥異常。 
  <ul><li>時鐘回撥時直接拋出異常是不太好地實踐，因為下游使用方几乎沒有其他處理方案（噢，我還能怎麼辦呢，等吧），時鐘同步是唯一的選擇，當只有一種選擇時就不要再讓用戶選擇了。</li><li><code>ClockSyncSnowflakeId</code><span>&nbsp;</span>是<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>的包裝器，當發生時鐘回撥時會使用<span>&nbsp;</span><code>ClockBackwardsSynchronizer</code><span>&nbsp;</span>主動等待時鐘同步來重新生成 ID，提供更加友好的使用體驗。</li></ul></li><li>啓動時時鐘回撥：即在啓動服務實例時獲取的當前時鐘比上次關閉服務時小。此時的<span>&nbsp;</span><code>lastTimestamp</code><span>&nbsp;</span>是無法存儲在進程內存中的。當獲取的外部存儲的<strong>機器狀態</strong>大於當前時鐘時鐘時，會使用<span>&nbsp;</span><code>ClockBackwardsSynchronizer</code><span>&nbsp;</span>主動同步時鐘。 
  <ul><li>LocalMachineStateStorage：使用本地文件存儲<span>&nbsp;</span><code>MachineState</code>(機器號、最近一次時間戳)。因為使用的是本地文件所以只有當實例的部署環境是穩定的，<code>LocalMachineStateStorage</code><span>&nbsp;</span>才適用。</li><li>RedisMachineIdDistributor：將<span>&nbsp;</span><code>MachineState</code><span>&nbsp;</span>存儲在<span>&nbsp;</span><strong>Redis</strong><span>&nbsp;</span>分佈式緩存中，這樣可以保證總是可以獲取到上次服務實例停機時<strong>機器狀態</strong>。</li></ul></li></ul><h4>SnowflakeId 之 JavaScript 數值溢出問題</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><code>JavaScript</code><span>&nbsp;</span>的<span>&nbsp;</span><code>Number.MAX_SAFE_INTEGER</code><span>&nbsp;</span>只有 53-bit，如果直接將 63 位的<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>返回給前端，那麼會產生值溢出的情況（所以這裏我們應該知道後端傳給前端的<span>&nbsp;</span><code>long</code><span>&nbsp;</span>值溢出問題，<strong>遲早</strong>會出現，只不過 SnowflakeId 出現得更快而已）。 很顯然溢出是不能被接受的，一般可以使用以下倆種處理方案：</p><ul><li>將生成的 63-bit<code>SnowflakeId</code><span>&nbsp;</span>轉換為<span>&nbsp;</span><code>String</code><span>&nbsp;</span>類型。 
  <ul><li>直接將<span>&nbsp;</span><code>long</code><span>&nbsp;</span>轉換成<span>&nbsp;</span><code>String</code>。</li><li>使用<span>&nbsp;</span><code>SnowflakeFriendlyId</code><span>&nbsp;</span>將<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>轉換成比較友好的字符串表示：<code>{timestamp}-{machineId}-{sequence} -&gt; 20210623131730192-1-0</code></li></ul></li><li>自定義<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>位分配來縮短<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>的位數（53-bit）使<span>&nbsp;</span><code>ID</code><span>&nbsp;</span>提供給前端時不溢出 
  <ul><li>使用<span>&nbsp;</span><code>SafeJavaScriptSnowflakeId</code>(<code>JavaScript</code><span>&nbsp;</span>安全的<span>&nbsp;</span><code>SnowflakeId</code>)</li></ul></li></ul><h2>號段模式（SegmentId）</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Segment Id" src="https://oscimg.oschina.net/oscnet/up-d91b5939ccc673f26ccdcfbbd9e6aa68535.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">從上面的設計圖中，不難看出<strong>號段模式</strong>基本設計思路是通過每次獲取一定長度（Step）的可用 ID（Id 段 / 號段），來降低網絡 IO 請求次數，提升性能。</p><ul><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">強依賴第三方號段分發器，可用性受到第三方分發器影響。</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">每次號段用完時獲取<span>&nbsp;</span><code>NextMaxId</code><span>&nbsp;</span>需要進行網絡 IO 請求，此時的性能會比較低。</li><li>單實例 ID 單調遞增，全局趨勢遞增。 
  <ul><li>從設計圖中不難看出<span>&nbsp;</span><strong>Instance 1</strong><span>&nbsp;</span>每次獲取的<span>&nbsp;</span><code>NextMaxId</code>，一定比上一次大，意味着下一次的號段一定比上一次大，所以從單實例上來看是單調遞增的。</li><li>多實例各自持有的不同的號段，意味着同一時刻不同實例生成的 ID 是亂序的，但是整體趨勢的遞增的，所以全局趨勢遞增。</li></ul></li><li>ID 亂序程度受到 Step 長度以及集羣規模影響（從趨勢遞增圖中不難看出）。 
  <ul><li>假設集羣中只有一個實例時<strong>號段模式</strong>就是單調遞增的。</li><li><code>Step</code><span>&nbsp;</span>越小，亂序程度越小。當<span>&nbsp;</span><code>Step=1</code><span>&nbsp;</span>時，將無限接近單調遞增。需要注意的是這裏是無限接近而非等於單調遞增，具體原因你可以思考一下這樣一個場景： 
    <ul><li>號段分發器 T1 時刻給<span>&nbsp;</span><strong>Instance 1</strong><span>&nbsp;</span>分發了<span>&nbsp;</span><code>ID=1</code>,T2 時刻給<span>&nbsp;</span><strong>Instance 2</strong><span>&nbsp;</span>分發了<span>&nbsp;</span><code>ID=2</code>。因為機器性能、網絡等原因，<code>Instance 2</code><span>&nbsp;</span>網絡 IO 寫請求先於<span>&nbsp;</span><code>Instance 1</code><span>&nbsp;</span>到達。那麼這個時候對於數據庫來説，ID 依然是亂序的。</li></ul></li></ul></li></ul><h2>號段鏈模式（SegmentChainId）</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/link?target=https%3A%2F%2Fcosid.ahoo.me%2Fguide%2Fsegment-chain.html">分佈式 ID (CosId) 之號段鏈模式性能 (1.2 億 /s) 解析</a></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Segment Chain Id" src="https://oscimg.oschina.net/oscnet/up-d96e7c4f91786832c1345a7228a7c012177.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong>SegmentChainId</strong><span>&nbsp;</span>是<span>&nbsp;</span><strong>SegmentId</strong><span>&nbsp;</span>增強版，相比於<span>&nbsp;</span><strong>SegmentId</strong><span>&nbsp;</span>有以下優勢：</p><ul><li>穩定性：<strong>SegmentId</strong><span>&nbsp;</span>的穩定性問題（P9999=46.624 (us/op)）主要是因為號段用完之後同步進行<span>&nbsp;</span><code>NextMaxId</code><span>&nbsp;</span>的獲取導致的（會產生網絡 IO）。 
  <ul><li><strong>SegmentChainId</strong><span>&nbsp;</span>（P9999=0.208 (us/op)）引入了新的角色<span>&nbsp;</span><strong>PrefetchWorker</strong><span>&nbsp;</span>用以維護和保證<strong>安全距離</strong>，理想情況下使得獲取 ID 的線程幾乎完全不需要進行同步的等待<span>&nbsp;</span><code>NextMaxId</code><span>&nbsp;</span>獲取，性能可達到近似<span>&nbsp;</span><code>AtomicLong</code><span>&nbsp;</span>的<span>&nbsp;</span><em>TPS 性能：12743W+/s</em><span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId%2Fblob%2Fmain%2FREADME.zh-CN.md%23jmh-benchmark">JMH 基準測試</a><span>&nbsp;</span>。</li></ul></li><li>適應性：從<span>&nbsp;</span><strong>SegmentId</strong><span>&nbsp;</span>介紹中我們知道了影響<span>&nbsp;</span><strong>ID 亂序</strong>的因素有倆個：集羣規模、<code>Step</code><span>&nbsp;</span>大小。集羣規模是我們不能控制的，但是<span>&nbsp;</span><code>Step</code><span>&nbsp;</span>是可以調節的。 
  <ul><li><code>Step</code><span>&nbsp;</span>應該近可能小才能使得<span>&nbsp;</span><strong>ID 單調遞增</strong>的可能性增大。</li><li><code>Step</code><span>&nbsp;</span>太小會影響吞吐量，那麼我們如何合理設置<span>&nbsp;</span><code>Step</code><span>&nbsp;</span>呢？答案是我們無法準確預估所有時點的吞吐量需求，那麼最好的辦法是吞吐量需求高時，Step 自動增大，吞吐量低時 Step 自動收縮。</li><li><strong>SegmentChainId</strong><span>&nbsp;</span>引入了<strong>飢餓狀態</strong>的概念，<strong>PrefetchWorker</strong><span>&nbsp;</span>會根據<strong>飢餓狀態</strong>檢測當前<strong>安全距離</strong>是否需要膨脹或者收縮，以便獲得吞吐量與有序性之間的權衡，這便是<span>&nbsp;</span><strong>SegmentChainId</strong><span>&nbsp;</span>的自適應性。</li></ul></li></ul><h2>集成</h2><h3>CosIdPlugin（MyBatis 插件）</h3><blockquote><p style="margin-left:0; margin-right:0">Kotlin DSL</p></blockquote><div><div><pre><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">implementation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span style="color:#eeeeee">(</span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">"me.ahoo.cosid:cosid-mybatis:${cosidVersion}"</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#eeeeee">)</span></span></pre></div></div><div><div><pre><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">class</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><strong><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">Order</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>{</span></span><span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">@CosId</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">(</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">value</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">=</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span>"order"</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">private</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>orderId</span><span>;</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">private</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>userId</span><span>;</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong>getOrderId</strong><span>()</span><span>{</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>orderId</span><span>;</span></span><span><span>}</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong>void</strong><strong>setOrderId</strong><span>(</span><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>orderId</span><span>)</span><span>{</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">this</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>.</span><span style="color:#008080">orderId</span><span>=</span><span>orderId</span><span>;</span></span><span><span>}</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong>getUserId</strong><span>()</span><span>{</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>userId</span><span>;</span></span><span><span>}</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong>void</strong><strong>setUserId</strong><span>(</span><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>userId</span><span>)</span><span>{</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">this</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>.</span><span style="color:#008080">userId</span><span>=</span><span>userId</span><span>;</span></span><span><span>}</span></span><span><span>}</span></span></pre></div></div><h3>ShardingSphere 插件</h3><blockquote><p style="margin-left:0; margin-right:0"><code>CosIdKeyGenerateAlgorithm</code>、<code>CosIdModShardingAlgorithm</code>、<code>CosIdIntervalShardingAlgorithm</code><span>&nbsp;</span>已合併至<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Fapache%2Fshardingsphere%2Fpull%2F14132">ShardingSphere</a><span>&nbsp;</span>官方，未來<span>&nbsp;</span><em><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId%2Ftree%2Fmain%2Fcosid-shardingsphere">cosid-shardingsphere</a></em><span>&nbsp;</span>模塊的維護可能會以官方為主。</p></blockquote><blockquote><p style="margin-left:0; margin-right:0">Kotlin DSL</p></blockquote><div><div><pre><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">implementation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span style="color:#eeeeee">(</span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">"me.ahoo.cosid:cosid-shardingsphere:${cosidVersion}"</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#eeeeee">)</span></span></pre></div></div><h4>CosIdKeyGenerateAlgorithm (分佈式主鍵)</h4><div><div><pre><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">spring</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">shardingsphere</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">rules</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">sharding</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">key-generators</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">cosid</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">type</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span><span style="background-color:transparent; color:#00aadd">COSID</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">props</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">id-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span><span style="background-color:transparent; color:#00aadd">__share__</span></span></pre></div></div><h4>基於間隔的時間範圍分片算法</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CosId Interval Sharding Algorithm" src="https://oscimg.oschina.net/oscnet/up-8afd1ee134d5b3cb656d984b86c3c26a2b9.png" referrerpolicy="no-referrer"></p><ul><li>易用性：支持多種數據類型 (<code>Long</code>/<code>LocalDateTime</code>/<code>DATE</code>/<span>&nbsp;</span><code>String</code><span>&nbsp;</span>/<span>&nbsp;</span><code>SnowflakeId</code>)，而官方實現是先轉換成字符串再轉換成<span>&nbsp;</span><code>LocalDateTime</code>，轉換成功率受時間格式化字符影響。</li><li>性能：相比於<span>&nbsp;</span><code>org.apache.shardingsphere.sharding.algorithm.sharding.datetime.IntervalShardingAlgorithm</code><span>&nbsp;</span>性能高出<span>&nbsp;</span><em>1200~4000</em><span>&nbsp;</span>倍。</li></ul><table cellspacing="0" style="--darkreader-inline-bgcolor:#181a1b; --darkreader-inline-border-bottom:currentcolor; --darkreader-inline-border-left:currentcolor; --darkreader-inline-border-right:currentcolor; --darkreader-inline-border-top:currentcolor; --darkreader-inline-color:#b7b1a7; -webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; border:medium none; box-sizing:border-box; color:#40485b; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Liberation Sans&quot;,&quot;PingFang SC&quot;,&quot;Microsoft YaHei&quot;,&quot;Hiragino Sans GB&quot;,&quot;Wenquanyi Micro Hei&quot;,&quot;WenQuanYi Zen Hei&quot;,&quot;ST Heiti&quot;,SimHei,SimSun,&quot;WenQuanYi Zen Hei Sharp&quot;,sans-serif; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; line-height:inherit; margin:0px 0px 16px; max-width:100%; orphans:2; overflow:auto; text-align:left; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; word-break:initial; word-spacing:0px"><tbody><tr><th><strong>PreciseShardingValue</strong></th><th><strong>RangeShardingValue</strong></th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px"><img alt="Throughput Of IntervalShardingAlgorithm - PreciseShardingValue" src="https://oscimg.oschina.net/oscnet/up-2a88161c2346bded68be5270064dcfc8246.png" referrerpolicy="no-referrer"></td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px"><img alt="Throughput Of IntervalShardingAlgorithm - RangeShardingValue" src="https://oscimg.oschina.net/oscnet/up-f31899cf725fa89975be9af664f80617d20.png" referrerpolicy="no-referrer"></td></tr></tbody></table><ul><li>CosIdIntervalShardingAlgorithm 
  <ul><li>type: COSID_INTERVAL</li></ul></li><li>SnowflakeIntervalShardingAlgorithm 
  <ul><li>type: COSID_INTERVAL_SNOWFLAKE</li></ul></li></ul><div><div><pre><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">spring</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">shardingsphere</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">rules</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding-algorithms</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">alg-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">type</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">COSID_INTERVAL_{type_suffix}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">props</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">logic-name-prefix</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">logic-name-prefix</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">id-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">cosid-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">datetime-lower</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>2021</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>-12</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>-08</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>22</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">:00:00</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">datetime-upper</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>2022</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>-12</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>-01</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>00</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">:00:00</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding-suffix-pattern</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">yyyyMM</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">datetime-interval-unit</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">MONTHS</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">datetime-interval-amount</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>1</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></span></pre></div></div><h4>取模分片算法</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CosIdModShardingAlgorithm" src="https://oscimg.oschina.net/oscnet/up-614e23fdac05028408625b0856f2e1163aa.png" referrerpolicy="no-referrer"></p><ul><li>性能：相比於<span>&nbsp;</span><code>org.apache.shardingsphere.sharding.algorithm.sharding.mod.ModShardingAlgorithm</code><span>&nbsp;</span>性能高出<span>&nbsp;</span><em>1200~4000</em><span>&nbsp;</span>倍。並且穩定性更高，不會出現嚴重的性能退化。</li></ul><table cellspacing="0" style="--darkreader-inline-bgcolor:#181a1b; --darkreader-inline-border-bottom:currentcolor; --darkreader-inline-border-left:currentcolor; --darkreader-inline-border-right:currentcolor; --darkreader-inline-border-top:currentcolor; --darkreader-inline-color:#b7b1a7; -webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; border:medium none; box-sizing:border-box; color:#40485b; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Liberation Sans&quot;,&quot;PingFang SC&quot;,&quot;Microsoft YaHei&quot;,&quot;Hiragino Sans GB&quot;,&quot;Wenquanyi Micro Hei&quot;,&quot;WenQuanYi Zen Hei&quot;,&quot;ST Heiti&quot;,SimHei,SimSun,&quot;WenQuanYi Zen Hei Sharp&quot;,sans-serif; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; line-height:inherit; margin:0px 0px 16px; max-width:100%; orphans:2; overflow:auto; text-align:left; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; word-break:initial; word-spacing:0px"><tbody><tr><th><strong>PreciseShardingValue</strong></th><th><strong>RangeShardingValue</strong></th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px"><img alt="Throughput Of ModShardingAlgorithm - PreciseShardingValue" src="https://oscimg.oschina.net/oscnet/up-b0509c7b8d072d626c62e6d85006bb4f9ef.png" referrerpolicy="no-referrer"></td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px"><img alt="Throughput Of ModShardingAlgorithm - RangeShardingValue" src="https://oscimg.oschina.net/oscnet/up-37c0d23dabd951f4a00985b74cd20c5a328.png" referrerpolicy="no-referrer"></td></tr></tbody></table><div><div><pre><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">spring</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">shardingsphere</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">rules</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding-algorithms</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">alg-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">type</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">COSID_MOD</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">props</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">mod</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>4</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">logic-name-prefix</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">t_table_</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre></div></div><h2>性能測試報告</h2><h3>SegmentChainId - 吞吐量 (ops/s)</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Throughput-Of-SegmentChainId" src="https://oscimg.oschina.net/oscnet/up-bcdd47563907ba963673c8cd1ee99f3a753.png" referrerpolicy="no-referrer"></p><h3>SegmentChainId - 每次操作耗時的百分位數 (us/op)</h3><blockquote><p style="margin-left:0; margin-right:0"><a href="https://gitee.com/link?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E7%2599%25BE%25E5%2588%2586%25E4%25BD%258D%25E6%2595%25B0">百分位數</a><span>&nbsp;</span>，統計學術語，若將一組數據從小到大排序，並計算相應的累計百分點，則某百分點所對應數據的值，就稱為這百分點的百分位數，以 Pk 表示第 k 百分位數。百分位數是用來比較個體在羣體中的相對地位量數。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Percentile-Sample-Of-SegmentChainId" src="https://oscimg.oschina.net/oscnet/up-bc3e9bb34396489e0da8ec0888151b7d489.png" referrerpolicy="no-referrer"></p><h3>CosId VS 美團 Leaf</h3><blockquote><p style="margin-left:0; margin-right:0">CosId (<code>SegmentChainId</code>) 性能是 Leaf (<code>segment</code>) 的 5 倍。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CosId VS 美團 Leaf" src="https://gitee.com/AhooWang/CosId/raw/main/document/docs/.vuepress/public/assets/perf/CosId-VS-Leaf.png" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 08:41:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274001/cosid-2-6-4-released</guid>
            <link>https://www.oschina.net/news/274001/cosid-2-6-4-released</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Syncthing 1.27.2 發佈，連續文件同步工具]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="background-color:#ffffff; color:#333333">Syncthing&nbsp;是一個免費開源的工具，它能在你的各個網絡計算機間同步文件 / 文件夾，它的同步數據是直接從一個系統中直接傳輸到另一個系統的，並且它是安全且私密的。</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="background-color:#ffffff; color:#333333">Syncthing 1.27.2 現已發佈，具體更新內容如下：</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>Bug 修復</strong></p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsyncthing%2Fsyncthing%2Fissues%2F9041" target="_blank">#9041</a>&nbsp;: cli 子命令不使用 STHOMEDIR 環境變量</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsyncthing%2Fsyncthing%2Fissues%2F9183" target="_blank">#9183</a>：Filesystem watching (kqueue)&nbsp;已啓用......有大量文件</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsyncthing%2Fsyncthing%2Fissues%2F9274" target="_blank">#9274</a>：DeviceStatistics 中缺少鎖（"fatal error: concurrent map read and map write"）</li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong style="color:#333333"><span style="background-color:#ffffff; color:#1f2328">Enhancements</span></strong></p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsyncthing%2Fsyncthing%2Fissues%2F7406" target="_blank">#7406</a>&nbsp;: 為 IPv6 添加 UPnP 支持</li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong><span style="background-color:#ffffff; color:#1f2328">Other issues</span></strong></p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsyncthing%2Fsyncthing%2Fissues%2F9247" target="_blank">#9247</a>：將二進製版本的簽名密鑰嵌入文件，而非硬編碼字符串</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsyncthing%2Fsyncthing%2Fissues%2F9287" target="_blank">#9287</a>：quic-go v0.40.1（CVE-2023-49295）</li></ul><p>更新説明：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fsyncthing%2Fsyncthing%2Freleases%2Ftag%2Fv1.27.2" target="_blank">https://github.com/syncthing/syncthing/releases/tag/v1.27.2</a></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 07:05:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/273985/syncthing-1-27-2-released</guid>
            <link>https://www.oschina.net/news/273985/syncthing-1-27-2-released</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Socket.D 響應式網絡協議，v2.2.2 發佈]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#24292e; text-align:start">有用戶説，「Socket.D 之於 Socket，尤如 Vue 之於 Js、Mvc 之於 Http」</p><h3>主要特性</h3><ul><li>基於事件，每個消息都可事件路由</li><li>所謂語義，通過元信息進行語義描述</li><li>流關聯性，來回相關的消息會串成一個流</li><li>語言無關，使用二進制輸傳數據（支持 tcp, ws, udp）。支持多語言、多平台</li><li>斷線重連，自動連接恢復</li><li>多路複用，一個連接便可允許多個請求和響應消息同時運行</li><li>雙向通訊，單鏈接雙向互聽互發</li><li>自動分片，數據超出 16Mb（大小可配置），會自動分片、自動重組（udp 除外）</li><li>接口簡單，是響應式但用回調接口</li></ul><h3>與其它協議的簡單對比</h3><table cellspacing="0" style="-webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; box-sizing:border-box; color:#24292e; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,sans-serif,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; margin-bottom:16px; margin-top:0px; orphans:2; overflow:auto; text-align:start; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; width:960px; word-spacing:0px"><tbody><tr><th>對比項目</th><th>socket.d</th><th>http</th><th>websocket</th><th>rsocket</th><th>socket.io</th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">發消息（Qos0）</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">發送並請求（Qos1）</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">發送並訂閲</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">答覆或響應</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">單連接雙向通訊</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有 (不便)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有 (不便)</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">數據分片</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">/</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">斷線自動重連</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">/</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有元信息</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有事件（或路徑）</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有流（或消息關聯性）</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Broker 模式集羣</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">有</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">無</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">異步</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">異步</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">同步</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">異步</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">異步</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">異步</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">接口體驗</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">經典</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">經典</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">經典</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">響應式 (複雜)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">經典</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">基礎傳輸協議</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">tcp, udp, ws</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">tcp</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">http</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">tcp, udp, ws</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">ws</td></tr></tbody></table><h3>本次實現框架更新</h3><ul><li>調整，分片處理改為回調模式。與 js 同步（有更強適應性）</li><li>調整 BufferReader 更名為 CodecReader</li><li>調整 BufferWriter 更名為 CodecWriter</li><li>調整，部分接口方法名，方便跨語言遷移開發!!!</li><li>調整部分方法命名，方便跨語言開發</li><li>調整，固定 Codec 類型定義（沒必要泛型）</li><li>調整，禁止 Codec 被外部修改（畢竟是內核）</li><li>優化，連接器線程釋放處理</li><li>優化 smartsocket 適配的關閉處理</li><li>優化 netty 適配的線程數處理</li><li>修復，分片時，事件丟失的問題</li><li>修復 ClusterClientSession::getSessionOne 輪詢目標錯誤的問題</li><li>縮減 aio,nio 適配的線程數</li><li>smartsocket 升為 1.5.40</li></ul><h3>代碼倉庫</h3><ul><li><a href="https://gitee.com/noear/socketd">https://gitee.com/noear/socketd</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fnoear%2Fsocketd" target="_blank">https://github.com/noear/socketd</a></li></ul><h3>官網</h3><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fsocketd.noear.org%2F" target="_blank">https://socketd.noear.org</a></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 06:39:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/273978/socketd-2-2-2-released</guid>
            <link>https://www.oschina.net/news/273978/socketd-2-2-2-released</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[RediSearch 2.8.10 發佈，高性能全文搜索引擎]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="background-color:#ffffff; color:#000000">RediSearch&nbsp;2.8.10 現已發佈，這是</span><span style="background-color:#ffffff; color:#1f2328">&nbsp;RediSearch 2.8 的一個維護版本</span><span style="background-color:#ffffff; color:#000000">。更新緊迫性為 「HIGH」，</span><span style="background-color:#ffffff; color:#1f2328">存在一個可能影響部分用戶的嚴重&nbsp;</span><span style="background-color:#ffffff; color:#000000">bug，官方建議儘快升級。RediSearch 是 RedisLabs 團隊開發的一個高性能全文搜索引擎，可作為一個 Redis Module 運行在 Redis 上。</span></p><p><strong><span><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Details</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><strong>Bug 修復：</strong></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4287" target="_blank">#4287</a>&nbsp;從副本同步時重新索引過程會由於內部索引變量初始化而導致崩潰（MOD-6337、MOD-6336）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4249" target="_blank">#4249</a>&nbsp;集羣設置上的內存跟蹤導致高內存使用率和潛在的內存不足（MOD-6123、MOD-5639）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4244" target="_blank">#4244</a>&nbsp;使用帶有- clause 的<code>WITHCURSOR</code>flag 對<code>FT.AGGREGATE</code>進行剖析會因超時而導致崩潰 (MOD-5512)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F3916" target="_blank">#3916</a>&nbsp;查詢<code>JSON</code>文檔時過期文檔會因死鎖而導致崩潰（MOD-5769、MOD-5895、MOD-6189、MOD-5895）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4235" target="_blank">#4235</a>&nbsp;倒排索引 trie 上的節點不平衡導致數據庫內存過度增長（MOD-5880、MOD-5952、MOD-6003）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4190" target="_blank">#4190</a>&nbsp;分析<code>FT.AGGREGATE</code>導致 RESP3 replies 崩潰（MOD-6250、MOD-6295）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4148" target="_blank">#4148</a>、<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4038" target="_blank">#4038</a>&nbsp;集羣設置中的<code>ON_TIMEOUT FAIL\RETURN</code>策略未得到遵守（MOD-6035、MOD-5948、MOD-6090）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4110" target="_blank">#4110</a>&nbsp;超時時錯誤響應格式不一致（MOD-6011、MOD-5965）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4104" target="_blank">#4104</a>&nbsp;在 Amazon Linux 2 上使用 TLS 加密時，<code>FT.SEARCH</code>沒有響應 (MOD-6012)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4009" target="_blank">#4009</a>&nbsp;在集羣設置中不會返回<code>FT.SEARCH</code>的超時錯誤 (MOD-5911)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F3920" target="_blank">#3920</a>&nbsp;在集羣設置中不會返回<code>FT.AGGREGATE</code>的超時錯誤 (MOD-5209)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F3914" target="_blank">#3914</a>&nbsp;當數據在遊標讀取之間更新時，地理查詢會導致<code>FT.CURSOR READ</code>崩潰 (MOD-5646)</li></ul><p style="text-align:start"><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><strong>改進：</strong></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F3682" target="_blank">#3682</a>&nbsp;在<code>FT.INFO</code>中報告最後一個鍵錯誤和字段類型索引失敗 (MOD-5364)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4243" target="_blank">#4243</a>、<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4263" target="_blank">#4263</a>、<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4220" target="_blank">#4220</a>&nbsp;ForkGC（垃圾回收例程）邏輯的穩定性更好（MOD-6276）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4236" target="_blank">#4236</a>&nbsp;在<code>FT.INFO</code>報告中添加向量索引參數 (MOD-6198)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4164" target="_blank">#4164</a>&nbsp;在 RESP3&nbsp;replies&nbsp;中報告<code>TIMEOUT</code>、<code>MAXPREFIXEXPANSION</code>警告&nbsp; (MOD-6234)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4165" target="_blank">#4165</a>&nbsp;在<code>FT.PROFILE</code>報告中顯示超時 (MOD-6184)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4149" target="_blank">#4149</a>&nbsp;在<code>FAIL</code>超時策略上顯示 Cursor&nbsp; 超時 (MOD-5990)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4147" target="_blank">#4147</a>&nbsp;初始化最大數值範圍可以更好地平衡索引葉分割 (MOD-6232)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F3940" target="_blank">#3940</a>&nbsp;當謂詞包含多個<code>INTERSECTION</code><span style="background-color:#ffffff; color:#1f2328"><span>&nbsp;</span>(AND) of<span>&nbsp;</span></span><code>UNION</code><span style="background-color:#ffffff; color:#1f2328"><span>&nbsp;</span>(OR)&nbsp;</span>時的查詢優化（MOD-5910）</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4059" target="_blank">#4059</a>&nbsp;當策略為<code>ON_TIMEOUT RETURN</code>時，遇到超時時返回&nbsp;cursor id (MOD-5966)</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Fpull%2F4006" target="_blank">#4006</a>&nbsp;索引名稱別名驗證可能有問題 (MOD-5945)</li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><span style="background-color:#ffffff; color:#333333">更新説明：</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FRediSearch%2FRediSearch%2Freleases%2Ftag%2Fv2.8.10" target="_blank">https://github.com/RediSearch/RediSearch/releases/tag/v2.8.10</a></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 06:06:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/273966/redisearch-2-8-10-released</guid>
            <link>https://www.oschina.net/news/273966/redisearch-2-8-10-released</link>
            <author>
                <![CDATA[來源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[java 遊戲服務器框架 ioGame 17.1.61 action 各時間段調用統計插件]]>
            </title>
            <description>
                <![CDATA[<div class="content"><h2>主要更新</h2><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fgame-town%2FioGame%2Fissues%2F223" target="_blank">#223</a> 一天內 action 各小時的調用統計插件</p><h4>打印預覽</h4><p>以下打印的是一天內（24 小時）的業務消費量，計劃以每小時為一個時間階段，小時內可劃分鍾階段。</p><pre><code class="language-javascript">2023-11-29 action 調用次數，共 [100] 次
    0:00 共 8 次; - [15~30 分鐘 3 次] - [30~45 分鐘 2 次] - [45~59 分鐘 3 次]
    1:00 共 9 次; - [0~15 分鐘 1 次] - [15~30 分鐘 4 次] - [30~45 分鐘 1 次] - [45~59 分鐘 3 次]
    2:00 共 4 次; - [0~15 分鐘 1 次] - [15~30 分鐘 2 次] - [45~59 分鐘 1 次]
    3:00 共 2 次; - [0~15 分鐘 1 次] - [15~30 分鐘 1 次]
    4:00 共 1 次; - [0~15 分鐘 1 次]
    5:00 共 4 次; - [0~15 分鐘 1 次] - [15~30 分鐘 1 次] - [30~45 分鐘 1 次] - [45~59 分鐘 1 次]
    6:00 共 5 次; - [0~15 分鐘 1 次] - [15~30 分鐘 1 次] - [30~45 分鐘 1 次] - [45~59 分鐘 2 次]
    7:00 共 4 次; - [15~30 分鐘 2 次] - [30~45 分鐘 1 次] - [45~59 分鐘 1 次]
    8:00 共 4 次; - [0~15 分鐘 1 次] - [30~45 分鐘 3 次]
    9:00 共 4 次; - [15~30 分鐘 2 次] - [30~45 分鐘 2 次]
    10:00 共 5 次; - [15~30 分鐘 2 次] - [30~45 分鐘 1 次] - [45~59 分鐘 2 次]
    11:00 共 3 次; - [15~30 分鐘 2 次] - [45~59 分鐘 1 次]
    12:00 共 4 次; - [0~15 分鐘 2 次] - [30~45 分鐘 2 次]
    13:00 共 1 次; - [30~45 分鐘 1 次]
    14:00 共 5 次; - [0~15 分鐘 1 次] - [45~59 分鐘 4 次]
    15:00 共 6 次; - [0~15 分鐘 1 次] - [15~30 分鐘 2 次] - [45~59 分鐘 3 次]
    16:00 共 4 次; - [0~15 分鐘 1 次] - [15~30 分鐘 1 次] - [30~45 分鐘 1 次] - [45~59 分鐘 1 次]
    17:00 共 7 次; - [0~15 分鐘 1 次] - [15~30 分鐘 3 次] - [30~45 分鐘 3 次]
    18:00 共 2 次; - [0~15 分鐘 1 次] - [15~30 分鐘 1 次]
    19:00 共 7 次; - [0~15 分鐘 1 次] - [15~30 分鐘 3 次] - [30~45 分鐘 3 次]
    20:00 共 5 次; - [15~30 分鐘 3 次] - [30~45 分鐘 2 次]
    21:00 共 3 次; - [15~30 分鐘 2 次] - [30~45 分鐘 1 次]
    22:00 共 1 次; - [45~59 分鐘 1 次]
    23:00 共 2 次; - [15~30 分鐘 1 次] - [45~59 分鐘 1 次]
</code></pre><h4>使用示例</h4><pre><code class="language-java">BarSkeletonBuilder builder = ...;
// 各時間段 action 調用統計插件，將插件添加到業務框架中
var timeRangeInOut = new TimeRangeInOut();
builder.addInOut(timeRangeInOut);
</code></pre><h4>默認的打印預覽</h4><p>默認配置下的打印如下，沒有分鐘階段的調用次數統計，只有每小時的階段的調用次數統計。</p><pre><code class="language-javascript">2023-11-29 action 調用次數，共 [10000] 次
    0:00 共 431 次;
    1:00 共 416 次;
    2:00 共 421 次;
    3:00 共 414 次;
    4:00 共 441 次;
    5:00 共 423 次;
    6:00 共 407 次;
    7:00 共 395 次;
    8:00 共 410 次;
    9:00 共 413 次;
    10:00 共 378 次;
    11:00 共 411 次;
    12:00 共 380 次;
    13:00 共 413 次;
    14:00 共 417 次;
    15:00 共 416 次;
    16:00 共 400 次;
    17:00 共 430 次;
    18:00 共 471 次;
    19:00 共 440 次;
    20:00 共 405 次;
    21:00 共 430 次;
    22:00 共 414 次;
    23:00 共 424 次;
</code></pre><h3>其他更新</h3><p>fix endPoint removeBinding.</p><p>&nbsp;</p><div><p style="margin-left:0; margin-right:0"><strong><span>ioGame 使用趨勢數據統計</span></strong></p><p style="margin-left:0; margin-right:0"><span>關注 ioGame 的遊戲服務器開發者持續增多，</span><strong><span style="color:#df2a3f">2022-09 ~ 至今</span></strong><span><span>的</span>月統計數據；</span></p><p style="margin-left:0; margin-right:0"><span>這裏的統計信息是關於開發者關注 ioGame 框架相關的，從統計數據中可以看出，由於 ioGame 上手簡單，功能強大等優點，得到了眾多開發者的關注。如果你想知道 ioGame 有沒有人在使用，可以先到這裏看下統計數據、開發者的評價與討論。</span></p><p style="margin-left:0; margin-right:0"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fgpxk93%23TwVa8" target="_blank"><span>https://www.yuque.com/iohao/game/gpxk93#TwVa8</span></a></p><p style="margin-left:0; margin-right:0"><span>這裏展示了每月的統計數據，統計數據來源於語雀後台，這些數據都是</span><strong><span style="color:#df2a3f">真實的、客觀存在的、活的</span></strong><span>。</span></p><blockquote><p style="margin-left:0; margin-right:0"><span>因為成本的原因，某寶某多還沒有出現能提供這種服務的商家，所以這樣的統計數據也更具真實性。</span></p></blockquote><p style="margin-left:0; margin-right:0"><span>通過統計數據，我們可以看到每天會有很多開發者在訪問 ioGame 的在線文檔，並且這些統計數據不是來源於口嗨的，也不是主觀創造的。</span></p><p style="margin-left:0; margin-right:0"><span>所以，還在猶豫要不要使用 ioGame 的開發者們，更應該討論的是 「為什麼這些開發者會選擇使用 ioGame」，而不是 ioGame 有沒有人在使用的問題。</span></p><p style="margin-left:0; margin-right:0"><span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao" target="_blank"><span>點擊我，到語雀後台查看 ioGame 的數據</span></a></span></p></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://foruda.gitee.com/images/1702006532773111383/5c84cdcf_5475.png" referrerpolicy="no-referrer"></p><div><h2><span>maven pom</span></h2><div><div><p style="margin-left:0; margin-right:0"><span>ioGame 已經上傳到中央倉庫，如果無法下載最新的框架源碼，建議開發者的 maven 倉庫代理使用原生的或騰訊雲的代理，目前不推薦阿里雲的代理。</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fswt3ls%23Amq4K" target="_blank"><span>騰訊雲代理設置可參考這裏</span></a><span>。</span></p><p style="margin-left:0; margin-right:0"><span>ioGame 最新版本查看<span>&nbsp;</span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fab15oe" target="_blank"><span>https://www.yuque.com/iohao/game/ab15oe</span></a></p><p style="margin-left:0; margin-right:0"><span>ioGame 是輕量級的網絡遊戲服務器框架，</span><strong><span>不依賴任何第三方</span></strong><span>中間件或數據庫</span><strong><span>就能支持集羣、分佈式</span></strong><span>，只需要 java 環境就可以運行。此時，你只需一個依賴即可獲得整個框架，並同時支持開頭介紹的全部功能特性</span></p></div><pre><code class="language-xml"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&lt;</span></span></span></span></span></span></span></span></span></span></span><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a">dependency</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&gt;</span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&lt;</span></span></span></span></span></span></span></span></span></span></span><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a">groupId</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&gt;</span></span></span></span></span></span></span></span></span></span></span></span>com.iohao.game<span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&lt;/</span></span></span></span></span></span></span></span></span></span></span><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a">groupId</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&gt;</span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&lt;</span></span></span></span></span></span></span></span></span></span></span><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a">artifactId</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&gt;</span></span></span></span></span></span></span></span></span></span></span></span>run-one-netty<span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&lt;/</span></span></span></span></span></span></span></span></span></span></span><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a">artifactId</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&gt;</span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&lt;</span></span></span></span></span></span></span></span></span></span></span><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a">version</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&gt;</span></span></span></span></span></span></span></span></span></span></span></span>${ioGame.version}<span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&lt;/</span></span></span></span></span></span></span></span></span></span></span><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a">version</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&gt;</span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&lt;/</span></span></span></span></span></span></span></span></span></span></span><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a"><span style="color:#333333"><span style="color:#22863a">dependency</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333"><span style="color:#333333">&gt;</span></span></span></span></span></span></span></span></span></span></span></span></code></pre></div></div><hr><h2>框架整體預覽導圖</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://foruda.gitee.com/images/1683534421248294819/72c4dfdb_5475.png" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">&nbsp;</p><hr><h2><span>ioGame&nbsp;網絡遊戲服務器框架簡介</span></h2><ul><li>無鎖異步化、事件驅動的架構設計；輕量級，無需依賴任何第三方中間件或數據庫就能支持集羣、分佈式</li><li>通過 ioGame 可以很容易的搭建出一個集羣無中心節點、集羣自動化、多進程的分步式遊戲服務器</li><li>包體小、啓動快、內存佔用少、更加的節約、無需配置文件、提供了優雅的路由訪問權限控制</li><li>讓開發者使用一套業務代碼，無需改動，支持多種連接方式：WebSocket、TCP、UDP</li><li>讓開發者用一套業務代碼，能輕鬆切換和擴展不同的通信協議：Protobuf、JSON</li><li>近原生的性能；業務框架在單線程中平均每秒可以執行 1152 萬次業務邏輯</li><li>代碼即聯調文檔、JSR380 驗證、斷言 + 異常機制 = 更少的維護成本</li><li>框架具備智能的同進程親和性；開發中，業務代碼可定位與跳轉</li><li>架構部署靈活性與多樣性：既可相互獨立，又可相互融合</li><li>可同時與同類型的多個遊戲邏輯服通信並得到數據</li><li>邏輯服之間可相互跨進程、跨機器進行通信</li><li>支持玩家對遊戲邏輯服進行動態綁定</li><li>能與任何其他框架做融合共存</li><li>對 webMVC 開發者友好</li><li>無 spring 強依賴</li><li>零學習成本</li></ul><div><div><p style="margin-left:0; margin-right:0; text-align:left"><span>你是否想要開發一個</span><span style="color:#e74c3c"><strong>高性能、穩定、易用、自帶負載均衡、避免類爆炸設計、可跨進程跨機器通信、集羣無中心節點、集羣自動化、有狀態多進程的分步式的</strong></span><span>網絡遊戲服務器呢？如果是的話，這裏向你推薦一個由 java 語言編寫的網絡遊戲服務器框架 ioGame。下面將會從多個方面來對框架做一些簡單的介紹。</span></p><div><p style="margin-left:0; margin-right:0"><span>ioGame 適用於</span><strong><span style="color:#df2a3f">網絡遊戲服務器、物聯網、內部系統</span></strong><span>及各種需要長連接的場景；</span></p></div></div><blockquote><p style="margin-left:0; margin-right:0; text-align:left"><span>ioGame 是一個 java 網絡遊戲服務器框架，有以下特點：</span></p><div><div><ul><li><span>無鎖異步化、事件驅動的架構設計</span></li><li><span>支持 websocket 和 socket 兩種通信協議</span></li><li><span>支持 protobuf、json 等不同的通信協議</span></li><li><span>集羣無中心節點、集羣自動化、分佈式的設計</span></li><li>真輕量級，不依賴任何第三方中間件或數據庫就能支持集羣、分佈式</li><li><span>提供多種通訊方式，且邏輯服之間可以相互跨機器通信</span></li><li><span>與 spring 和其他框架融合方便</span></li><li><span>學習成本低，開發體驗好</span></li><li><span>支持多服單進程、多服多進程的啓動和部署方式</span></li><li><span>提供遊戲文檔生成的輔助功能</span></li><li><span>包體小、啓動快、內存佔用少</span></li><li><span>提供優雅的路由訪問權限控</span></li><li><span>提供了靈活的線程擴展與設置</span></li><li><span>智能的同進程親和性</span></li></ul></div></div></blockquote><div><div><div><div><p style="margin-left:0; margin-right:0"><span>ioGame 是一個專為網絡遊戲服務器設計的</span><span style="color:#262626">輕量級</span><span>框架，它可以幫助你快速地搭建和運行自己的遊戲服務器。它適用於各種類型和規模的網絡遊戲，無論是 H5、手遊還是 PC 遊戲，無論是簡單的聊天室，還是複雜的</span><strong><span style="color:#262626">全球同服</span></strong><span style="color:#262626">、回合制遊戲、策略遊戲、放置休閒遊戲、即時戰鬥、</span><span>MMORPG 等，ioGame 都可以滿足你的需求。</span></p><p style="margin-left:0; margin-right:0"><span style="color:#262626">ioGame 在打包、內存佔用、啓動速度等方面也是優秀的。打 jar 包後大約<span>&nbsp;</span></span><strong><span style="color:#262626">15MB</span></strong><span style="color:#262626">，應用通常會在<span>&nbsp;</span></span><strong><span style="color:#262626">0.x 秒</span></strong><span style="color:#262626">內完成啓動，內存佔用小。詳細請看<span>&nbsp;</span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fzm6qg2%23LF8Qh" target="_blank"><span>快速從零編寫服務器完整示例</span></a><span style="color:#262626">。</span></p><p style="margin-left:0; margin-right:0"><span>在生態融合方面，ioGame 可以很方便的與 spring 集成（5 行代碼）；除了 spring 外，還能與任何其他的框架做</span><strong><span>融合</span></strong><span>，如：</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fsolon.noear.org%2F" target="_blank"><span>solon</span></a><span><span>&nbsp;</span>... 等，從而使用其他框架的相關生態。</span></p><p style="margin-left:0; margin-right:0"><span>在輕量級方面，ioGame<span>&nbsp;</span></span><strong><span style="color:#df2a3f">不依賴任何第三方</span></strong><span>中間件或數據庫</span><strong><span style="color:#df2a3f">就能支持集羣、分佈式</span></strong><span>，只需要 java 環境就可以運行。這意味着在使用上簡單了，在部署上也為企業減少了部署成本、維護難度。使用 ioGame 時，只需一個依賴即可獲得整個框架，而無需在安裝其他服務，如： Nginx、Redis、MQ、Mysql、ZooKeeper、Protobuf 協議編譯工具 ... ... 等。</span></p><p style="margin-left:0; margin-right:0"><span>在通訊方式方面，大部分框架只能支持推送（廣播）這一類型的通訊方式；ioGame 則提供了多種類型的通訊方式，通過對各種通訊方式的組合使用，可以簡單完成以往難以完成的工作，並且這些通訊方式都支持跨進程、跨機器通信的。這些通訊方式分別是</span></p><ol><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fkrzxcmgoispw0gl8" target="_blank"><span>請求響應</span></a><span>（單次請求處理）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fqv4qfo" target="_blank"><span>廣播</span></a><span>（推送）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fanguu6" target="_blank"><span>單個邏輯服間的相互通訊</span></a><span>（可跨機器通信、可跨進程通信）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Frf9rb9" target="_blank"><span>與同類型多個邏輯服相互通訊</span></a><span>（可跨多個機器通信、可跨多個進程通信）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fzgaldoxz6zgg0tgn" target="_blank"><span>脈衝通訊</span></a><span>（可跨多個機器通信、可跨多個進程通信）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fgmxz33" target="_blank"><span>分佈式事件總線</span></a><span><span>&nbsp;</span>[計劃中]（類似 MQ、Redis 發佈訂閲的機制；可跨多個機器通信、可跨多個進程通信）</span></li></ol><p style="margin-left:0; margin-right:0">&nbsp;</p><p style="margin-left:0; margin-right:0"><span>在連接方式方面，ioGame 允許開發者</span><strong><span>使用一套業務代碼</span></strong><span>，同時支持多種連接方式，無需進行任何修改。ioGame 已經支持了 TCP、WebSocket 和 UDP 連接方式，並且也支持在這幾種連接方式之間進行靈活切換。連接方式是可擴展的，並且擴展操作也很簡單，這意味着之後如果支持了 KCP，無論你當前項目使用的是 TCP、WebSocket 還是 UDP，都可以切換成 KCP；注意了，即使切換到 KCP 的連接方式，現有的業務代碼也無需改變。</span></p><p style="margin-left:0; margin-right:0"><span>在通信協議方面，ioGame 讓開發者</span><strong><span>用一套業務代碼</span></strong><span>，就能輕鬆</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fuq2zrltrc7to27bt" target="_blank"><span>切換和擴展不同的通信協議</span></a><span>，如 Protobuf、JSON 等。只需一行代碼，就可以從 Protobuf 切換到 JSON，無需改變業務方法。</span></p><p style="margin-left:0; margin-right:0"><span>在集羣方面，ioGame 的 Broker （遊戲網關）採用無中心節點、</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fqmo56c" target="_blank"><span>自動化的集羣設計</span></a><span>，所有節點平等且自治，不存在單點故障。集羣能夠</span><strong><span>自動管理和彈性擴縮</span></strong><span>，節點加入或退出時，能夠自動保證負載均衡和數據一致性，不影響服務可用性。</span></p><p style="margin-left:0; margin-right:0"><span>在分佈式方面，ioGame 的邏輯服使用了分佈式設計思想，將服務器分為</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fwotnhl" target="_blank"><span>遊戲對外服</span></a><span>、</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fensevx" target="_blank"><span>遊戲邏輯服</span></a><span>等不同層次，並且每一層都有明確的職責和接口。這樣可以提高代碼可讀性和可維護性，並且方便進行</span><strong><span>水平擴展</span></strong><span>。</span></p><p style="margin-left:0; margin-right:0"><span>在學習成本方面，ioGame 的學習成本非常低，可以説是</span><strong><span>零學習成本</span></strong><span>，即使沒有遊戲編程經驗，也能輕鬆上手。開發者只需掌握普通的 java 方法或 webMVC 相關知識，就能用框架開發業務。框架不要求開發者改變編碼習慣，而是自身適應開發者的需求。</span></p><p style="margin-left:0; margin-right:0"><span>在</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Funp26u" target="_blank"><span>同進程親和性</span></a><span>方面，在同一進程內，不同 Netty 實例之間的通信，是通過內存進行傳輸的，不需要經過網絡傳輸，數據傳輸速度極快。同進程親和性指的是，優先訪問同進程內的遊戲邏輯服，當同進程內沒有能處理請求的遊戲邏輯服時，才會去其他進程或機器中查找能處理請求的遊戲邏輯服；簡單點説，框架對於請求的處理很智能，會優先將請求給同進程內的邏輯服消費。</span></p><p style="margin-left:0; margin-right:0"><span>在開發體驗方面，ioGame 非常注重開發者的開發體驗；框架提供了<span>&nbsp;</span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fghng6g" target="_blank"><span>JSR380 驗證</span></a><span>、</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Favlo99" target="_blank"><span>斷言 + 異常機制</span></a><span>、</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fpf3sx0" target="_blank"><span>業務代碼定位</span></a><span>... ... 等諸多豐富的功能，使得開發者的業務代碼更加的清晰、簡潔；</span></p><p style="margin-left:0; margin-right:0"><span>業務框架提供了</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fbsgvzglvlr5tenao" target="_blank"><span>插件</span></a><span>機制，插件是可插撥、可擴展的。框架內置提供了<span>&nbsp;</span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fpf3sx0" target="_blank"><span>DebugInOut</span></a><span>、</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fznapzm1dqgehdyw8" target="_blank"><span>action 調用統計</span></a><span>、</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fzoqabk4gez3bckis" target="_blank"><span>業務線程監控插件</span></a><span>、</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fumzk2d6lovo4n9gz" target="_blank"><span>各時間段調用統計插件</span></a><span>... 等插件；</span><span>不同的插件提供了不同的關注點，比如我們可以使用調用、監控等插件相互配合，可以讓我們在開發階段就知道</span><strong><span>是否存在性能問題</span></strong><span>。合理利用好各個插件，可以讓我們在開發階段就能知道問題所在，提前發現問題，提前預防問題。</span></p><p style="margin-left:0; margin-right:0"><span>在線程安全方面，框架為開發者解決了單個玩家的併發問題，即使玩家重新登錄後，也會使用相同的線程來消費業務，並推薦使用</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fgmfy1k" target="_blank"><span>領域事件</span></a><span>來解決同一房間或業務內多個玩家的併發問題；</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Feixd6x" target="_blank"><span>框架在線程的擴展性</span></a><span>上提供了友好的支持，並不是隻能提供呆板的線程數量設置；</span></p><p style="margin-left:0; margin-right:0"><span>在分佈式開發體驗方面，通常在開發分佈式應用時是需要啓動多個進程的。這會讓調試與排查問題變得非常困難，從而降低開發者的效率、增加工作量等，這也是很多框架都</span><strong><span>解決不了的問題</span></strong><span>，但 ioGame 做到了！ioGame 支持多服單進程的啓動方式，這使得開發者在開發和調試分步式系統時更加簡單。</span></p><p style="margin-left:0; margin-right:0"><span>與前端對接聯調方面，ioGame 提供了</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Firth38" target="_blank"><span>遊戲文檔生成</span></a><span>的輔助功能，可以做到</span><strong><span>代碼即對接文檔</span></strong><span>。簡單地説，當業務代碼編寫完後，框架會自動生成最新的文檔。如果沒有遊戲文檔的生成，那麼你將要抽出一些時間來編寫、維護對接文檔的工作，而且當團隊人數多了之後，文檔就會很亂、不同步、不是最新的、忘記更新等情況就會出現。</span></p><p style="margin-left:0; margin-right:0"><span style="color:#262626">在部署方面，ioGame 支持</span><strong><span style="color:#262626">多服單進程</span></strong><span style="color:#262626">的方式部署，也支持</span><strong><span style="color:#262626">多服多進程</span></strong><span style="color:#262626">多機器的方式部署；在部署方式上可以隨意的切換而不需要更改代碼。日常中我們可以按照單體思維開發，到了生產可以選擇使用多進程的方式部署。</span></p><p style="margin-left:0; margin-right:0"><span style="color:#262626">在安全方面，所有的遊戲邏輯服</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fcklv8p%23NQ6Oc" target="_blank"><span>不需要開放端口，天然地避免了掃描攻擊</span></a><span style="color:#262626">。由於不需要為每個邏輯服分配獨立的端口，那麼我們在使用諸如雲服務器之類的服務時，就不需要擔心端口開放權限的問題了。別小看這一個環節，通常這些小細節最浪費開發者的時間。由於我們不需要管理這些 IP:Port，</span><strong><span style="color:#262626">這部分的工作量就自然地消失了</span></strong><span style="color:#262626">。</span></p><p style="margin-left:0; margin-right:0"><span style="color:#333333">在模擬客戶端測試方面，ioGame 提供了</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Ftc83ud" target="_blank"><span>壓測 &amp; 模擬客戶端請求</span></a><span style="color:#333333">模塊。此模塊是用於模擬客戶端，簡化模擬工作量，只需要編寫對應請求與回調。除了可以模擬簡單的請求外，通常還可以做一些複雜的請求編排，並支持複雜業務的壓測。</span><strong><span style="color:#333333">與單元測試不同的是，該模塊可以模擬真實的網絡環境，並且在模擬測試的過程中與服務器的交互是可持續的、可互動的，同時也是支持自動化的</span></strong><span style="color:#333333">。</span></p><p style="margin-left:0; margin-right:0"><span style="color:#000000">在</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fzqgdv3g9if8w37vr" target="_blank"><span>架構靈活性</span></a><span style="color:#000000">方面，ioGame 的架構由三部分組成：1. 遊戲對外服、2.Broker（遊戲網關）、3. 遊戲邏輯服；三者既可相互獨立，又可相互融合。這意味着使用 ioGame 可以</span><strong><span style="color:#df2a3f">適應任何類型的遊戲</span></strong><span style="color:#000000">，因為只需通過調整部署方式，就可以滿足不同類型的遊戲需求。在 ioGame 中進行這些調整工作非常簡單，而且不會對現有代碼產生不良影響。</span></p><p style="margin-left:0; margin-right:0"><span>開發者基於 ioGame 編寫的項目模塊，通常是條理清晰的，得益於框架對</span><strong><span>路由的合理設計</span></strong><span>，同時也為路由提供了優雅的</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fnap5y8p5fevhv99y" target="_blank"><span>訪問權限控制</span></a><span>。當我們整理好這些模塊後，對於其他開發者接管項目或後續的維護中，會是一個不錯的幫助（</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fruaqza%2F%23OBwXQ" target="_blank"><span>模塊的整理與建議</span></a><span>）。或許現階段你感受不到這塊的威力，隨着你深入地使用實踐就能體會到這麼設計的諸多好處與優勢。</span></p><p style="margin-left:0; margin-right:0"><span style="color:#262626">開發者基於 ioGame 編寫的項目，通常是語法簡潔的、高性能的、低延遲的；框架最低要求使用 JDK17，這樣即可以讓項目享受到 ZGC 帶來的改進，還能享受語法上的簡潔。從 JDK17 開始 ZGC 遠低於其</span><strong><span style="color:#262626">亞毫秒級</span></strong><span style="color:#262626">暫停時間的目標，</span><span>可以在不影響遊戲速度的情況下，清理掉多餘的內存。這樣就不會出現卡頓或者崩潰的問題了，</span><span style="color:#262626">相當於在項目中變相的引入了一位 JVM 調優大師，詳細請看<span>&nbsp;</span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.jdon.com%2F57736" target="_blank"><span>JDK 17 垃圾回收 GC 性能飛躍提升</span></a><span style="color:#262626">。</span></p><p style="margin-left:0; margin-right:0"><span>綜上所述，ioGame 是一個非常適合網絡遊戲開發的框架。可以讓你輕鬆地創建高性能、低延遲、易擴展的遊戲服務器，並且節省時間和資源。如果你想要快速地開發出令人驚豔的網絡遊戲，請不要猶豫，立即選擇 ioGame 吧！框架</span><span style="color:#262626">屏蔽了很多複雜且重複性的工作，並可為項目中的功能模塊結構、開發流程等進行</span><strong><span style="color:#262626">清晰的組織定義</span></strong><span style="color:#262626">，減少了後續的項目維護成本。</span></p><p style="margin-left:0; margin-right:0"><span style="color:#333333">框架在開發、部署、壓測 &amp; 模擬測試 .. 等，各個階段都提供了很好的支持。</span><span>相信你已經對 ioGame 有了一個初步的瞭解，雖然還有很多豐富的功能與特性沒有介紹到，但你可以通過後續的實踐過程中來深入瞭解。感謝你的閲讀，並期待你使用 ioGame 來打造自己的遊戲服務器。</span></p></div></div></div></div></div><hr><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span>ioGame<span>&nbsp;</span></span><span>由 [</span><span style="color:#e8323c">網絡通信框架</span><span>] 和 [</span><span style="color:#e8323c">業務框架</span><span>] 組成。</span></p><div><ul><li><span style="color:#e8323c">網絡通信框架</span><span>：</span><span style="color:#333333">職責是各服務器之間的網絡通信</span></li><li><span style="color:#e8323c">業務框架</span><span>：</span><span style="color:#333333">職責是</span><span>業務邏輯的處理方式和編寫方式</span></li></ul><h3><span style="color:#e8323c">網絡通信框架</span><span><span>&nbsp;</span></span></h3><p style="margin-left:0; margin-right:0"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.sofastack.tech%2Fprojects%2Fsofa-bolt%2Foverview%2F" target="_blank"><span>SOFABolt</span></a><span><span>&nbsp;</span>是螞蟻金融服務集團開發的一套基於 Netty 實現的網絡通信框架。</span></p><ul><li><span>為了讓 Java 程序員能將</span><span style="color:#e8323c">更多的精力放在</span><span>基於網絡通信的</span><span style="color:#e8323c">業務邏輯實現上</span><span>，而不是過多的糾結於網絡底層 NIO 的實現以及處理難以調試的網絡問題，Netty 應運而生。</span></li><li><span>為了讓中間件開發者能將更多的精力放在產品功能特性實現上，而不是重複地一遍遍製造通信框架的輪子，SOFABolt 應運而生。</span></li></ul><p style="margin-left:0; margin-right:0"><span>Bolt 名字取自迪士尼動畫 - 閃電狗，是一個基於 Netty 最佳實踐的</span><span style="color:#e8323c">輕量、易用、高性能、易擴展</span><span>的通信框架。</span></p><h3><span style="color:#e8323c">業務框架</span></h3><p style="margin-left:0; margin-right:0"><span>如果説<span>&nbsp;</span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.sofastack.tech%2Fprojects%2Fsofa-bolt%2Foverview%2F" target="_blank"><span>sofa-bolt</span></a><span><span>&nbsp;</span>是為了讓 Java 程序員能</span><span style="color:#000000">將更多的精力放在基於網絡通信的業務邏輯實現上</span><span>。而業務框架正是</span><span style="color:#e8323c">解決</span><span>業務邏輯</span><span style="color:#e8323c">如何方便實現</span><span>這一問題上。業務框架是遊戲框架的一部分，職責是簡化程序員的業務邏輯實現，業務框架使程序員能夠快速的開始編寫遊戲業務。</span></p><p style="margin-left:0; margin-right:0"><span>業務框架對於每個 action （即業務的處理方法） 都是通過<span>&nbsp;</span></span><a href="https://www.oschina.net/p/reflectasm" target="_blank"><span>asm</span></a><span><span>&nbsp;</span>與 Singleton、Flyweight 、Command 等設計模式結合，對 action 的獲取上通過 array 來得到，是一種近原生的方式。</span></p><div><p style="margin-left:0; margin-right:0"><span>單線程中，業務框架平均每秒可以執行 1152 萬次業務邏輯</span></p></div><hr><h1><span>架構簡圖</span></h1><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://foruda.gitee.com/images/1685262312157920959/e8ceac25_5475.jpeg" referrerpolicy="no-referrer"></p><div><div><p style="margin-left:0; margin-right:0; text-align:center"><span style="color:#e8323c">通過 ioGame 你可以很容易的搭建出一個集羣無中心節點、集羣自動化、分步式的網絡遊戲服務器</span></p></div><div><div><div><div><div><p style="margin-left:0; margin-right:0; text-align:left"><span>從圖中可以看出，遊戲網關支持以集羣方式啓動多個實例。這個設計選擇了集羣的方式，因為遊戲網關通常是無狀態的，主要用於調度和轉發任務。</span></p><p style="margin-left:0; margin-right:0"><span>而遊戲對外服、遊戲邏輯服使用分步式設計，支持啓動多個相同類型的服務。這意味着，當玩家數量增加時，我們可以輕鬆增加相應類型的遊戲邏輯服以處理更多請求。</span></p><p style="margin-left:0; margin-right:0"><span>以遊戲邏輯服為例，假設我們啓動了兩個 A 類型的遊戲邏輯服，分別為 A-1 和 A-2。當玩家向 A 類型的遊戲邏輯服發起多次請求時，遊戲網關會使用默認的隨機負載策略將請求分配給 A-1 和 A-2 來處理。</span></p><p style="margin-left:0; margin-right:0"><span>現在我們明白，遊戲對外服和遊戲邏輯服都支持動態增加和減少。無論未來玩家數量增加或減少，我們都能夠輕鬆應對。架構是支持玩家無感知更新的，這得益於分步式設計。舉例來説，如果 A 類型的遊戲邏輯服需要增加一些新功能，我們可以啓動 A-3、A-4 等已經支持了新功能的服務器，然後逐步將之前的 A-1 和 A-2 下線，從而實現了無感知的更新。</span></p><p style="margin-left:0; margin-right:0"><span>此外，框架還支持玩家</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fidl1wm" target="_blank"><span>動態綁定遊戲邏輯服</span></a><span>；玩家與遊戲邏輯服綁定後，之後的請求都由該遊戲邏輯服來處理。</span></p><p style="margin-left:0; margin-right:0"><span>除了遊戲之外，ioGame 也適用於物聯網相關項目。只需將圖中的玩家視為具體的設備，即使存在數億個設備，ioGame 的架構也可以輕鬆支持。從 2022 年開始，已經有一些物聯網公司開始採用這一解決方案，並得到了很好的體驗。</span></p><p style="margin-left:0; margin-right:0"><span>ioGame 適用於</span><strong><span style="color:#df2a3f">網絡遊戲服務器、物聯網、內部系統</span></strong><span>及各種需要長連接的場景；</span></p></div></div></div></div></div></div><div><div><div><div><div><div><hr><div><h2>通過 ioGame 可以使得遊戲編程變得簡單，下面是一個業務示例</h2></div><div><h4><span style="color:#e8323c">協議文件定義</span></h4><p style="margin-left:0; margin-right:0"><span>首先我們自定義一個協議文件，這個協議文件作為我們的業務載體描述。這個協議是純 java 代碼編寫的，使用的是 jprotobuf，jprotobuf 是對<span>&nbsp;</span></span><a href="https://www.oschina.net/p/protocol+buffers" target="_blank"><span>google protobuf</span></a><span><span>&nbsp;</span>的簡化使用，性能同等。</span></p><p style="margin-left:0; margin-right:0"><span>可以把這理解成 DTO、POJO、業務數據載體等，其主要目的是用於業務數據的傳輸；</span></p><pre><code class="language-java"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">/** 請求 */</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">@ProtobufClass</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">@FieldDefaults</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>(level = AccessLevel.PUBLIC)
public class HelloReq {
    <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">String</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>;
}</code></pre><div><h4><span style="color:#e8323c">Action</span></h4><p style="margin-left:0; margin-right:0"><span>遊戲服務</span><span style="color:#333333">器</span><span>的編程，遊戲服務</span><span style="color:#333333">器</span><span>接收業務數據後，對業務數據進行處理。這段業務代碼可以同時支持 TCP、WebSocket、UDP。</span></p></div><pre><code class="language-java"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">@ActionController(1)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">class</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">DemoAction</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>{
    <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">@ActionMethod(0)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> HelloReq here(HelloReq helloReq) {
        HelloReq newHelloReq = new HelloReq();
        newHelloReq.name = helloReq.name + <span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">", I'm here "</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>;
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> newHelloReq;
    }
}</code></pre><div><p style="margin-left:0; margin-right:0"><span>一個方法在業務框架中表示一個<span>&nbsp;</span></span><span style="color:#e8323c">Action</span><span>（一個業務動作）。</span></p><p style="margin-left:0; margin-right:0"><span>方法聲名的參數是用於接收前端傳入的業務數據，在方法 return 時，數據就可以被遊戲前端接收到。程序員可以不需要關心業務框架的內部細節。</span></p><p style="margin-left:0; margin-right:0"><span>從上面的示例可以看出，這和普通的 java 類並無區別，同時這種設計方式</span><strong><span style="color:#fa8c16">避免了類爆炸</span></strong><span>。如果</span><span style="color:#e8323c">只負責編寫遊戲業務</span><span>，那麼對於業務框架的學習可以</span><span style="color:#e8323c">到此為止</span><span>了。</span></p><p style="margin-left:0; margin-right:0"><span style="color:#f5222d">遊戲編程就是如此簡單</span><span>！</span></p><p style="margin-left:0; margin-right:0">&nbsp;</p><p style="margin-left:0; margin-right:0"><strong><span>問：我可以開始遊戲服務</span></strong><strong><span style="color:#333333">器</span></strong><strong><span>的編程了嗎？</span></strong></p><p style="margin-left:0; margin-right:0"><span>是的，你已經可以開始遊戲服務</span><span style="color:#333333">器</span><span>的編程了。</span></p><p style="margin-left:0; margin-right:0">&nbsp;</p></div></div><div><p style="margin-left:0; margin-right:0"><strong><span>訪問示例（控制枱）</span></strong></p><p style="margin-left:0; margin-right:0"><span>當我們訪問<span>&nbsp;</span></span><span style="color:#e8323c">here<span>&nbsp;</span></span><span>方法時（通常由遊戲前端來請求），控制枱將會打印</span></p></div><pre>┏━━━━━ Debug. [(DemoAction.java:<span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>4</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>).here] ━━━ [cmd:<span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>1</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> - subCmd:<span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>0</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> - cmdMerge:<span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>65536</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>]
┣ userId : <span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>888</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
┣ 參數: helloReq : HelloRe<span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">q(name=塔姆)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
┣ 響應: HelloRe<span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">q(name=塔姆, I'm here )</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
┣ 時間: <span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>0</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> ms (業務方法總耗時)
┗━━━━━ Debug [DemoAction.java] ━━━ [當前線程:RequestMessage-<span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>8</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>-<span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>1</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>] 
</pre><div><p style="margin-left:0; margin-right:0"><strong><span>控制枱打印説明</span></strong></p></div><div><pre><code><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">Debug</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>. <span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">[(DemoAction.java:4).here]</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>：
    表示執行業務的是 <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">DemoAction</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> 類下的 <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">here</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> 方法，4 表示業務方法所在的代碼行數。
    在工具中點擊控制枱的 <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">DemoAction</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">.java</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:4</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> 這條信息，就可以跳轉到對應的代碼中（快速導航到對應的代碼），這是一個開發良好體驗的開始！
<span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">userId</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span> :  
    當前發起請求的，用戶 <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">id</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>。
參數 :  
    通常是遊戲前端傳入的值。
響應：
    通常是業務方法返回的值 ，業務框架會把這個返回值推送到遊戲前端。
時間：
    執行業務方法總耗時，我們可根據業務方法總耗時的時長來優化業務。
路由信息：<span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">[cmd - subCmd]</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>
    路由是唯一的訪問地址。</code></pre><p style="margin-left:0; margin-right:0"><span>有了以上信息，遊戲開發者可以很快的定位問題。如果沒有可視化的信息，開發中會浪費很多時間在前後端的溝通上。問題包括：</span></p><ul><li><span>是否傳參問題 （遊戲前端説傳了）</span></li><li><span>是否響應問題（遊戲後端説返回了）</span></li><li><span>業務執行時長問題 （遊戲前端説沒收到響應， 遊戲後端説早就響應了）</span></li></ul><p style="margin-left:0; margin-right:0"><span>其中</span><span style="color:#f5222d">代碼導航</span><span>可以讓開發者快速的跳轉到業務類對應代碼中，在多人合作的項目中，可以快速的知道業務經過了哪些方法的執行，使得我們可以快速的進行閲讀或修改；</span></p><div><h2><span>框架內置功</span></h2></div><div><p style="margin-left:0; margin-right:0; text-align:left"><strong><span>內置多種可選模塊，可按需選擇，以方便應用開發：</span></strong></p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fgmfy1k" target="_blank"><span>領域事件</span></a><span><span>&nbsp;</span>（</span><span style="color:#333333">輕量級</span><span>單機最快 MQ --<span>&nbsp;</span></span><strong><span style="color:#333333">disruptor</span></strong><span style="color:#333333">；通過</span><span>領域事件模塊，可為你的系統實現類似 Guava-EventBus、Spring 事件驅動模型 ApplicationEvent、業務解耦、規避併發、不阻塞主線程... 等，各種浪操作）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fniflk0" target="_blank"><span>任務延時器</span></a><span><span>&nbsp;</span>（將來某個時間可對任務進行執行、暫停、取消等操作，並不是類似 Quartz 的任務調度）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fekx6ve" target="_blank"><span>多環境切換</span></a><span><span>&nbsp;</span>（不同運行環境下的配置支持）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fvpe2t6" target="_blank"><span>light-jprotobuf<span>&nbsp;</span></span></a><span>（</span><span style="color:#333333">補足 jprotobuf 不能讓多個對象在單個 .proto 源文件中生成的需求，並簡化 jprotobuf 對源文件的註釋</span><span>）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fwz7af5" target="_blank"><span>分步式鎖</span></a><span><span>&nbsp;</span>(基於 Redisson 的簡單實現)</span></li></ul><p style="margin-left:0; margin-right:0; text-align:left"><strong><span>內置的其他功能：</span></strong></p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fuueq3i" target="_blank"><span>心跳相關</span></a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fhv5qqh" target="_blank"><span>用戶上線、離線相關的鈎子方法</span></a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fwg6lk7" target="_blank"><span>UserSessions</span></a><span><span>&nbsp;</span>（對所有用戶 UserSession 的管理，統計在線用戶等）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fwg6lk7" target="_blank"><span>UserSession</span></a><span><span>&nbsp;</span>(與 channel 是 1:1 的關係，可取到對應的 userId、channel 等信息。)</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Ftywkqv" target="_blank"><span>登錄相關</span></a><span>（提供重複登錄、頂號等相關增強功能）</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.yuque.com%2Fiohao%2Fgame%2Fieimzn" target="_blank"><span>業務參數基礎類型，自動裝箱、拆箱</span></a><span>（解決協議碎片）</span></li></ul></div><div><h2><span>適合人羣？</span></h2><ol><li><span style="color:#333333">長期從事 web 內部系統開發人員， 想了解遊戲的</span></li><li><span style="color:#333333">剛從事遊戲開發的</span></li><li><span style="color:#333333">未從事過遊戲開發，但卻對其感興趣的</span></li><li><span>對設計模式在實踐中的應用和 sofa-bolt 有興趣的學習者</span></li><li><span>可以接受新鮮事物的</span></li><li><span style="color:#40485b">想放棄祖傳代碼的</span></li></ol><p style="margin-left:0; margin-right:0; text-align:left"><span style="color:#333333">推薦實際編程經驗一年以上的人員</span></p><p style="margin-left:0; margin-right:0; text-align:left">ioGame&nbsp;<span>提供了豐富的在線高質量使用文檔，為你的團隊助力，帶上你們的小夥伴一起，這樣就不用手把手的教了。</span></p></div></div></div></div></div></div></div></div></div></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 05:51:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/273960/iogame-17-1-61-released</guid>
            <link>https://www.oschina.net/news/273960/iogame-17-1-61-released</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[DataGear 4.7.0 發佈，數據可視化分析平台]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fwww.datagear.tech%2F" target="_blank">DataGear</a>&nbsp;4.7.0 發佈，嚴重漏洞和 BUG 修復，具體更新內容如下：</p><ul><li>新增：HTTP 數據集新增【編碼請求地址】支持，可用於解決請求地址中文亂碼問題；</li><li>新增：新增數據源密碼加密存儲支持（開啓需設置 schemaPsd.crypto.enabled 配置項）；</li><li>新增：數據源防護新增用戶名、連接屬性防護支持，以防護數據源 URL 遠程代碼執行漏洞；</li><li>新增：新增 disableShowAnonymous 系統配置項，可配置禁用匿名用戶展示圖表/看板；</li><li>修復：修復看板導入頁面設置壓縮包編碼不起作用的 BUG；</li><li>修復：修復參數化數據集存在遠程代碼執行漏洞的安全問題；</li><li>修復：修復數據源相關功能未正確釋放和關閉過期連接的 BUG；</li><li>修復：修復更改看板分享密碼的加密配置會導致相關功能報錯的 BUG；</li><li>修復：修復 SQL 工作台有時未能清除過期 SQL 歷史的 BUG；</li><li>修復：修復數據源導入 JSON 行數組數據有時會報只讀連接錯誤的 BUG；</li><li>修復：修復數據源導出操作可能會導致後續同一數據源的其他操作報錯的 BUG；</li><li>修復：修復數據源驅動管理有時無法刪除驅動庫文件的 BUG；</li><li>改進：看板編輯頁面插入無權限圖表時給出提示信息；</li><li>改進：數據集參數/屬性名不允許忽略大小寫的重名，以增強數據庫兼容性；</li><li>改進：數據集緩存忽略包含超多條目數數據，避免佔用內存過多；</li><li>改進：數據源編輯頁面不再載入和顯示連接密碼，以增強安全性；</li><li>改進：數據源編輯頁面連接屬性改為彈窗編輯模式；</li><li>改進：看板分享設置頁面不再載入和顯示分享密碼，以增強安全性；</li><li>改進：重設密碼頁面不再顯示服務端用戶主目錄信息，以增強安全性；</li><li>改進：登錄成功後，將自動跳轉至登錄前的訪問鏈接而非始終是主頁；</li><li>改進：角色管理頁面顯示 ID 列，便於應用配置引用；</li><li>改進：系統主目錄配置項名稱由 DATAGEAR_WORKSPACE 改為 DATAGEAR_HOME；</li><li>改進：重構圖表插件加載策略，大幅縮短系統啓動時間；</li><li>改進：完善系統啓動腳本，支持在其他目錄下啓動系統；</li><li>改進：系統緩存配置改為採用規範的 SpringBoot 緩存配置方式；</li><li>改進：圖表支持庫 ECharts 版本由 5.4.2 升級至 5.4.3；</li><li>改進：看板支持庫 jQuery 版本由 3.6.0 升級至 3.7.1；</li><li>改進：系統 SpringBoot 版本由 2.7.11 升級至 2.7.16；</li><li>改進：源碼 maven 依賴庫明確指定版本號，避免不同環境時編譯出錯；</li></ul><p><span style="color:#e74c3c"><strong>另外，DataGear 專業版 1.0.0 也已經正式發佈，歡迎試用！</strong></span></p><p><strong><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fdatagear.tech%2Fpro%2F" target="_blank">http://datagear.tech/pro/</a></strong></p><p><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fwww.datagear.tech%2F" target="_blank">DataGear</a>是一款開源免費的數據可視化分析平台，支持自由製作任何您想要的數據可視化看板。</p><h3><strong>系統特點：</strong></h3><ul><li><h4><strong>友好接入的數據源</strong></h4></li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">支持運行時接入任意提供 JDBC 驅動的數據庫，包括 MySQL、Oracle、PostgreSQL、SQL Server 等關係數據庫，以及 Elasticsearch、ClickHouse、Hive 等大數據引擎</p><ul><li><h4><strong>多樣動態的數據集</strong></h4></li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">支持創建 SQL、CSV、Excel、HTTP 接口、JSON 數據集，並可設置為動態的參數化數據集，可定義文本框、下拉框、日期框、時間框等類型的數據集參數，靈活篩選滿足不同業務需求的數據</p><ul><li><h4><strong>強大豐富的數據圖表</strong></h4></li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">數據圖表可聚合綁定多個不同格式的數據集，輕鬆定義同比、環比圖表，內置折線圖、柱狀圖、餅圖、地圖、雷達圖、漏斗圖、散點圖、K 線圖、桑基圖等 70 + 開箱即用的圖表，並且支持自定義圖表配置項，支持編寫和上傳自定義圖表插件</p><ul><li><h4><strong>自由開放的數據看板</strong></h4></li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">數據看板採用原生的 HTML 網頁作為模板，支持導入任意 HTML 網頁，支持以可視化方式進行看板設計和編輯，也支持使用 JavaScript、CSS 等 web 前端技術自由編輯看板源碼，內置豐富的 API，可製作圖表聯動、數據鑽取、異步加載、交互表單等個性化的數據看板</p><p>官網地址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fwww.datagear.tech%2F" target="_blank">http://www.datagear.tech</a></p><p>源碼地址：</p><p>Gitee：<a href="https://gitee.com/datagear/datagear">https://gitee.com/datagear/datagear</a></p><p>Github：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fdatageartech%2Fdatagear" target="_blank">https://github.com/datageartech/datagear</a></p><h3>系統截圖：</h3><p>圖表類型</p><p><img alt="" height="887" src="https://oscimg.oschina.net/oscnet/up-b4a742233367305e7825a482be9683e4582.png" width="1089" referrerpolicy="no-referrer"></p><p>數據源管理</p><p><img alt="" height="561" src="https://oscimg.oschina.net/oscnet/up-5d3a73b84e84d9873191f10b64ebd1ab269.png" width="1152" referrerpolicy="no-referrer"></p><p>SQL 數據集</p><p><img alt="" height="576" src="https://oscimg.oschina.net/oscnet/up-4d8e007b848186929effeae1f47718a1513.png" width="1106" referrerpolicy="no-referrer"></p><p>看板編輯</p><p><img alt="" height="565" src="https://oscimg.oschina.net/oscnet/up-03d3bf6d0ca4301ec5cfea606e2ba6045e1.gif" width="1095" referrerpolicy="no-referrer"></p><p><a href="https://my.oschina.net/u/4035217/blog/3168893">製作看板</a></p><p><img alt="" height="563" src="https://oscimg.oschina.net/oscnet/up-8d44fe2497a797a09ce42a5cccc5dd8cc50.png" width="1106" referrerpolicy="no-referrer"></p><p><a href="https://my.oschina.net/u/4035217/blog/4529151">數據鑽取</a></p><p><img alt="" height="565" src="https://oscimg.oschina.net/oscnet/up-8c5df432ca6a1d721ef61b92e2219e32c05.gif" width="1096" referrerpolicy="no-referrer"></p><p><a href="https://my.oschina.net/u/4035217/blog/4443596">地圖聯動</a></p><p><img alt="" height="565" src="https://oscimg.oschina.net/oscnet/up-ba4802924d238d1c60de7ecf3afc2a8b169.gif" width="1096" referrerpolicy="no-referrer"></p><p><a href="https://my.oschina.net/u/4035217/blog/4458378">看板表單</a></p><p><img alt="" height="565" src="https://oscimg.oschina.net/oscnet/up-cc0b2383446202fb8a217f2cad1098f4a15.gif" width="1096" referrerpolicy="no-referrer"></p><p><a href="https://my.oschina.net/u/4035217/blog/4504599">實時圖表</a></p><p><img alt="" height="565" src="https://oscimg.oschina.net/oscnet/up-e6633cc1192c0dda38f75e6431f92681102.gif" width="1096" referrerpolicy="no-referrer"></p><p><a href="https://my.oschina.net/u/4035217/blog/5713335">異步加載</a></p><p><img alt="" height="565" src="https://oscimg.oschina.net/oscnet/up-63490b0aa500554f2e8bbc0bad707e8d596.gif" width="1096" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 03:28:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/273940/datagear-4-7-0-released</guid>
            <link>https://www.oschina.net/news/273940/datagear-4-7-0-released</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[🔥 【 Go 版 ssh 】支持記住動態密碼 tssh 發佈 v0.1.17]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>trzsz-ssh ( tssh )&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Ftrzsz%2Ftrzsz-ssh" target="_blank">https://github.com/trzsz/trzsz-ssh</a>&nbsp;<span>可以當作 ssh 客戶端來使用，支持 openssh 所有常用功能。</span></p><p>trzsz-ssh ( tssh ) 早期就<span>支持記住固定不變的密碼，</span><span>新版本&nbsp;</span><span>v0.1.17 開始支持「記住」&nbsp;</span><span>one-time password 動態密碼。</span></p><hr><h2>tssh 簡介</h2><ul><li><p style="margin-left:0; margin-right:0">你喜歡的 ssh 終端是否有好用的服務器管理功能？是否支持記住密碼？是否有好用的文件傳輸工具？</p></li><li><p style="margin-left:0; margin-right:0">tssh 支持選擇或搜索<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>中配置的服務器，支持 vim 操作習慣，解決 ssh 終端的服務器管理問題。</p></li><li><p style="margin-left:0; margin-right:0">tssh 支持一次選擇多台服務器，批量登錄，並支持批量執行預先指定的命令，方便快速完成批量服務器操作。</p></li><li><p style="margin-left:0; margin-right:0">tssh 支持配置服務器登錄密碼，解決每次手工輸入密碼的麻煩（ 自己能控制的服務器，推薦使用公鑰登錄 ）。</p></li><li><p style="margin-left:0; margin-right:0">tssh 內置支持<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Ftrzsz.github.io%2Fcn%2F">trzsz</a><span>&nbsp;</span>(trz /tsz) 文件傳輸工具，一併解決了 Windows 中使用<span>&nbsp;</span><code>trzsz ssh</code><span>&nbsp;</span>上傳速度很慢的問題。</p></li><li><p style="margin-left:0; margin-right:0"><em>在作者的 MacOS 上，使用<span>&nbsp;</span><code>trzsz ssh</code><span>&nbsp;</span>的上傳速度在 10 MB/s 左右，而使用<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>可以到 80 MB/s 以上。</em></p></li></ul><h2>安裝方法</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong><em>客戶端安裝<span>&nbsp;</span><code>trzsz-ssh ( tssh )</code><span>&nbsp;</span>的方法如下（ 任選其一 ）：</em></strong></p><ul><li><p style="margin-left:0; margin-right:0">Windows 可用<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fscoop.sh%2F">scoop</a><span>&nbsp;</span>/<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Flearn.microsoft.com%2Fzh-cn%2Fwindows%2Fpackage-manager%2Fwinget%2F">winget</a><span>&nbsp;</span>/<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fcommunity.chocolatey.org%2F">choco</a><span>&nbsp;</span>安裝</p><code>scoop install tssh</code><span>&nbsp;</span>/<span>&nbsp;</span><code>winget install tssh</code><span>&nbsp;</span>/<span>&nbsp;</span><code>choco install tssh</code><div><div><pre><span><span style="color:#6f42c1">scoop</span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">tssh</span></span></pre><div>
     &nbsp;
    </div></div></div><div><div><pre><span><span style="color:#6f42c1">winget</span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">tssh</span></span></pre><div>
     &nbsp;
    </div></div></div><div><div><pre><span><span style="color:#6f42c1">choco</span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">tssh</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">MacOS 可用<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fbrew.sh%2F">homebrew</a><span>&nbsp;</span>安裝</p><code>brew install trzsz-ssh</code><div><div><pre><span><span style="color:#6f42c1">brew</span><span style="color:#032f62">update</span></span><span><span style="color:#6f42c1">brew</span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">trzsz-ssh</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">Ubuntu 可用 apt 安裝</p><code>sudo apt install tssh</code><div><div><pre><span><span style="color:#0086b3">sudo </span>apt <span style="color:#d73a49">update</span><span>&amp;&amp;</span><span style="color:#0086b3">sudo </span>apt <span style="color:#0086b3"><span style="color:#d73a49">install</span></span>software-properties-common</span><span><span style="color:#0086b3">sudo </span><span style="color:#d73a49">add</span>-apt-repository ppa:trzsz/ppa <span>&amp;&amp;</span><span style="color:#0086b3">sudo </span>apt <span style="color:#d73a49">update</span></span><span><span style="color:#0086b3">sudo </span>apt <span style="color:#0086b3"><span style="color:#d73a49">install</span></span>tssh</span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">Debian 可用 apt 安裝</p><code>sudo apt install tssh</code><div><div><pre><span><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">apt </span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">curl gpg</span></span><span><span style="color:#6f42c1">curl</span><span style="color:#000080"><span style="color:#032f62">-s</span></span><span style="color:#032f62"></span><span style="color:#dd1144"><span style="color:#032f62">'https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0x7074ce75da7cc691c1ae1a7c7e51d1ad956055ca'</span></span><span style="color:#032f62"></span><span style="color:#dd1144"><span style="color:#032f62">\</span></span></span><span style="color:#032f62"></span><span><span style="color:#032f62">  | gpg </span><span style="color:#000080"><span style="color:#032f62">--dearmor</span></span><span style="color:#032f62"></span><span style="color:#000080"><span style="color:#032f62">-o</span></span><span style="color:#032f62"> /usr/share/keyrings/trzsz.gpg</span></span><span><span style="color:#0086b3"><span style="color:#6f42c1">echo</span></span><span style="color:#dd1144"><span style="color:#032f62">'deb [signed-by=/usr/share/keyrings/trzsz.gpg] https://ppa.launchpadcontent.net/trzsz/ppa/ubuntu jammy main'</span></span><span style="color:#032f62"></span><span style="color:#dd1144"><span style="color:#032f62">\</span></span></span><span style="color:#032f62"></span><span><span style="color:#032f62">  | </span><span style="color:#0086b3"><span style="color:#032f62">sudo tee</span></span><span style="color:#032f62"> /etc/apt/sources.list.d/trzsz.list</span></span><span><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">apt update</span></span><span><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">apt </span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">tssh</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">Linux 可用 yum 安裝</p><code>sudo yum install tssh</code><ul><li><p style="margin-left:0; margin-right:0">國內推薦使用<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fwww.wlnmp.com%2Finstall">wlnmp</a><span>&nbsp;</span>源，安裝 tssh 只需要添加 wlnmp 源（ 配置 epel 源不是必須的 ）：</p><div><div><pre><span><span style="color:#6f42c1">curl</span><span style="color:#000080"><span style="color:#032f62">-fsSL</span></span><span style="color:#032f62"></span><span style="color:#dd1144"><span style="color:#032f62">"https://sh.wlnmp.com/wlnmp.sh"</span></span><span style="color:#032f62"> | bash</span></span><span><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">yum </span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">tssh</span></span></pre><div>
       &nbsp;
      </div></div></div></li><li><p style="margin-left:0; margin-right:0">也可使用<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgemfury.com%2F">gemfury</a><span>&nbsp;</span>源（ 只要網絡通，所有操作系統通用 ）</p><div><div><pre><span><span style="color:#0086b3">echo</span><span style="color:#dd1144">'[trzsz]</span></span><span><span style="color:#dd1144">name=Trzsz Repo</span></span><span><span style="color:#dd1144">baseurl=https://yum.fury.io/trzsz/</span></span><span><span style="color:#dd1144">enabled=1</span></span><span><span style="color:#dd1144">gpgcheck=0'</span> | <span style="color:#0086b3">sudo tee</span> /etc/yum.repos.d/trzsz.repo</span><span><span style="color:#0086b3">sudo </span>yum <span style="color:#0086b3">install </span>tssh</span></pre><div>
       &nbsp;
      </div></div></div></li></ul></li><li><p style="margin-left:0; margin-right:0">ArchLinux 可用<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FJguer%2Fyay">yay</a><span>&nbsp;</span>安裝</p><code>yay -S tssh</code><div><div><pre><span><span style="color:#6f42c1">yay</span><span style="color:#000080"><span style="color:#032f62">-Syu</span></span></span><span><span style="color:#6f42c1">yay</span><span style="color:#000080"><span style="color:#032f62">-S</span></span><span style="color:#032f62"> tssh</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">用 Go 直接安裝（ 要求 go 1.20 以上 ）</p><code>go install github.com/trzsz/trzsz-ssh/cmd/tssh@latest</code><div><div><pre><span><span style="color:#005cc5">go</span><span style="color:#0086b3">install </span>github.com/trzsz/trzsz-ssh/cmd/tssh<span style="color:#032f62">@latest</span></span></pre><div>
     &nbsp;
    </div></div></div><p style="margin-left:0; margin-right:0">安裝後，<code>tssh</code><span>&nbsp;</span>程序一般位於<span>&nbsp;</span><code>~/go/bin/</code><span>&nbsp;</span>目錄下（ Windows 一般在<span>&nbsp;</span><code>C:\Users\your_name\go\bin\</code><span>&nbsp;</span>）。</p></li><li><p style="margin-left:0; margin-right:0">可從<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Ftrzsz%2Ftrzsz-ssh%2Freleases">Releases</a><span>&nbsp;</span>中直接下載適用的版本</p><code>或者用 Go 編譯（ 要求 go 1.20 以上 ）</code><div><div><pre><span><span style="color:#6f42c1">git</span><span style="color:#032f62">clone https://github.com/trzsz/trzsz-ssh.git</span></span><span><span style="color:#0086b3"><span style="color:#6f42c1">cd</span></span><span style="color:#032f62">trzsz-ssh</span></span><span><span style="color:#6f42c1">make</span></span><span><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">make </span><span style="color:#0086b3"><span style="color:#032f62">install</span></span></span></pre><div>
     &nbsp;
    </div></div></div></li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong><em>服務器上要安裝<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Ftrzsz.github.io%2Fcn%2F">trzsz</a><span>&nbsp;</span>才能使用<span>&nbsp;</span><code>trz / tsz</code><span>&nbsp;</span>上傳和下載，可任選其一安裝：<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Ftrzsz.github.io%2Fcn%2Fgo">Go 版</a>（ ⭐ 推薦 ）、<a href="https://gitee.com/link?target=https%3A%2F%2Ftrzsz.github.io%2Fcn%2F">Py 版</a>、<a href="https://gitee.com/link?target=https%3A%2F%2Ftrzsz.github.io%2Fcn%2Fjs">Js 版</a>。</em></strong></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>如果服務器不安裝<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Ftrzsz.github.io%2Fcn%2F">trzsz</a>，也能用<span>&nbsp;</span><code>tssh</code>，只是不使用<span>&nbsp;</span><code>trz / tsz</code><span>&nbsp;</span>上傳和下載而已。</em></p><h2>使用方法</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em><code>~/</code><span>&nbsp;</span>代表 HOME 目錄。在 Windows 中，請將下文的<span>&nbsp;</span><code>~/</code><span>&nbsp;</span>替換成<span>&nbsp;</span><code>C:\Users\your_name\</code>。</em></p><ul><li><p style="margin-left:0; margin-right:0">在客戶端生成密鑰對，一般存放在<span>&nbsp;</span><code>~/.ssh/</code><span>&nbsp;</span>下（ 只要一種就可以了 ）：</p><ul><li><code>ssh-keygen -t ed25519</code><span>&nbsp;</span>生成 ED25519 的，私鑰<span>&nbsp;</span><code>~/.ssh/id_ed25519</code>，公鑰<span>&nbsp;</span><code>~/.ssh/id_ed25519.pub</code>。</li><li><code>ssh-keygen -t rsa -b 4096</code><span>&nbsp;</span>生成 RSA 的，私鑰<span>&nbsp;</span><code>~/.ssh/id_rsa</code>，公鑰<span>&nbsp;</span><code>~/.ssh/id_rsa.pub</code>。</li></ul></li><li><p style="margin-left:0; margin-right:0">登錄服務器，將公鑰（ 即前面生成密鑰對時<span>&nbsp;</span><code>.pub</code><span>&nbsp;</span>後綴的文件內容 ）追加寫入服務器上的<span>&nbsp;</span><code>~/.ssh/authorized_keys</code><span>&nbsp;</span>文件中。</p><ul><li><p style="margin-left:0; margin-right:0">一行代表一個客戶端的公鑰，注意<span>&nbsp;</span><code>~/.ssh/authorized_keys</code><span>&nbsp;</span>要設置正確的權限：</p><div><div><pre><span><span style="color:#0086b3"><span style="color:#032f62">chmod</span></span><span>700</span><span style="color:#032f62">~/.ssh</span><span><span style="color:#032f62">&amp;&amp;</span></span><span style="color:#0086b3"><span style="color:#032f62">chmod</span></span><span>600</span><span style="color:#032f62">~/.ssh/authorized_keys</span></span></pre><div>
       &nbsp;
      </div></div></div></li></ul></li><li><p style="margin-left:0; margin-right:0">在客戶端配置好<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>文件，舉例：</p><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">alias1</span></span><span><span style="color:#6f42c1">HostName</span><span style="color:#032f62">192.168.0.1</span></span><span><span style="color:#6f42c1">Port</span><span style="color:#032f62">22</span></span><span><span style="color:#6f42c1">User</span><span style="color:#032f62">your_name</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">alias2</span></span><span><span style="color:#6f42c1">HostName</span><span style="color:#032f62">192.168.0.2</span></span><span><span style="color:#6f42c1">Port</span><span style="color:#032f62">22</span></span><span><span style="color:#6f42c1">User</span><span style="color:#032f62">your_name</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">使用<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>命令登錄服務器，<code>tssh alias1</code><span>&nbsp;</span>命令登錄在<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>中<span>&nbsp;</span><code>alias1</code><span>&nbsp;</span>對應的服務器。</p></li><li><p style="margin-left:0; margin-right:0">直接執行<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>命令（ 不帶參數 ），可以選擇（ 搜索 ）<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>中配置好的服務器並登錄。</p></li></ul><h2>批量登錄</h2><ul><li><p style="margin-left:0; margin-right:0">支持在<span>&nbsp;</span><code>iTerm2</code>（ 要開啓<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fiterm2.com%2Fpython-api-auth.html">Python API</a>，但不需要<span>&nbsp;</span><code>Allow all apps to connect</code><span>&nbsp;</span>），<code>tmux</code><span>&nbsp;</span>和<span>&nbsp;</span><code>Windows Terminal</code><span>&nbsp;</span>中一次選擇多台服務器，批量登錄，並支持批量執行預先指定的命令。</p></li><li><p style="margin-left:0; margin-right:0">按下<span>&nbsp;</span><code>Space</code>、<code>Ctrl+X</code><span>&nbsp;</span>等可以選中或取消當前服務器，若不能選中説明還不支持當前終端，請先運行<span>&nbsp;</span><code>tmux</code>。</p></li><li><p style="margin-left:0; margin-right:0">按下<span>&nbsp;</span><code>Ctrl+P</code><span>&nbsp;</span>會以分屏的方式批量登錄，<code>Ctrl+W</code><span>&nbsp;</span>會打開新窗口批量登錄，<code>Ctrl+T</code><span>&nbsp;</span>會打開新 tab 批量登錄。</p></li><li><p style="margin-left:0; margin-right:0"><code>tssh</code><span>&nbsp;</span>不帶參數啓動可以批量登錄服務器，若帶<span>&nbsp;</span><code>-o RemoteCommand</code><span>&nbsp;</span>參數啓動則可以批量執行指定的命令。支持執行指定命令之後進入交互式 shell，但<span>&nbsp;</span><code>Windows Terminal</code><span>&nbsp;</span>不支持分號<span>&nbsp;</span><code>;</code>，可以用<span>&nbsp;</span><code>|cat&amp;&amp;</code><span>&nbsp;</span>代替。舉例：</p><div><div><pre><span><span style="color:#005cc5">tssh</span><span style="color:#000080">-t</span><span style="color:#000080">-o</span><span style="color:#008080">RemoteCommand</span><span>=</span><span style="color:#dd1144"><span style="color:#032f62">'ping -c3 trzsz.github.io ; bash'</span></span></span><span>tssh <span style="color:#000080">-t</span><span style="color:#000080">-o</span><span style="color:#008080">RemoteCommand</span><span>=</span><span style="color:#dd1144"><span style="color:#032f62">"ping -c3 trzsz.github.io |cat&amp;&amp; bash"</span></span></span></pre><div>
     &nbsp;
    </div></div></div></li></ul><h2>分組標籤</h2><ul><li><p style="margin-left:0; margin-right:0">如果服務器數量很多，分組標籤<span>&nbsp;</span><code>GroupLabels</code><span>&nbsp;</span>可以在按<span>&nbsp;</span><code>/</code><span>&nbsp;</span>搜索時，快速找到目標服務器。</p></li><li><p style="margin-left:0; margin-right:0">按<span>&nbsp;</span><code>/</code><span>&nbsp;</span>輸入分組標籤後，<code>回車</code>可以鎖定；再按<span>&nbsp;</span><code>/</code><span>&nbsp;</span>可以輸入另一個分組標籤，<code>回車</code>再次鎖定。</p></li><li><p style="margin-left:0; margin-right:0">在非搜索模式下，按<span>&nbsp;</span><code>E</code><span>&nbsp;</span>可以清空當前搜索標籤；在搜索模式下按<span>&nbsp;</span><code>Ctrl + E</code><span>&nbsp;</span>也是同樣效果。</p></li><li><p style="margin-left:0; margin-right:0">支持在一個<span>&nbsp;</span><code>GroupLabels</code><span>&nbsp;</span>中以空格分隔，配置多個分組標籤；支持配置多個<span>&nbsp;</span><code>GroupLabels</code>。</p></li><li><p style="margin-left:0; margin-right:0">支持以通配符 * 的形式，在多個 Host 節點配置分組標籤，<code>tssh</code><span>&nbsp;</span>會將所有的標籤彙總起來。</p><div><div><pre><span><span style="color:#6a737d"># 以下 testAA 具有標籤 group1 group2 label3 label4 group5，可以加上 `#!!` 前綴，以兼容標準 ssh</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">test*</span></span><span><span style="color:#6a737d">    #!! GroupLabels group1 group2</span></span><span><span style="color:#6a737d">    #!! GroupLabels label3</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">testAA</span></span><span><span style="color:#6a737d">    #!! GroupLabels label4 group5</span></span></pre><div>
     &nbsp;
    </div></div></div></li></ul><h2>自動交互</h2><ul><li><p style="margin-left:0; margin-right:0">支持類似<span>&nbsp;</span><code>expect</code><span>&nbsp;</span>的自動交互功能，可以在登錄服務器之後，自動匹配服務器的輸出，然後自動輸入。</p><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">auto</span></span><span><span style="color:#6a737d">    #!! ExpectCount 5  # 配置自動交互的次數，默認是 0 即無自動交互</span></span><span><span style="color:#6a737d">    #!! ExpectTimeout 30  # 配置自動交互的超時時間（單位：秒），默認是 30 秒</span></span><span><span style="color:#6a737d">    #!! ExpectPattern1 *assword  # 配置第一個自動交互的匹配表達式</span></span><span><span style="color:#6a737d">    # 配置第一個自動輸入（密文），這是由 tssh --enc-secret 編碼得到的字符串，tssh 會自動發送 \r 回車</span></span><span><span style="color:#6a737d">    #!! ExpectSendPass1 d7983b4a8ac204bd073ed04741913befd4fbf813ad405d7404cb7d779536f8b87e71106d7780b2</span></span><span><span style="color:#6a737d">    #!! ExpectPattern2 hostname*$  # 配置第二個自動交互的匹配表達式</span></span><span><span style="color:#6a737d">    #!! ExpectSendText2 echo tssh expect\r  # 配置第二個自動輸入（明文），需要指定 \r 才會發送回車</span></span><span><span style="color:#6a737d">    # 以上 ExpectSendPass? 和 ExpectSendText? 只要二選一即可，若都配置則 ExpectSendPass? 的優先級更高</span></span><span><span style="color:#6a737d">    # --------------------------------------------------</span></span><span><span style="color:#6a737d">    # 在每個 ExpectPattern 匹配之前，可以配置一個或多個可選的匹配，用法如下：</span></span><span><span style="color:#6a737d">    #!! ExpectPattern3 hostname*$  # 配置第三個自動交互的匹配表達式</span></span><span><span style="color:#6a737d">    #!! ExpectSendText3 ssh xxx\r  # 配置第三個自動輸入，也可以換成 ExpectSendPass3 然後配置密文</span></span><span><span style="color:#6a737d">    #!! ExpectCaseSendText3 yes/no y\r  # 在 ExpectPattern3 匹配之前，若遇到 yes/no 則發送 y 並回車</span></span><span><span style="color:#6a737d">    #!! ExpectCaseSendText3 y/n yes\r   # 在 ExpectPattern3 匹配之前，若遇到 y/n 則發送 yes 並回車</span></span><span><span style="color:#6a737d">    #!! ExpectCaseSendPass3 token d7... # 在 ExpectPattern3 匹配之前，若遇到 token 則解碼 d7... 併發送</span></span><span><span style="color:#6a737d">    # --------------------------------------------------</span></span><span><span style="color:#6a737d">    #!! ExpectPattern4 token:  # 配置第四個自動交互的匹配表達式（這裏以動態密碼舉例）</span></span><span><span style="color:#6a737d">    #!! ExpectSendOtp4 oathtool --totp -b xxxxx  # 配置獲取動態密碼的命令（明文）</span></span><span><span style="color:#6a737d">    #!! ExpectPattern5 token:  # 配置第五個自動交互的匹配表達式（這裏以動態密碼舉例）</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入命令 oathtool --totp -b xxxxx 得到的密文串</span></span><span><span style="color:#6a737d">    #!! ExpectSendEncOtp5 77b4ce85d087b39909e563efb165659b22b9ea700a537f1258bdf56ce6fdd6ea70bc7591ea5c01918537a65433133bc0bd5ed3e4</span></span></pre><div>
     &nbsp;
    </div></div></div><ul><li>配置<span>&nbsp;</span><code>ExpectCount</code><span>&nbsp;</span>大於<span>&nbsp;</span><code>0</code><span>&nbsp;</span>之後，使用<span>&nbsp;</span><code>tssh --debug</code><span>&nbsp;</span>登錄，可以看到<span>&nbsp;</span><code>expect</code><span>&nbsp;</span>捕獲到的輸出。</li></ul></li></ul><h2>記住密碼</h2><ul><li><p style="margin-left:0; margin-right:0">為了兼容標準 ssh ，密碼可以單獨配置在<span>&nbsp;</span><code>~/.ssh/password</code><span>&nbsp;</span>中，也可以在<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>中加上<span>&nbsp;</span><code>#!!</code><span>&nbsp;</span>前綴。</p></li><li><p style="margin-left:0; margin-right:0">推薦使用前面公鑰認證的方式，密碼的安全性弱一些。如果必須要用密碼，建議至少設置好權限，如：</p><div><div><pre><span><span style="color:#0086b3">chmod </span><span>700</span> ~<span>/.ssh </span><span><span>&amp;&amp;</span></span><span></span><span style="color:#0086b3"><span>chmod </span></span><span>600 ~/</span>.ssh<span>/password ~/</span>.ssh/config</span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">下面配置<span>&nbsp;</span><code>test1</code><span>&nbsp;</span>和<span>&nbsp;</span><code>test2</code><span>&nbsp;</span>的密碼是<span>&nbsp;</span><code>123456</code>，其他以<span>&nbsp;</span><code>test</code><span>&nbsp;</span>開頭的密碼是<span>&nbsp;</span><code>111111</code>：</p><div><div><pre><span><span style="color:#6a737d"># 如果配置在 ~/.ssh/config 中，可以加上 `#!!` 前綴，以兼容標準 ssh</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">test1</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入密碼 123456 得到的密文串，每次運行結果不同。</span></span><span><span style="color:#6a737d">    #!! encPassword 756b17766f45bdc44c37f811db9990b0880318d5f00f6531b15e068ef1fde2666550</span></span><span style="color:#6a737d"></span><span><span style="color:#6a737d"># 如果配置在 ~/.ssh/password 中，則不需要考慮是否兼容標準 ssh</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">test2</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入密碼 123456 得到的密文串，每次運行結果不同。</span></span><span><span style="color:#6f42c1">encPassword</span><span style="color:#032f62">051a2f0fdc7d0d40794b845967df4c2d05b5eb0f25339021dc4e02a9d7620070654b</span></span><span style="color:#6a737d"></span><span><span style="color:#6a737d"># ~/.ssh/config 和 ~/.ssh/password 是支持通配符的，tssh 會使用第一個匹配到的值。</span></span><span><span style="color:#6a737d"># 這裏希望 test2 使用區別於其他 test* 的密碼，所以將 test* 放在了 test2 的後面。</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">test*</span></span><span><span style="color:#6f42c1">Password</span><span style="color:#032f62">111111  # 支持明文密碼，但是推薦使用 tssh --enc-secret 簡單加密一下。</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">如果啓用了<span>&nbsp;</span><code>ControlMaster</code><span>&nbsp;</span>多路複用，或者是在<span>&nbsp;</span><code>Warp</code><span>&nbsp;</span>終端，需要使用前面<span>&nbsp;</span><code>自動交互</code><span>&nbsp;</span>的方式實現記住密碼的效果。配置方式請參考前面<span>&nbsp;</span><code>自動交互</code>，加上<span>&nbsp;</span><code>Ctrl</code><span>&nbsp;</span>前綴即可，如：</p><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">ctrl</span></span><span><span style="color:#6a737d">    #!! CtrlExpectCount 1  # 配置自動交互的次數，一般只要輸入一次密碼</span></span><span><span style="color:#6a737d">    #!! CtrlExpectPattern1 *assword    # 配置密碼提示語的匹配表達式</span></span><span><span style="color:#6a737d">    #!! CtrlExpectSendPass1 d7983b...  # 配置 tssh --enc-secret 編碼後的密碼</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">支持記住私鑰的<span>&nbsp;</span><code>Passphrase</code>（ 推薦使用<span>&nbsp;</span><code>ssh-agent</code><span>&nbsp;</span>）。支持與<span>&nbsp;</span><code>IdentityFile</code><span>&nbsp;</span>一起配置，支持使用私鑰文件名代替 Host 別名設置通用密鑰的<span>&nbsp;</span><code>Passphrase</code>。舉例：</p><div><div><pre><span><span style="color:#6a737d"># IdentityFile 和 Passphrase 一起配置，可以加上 `#!!` 前綴，以兼容標準 ssh</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">test1</span></span><span><span style="color:#6f42c1">IdentityFile</span><span style="color:#032f62">/path/to/id_rsa</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入密碼 123456 得到的密文串，每次運行結果不同。</span></span><span><span style="color:#6a737d">    #!! encPassphrase 6f419911555b0cdc84549ae791ef69f654118d734bb4351de7e83163726ef46d176a</span></span><span style="color:#6a737d"></span><span><span style="color:#6a737d"># 在 ~/.ssh/config 中配置通用私鑰 ~/.ssh/id_ed25519 對應的 Passphrase</span></span><span><span style="color:#6a737d"># 可以加上通配符 * 以避免 tssh 搜索和選擇時，文件名出現在服務器列表中。</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">id_ed25519*</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入密碼 111111 得到的密文串，每次運行結果不同。</span></span><span><span style="color:#6a737d">    #!! encPassphrase 3a929328f2ab1be0ba3fccf29e8125f8e2dac6dab73c946605cf0bb8060b05f02a68</span></span><span style="color:#6a737d"></span><span><span style="color:#6a737d"># 在 ~/.ssh/password 中配置則不需要通配符*，也不會出現在服務器列表中。</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">id_rsa</span></span><span><span style="color:#6f42c1">Passphrase</span><span style="color:#032f62">111111  # 支持明文密碼，但是推薦使用 tssh --enc-secret 簡單加密一下。</span></span></pre><div>
     &nbsp;
    </div></div></div></li></ul><h2>記住答案</h2><ul><li><p style="margin-left:0; margin-right:0">除了私鑰和密碼，還有一種登錄方式，英文叫 keyboard interactive ，是服務器返回一些問題，客戶端提供正確的答案就能登錄，很多自定義的一次性密碼就是利用這種方式實現的。</p></li><li><p style="margin-left:0; margin-right:0">對於只有一個問題，且答案（密碼）固定不變的，只要配置<span>&nbsp;</span><code>QuestionAnswer1</code><span>&nbsp;</span>即可。對於有多個問題的，可以按問題的序號進行配置，也可以按問題的 hex 編碼進行配置。</p></li><li><p style="margin-left:0; margin-right:0">使用<span>&nbsp;</span><code>tssh --debug</code><span>&nbsp;</span>登錄，會輸出問題的 hex 編碼，從而知道該如何使用 hex 編碼進行配置。配置舉例：</p><div><div><pre><span><span style="color:#6a737d"># 如果配置在 ~/.ssh/config 中，可以加上 `#!!` 前綴，以兼容標準 ssh</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">test1</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入答案 `答案一` 得到的密文串，每次運行結果不同。</span></span><span><span style="color:#6f42c1">encQuestionAnswer1</span><span style="color:#032f62">482de7690ccc5229299ccadd8de1cb7c6d842665f0dc92ff947a302f644817baecbab38601</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">test2</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入答案 `答案一` 得到的密文串，每次運行結果不同。</span></span><span><span style="color:#6f42c1">encQuestionAnswer1</span><span style="color:#032f62">43e86f1140cf6d8c786248aad95a26f30633f1eab671676b0860ecb5b1a64fb3ec5212dddf</span></span><span><span style="color:#6f42c1">QuestionAnswer2</span><span style="color:#032f62">答案二  # 支持明文答案，但是推薦使用 tssh --enc-secret 簡單加密一下。</span></span><span><span style="color:#6f42c1">QuestionAnswer3</span><span style="color:#032f62">答案三</span></span><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">test3</span></span><span><span style="color:#6a737d">    # 其中 `6e616d653a20` 是問題 `name: ` 的 hex 編碼，`enc` 前綴代表配置的是密文串。</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入答案 `my_name` 得到的密文串，每次運行結果不同。</span></span><span><span style="color:#6f42c1">enc6e616d653a20</span><span style="color:#032f62">775f2523ab747384e1661aba7779011cb754b73f2e947672c7fd109607b801d70902d1</span></span><span><span style="color:#6f42c1">636f64653a20</span><span style="color:#032f62">my_code  # 其中 `636f64653a20` 是問題 `code: ` 的 hex 編碼, `my_code` 是明文答案</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">對於可以通過命令行獲取到的動態密碼，則可以如下配置（同樣支持按序號或 hex 編碼進行配置）：</p><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">otp</span></span><span><span style="color:#6f42c1">OtpCommand1</span><span style="color:#032f62">oathtool --totp -b xxxxx  # 按序號配置獲取動態密碼的命令</span></span><span><span style="color:#6f42c1">otp636f64653a20</span><span style="color:#032f62">oathtool --totp -b xxxxx  # 按 `code: ` 的 hex 編碼 `636f64653a20` 配置獲取動態密碼的命令</span></span><span><span style="color:#6a737d">    # 下面是運行 tssh --enc-secret 輸入命令 oathtool --totp -b xxxxx 得到的密文串，加上 `enc` 前綴進行配置</span></span><span><span style="color:#6f42c1">encOtpCommand2</span><span style="color:#032f62">77b4ce85d087b39909e563efb165659b22b9ea700a537f1258bdf56ce6fdd6ea70bc7591ea5c01918537a65433133bc0bd5ed3e4</span></span><span><span style="color:#6f42c1">encotp636f64653a20</span><span style="color:#032f62">77b4ce85d087b39909e563efb165659b22b9ea700a537f1258bdf56ce6fdd6ea70bc7591ea5c01918537a65433133bc0bd5ed3e4</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">如果啓用了<span>&nbsp;</span><code>ControlMaster</code><span>&nbsp;</span>多路複用，或者是在<span>&nbsp;</span><code>Warp</code><span>&nbsp;</span>終端，請參考前面<span>&nbsp;</span><code>自動交互</code><span>&nbsp;</span>加<span>&nbsp;</span><code>Ctrl</code><span>&nbsp;</span>前綴來實現。</p><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">ctrl_otp</span></span><span><span style="color:#6a737d">    #!! CtrlExpectCount 1  # 配置自動交互的次數，一般只要輸入一次密碼</span></span><span><span style="color:#6a737d">    #!! CtrlExpectPattern1 token:  # 配置密碼提示語的匹配表達式（這裏以動態密碼舉例）</span></span><span><span style="color:#6a737d">    #!! CtrlExpectSendOtp1 oathtool --totp -b xxxxx  # 配置獲取動態密碼的命令（明文）</span></span><span><span style="color:#6a737d">    #!! CtrlExpectSendEncOtp1 77b4ce85d0...  # 或者配置 tssh --enc-secret 得到的密文串</span></span></pre><div>
     &nbsp;
    </div></div></div></li></ul><h2>可選配置</h2><ul><li><p style="margin-left:0; margin-right:0">支持在<span>&nbsp;</span><code>~/.tssh.conf</code>（ Windows 是<span>&nbsp;</span><code>C:\Users\your_name\.tssh.conf</code><span>&nbsp;</span>）中進行以下自定義配置：</p><div><div><pre><span><span style="color:#6a737d"># SSH 配置路徑，默認為 ~/.ssh/config</span></span><span><span style="color:#6f42c1">ConfigPath</span> = ~/.ssh/config</span><span><span style="color:#6a737d"># 擴展配置路徑，默認為 ~/.ssh/password</span></span><span><span style="color:#6f42c1">ExConfigPath</span> = ~/.ssh/password</span><span><span style="color:#6a737d"># trz 上傳時，對話框打開的路徑，為空時打開上次的路徑， 默認為空</span></span><span><span style="color:#6f42c1">DefaultUploadPath</span> = ~/Downloads</span><span><span style="color:#6a737d"># tsz 下載時，自動保存的路徑，為空時彈出對話框手工選擇，默認為空</span></span><span><span style="color:#6f42c1">DefaultDownloadPath</span> = ~/Downloads</span><span><span style="color:#6a737d"># tssh 搜索和選擇服務器時，每頁顯示的記錄數，默認為 10</span></span><span><span style="color:#6f42c1">PromptPageSize</span> = <span>10</span></span><span><span style="color:#6a737d"># tssh 搜索和選擇服務器時，默認是類似 vim 的 normal 模式，想默認進入搜索模式可如下配置：</span></span><span><span style="color:#6f42c1">PromptDefaultMode</span> = search</span><span><span style="color:#6a737d"># tssh 搜索和選擇服務器時，詳情中顯示的配置列表，默認如下：</span></span><span><span style="color:#6f42c1">PromptDetailItems</span> = Alias Host Port User GroupLabels IdentityFile ProxyCommand ProxyJump RemoteCommand</span><span><span style="color:#6a737d"># tssh 搜索和選擇服務器時，可以自定義光標和選中的圖標：</span></span><span><span style="color:#6f42c1">PromptCursorIcon</span> = &gt;&gt;</span><span><span style="color:#6f42c1">PromptSelectedIcon</span> = ++</span><span><span style="color:#6a737d"># 登錄後自動設置終端標題，退出後不會重置，你需要參考下文在本地 shell 中設置 PROMPT_COMMAND</span></span><span><span style="color:#6f42c1">SetTerminalTitle</span> = <span style="color:#005cc5">Yes</span></span></pre><div>
     &nbsp;
    </div></div></div></li></ul><h2>其他功能</h2><ul><li><p style="margin-left:0; margin-right:0">使用<span>&nbsp;</span><code>-f</code><span>&nbsp;</span>後台運行時，可以加上<span>&nbsp;</span><code>--reconnect</code><span>&nbsp;</span>參數，在後台進程因連接斷開等而退出時，會自動重新連接。</p></li><li><p style="margin-left:0; margin-right:0">使用<span>&nbsp;</span><code>--dragfile</code><span>&nbsp;</span>啓用拖拽上傳功能，想默認啓用則可以在<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>或<span>&nbsp;</span><code>ExConfigPath</code><span>&nbsp;</span>中配置：</p><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">*</span></span><span><span style="color:#6a737d">  # 如果配置在 ~/.ssh/config 中，可以加上 `#!!` 前綴，以兼容標準 ssh</span></span><span><span style="color:#6f42c1">EnableDragFile</span><span style="color:#032f62">Yes</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">使用<span>&nbsp;</span><code>--zmodem</code><span>&nbsp;</span>啓用<span>&nbsp;</span><code>rz / sz</code><span>&nbsp;</span>功能，想默認啓用則可以在<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>或<span>&nbsp;</span><code>ExConfigPath</code><span>&nbsp;</span>中配置：</p><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">server0</span></span><span><span style="color:#6a737d">  # 如果配置在 ~/.ssh/config 中，可以加上 `#!!` 前綴，以兼容標準 ssh</span></span><span><span style="color:#6f42c1">EnableZmodem</span><span style="color:#032f62">Yes</span></span></pre><div>
     &nbsp;
    </div></div></div><ul><li><p style="margin-left:0; margin-right:0">需要在客戶端（ 本地電腦 ）上安裝<span>&nbsp;</span><code>lrzsz</code>，Windows 可以從<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Ftrzsz%2Flrzsz-win32%2Freleases">lrzsz-win32</a><span>&nbsp;</span>下載解壓並加到<span>&nbsp;</span><code>PATH</code><span>&nbsp;</span>中，也可以如下安裝：</p><div><div><pre><span>scoop <span style="color:#d73a49">install</span> https://trzsz.github.io/lrzsz.json</span><span>choco <span style="color:#d73a49">install</span> lrzsz <span style="color:#6a737d">--version=0.12.21</span></span></pre><div>
       &nbsp;
      </div></div></div></li><li><p style="margin-left:0; margin-right:0">關於<span>&nbsp;</span><code>rz / sz</code><span>&nbsp;</span>進度條，己傳大小和傳輸速度會有一點偏差，它的主要作用只是指示傳輸正在進行中。</p></li></ul></li><li><p style="margin-left:0; margin-right:0">使用<span>&nbsp;</span><code>-oEnableTrzsz=No</code><span>&nbsp;</span>禁用 trzsz 功能，想默認禁用則可以在<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>或<span>&nbsp;</span><code>ExConfigPath</code><span>&nbsp;</span>中配置：</p><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">server1</span></span><span><span style="color:#6a737d">  # 如果配置在 ~/.ssh/config 中，可以加上 `#!!` 前綴，以兼容標準 ssh</span></span><span><span style="color:#6f42c1">EnableTrzsz</span><span style="color:#032f62">No</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">上文説的 「記住密碼」 和 「記住答案」，只要在配置項前面加上<span>&nbsp;</span><code>enc</code><span>&nbsp;</span>則可以配置密文，防止被人窺屏。並且，密文可以解決密碼含有<code>#</code>的問題。</p><ul><li>運行<span>&nbsp;</span><code>tssh --enc-secret</code>，輸入密碼或答案，可得到用於配置的密文（ 相同密碼每次運行結果不同 ）：</li></ul><div><div><pre><span><span style="color:#6f42c1">Host</span><span style="color:#032f62">server2</span></span><span><span style="color:#6a737d">  # 如果配置在 ~/.ssh/config 中，可以加上 `#!!` 前綴，以兼容標準 ssh</span></span><span><span style="color:#6f42c1">encPassword</span><span style="color:#032f62">de88c4dbdc95d85303682734e2397c4d8dd29bfff09ec53580f31dd40291fc8c7755</span></span><span><span style="color:#6f42c1">encQuestionAnswer1</span><span style="color:#032f62">93956f6e7e9f2aef3af7d6a61f7046dddf14aa4bbd9845dbb836fe3782b62ac0d89f</span></span></pre><div>
     &nbsp;
    </div></div></div></li><li><p style="margin-left:0; margin-right:0">運行<span>&nbsp;</span><code>tssh --new-host</code><span>&nbsp;</span>可以在 TUI 界面輕鬆添加 SSH 配置，並且完成後可以立即登錄。</p></li><li><p style="margin-left:0; margin-right:0">運行<span>&nbsp;</span><code>tssh --install-trzsz</code><span>&nbsp;</span>可以將<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Ftrzsz%2Ftrzsz-go">trzsz</a><span>&nbsp;</span>(<span>&nbsp;</span><code>trz</code><span>&nbsp;</span>/<span>&nbsp;</span><code>tsz</code><span>&nbsp;</span>) 安裝到服務器上。</p><ul><li>默認安裝到<span>&nbsp;</span><code>~/.local/bin/</code><span>&nbsp;</span>目錄，可以通過<span>&nbsp;</span><code>--install-path /path/to/install</code><span>&nbsp;</span>指定安裝目錄。</li><li>若<span>&nbsp;</span><code>--install-path</code><span>&nbsp;</span>安裝目錄含有<span>&nbsp;</span><code>~/</code>，則必須加上單引號，如<span>&nbsp;</span><code>--install-path '~/path'</code>。</li><li>若獲取<span>&nbsp;</span><code>trzsz</code><span>&nbsp;</span>的最新版本號失敗，可以通過<span>&nbsp;</span><code>--trzsz-version x.x.x</code><span>&nbsp;</span>參數自行指定。</li><li>若下載<span>&nbsp;</span><code>trzsz</code><span>&nbsp;</span>的安裝包失敗，可以自行下載並通過<span>&nbsp;</span><code>--trzsz-bin-path /path/to/trzsz.tar.gz</code><span>&nbsp;</span>參數指定。</li><li>注意：<code>--install-trzsz</code><span>&nbsp;</span>不支持 Windows 服務器，不支持跳板機（ 除非以<span>&nbsp;</span><code>ProxyJump</code><span>&nbsp;</span>跳過 ）。</li></ul></li><li><p style="margin-left:0; margin-right:0">關於修改終端標題，其實無需<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>就能實現，只要在服務器的 shell 配置文件中（如<span>&nbsp;</span><code>~/.bashrc</code>）配置：</p><div><div><pre><span><span style="color:#888888"><span style="color:#6a737d"># 設置固定的服務器標題</span></span></span><span><span style="color:#008080">PROMPT_COMMAND</span><span>=</span><span style="color:#dd1144">'echo -ne <span style="color:#032f62">"\033]0;固定的服務器標題\007"</span>'</span></span><span><span style="color:#888888"><span style="color:#6a737d"># 根據環境變量動態變化的標題</span></span></span><span><span style="color:#008080">PROMPT_COMMAND</span><span>=</span><span style="color:#dd1144">'echo -ne <span style="color:#032f62">"\033]0;${USER}@${HOSTNAME}: ${PWD}\007"</span>'</span></span></pre><div>
     &nbsp;
    </div></div></div><ul><li>如果在<span>&nbsp;</span><code>~/.tssh.conf</code><span>&nbsp;</span>中設置了<span>&nbsp;</span><code>SetTerminalTitle = Yes</code>，則會在登錄後自動設置終端標題，但是服務器上的<span>&nbsp;</span><code>PROMPT_COMMAND</code><span>&nbsp;</span>會覆蓋<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>設置的標題。</li><li>在<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>退出後不會重置為原來的標題，你需要在本地 shell 中設置<span>&nbsp;</span><code>PROMPT_COMMAND</code>，讓它覆蓋<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>設置的標題。</li></ul></li></ul><h2>快捷鍵</h2><table cellspacing="0" style="-webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; border:none; box-sizing:border-box; color:#40485b; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Liberation Sans&quot;,&quot;PingFang SC&quot;,&quot;Microsoft YaHei&quot;,&quot;Hiragino Sans GB&quot;,&quot;Wenquanyi Micro Hei&quot;,&quot;WenQuanYi Zen Hei&quot;,&quot;ST Heiti&quot;,SimHei,SimSun,&quot;WenQuanYi Zen Hei Sharp&quot;,sans-serif; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; line-height:inherit; margin:0px 0px 16px; max-width:100%; orphans:2; overflow:auto; text-align:left; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; width:634px; word-break:initial; word-spacing:0px"><tbody><tr><th>操作</th><th>全局快捷鍵</th><th>非搜索快捷鍵</th><th>快捷鍵描述</th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Confirm</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Enter</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">&nbsp;</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">確認並登錄</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Quit/Exit</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+C Ctrl+Q</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">q Q</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">取消並退出</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Move Prev</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+K Shift+Tab ↑</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">k K</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">往上移光標</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Move Next</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+J Tab ↓</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">j J</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">往下移光標</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Page Up</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+H Ctrl+U Ctrl+B PageUp ←</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">h H u U b B</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">往上翻一頁</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Page Down</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+L Ctrl+D Ctrl+F PageDown →</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">l L d D f F</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">往下翻一頁</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Goto Home</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Home</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">g</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">跳到第一行</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Goto End</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">End</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">G</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">跳到最尾行</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">EraseKeys</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+E</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">e E</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">擦除搜索關鍵字</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">TglSearch</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">/</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">&nbsp;</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">切換搜索功能</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Tgl Help</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">?</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">&nbsp;</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">切換幫助信息</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">TglSelect</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+X Ctrl+Space Alt+Space</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Space x X</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">切換選中狀態</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">SelectAll</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+A</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">a A</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">全選當前頁</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">SelectOpp</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+O</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">o O</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">反選當前頁</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Open Wins</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+W</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">w W</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">新窗口批量登錄</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Open Tabs</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+T</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">t T</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">新 Tab 批量登錄</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Open Pane</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">Ctrl+P</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">p P</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">分屏批量登錄</td></tr></tbody></table><h2>故障排除</h2><ul><li><p style="margin-left:0; margin-right:0">在 Warp 終端，分塊 Blocks 的功能需要將<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>重命名為<span>&nbsp;</span><code>ssh</code>，推薦建個軟鏈接（ 對更新友好 ）：</p><div><div><pre><span>sudo ln -sv $(<span>which</span> tssh) /usr/<span>local</span>/bin/ssh</span></pre><div>
     &nbsp;
    </div></div></div><ul><li><p style="margin-left:0; margin-right:0">軟鏈後，<code>ssh -V</code><span>&nbsp;</span>應輸出<span>&nbsp;</span><code>trzsz ssh</code><span>&nbsp;</span>加版本號，如果不是，説明軟鏈不成功，或者在<span>&nbsp;</span><code>PATH</code><span>&nbsp;</span>中<span>&nbsp;</span><code>openssh</code><span>&nbsp;</span>的優先級更高，你要軟鏈到另一個地方或者調整<span>&nbsp;</span><code>PATH</code><span>&nbsp;</span>的優先級。</p></li><li><p style="margin-left:0; margin-right:0">軟鏈後，要直接使用<span>&nbsp;</span><code>ssh</code>，它等價於<span>&nbsp;</span><code>tssh</code>。如果還是用<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>是不會支持分塊 Blocks 功能的。</p></li><li><p style="margin-left:0; margin-right:0"><code>--dragfile</code><span>&nbsp;</span>參數可能會讓 Warp 分塊功能失效，請參考前文配置<span>&nbsp;</span><code>EnableDragFile</code><span>&nbsp;</span>來啓用拖拽功能。</p></li><li><p style="margin-left:0; margin-right:0">拖拽文件或目錄進入 Warp 終端後，可能不會立即觸發上傳，需要多按一次<code>回車</code>鍵，才會上傳。</p></li></ul></li><li><p style="margin-left:0; margin-right:0">如果你在使用 Windows7 或者舊版本的 Windows10 等，遇到<span>&nbsp;</span><code>enable virtual terminal failed</code><span>&nbsp;</span>的錯誤。</p><ul><li>可以嘗試在<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fwww.cygwin.com%2F">Cygwin</a>、<a href="https://gitee.com/link?target=https%3A%2F%2Fwww.msys2.org%2F">MSYS2</a><span>&nbsp;</span>或<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fwww.atlassian.com%2Fgit%2Ftutorials%2Fgit-bash">Git Bash</a><span>&nbsp;</span>內使用<span>&nbsp;</span><code>tssh</code>。</li></ul></li><li><p style="margin-left:0; margin-right:0">如果在<span>&nbsp;</span><code>~/.ssh/config</code><span>&nbsp;</span>中配置了<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>特有的配置項後，標準<span>&nbsp;</span><code>ssh</code><span>&nbsp;</span>報錯<span>&nbsp;</span><code>Bad configuration option</code>。</p><ul><li>可以在出錯配置項中加上前綴<span>&nbsp;</span><code>#!!</code>，標準<span>&nbsp;</span><code>ssh</code><span>&nbsp;</span>會將它當作註釋，而<span>&nbsp;</span><code>tssh</code><span>&nbsp;</span>則會認為它是有效配置之一。</li></ul></li></ul><h2>錄屏演示</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://oscimg.oschina.net/oscnet/up-54f8b9038c71ec6266ed9ea132201d719a2.gif" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img height="500" src="https://oscimg.oschina.net/oscnet/up-8d4a7807c70fece1f4ad71aafa38e7ca261.gif" width="800" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 02 Jan 2024 02:29:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/273927/tssh-0-1-17</guid>
            <link>https://www.oschina.net/news/273927/tssh-0-1-17</link>
            <author>
                <![CDATA[來源: 投稿]]>
            </author>
        </item>
    </channel>
</rss>
