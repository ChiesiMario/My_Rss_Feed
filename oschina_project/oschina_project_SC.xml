<?xml version="1.0" encoding="UTF-8"?>
<rss
    xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"


>
    <channel>
        <title>
            <![CDATA[开源中国-软件更新资讯]]>
        </title>
        <link>https://www.oschina.net/news/project</link>
        <atom:link href="https://rsshub.app/oschina/news/project" rel="self" type="application/rss+xml" />
        <description>
            <![CDATA[开源中国-软件更新资讯 - Made with love by RSSHub(https://github.com/DIYgod/RSSHub)]]>
        </description>
        <generator>RSSHub</generator>
        <webMaster>i@diygod.me (DIYgod)</webMaster>
        <language>zh-cn</language>
        <lastBuildDate>Tue, 26 Dec 2023 11:07:26 GMT</lastBuildDate>
        <ttl>120</ttl>
        <item>
            <title>
                <![CDATA[🎉 领域模型即服务 | Wow 2.12.2 发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow:基于 DDD、EventSourcing 的现代响应式 CQRS 架构微服务开发框架" src="https://static.oschina.net/uploads/img/202312/13135012_Zb9v.svg" width="150" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>基于 DDD、EventSourcing 的现代响应式 CQRS 架构微服务开发框架</strong></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FWow%2Fblob%2Fmvp%2FLICENSE"><img alt="License" src="https://img.shields.io/badge/license-Apache%202-4EB1BA.svg" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FWow%2Freleases"><img alt="GitHub release" src="https://img.shields.io/github/release/Ahoo-Wang/Wow.svg" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fapp.codacy.com%2Fgh%2FAhoo-Wang%2FWow%2Fdashboard%3Futm_source%3Dgh%26utm_medium%3Dreferral%26utm_content%3D%26utm_campaign%3DBadge_grade"><img alt="Codacy Badge" src="https://app.codacy.com/project/badge/Grade/cfc724df22db4f9387525258c8a59609" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fcodecov.io%2Fgh%2FAhoo-Wang%2FWow"><img alt="codecov" src="https://codecov.io/gh/Ahoo-Wang/Wow/branch/main/graph/badge.svg?token=uloJrLoQir" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FWow"><img alt="Integration Test Status" src="https://github.com/Ahoo-Wang/Wow/actions/workflows/integration-test.yml/badge.svg" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FKotlinBy%2Fawesome-kotlin"><img alt="Awesome Kotlin Badge" src="https://kotlin.link/awesome-kotlin.svg" referrerpolicy="no-referrer"></a></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong>领域驱动</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>事件驱动</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>测试驱动</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>声明式设计</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>响应式编程</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>命令查询职责分离</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>事件溯源</strong></p><h2>更新内容</h2><blockquote><p style="margin-left:0; margin-right:0"><strong>永远免费的</strong><em>官方文档（30% 预览版）</em><span>&nbsp;</span>发布！<span>&nbsp;</span>🎉</p><p style="margin-left:0; margin-right:0"><img alt="👉" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_right-8d392cf32998e3bca12bb7b4ee10dae0.png" width="14" referrerpolicy="no-referrer"><span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/" target="_blank">https://ahoowang.gitee.io/wow/</a><span>&nbsp;</span><img alt="👈" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_left-4570b6929b8880ab2e8b8031007fef18.png" width="14" referrerpolicy="no-referrer"></p></blockquote><ul><li>特性 (<code>core</code>):<span>&nbsp;</span><code>PrepareKey</code><span>&nbsp;</span>API 支持重新分配唯一性<span>&nbsp;</span><code>KEY</code></li><li>特性 (<code>dashboard</code>): 点击<span>&nbsp;</span><code>Logo</code><span>&nbsp;</span>跳转到默认导航</li><li>依赖: 升级<span>&nbsp;</span><code>com.google.devtools.ksp:symbol-processing-api</code><span>&nbsp;</span><code>v1.9.22-1.0.16</code></li></ul><h2>快速开始</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">使用<span>&nbsp;</span><a href="https://gitee.com/AhooWang/wow-project-template">Wow 项目模板</a>快速创建基于 Wow 框架的 DDD 项目。</p><h2>特性概览</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-Features" src="https://gitee.com/AhooWang/Wow/raw/main/document/design/assets/Features.png" referrerpolicy="no-referrer"></p><h2>架构图</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-Architecture" src="https://static.oschina.net/uploads/img/202312/13135013_Lcug.svg" referrerpolicy="no-referrer"></p><h2>性能测试 (Example)</h2><ul><li>测试代码：<a href="https://gitee.com/AhooWang/Wow/blob/main/example">Example</a></li><li>测试场景：加入购物车、下单</li><li>命令发送等待模式（<code>WaitStrategy</code>）：<code>SENT</code>、<code>PROCESSED</code></li></ul><h3>部署</h3><ul><li><a href="https://gitee.com/AhooWang/Wow/blob/main/deploy/example/perf/redis.yaml">Redis</a></li><li><a href="https://gitee.com/AhooWang/Wow/blob/main/deploy/example/perf/mongo.yaml">MongoDB</a></li><li><a href="https://gitee.com/AhooWang/Wow/blob/main/deploy/example/perf/kafka.yaml">Kafka</a></li><li><a href="https://gitee.com/AhooWang/Wow/blob/main/deploy/example/perf/config/mongo_kafka_redis.yaml">Application-Config</a></li><li><a href="https://gitee.com/AhooWang/Wow/blob/main/deploy/example/perf/deployment.yaml">Application-Deployment</a></li></ul><h3>测试报告</h3><h4>加入购物车</h4><ul><li><a href="https://gitee.com/AhooWang/Wow/blob/main/deploy/example/request/AddCartItem.http">请求</a></li><li><a href="https://gitee.com/AhooWang/Wow/blob/main/document/example/perf/Example.Cart.Add@SENT.pdf">详细报告 (PDF)-SENT</a></li><li><a href="https://gitee.com/AhooWang/Wow/blob/main/document/example/perf/Example.Cart.Add@PROCESSED.pdf">详细报告 (PDF)-PROCESSED</a></li></ul><blockquote><p style="margin-left:0; margin-right:0">命令等待策略（<code>WaitStrategy</code>）为<span>&nbsp;</span><code>SENT</code><span>&nbsp;</span>模式，加入购物车命令（<code>AddCartItem</code>）写请求 API 经过 2 分钟的压测，平均 TPS 为<span>&nbsp;</span><em>59625</em>，峰值为<span>&nbsp;</span><em>82312</em>，平均响应时间为<span>&nbsp;</span><em>29</em><span>&nbsp;</span>毫秒。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="SENT" src="https://static.oschina.net/uploads/img/202312/13135013_5U15.png" referrerpolicy="no-referrer"></p><blockquote><p style="margin-left:0; margin-right:0">命令等待策略（<code>WaitStrategy</code>）为<span>&nbsp;</span><code>PROCESSED</code><span>&nbsp;</span>模式，加入购物车命令（<code>AddCartItem</code>）写请求 API 经过 2 分钟的压测，平均 TPS 为<span>&nbsp;</span><em>18696</em>，峰值为<span>&nbsp;</span><em>24141</em>，平均响应时间为<span>&nbsp;</span><em>239</em><span>&nbsp;</span>毫秒。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="PROCESSED" src="https://static.oschina.net/uploads/img/202312/13135013_8e5S.png" referrerpolicy="no-referrer"></p><h4>下单</h4><ul><li><a href="https://gitee.com/AhooWang/Wow/blob/main/deploy/example/request/CreateOrder.http">请求</a></li><li><a href="https://gitee.com/AhooWang/Wow/blob/main/document/example/perf/Example.Order.Create@SENT.pdf">详细报告 (PDF)-SENT</a></li><li><a href="https://gitee.com/AhooWang/Wow/blob/main/document/example/perf/Example.Order.Create@PROCESSED.pdf">详细报告 (PDF)-PROCESSED</a></li></ul><blockquote><p style="margin-left:0; margin-right:0">命令等待策略（<code>WaitStrategy</code>）为<span>&nbsp;</span><code>SENT</code><span>&nbsp;</span>模式，下单命令（<code>CreateOrder</code>）写请求 API 经过 2 分钟的压测，平均 TPS 为<span>&nbsp;</span><em>47838</em>，峰值为<span>&nbsp;</span><em>86200</em>，平均响应时间为<span>&nbsp;</span><em>217</em><span>&nbsp;</span>毫秒。</p></blockquote><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">&nbsp;</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="SENT" src="https://static.oschina.net/uploads/img/202312/13135013_iWxL.png" referrerpolicy="no-referrer"></p><blockquote><p style="margin-left:0; margin-right:0">命令等待策略（<code>WaitStrategy</code>）为<span>&nbsp;</span><code>PROCESSED</code><span>&nbsp;</span>模式，下单命令（<code>CreateOrder</code>）写请求 API 经过 2 分钟的压测，平均 TPS 为<span>&nbsp;</span><em>18230</em>，峰值为<span>&nbsp;</span><em>25506</em>，平均响应时间为<span>&nbsp;</span><em>268</em><span>&nbsp;</span>毫秒。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CreateOrder-PROCESSED" src="https://gitee.com/AhooWang/Wow/raw/main/document/example/perf/Example.Order.Create@PROCESSED.png" referrerpolicy="no-referrer"></p><h2>事件源</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-EventSourcing" src="https://static.oschina.net/uploads/img/202312/13135014_lJcu.svg" referrerpolicy="no-referrer"></p><h2>可观测性</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-Observability" src="https://static.oschina.net/uploads/img/202312/13135014_YAFd.png" referrerpolicy="no-referrer"></p><h2>OpenAPI (Spring WebFlux 集成)</h2><blockquote><p style="margin-left:0; margin-right:0">自动注册<span>&nbsp;</span><strong>命令</strong><span>&nbsp;</span>路由处理函数 (<code>HandlerFunction</code>) ，开发人员仅需编写领域模型，即可完成服务开发。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-Spring-WebFlux-Integration" src="https://static.oschina.net/uploads/img/202312/13135014_lVJm.png" referrerpolicy="no-referrer"></p><h2>测试套件：80%+ 的测试覆盖率轻而易举</h2><blockquote><p style="margin-left:0; margin-right:0">Given -&gt; When -&gt; Expect .</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-CI-Flow" src="https://static.oschina.net/uploads/img/202312/13135014_vlP2.png" referrerpolicy="no-referrer"></p><h2>前置条件</h2><ul><li>理解<span>&nbsp;</span><strong>领域驱动设计</strong>：《实现领域驱动设计》、《领域驱动设计：软件核心复杂性应对之道》</li><li>理解<span>&nbsp;</span><strong>命令查询职责分离</strong>（CQRS）</li><li>理解<span>&nbsp;</span><strong>事件源架构</strong></li><li>理解<span>&nbsp;</span><strong>响应式编程</strong></li></ul><h2>Example</h2><h3>订单服务（Kotlin）</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/AhooWang/Wow/blob/main/example">Example-Order</a></p><h3>银行转账（JAVA）</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/AhooWang/Wow/blob/main/example/transfer">Example-Transfer</a></p><h2>单元测试套件</h2><h3>80%+ 的测试覆盖率轻而易举。</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Test Coverage" src="https://static.oschina.net/uploads/img/202312/13135014_MHRR.png" referrerpolicy="no-referrer"></p><blockquote><p style="margin-left:0; margin-right:0">Given -&gt; When -&gt; Expect .</p></blockquote><h3>Aggregate Unit Test (<code>AggregateVerifier</code>)</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/AhooWang/Wow/blob/main/example/example-domain/src/test/kotlin/me/ahoo/wow/example/domain/order/OrderTest.kt">Aggregate Test</a></p><pre><code><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">internal</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">class</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">OrderTest</span></span></span></span></span><span><span></span></span></span>{

    <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">@Test</span></span></span><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">private</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">fun</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">createOrder</span></span></span></span></span><span><span><span><span><span>()</span></span></span></span></span></span> {
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> tenantId = GlobalIdGenerator.generateAsString()
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> customerId = GlobalIdGenerator.generateAsString()

        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> orderItem = OrderItem(
            GlobalIdGenerator.generateAsString(),
            GlobalIdGenerator.generateAsString(),
            BigDecimal.valueOf(<span><span><span>10</span></span></span>),
            <span><span><span>10</span></span></span>,
        )
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> orderItems = listOf(orderItem)
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> inventoryService = <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">object</span></span></span> : InventoryService {
            <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">override</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">fun</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">getInventory</span></span></span></span></span><span><span><span><span><span>(productId: </span></span></span></span><span style="color:#d73a49"><span><span><span style="color:#d73a49"><span><span><span style="color:#d73a49">String</span></span></span></span></span></span></span><span><span><span><span>)</span></span></span></span></span></span>: Mono&lt;<span><span><span>Int</span></span></span>&gt; {
                <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span> orderItems.filter { it.productId == productId }.map { it.quantity }.first().toMono()
            }
        }
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> pricingService = <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">object</span></span></span> : PricingService {
            <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">override</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">fun</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">getProductPrice</span></span></span></span></span><span><span><span><span><span>(productId: </span></span></span></span><span style="color:#d73a49"><span><span><span style="color:#d73a49"><span><span><span style="color:#d73a49">String</span></span></span></span></span></span></span><span><span><span><span>)</span></span></span></span></span></span>: Mono&lt;BigDecimal&gt; {
                <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span> orderItems.filter { it.productId == productId }.map { it.price }.first().toMono()
            }
        }
        aggregateVerifier&lt;Order, OrderState&gt;(tenantId = tenantId)
            .inject(DefaultCreateOrderSpec(inventoryService, pricingService))
            .given()
            .`<span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">when</span></span></span>`(CreateOrder(customerId, orderItems, SHIPPING_ADDRESS, <span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">false</span></span></span>))
            .expectEventCount(<span><span><span>1</span></span></span>)
            .expectEventType(OrderCreated::<span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">class</span></span></span></span></span><span><span>.</span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">java</span></span></span></span></span><span><span>)</span></span></span>
            .expectStateAggregate {
                assertThat(it.aggregateId.tenantId, equalTo(tenantId))
            }
            .expectState {
                assertThat(it.id, notNullValue())
                assertThat(it.customerId, equalTo(customerId))
                assertThat(it.address, equalTo(SHIPPING_ADDRESS))
                assertThat(it.items, equalTo(orderItems))
                assertThat(it.status, equalTo(OrderStatus.CREATED))
            }
            .verify()
    }

    <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">@Test</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">fun</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">createOrderGivenEmptyItems</span></span></span></span></span><span><span><span><span><span>()</span></span></span></span></span></span> {
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> customerId = GlobalIdGenerator.generateAsString()
        aggregateVerifier&lt;Order, OrderState&gt;()
            .inject(mockk&lt;CreateOrderSpec&gt;(), <span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">"createOrderSpec"</span></span></span>)
            .given()
            .`<span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">when</span></span></span>`(CreateOrder(customerId, listOf(), SHIPPING_ADDRESS, <span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">false</span></span></span>))
            .expectErrorType(IllegalArgumentException::<span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">class</span></span></span></span></span><span><span>.</span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">java</span></span></span></span></span><span><span>)</span></span></span>
            .expectStateAggregate {
                <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">/*
                 * 该聚合对象处于未初始化状态，即该聚合未创建成功.
                 */</span></span></span>
                assertThat(it.initialized, equalTo(<span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">false</span></span></span>))
            }.verify()
    }

    <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">/**
     * 创建订单-库存不足
     */</span></span></span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">@Test</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">fun</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">createOrderWhenInventoryShortage</span></span></span></span></span><span><span><span><span><span>()</span></span></span></span></span></span> {
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> customerId = GlobalIdGenerator.generateAsString()
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> orderItem = OrderItem(
            GlobalIdGenerator.generateAsString(),
            GlobalIdGenerator.generateAsString(),
            BigDecimal.valueOf(<span><span><span>10</span></span></span>),
            <span><span><span>10</span></span></span>,
        )
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> orderItems = listOf(orderItem)
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> inventoryService = <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">object</span></span></span> : InventoryService {
            <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">override</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">fun</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">getInventory</span></span></span></span></span><span><span><span><span><span>(productId: </span></span></span></span><span style="color:#d73a49"><span><span><span style="color:#d73a49"><span><span><span style="color:#d73a49">String</span></span></span></span></span></span></span><span><span><span><span>)</span></span></span></span></span></span>: Mono&lt;<span><span><span>Int</span></span></span>&gt; {
                <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span> orderItems.filter { it.productId == productId }
                    <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">/*
                     * 模拟库存不足
                     */</span></span></span>
                    .map { it.quantity - <span><span><span>1</span></span></span> }.first().toMono()
            }
        }
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> pricingService = <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">object</span></span></span> : PricingService {
            <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">override</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">fun</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">getProductPrice</span></span></span></span></span><span><span><span><span><span>(productId: </span></span></span></span><span style="color:#d73a49"><span><span><span style="color:#d73a49"><span><span><span style="color:#d73a49">String</span></span></span></span></span></span></span><span><span><span><span>)</span></span></span></span></span></span>: Mono&lt;BigDecimal&gt; {
                <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span> orderItems.filter { it.productId == productId }.map { it.price }.first().toMono()
            }
        }

        aggregateVerifier&lt;Order, OrderState&gt;()
            .inject(DefaultCreateOrderSpec(inventoryService, pricingService))
            .given()
            .`<span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">when</span></span></span>`(CreateOrder(customerId, orderItems, SHIPPING_ADDRESS, <span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">false</span></span></span>))
            <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">/*
             * 期望：库存不足异常.
             */</span></span></span>
            .expectErrorType(InventoryShortageException::<span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">class</span></span></span></span></span><span><span>.</span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">java</span></span></span></span></span><span><span>)</span></span></span>
            .expectStateAggregate {
                <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">/*
                 * 该聚合对象处于未初始化状态，即该聚合未创建成功.
                 */</span></span></span>
                assertThat(it.initialized, equalTo(<span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">false</span></span></span>))
            }.verify()
    }
}</code></pre><h3>Saga Unit Test (<code>SagaVerifier</code>)</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/AhooWang/Wow/blob/main/example/example-domain/src/test/kotlin/me/ahoo/wow/example/domain/cart/CartSagaTest.kt">Saga Test</a></p><pre><code><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">class</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">CartSagaTest</span></span></span></span></span><span><span></span></span></span>{

    <span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">@Test</span></span></span><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">fun</span></span></span></span></span><span><span></span></span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">onOrderCreated</span></span></span></span></span><span><span><span><span><span>()</span></span></span></span></span></span> {
        <span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">val</span></span></span> orderItem = OrderItem(
            GlobalIdGenerator.generateAsString(),
            GlobalIdGenerator.generateAsString(),
            BigDecimal.valueOf(<span><span><span>10</span></span></span>),
            <span><span><span>10</span></span></span>,
        )
        sagaVerifier&lt;CartSaga&gt;()
            .`<span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">when</span></span></span>`(
                mockk&lt;OrderCreated&gt; {
                    every {
                        customerId
                    } returns <span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">"customerId"</span></span></span>
                    every {
                        items
                    } returns listOf(orderItem)
                    every {
                        fromCart
                    } returns <span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">true</span></span></span>
                },
            )
            .expectCommandBody&lt;RemoveCartItem&gt; {
                assertThat(it.id, equalTo(<span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">"customerId"</span></span></span>))
                assertThat(it.productIds, hasSize(<span><span><span>1</span></span></span>))
                assertThat(it.productIds.first(), equalTo(orderItem.productId))
            }
            .verify()
    }
}</code></pre><h2>设计</h2><h3>聚合建模</h3><table cellspacing="0" style="-webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; border:none; box-sizing:border-box; color:#40485b; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Liberation Sans&quot;,&quot;PingFang SC&quot;,&quot;Microsoft YaHei&quot;,&quot;Hiragino Sans GB&quot;,&quot;Wenquanyi Micro Hei&quot;,&quot;WenQuanYi Zen Hei&quot;,&quot;ST Heiti&quot;,SimHei,SimSun,&quot;WenQuanYi Zen Hei Sharp&quot;,sans-serif; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; line-height:inherit; margin:0px 0px 16px; max-width:100%; orphans:2; overflow:auto; text-align:left; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; word-break:initial; word-spacing:0px"><tbody><tr><th><strong>Single Class</strong></th><th><strong>Inheritance Pattern</strong></th><th><strong>Aggregation Pattern</strong></th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px; text-align:center"><img alt="Single Class - Modeling" src="https://static.oschina.net/uploads/img/202312/13135015_ZxxP.svg" referrerpolicy="no-referrer"></td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px; text-align:center"><img alt="Inheritance Pattern- Modeling" src="https://static.oschina.net/uploads/img/202312/13135015_I09q.svg" referrerpolicy="no-referrer"></td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px; text-align:center"><img alt="Aggregation Pattern- Modeling" src="https://static.oschina.net/uploads/img/202312/13135015_1pS1.svg" referrerpolicy="no-referrer"></td></tr></tbody></table><h3>加载聚合</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Load Aggregate" src="https://static.oschina.net/uploads/img/202312/13135015_puJx.svg" referrerpolicy="no-referrer"></p><h3>聚合状态流</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Aggregate State Flow" src="https://static.oschina.net/uploads/img/202312/13135015_I8NI.svg" referrerpolicy="no-referrer"></p><h3>发送命令</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Send Command" src="https://static.oschina.net/uploads/img/202312/13135015_sU6r.svg" referrerpolicy="no-referrer"></p><h3>命令与事件流</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Command And Event Flow" src="https://static.oschina.net/uploads/img/202312/13135016_5HaD.svg" referrerpolicy="no-referrer"></p><h2>事件补偿</h2><h3>用例图</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Event-Compensation-UserCase" src="https://gitee.com/AhooWang/Wow/raw/main/document/design/assets/Event-Compensation-UserCase.svg" referrerpolicy="no-referrer"></p><h3>执行时序图</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Event-Compensation" src="https://gitee.com/AhooWang/Wow/raw/main/document/design/assets/Event-Compensation.svg" referrerpolicy="no-referrer"></p><h3>Dashboard</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Compensation-Dashboard" src="https://gitee.com/AhooWang/Wow/raw/main/document/design/assets/compensation-dashboard.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Compensation-Dashboard-Error" src="https://gitee.com/AhooWang/Wow/raw/main/document/design/assets/compensation-dashboard-error.png" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 09:06:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272812/wow-2-12-2-released</guid>
            <link>https://www.oschina.net/news/272812/wow-2-12-2-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[凌鲨 0.7.1 版本更新]]>
            </title>
            <description>
                <![CDATA[<div class="content"><h1>凌鲨 0.7.1 版本更新</h1><ul><li><p>服务端版本: 0.2.20&nbsp;</p></li><li><p>新增: 未登录状态下可使用本地仓库功能&nbsp;</p></li><li><p>新增: 未登录状态下可使用微应用&nbsp;</p></li><li><p>新增: 未登录状态下可使用聚合搜索&nbsp;</p></li><li><p>新增: 未登录状态下可使用 Docker 模板&nbsp;</p></li><li><p>新增: 新增全局服务器配置&nbsp;</p></li><li><p>改进: 调整关闭应用按钮逻辑</p></li></ul><h1>相关截图</h1><p><img height="750" src="https://oscimg.oschina.net/oscnet/up-6a0b27807f691c855536752c080d8fd1861.png" width="1300" referrerpolicy="no-referrer"></p><p><img height="750" src="https://oscimg.oschina.net/oscnet/up-ff3f322f5334e027e147047c64b7eff1bb9.png" width="1300" referrerpolicy="no-referrer"></p><p><img height="750" src="https://oscimg.oschina.net/oscnet/up-8090c9822f78788438d588d1f23f5ce69da.png" width="1300" referrerpolicy="no-referrer"></p><p><img height="750" src="https://oscimg.oschina.net/oscnet/up-71a83e9c936c103ee1959c455da150a444a.png" width="1300" referrerpolicy="no-referrer"></p><p><img height="750" src="https://oscimg.oschina.net/oscnet/up-6fa4c14029ea5706ec206c0df57b9c386de.png" width="1300" referrerpolicy="no-referrer"></p><p><img height="750" src="https://oscimg.oschina.net/oscnet/up-73a8cee379218abc7d844065275fbd0d738.png" width="1300" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 08:15:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272799/linksaas-0-7-1-released</guid>
            <link>https://www.oschina.net/news/272799/linksaas-0-7-1-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Enlightenment 0.26.0 发布，桌面管理器]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="background-color:#ffffff; color:#333333">距离 <a href="https://www.oschina.net/news/176019/enlightenment-0-25-0-released">Enlightenment 0.25.0</a> 发布已过去</span>两年，Enlightenment 0.26.0 终于在今年的圣诞节前夕正式发布。</p><p>Enlightenment 是一个桌面管理器，它被归类为 「桌面 shell」，因为它提供了操作 PC 或笔记本电脑所需的一切，但它不是完整的应用程序套件，其功能包括启动应用、管理其窗口以及执行系统任务，如挂起、重启与管理文件等。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="background-color:#ffffff; color:#333333">此版本亮点包括：</span></p><ul style="margin-left:0; margin-right:0"><li><div><span>许多小错误修复（参见 git log）</span></div></li><li><div><span>在 backlight&nbsp;设置中添加 DDC 选项</span></div></li><li><div><span>更大的任务预览</span></div></li><li><div><span>向 wl 模式添加了水印，以便以后知道 E 是否处于实验性 wl 模式</span></div></li><li><div><span>支持新的 eet disk sync API，确保配置已存储</span></div></li><li><div><span>支持 EFM 中的 action 桌面文件，以添加文件动作</span></div></li><li><div><span>添加了 org.freedesktop.ScreenSaver inhibit 支持</span></div></li><li><div><span>已添加 logind 的锁定/解锁 dbus apis 支持</span></div></li><li><div><span>默认情况下添加并启用看门狗线程以检测主循环挂起</span></div></li><li><div><span>添加了在通知中播放声音样本和支持的 API</span></div></li><li><div><span>添加 Randr X11 支持选项以使用 xrandr cmdline 而不是&nbsp;direct API</span></div></li><li><div><span>如果应用程序覆盖了 E 的空白设置，则积极强制使用这些设置</span></div></li><li><div><span>为 mixer actions 添加参数，以允许设置增减量</span></div></li><li><div><span>为平面加速+滚动添加了输入设置选项</span></div></li><li><div><span>添加了是否在 netwm 中设置隐藏状态的选项</span></div></li></ul><p>详情可<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.enlightenment.org%2Fnews%2F2023-12-23-enlightenment-0.26.0" target="_blank">查看更新说明</a>。&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 08:12:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272798/enlightenment-0-26-0-released</guid>
            <link>https://www.oschina.net/news/272798/enlightenment-0-26-0-released</link>
            <author>
                <![CDATA[来源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[web-flash 前端全新升级至 Vue 3.3]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="background-color:#ffffff; color:#1f2328"><span>web-flash 前端全新升级&nbsp;</span>Vue3.3、TypeScript、Vite5、Pinia、Element-Plus<span>&nbsp;。新的升级同时带来新的开发体验，前后端分离为两个项目，后端采用 web-flash 的 v3 分支。</span></span></p><p><span style="background-color:#ffffff; color:#1f2328"><span>具体升级内容如下：</span></span></p><ul><li>前端升级至<span style="background-color:#ffffff; color:#1f2328"><span>&nbsp;</span>Vue3.3、TypeScript、Vite5、Pinia、Element-Plus<span>&nbsp;</span></span></li><li>Issue 打包时默认跳过测试</li><li>Issue 升级 mysql 驱动包到版本:8.0.28</li><li>Change 升级 Logback</li><li>Change 升级 shiro</li><li>Change 默认的 jdk 编译版本升级到 11</li><li>Issue 移除冗余的 maven 依赖</li><li>Issue 工作流的待办任务中增加任务进度图&nbsp;</li></ul><p>前端项目地址：https://gitee.com/enilu/flash-vue3-admin</p><p>后端项目地址：https://gitee.com/enilu/web-flash/tree/v3/</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 07:52:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272791/web-flash-updated</guid>
            <link>https://www.oschina.net/news/272791/web-flash-updated</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[iDempiere 企业级 ERP/CRM/SCM 11 Synergy 发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><div><div><p style="margin-left:0cm; margin-right:0cm"><strong><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.idempiere.org%2F" target="_blank">iDempiere</a>. Community Powered Enterprise</strong></p><p style="margin-left:0cm; margin-right:0cm"><span><span>iDempiere 11 </span></span>Synergy <span><span>于 2023 年 12 月 25 日发布。</span></span></p><p style="margin-left:0cm; margin-right:0cm"><span><span>从 2012 年 10 月 31 日发布 1.0a 至今，iDempiere 已经陪伴我们走过了整整 11 个年头，感谢如此多元化的国际社区，感谢那些为 iDempiere 的强大、倾情奉献的人们。</span></span></p><p style="margin-left:0cm; margin-right:0cm"><span><span>官方仅发布了 11 的上线通知，目前还没有更详细的说明发布。这里站在个人的角度罗列几个相对重要的更新：</span></span></p><ol><li><span><span><span><span>系统基盘的更新</span></span></span></span><br> OpenJDK 17<br> Eclipse 2023-09 ( 目前 wiki 中还是推荐使用 Eclipse 2023-03，笔者也是使用的这一版本成功构建的版本 billboard.js 3.10.3<br><span><span><span style="color:#333333">Jetty 10.0.18<br> Hazelcast 3.4</span></span></span><p>&nbsp;</p></li><li><p>重要功能增强<br><span><span><span style="color:#333333">单点登录：SSO Support</span></span></span></p><p style="margin-left:0; margin-right:0; text-align:justify"><span><span><span><span><span style="color:#333333">分区表的支持（注：之前独自在数据库层级做分区表也是没有问题的，本次是直接通过系统功能来支持分区表）：table partitioning support</span></span></span></span></span></p><p style="margin-left:0; margin-right:0; text-align:justify"><span><span><span><span><span style="color:#333333">Support of UUID as Key</span></span></span></span></span></p><p><span><span><span>HikariCP 连接池初始设置的调整（</span><span style="color:#333333">initial pool size to 10</span><span>）</span></span></span><br> &nbsp;</p></li><li>其他重要更新</li></ol><p style="margin-left:0cm; margin-right:0cm"><span><span>&nbsp; </span></span>https://wiki.idempiere.org/en/Category:New_Features_w11<br> &nbsp;</p><p style="margin-left:0cm; margin-right:0cm"><span><span><strong><span>软件发布履历</span></strong><br> 2022 年 12 月 26 日发布了 10 Peace<br> 2021 年 12 月 27 日发布了 9 Horizon<br> 2020 年 12 </span></span><span><span>月</span></span><span><span> 23 </span></span><span><span>日发布了</span></span><span><span> 8.2 Phong</span></span><br><span><span>2019 年 11 月 22 日发布了 7.1<br> 2019 年 01 月 05 日发布了 6.2<br> 2018 年 11 月 04 日发布了 6.1<br> 2017 年 10 月 31 日发布了 5.1<br> 2016 年 10 月 31 日发布了 4.1<br> 2015 年 10 月 31 日发布了 3.1<br> 2014 年 10 月 31 日发布了 2.1<br> 2013 年 10 月 31 日发布了 2.0<br> 2013 年 06 月 27 日发布了 1.0c<br> 2013 年 04 月 24 日发布了 1.0b<br> 2012 年 10 月 31 日发布了 1.0a</span></span></p></div></div></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 06:19:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272774/idempiere-11-synergy</guid>
            <link>https://www.oschina.net/news/272774/idempiere-11-synergy</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Xmake v2.8.6 发布，新的打包插件：XPack]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake" target="_blank">Xmake</a><span>&nbsp;</span>是一个基于 Lua 的轻量级跨平台构建工具。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">它非常的轻量，没有任何依赖，因为它内置了 Lua 运行时。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">它使用 xmake.lua 维护项目构建，相比 makefile/CMakeLists.txt，配置语法更加简洁直观，对新手非常友好，短时间内就能快速入门，能够让用户把更多的精力集中在实际的项目开发上。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们能够使用它像 Make/Ninja 那样可以直接编译项目，也可以像 CMake/Meson 那样生成工程文件，另外它还有内置的包管理系统来帮助用户解决 C/C++ 依赖库的集成使用问题。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">目前，Xmake 主要用于 C/C++ 项目的构建，但是同时也支持其他 native 语言的构建，可以实现跟 C/C++ 进行混合编译，同时编译速度也是非常的快，可以跟 Ninja 持平。</p><div><pre><code>Xmake = Build backend + Project Generator + Package Manager + [Remote|Distributed] Build + Cache
</code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">尽管不是很准确，但我们还是可以把 Xmake 按下面的方式来理解：</p><div><pre><code>Xmake ≈ Make/Ninja + CMake/Meson + Vcpkg/Conan + distcc + ccache/sccache
</code></pre></div><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake" target="_blank">项目源码</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fxmake.io%2F%23%2Fzh-cn%2F" target="_blank">官方文档</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fxmake.io%2F%23%2Fzh-cn%2Fabout%2Fcourse" target="_blank">入门课程</a></li></ul><h2>新特性介绍</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">在介绍新特性之前，还有个好消息告诉大家，上个版本 Xmake 被收入到了 debian 仓库，而最近 Xmake 又进入了 Fedora 官方仓库，大家可以在 Fedora 39 上，直接通过下面的命令安装 Xmake。</p><div><pre><code><span style="color:#8f5902">$ </span>sudo dnf install xmake
</code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">非常感谢 @topazus @mochaaP 对 Xmake 的贡献，相关信息见：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake%2Fissues%2F941" target="_blank">#941</a>。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">接下来，我们来介绍下，新版本带来的重量级特性：XPack。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">它类似于 CMake 的 CPack 命令，可以将用户工程快速打包生成各种格式的安装包。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">目前 Xmake 的 XPack 已经支持以下格式的打包：</p><ul><li>nsis: Windows 下的可执行安装包</li><li>runself: shell 自编译安装包</li><li>targz: 二进制文件 tar.gz 包（绿色版）</li><li>zip: 二进制文件 zip 包（绿色版）</li><li>srctargz：源文件 tar.gz 包</li><li>srczip: 源文件 zip 包</li><li>srpm: rpm 源码安装包</li><li>rpm: rpm 二进制安装包</li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">除了上述已经支持的打包格式，还有 deb 等包格式也在陆续支持中，并且用户也可以配置生成自定义的包格式文件。</p><h3>XPack 打包</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">下面是一个完整例子，我们可以先简单看下：</p><div><pre><code><span style="color:#000000">set_version</span><strong>(</strong><span style="color:#ff00ff">"1.0.0"</span><strong>)</strong><span style="color:#000000">add_rules</span><strong>(</strong><span style="color:#ff00ff">"mode.debug"</span><strong>,</strong><span style="color:#ff00ff">"mode.release"</span><strong>)</strong><span style="color:#000000">includes</span><strong>(</strong><span style="color:#ff00ff">"@builtin/xpack"</span><strong>)</strong><span style="color:#000000">target</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">set_kind</span><strong>(</strong><span style="color:#ff00ff">"binary"</span><strong>)</strong><span style="color:#000000">add_files</span><strong>(</strong><span style="color:#ff00ff">"src/*.cpp"</span><strong>)</strong><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">set_formats</span><strong>(</strong><span style="color:#ff00ff">"nsis"</span><strong>,</strong><span style="color:#ff00ff">"zip"</span><strong>,</strong><span style="color:#ff00ff">"targz"</span><strong>,</strong><span style="color:#ff00ff">"runself"</span><strong>)</strong><span style="color:#000000">set_title</span><strong>(</strong><span style="color:#ff00ff">"hello"</span><strong>)</strong><span style="color:#000000">set_author</span><strong>(</strong><span style="color:#ff00ff">"ruki"</span><strong>)</strong><span style="color:#000000">set_description</span><strong>(</strong><span style="color:#ff00ff">"A test installer."</span><strong>)</strong><span style="color:#000000">set_homepage</span><strong>(</strong><span style="color:#ff00ff">"https://xmake.io"</span><strong>)</strong><span style="color:#000000">set_licensefile</span><strong>(</strong><span style="color:#ff00ff">"LICENSE.md"</span><strong>)</strong><span style="color:#000000">add_targets</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">add_installfiles</span><strong>(</strong><span style="color:#ff00ff">"src/(assets/*.png)"</span><strong>,</strong><strong>{</strong><span style="color:#000000">prefixdir</span><strong>=</strong><span style="color:#ff00ff">"images"</span><strong>})</strong><span style="color:#000000">add_sourcefiles</span><strong>(</strong><span style="color:#ff00ff">"(src/**)"</span><strong>)</strong><span style="color:#000000">set_iconfile</span><strong>(</strong><span style="color:#ff00ff">"src/assets/xmake.ico"</span><strong>)</strong><span style="color:#000000">after_installcmd</span><strong>(</strong><span style="color:blue">function</span><strong>(</strong><span style="color:#000000">package</span><strong>,</strong><span style="color:#000000">batchcmds</span><strong>)</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">mkdir</span><strong>(</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">installdir</span><strong>(</strong><span style="color:#ff00ff">"resources"</span><strong>))</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">cp</span><strong>(</strong><span style="color:#ff00ff">"src/assets/*.txt"</span><strong>,</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">installdir</span><strong>(</strong><span style="color:#ff00ff">"resources"</span><strong>),</strong><strong>{</strong><span style="color:#000000">rootdir</span><strong>=</strong><span style="color:#ff00ff">"src"</span><strong>})</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">mkdir</span><strong>(</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">installdir</span><strong>(</strong><span style="color:#ff00ff">"stub"</span><strong>))</strong><span style="color:blue">end</span><strong>)</strong><span style="color:#000000">after_uninstallcmd</span><strong>(</strong><span style="color:blue">function</span><strong>(</strong><span style="color:#000000">package</span><strong>,</strong><span style="color:#000000">batchcmds</span><strong>)</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">rmdir</span><strong>(</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">installdir</span><strong>(</strong><span style="color:#ff00ff">"resources"</span><strong>))</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">rmdir</span><strong>(</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">installdir</span><strong>(</strong><span style="color:#ff00ff">"stub"</span><strong>))</strong><span style="color:blue">end</span><strong>)</strong></code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们通过<span>&nbsp;</span><code>includes("@builtin/xpack")</code><span>&nbsp;</span>引入 xpack 的所有配置接口，包括 xpack 配置域，以及它的所有域接口。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">然后我们执行：</p><div><pre><code><span style="color:#8f5902">$ </span>xmake pack
</code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">即可生成所有安装包。</p><h3>生成 NSIS 安装包</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">只要配置了<span>&nbsp;</span><code>set_formats("nsis")</code><span>&nbsp;</span>格式，然后执行<span>&nbsp;</span><code>xmake pack</code><span>&nbsp;</span>命令，就能生成 NSIS 格式的安装包。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">另外，xmake 还会自动安装生成 NSIS 包所需的工具，实现真正的一键打包。</p><div><pre><code><span style="color:#8f5902">$ </span>xmake pack
note: install or modify <strong>(</strong>m<strong>)</strong> these packages <strong>(</strong>pass -y to skip confirm<strong>)</strong>?
<span style="color:blue">in </span>xmake-repo:
  -&gt; nsis 3.09
please input: y <strong>(</strong>y/n/m<strong>)</strong><strong>=</strong>&gt; install nsis 3.09 .. ok

<strong>[</strong> 25%]: compiling.release src<span style="color:#ff00ff">\m</span>ain.cpp
<strong>[</strong> 37%]: compiling.release src<span style="color:#ff00ff">\m</span>ain.cpp
<strong>[</strong> 50%]: linking.release foo.dll
<strong>[</strong> 62%]: linking.release test.exe
packing build<span style="color:#ff00ff">\x</span>pack<span style="color:#ff00ff">\t</span>est<span style="color:#ff00ff">\t</span>est-windows-x64-v1.0.0.exe
pack ok
</code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><code>test-windows-x64-v1.0.0.exe</code><span>&nbsp;</span>就是我们生成的安装包，双击运行它，就能安装我们的二进制文件到指定目录。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><img alt="" src="https://xmake.io/assets/img/manual/nsis_1.png" referrerpolicy="no-referrer"><span>&nbsp;</span><img alt="" src="https://xmake.io/assets/img/manual/nsis_2.png" referrerpolicy="no-referrer"><span>&nbsp;</span><img alt="" src="https://xmake.io/assets/img/manual/nsis_3.png" referrerpolicy="no-referrer"></p><h4>增加组件安装</h4><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们还可以给 NSIS 增加组件安装命令，只有当用户选择指定组件的时候，它的安装命令才会被执行。</p><div><pre><code><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">add_components</span><strong>(</strong><span style="color:#ff00ff">"LongPath"</span><strong>)</strong><span style="color:#000000">xpack_component</span><strong>(</strong><span style="color:#ff00ff">"LongPath"</span><strong>)</strong><span style="color:#000000">set_default</span><strong>(</strong><strong>false</strong><strong>)</strong><span style="color:#000000">set_title</span><strong>(</strong><span style="color:#ff00ff">"Enable Long Path"</span><strong>)</strong><span style="color:#000000">set_description</span><strong>(</strong><span style="color:#ff00ff">"Increases the maximum path length limit, up to 32,767 characters (before 256)."</span><strong>)</strong><span style="color:#000000">on_installcmd</span><strong>(</strong><span style="color:blue">function</span><strong>(</strong><span style="color:#000000">component</span><strong>,</strong><span style="color:#000000">batchcmds</span><strong>)</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">rawcmd</span><strong>(</strong><span style="color:#ff00ff">"nsis"</span><strong>,</strong><span style="color:#ff00ff">[[
  ${If} $NoAdmin == "false"
    ; Enable long path
    WriteRegDWORD ${HKLM} "SYSTEM\CurrentControlSet\Control\FileSystem" "LongPathsEnabled" 1
  ${EndIf}]]</span><strong>)</strong><span style="color:blue">end</span><strong>)</strong></code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">这个例子中，我们在里面添加了一个 NSIS 特有的自定义命令，去实现对长路径的支持。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><img alt="" src="https://xmake.io/assets/img/manual/nsis_4.png" referrerpolicy="no-referrer"></p><h3>生成自安装包</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们也可以生成基于 shell 脚本的自编译安装包。我们需要配置 runself 打包格式，然后通过<span>&nbsp;</span><code>add_sourcefiles</code><span>&nbsp;</span>添加需要参与编译安装的源文件。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">接着，我们需要自定义 on_installcmd 安装脚本，里面去配置如果编译源码包，我们可以简单的调用一个内置的编译安装脚本文件，也可以直接配置<span>&nbsp;</span><code>make install</code><span>&nbsp;</span>等编译安装命令。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">例如：</p><div><pre><code><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">set_formats</span><strong>(</strong><span style="color:#ff00ff">"runself"</span><strong>)</strong><span style="color:#000000">add_sourcefiles</span><strong>(</strong><span style="color:#ff00ff">"(src/**)"</span><strong>)</strong><span style="color:#000000">on_installcmd</span><strong>(</strong><span style="color:blue">function</span><strong>(</strong><span style="color:#000000">package</span><strong>,</strong><span style="color:#000000">batchcmds</span><strong>)</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">runv</span><strong>(</strong><span style="color:#ff00ff">"make"</span><strong>,</strong><strong>{</strong><span style="color:#ff00ff">"install"</span><strong>})</strong><span style="color:blue">end</span><strong>)</strong></code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">然后，我们执行<span>&nbsp;</span><code>xmake pack</code><span>&nbsp;</span>命令，就可以生成一个自安装的 xxx.gz.run 包，默认采用 gzip 压缩。</p><div><pre><code><span style="color:#8f5902">$ </span>xmake pack
packing build/xpack/test/test-macosx-src-v1.0.0.gz.run
pack ok
</code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们可以使用 sh 去加载运行它来安装我们的程序。</p><div><pre><code><span style="color:#8f5902">$ </span>sh ./build/xpack/test/test-macosx-src-v1.0.0.gz.run
</code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们也可以看一个比较完整的例子：</p><div><pre><code><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"xmakesrc"</span><strong>)</strong><span style="color:#000000">set_formats</span><strong>(</strong><span style="color:#ff00ff">"runself"</span><strong>)</strong><span style="color:#000000">set_basename</span><strong>(</strong><span style="color:#ff00ff">"xmake-v$(version)"</span><strong>)</strong><span style="color:#000000">set_prefixdir</span><strong>(</strong><span style="color:#ff00ff">"xmake-$(version)"</span><strong>)</strong><span style="color:#000000">before_package</span><strong>(</strong><span style="color:blue">function</span><strong>(</strong><span style="color:#000000">package</span><strong>)</strong><span style="color:#000000">import</span><strong>(</strong><span style="color:#ff00ff">"devel.git"</span><strong>)</strong><span style="color:blue">local</span><span style="color:#000000">rootdir</span><strong>=</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">os</span><strong>.</strong><span style="color:#000000">tmpfile</span><strong>(</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">basename</span><strong>())</strong><strong>..</strong><span style="color:#ff00ff">".dir"</span><strong>,</strong><span style="color:#ff00ff">"repo"</span><strong>)</strong><span style="color:blue">if</span><strong>not</strong><span style="color:#000000">os</span><strong>.</strong><span style="color:#000000">isdir</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>)</strong><span style="color:blue">then</span><span style="color:#000000">os</span><strong>.</strong><span style="color:#000000">tryrm</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>)</strong><span style="color:#000000">os</span><strong>.</strong><span style="color:#000000">cp</span><strong>(</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">directory</span><strong>(</strong><span style="color:#000000">os</span><strong>.</strong><span style="color:#000000">projectdir</span><strong>()),</strong><span style="color:#000000">rootdir</span><strong>)</strong><span style="color:#000000">git</span><strong>.</strong><span style="color:#000000">clean</span><strong>({</strong><span style="color:#000000">repodir</span><strong>=</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#000000">force</span><strong>=</strong><strong>true</strong><strong>,</strong><span style="color:#000000">all</span><strong>=</strong><strong>true</strong><strong>})</strong><span style="color:#000000">git</span><strong>.</strong><span style="color:#000000">reset</span><strong>({</strong><span style="color:#000000">repodir</span><strong>=</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#000000">hard</span><strong>=</strong><strong>true</strong><strong>})</strong><span style="color:blue">if</span><span style="color:#000000">os</span><strong>.</strong><span style="color:#000000">isfile</span><strong>(</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">".gitmodules"</span><strong>))</strong><span style="color:blue">then</span><span style="color:#000000">git</span><strong>.</strong><span style="color:#000000">submodule</span><strong>.</strong><span style="color:#000000">clean</span><strong>({</strong><span style="color:#000000">repodir</span><strong>=</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#000000">force</span><strong>=</strong><strong>true</strong><strong>,</strong><span style="color:#000000">all</span><strong>=</strong><strong>true</strong><strong>})</strong><span style="color:#000000">git</span><strong>.</strong><span style="color:#000000">submodule</span><strong>.</strong><span style="color:#000000">reset</span><strong>({</strong><span style="color:#000000">repodir</span><strong>=</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#000000">hard</span><strong>=</strong><strong>true</strong><strong>})</strong><span style="color:blue">end</span><span style="color:blue">end</span><span style="color:blue">local</span><span style="color:#000000">extraconf</span><strong>=</strong><strong>{</strong><span style="color:#000000">rootdir</span><strong>=</strong><span style="color:#000000">rootdir</span><strong>}</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">add</span><strong>(</strong><span style="color:#ff00ff">"sourcefiles"</span><strong>,</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">"core/**|src/pdcurses/**|src/luajit/**|src/tbox/tbox/src/demo/**"</span><strong>),</strong><span style="color:#000000">extraconf</span><strong>)</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">add</span><strong>(</strong><span style="color:#ff00ff">"sourcefiles"</span><strong>,</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">"xmake/**"</span><strong>),</strong><span style="color:#000000">extraconf</span><strong>)</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">add</span><strong>(</strong><span style="color:#ff00ff">"sourcefiles"</span><strong>,</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">"*.md"</span><strong>),</strong><span style="color:#000000">extraconf</span><strong>)</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">add</span><strong>(</strong><span style="color:#ff00ff">"sourcefiles"</span><strong>,</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">"configure"</span><strong>),</strong><span style="color:#000000">extraconf</span><strong>)</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">add</span><strong>(</strong><span style="color:#ff00ff">"sourcefiles"</span><strong>,</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">"scripts/*.sh"</span><strong>),</strong><span style="color:#000000">extraconf</span><strong>)</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">add</span><strong>(</strong><span style="color:#ff00ff">"sourcefiles"</span><strong>,</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">"scripts/man/**"</span><strong>),</strong><span style="color:#000000">extraconf</span><strong>)</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">add</span><strong>(</strong><span style="color:#ff00ff">"sourcefiles"</span><strong>,</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">"scripts/debian/**"</span><strong>),</strong><span style="color:#000000">extraconf</span><strong>)</strong><span style="color:#000000">package</span><strong>:</strong><span style="color:#000000">add</span><strong>(</strong><span style="color:#ff00ff">"sourcefiles"</span><strong>,</strong><span style="color:#000000">path</span><strong>.</strong><span style="color:#000000">join</span><strong>(</strong><span style="color:#000000">rootdir</span><strong>,</strong><span style="color:#ff00ff">"scripts/msys/**"</span><strong>),</strong><span style="color:#000000">extraconf</span><strong>)</strong><span style="color:blue">end</span><strong>)</strong><span style="color:#000000">on_installcmd</span><strong>(</strong><span style="color:blue">function</span><strong>(</strong><span style="color:#000000">package</span><strong>,</strong><span style="color:#000000">batchcmds</span><strong>)</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">runv</span><strong>(</strong><span style="color:#ff00ff">"./scripts/get.sh"</span><strong>,</strong><strong>{</strong><span style="color:#ff00ff">"__local__"</span><strong>})</strong><span style="color:blue">end</span><strong>)</strong></code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">它是 xmake 自身源码的安装包配置脚本，更完整的配置可以参考：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake%2Fblob%2Fmaster%2Fcore%2Fxpack.lua" target="_blank">xpack.lua</a></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">这里，它通过调用源码包内置的<span>&nbsp;</span><code>./scripts/get.sh</code><span>&nbsp;</span>安装脚本去执行编译安装。</p><h3>生成源码归档包</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">另外，我们也可以配置<span>&nbsp;</span><code>srczip</code><span>&nbsp;</span>和<span>&nbsp;</span><code>srctargz</code><span>&nbsp;</span>格式，来生成源码压缩包，它不是完整的安装包，也没有安装命令，仅仅用于源码包分发。</p><div><pre><code><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">set_formats</span><strong>(</strong><span style="color:#ff00ff">"srczip"</span><strong>,</strong><span style="color:#ff00ff">"srctargz"</span><strong>)</strong><span style="color:#000000">add_sourcefiles</span><strong>(</strong><span style="color:#ff00ff">"(src/**)"</span><strong>)</strong></code></pre></div><div><pre><code><span style="color:#8f5902">$ </span>xmake pack
packing build/xpack/test/test-macosx-src-v1.0.0.zip ..
packing build/xpack/test/test-macosx-src-v1.0.0.tar.gz ..
pack ok
</code></pre></div><h3>生成二进制归档包</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们也可以配置<span>&nbsp;</span><code>zip</code><span>&nbsp;</span>和<span>&nbsp;</span><code>targz</code><span>&nbsp;</span>来生成二进制的压缩包，它会先自动编译所有绑定的 target 目标程序，将所有需要的二进制程序，库文件打包到 zip/tar.gz 格式。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">这通常用于制作绿色版的安装包，内部不太任何自动安装脚本，用户需要自己设置 PATH 等环境变量。</p><div><pre><code><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">set_formats</span><strong>(</strong><span style="color:#ff00ff">"zip"</span><strong>,</strong><span style="color:#ff00ff">"targz"</span><strong>)</strong><span style="color:#000000">add_installfiles</span><strong>(</strong><span style="color:#ff00ff">"(src/**)"</span><strong>)</strong></code></pre></div><div><pre><code><span style="color:#8f5902">$ </span>xmake pack
packing build/xpack/test/test-macosx-v1.0.0.zip ..
packing build/xpack/test/test-macosx-v1.0.0.tar.gz ..
pack ok
</code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">!&gt; 需要注意的是，打二进制文件到包里，使用的是<span>&nbsp;</span><code>add_installfiles</code><span>&nbsp;</span>而不是<span>&nbsp;</span><code>add_sourcefiles</code>。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们也可以通过<span>&nbsp;</span><code>add_targets</code><span>&nbsp;</span>去绑定需要安装的 target 目标程序和库。更多详情见下面关于<span>&nbsp;</span><code>add_targets</code><span>&nbsp;</span>的接口描述。</p><h3>生成 SRPM 源码安装包</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">它可以生成<span>&nbsp;</span><code>.src.rpm</code><span>&nbsp;</span>格式的源码安装包。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们可以通过配置 add_targets 关联需要构建的目标，在生成的 srpm 包中，它会自动调用<span>&nbsp;</span><code>xmake build</code><span>&nbsp;</span>和<span>&nbsp;</span><code>xmake install</code><span>&nbsp;</span>去构建和安装包。</p><div><pre><code><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">set_homepage</span><strong>(</strong><span style="color:#ff00ff">"https://xmake.io"</span><strong>)</strong><span style="color:#000000">set_license</span><strong>(</strong><span style="color:#ff00ff">"Apache-2.0"</span><strong>)</strong><span style="color:#000000">set_description</span><strong>(</strong><span style="color:#ff00ff">"A cross-platform build utility based on Lua."</span><strong>)</strong><span style="color:#000000">set_formats</span><strong>(</strong><span style="color:#ff00ff">"srpm"</span><strong>)</strong><span style="color:#000000">add_sourcefiles</span><strong>(</strong><span style="color:#ff00ff">"(src/**)"</span><strong>)</strong><span style="color:#000000">add_sourcefiles</span><strong>(</strong><span style="color:#ff00ff">"./xmake.lua"</span><strong>)</strong><span style="color:#000000">add_targets</span><strong>(</strong><span style="color:#ff00ff">"demo"</span><strong>)</strong></code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">它会生成类似下面的 spec 文件，然后自动调用 rpmbuild 去生成<span>&nbsp;</span><code>.src.rpm</code><span>&nbsp;</span>包。</p><div><pre><code>Name:       test
Version:    1.0.0
Release:    1%{?dist}
Summary:    hello

License:    Apache-2.0
URL:        https://xmake.io
Source0:    test-linux-src-v1.0.0.tar.gz

BuildRequires: xmake
BuildRequires: gcc
BuildRequires: gcc-c++

%description
A test installer.

%prep
%autosetup -n test-1.0.0 -p1

%build
xmake build -y test

%install
xmake install -o %{buildroot}/%{_exec_prefix} test
cd %{buildroot}
find . -type f | sed 's!^\./!/!' &gt; %{_builddir}/_installedfiles.txt

%check

%files -f %{_builddir}/_installedfiles.txt

%changelog
* Fri Dec 22 2023 ruki - 1.0.0-1
- Update to 1.0.0
</code></pre></div><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们也可以通过<span>&nbsp;</span><code>on_buildcmd</code><span>&nbsp;</span>和<span>&nbsp;</span><code>on_installcmd</code><span>&nbsp;</span>自定义构建和安装脚本。</p><div><pre><code><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">set_homepage</span><strong>(</strong><span style="color:#ff00ff">"https://xmake.io"</span><strong>)</strong><span style="color:#000000">set_license</span><strong>(</strong><span style="color:#ff00ff">"Apache-2.0"</span><strong>)</strong><span style="color:#000000">set_description</span><strong>(</strong><span style="color:#ff00ff">"A cross-platform build utility based on Lua."</span><strong>)</strong><span style="color:#000000">set_formats</span><strong>(</strong><span style="color:#ff00ff">"srpm"</span><strong>)</strong><span style="color:#000000">add_sourcefiles</span><strong>(</strong><span style="color:#ff00ff">"(src/**)"</span><strong>)</strong><span style="color:#000000">add_sourcefiles</span><strong>(</strong><span style="color:#ff00ff">"./configure"</span><strong>)</strong><span style="color:#000000">on_buildcmd</span><strong>(</strong><span style="color:blue">function</span><strong>(</strong><span style="color:#000000">package</span><strong>,</strong><span style="color:#000000">batchcmds</span><strong>)</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">runv</span><strong>(</strong><span style="color:#ff00ff">"./configure"</span><strong>)</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">runv</span><strong>(</strong><span style="color:#ff00ff">"make"</span><strong>)</strong><span style="color:blue">end</span><strong>)</strong><span style="color:#000000">on_installcmd</span><strong>(</strong><span style="color:blue">function</span><strong>(</strong><span style="color:#000000">package</span><strong>,</strong><span style="color:#000000">batchcmds</span><strong>)</strong><span style="color:#000000">batchcmds</span><strong>:</strong><span style="color:#000000">runv</span><strong>(</strong><span style="color:#ff00ff">"make"</span><strong>,</strong><strong>{</strong><span style="color:#ff00ff">"install"</span><strong>,</strong><span style="color:#ff00ff">"PREFIX=%{buildroot}"</span><strong>})</strong><span style="color:blue">end</span><strong>)</strong></code></pre></div><h3>生成 RPM 二进制安装包</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">RPM 包将会直接生成编译好的二进制安装包。xmake 会自动调用<span>&nbsp;</span><code>rpmbuild --rebuild</code><span>&nbsp;</span>命令去构建 SRPM 包生成它。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">而在 XPack 中，我们仅仅只需要配置<span>&nbsp;</span><code>set_formats("rpm")</code><span>&nbsp;</span>即可支持 rpm 包生成，其他配置与 srpm 包完全一致。</p><div><pre><code><span style="color:#000000">xpack</span><strong>(</strong><span style="color:#ff00ff">"test"</span><strong>)</strong><span style="color:#000000">set_formats</span><strong>(</strong><span style="color:#ff00ff">"rpm"</span><strong>)</strong><em>-- TODO</em></code></pre></div><h3>打包命令参数</h3><h4>指定打包格式</h4><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">如果我们在配置文件中已经使用<span>&nbsp;</span><code>set_formats</code><span>&nbsp;</span>配置了多个打包格式，那么默认情况下，<code>xmake pack</code><span>&nbsp;</span>会自动生成所有这些格式的包。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">当然，我们也可以通过<span>&nbsp;</span><code>xmake pack --formats=nsis,targz</code><span>&nbsp;</span>来选择性指定当前需要打哪些格式的包。</p><h4>修改打包文件名</h4><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">我们可以在配置文件中，通过<span>&nbsp;</span><code>set_basename()</code><span>&nbsp;</span>来修改包名，也可以通过命令行去修改它。</p><div><pre><code><span style="color:#8f5902">$ </span>xmake pack --basename<strong>=</strong><span style="color:#ff00ff">"foo"</span>
packing build/xpack/test/foo.zip ..
pack ok
</code></pre></div><h4>指定输出目录</h4><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">默认的输出目录是在 build 目录下，但我们也可以修改输出的路径。</p><div><pre><code><span style="color:#8f5902">$ </span>xmake pack -o /tmp/output
</code></pre></div><h4>禁用自动构建</h4><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">如果是打 NSIS 等二进制包，<code>xmake pack</code><span>&nbsp;</span>会先自动编译所有被绑定的 target 目标文件，然后再去执行打包逻辑。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">但是如果我们已经编译过了，不想每次都去编译它，而是直接去打包，可以通过下面的参数禁用自动构建。</p><div><pre><code><span style="color:#8f5902">$ </span>xmake pack --autobuild<strong>=</strong>n
</code></pre></div><h3>接口描述</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">更多 XPack 打包接口描述见：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fxmake.io%2F%23%2Fzh-cn%2Fmanual%2Fxpack" target="_blank">XPack 打包接口文档</a>。</p><h3>安装包到本地</h3><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">默认情况先，通过<span>&nbsp;</span><code>add_requires("xxx")</code><span>&nbsp;</span>配置的包都会被安装到全局目录，不同项目共用这些包。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">而新版本中，我们新增了一个<span>&nbsp;</span><code>package.install_locally</code><span>&nbsp;</span>策略，可以配置让 xmake 将包安装到当前本地项目目录。</p><div><pre><code><span style="color:#000000">set_policy</span><strong>(</strong><span style="color:#ff00ff">"package.install_locally"</span><strong>,</strong><strong>true</strong><strong>)</strong></code></pre></div><h2>更新日志</h2><h3>新特性</h3><ul><li>添加<span>&nbsp;</span><code>network.mode</code><span>&nbsp;</span>策略</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake%2Fissues%2F1433" target="_blank">#1433</a>: 添加<span>&nbsp;</span><code>xmake pack</code><span>&nbsp;</span>命令去生成 NSIS/zip/tar.gz/srpm/rpm/runself 安装包</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake%2Fissues%2F4435" target="_blank">#4435</a>: 为 UnityBuild 的组模式增加 batchsize 支持</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake%2Fpull%2F4485" target="_blank">#4485</a>: 新增 package.install_locally 策略支持</li><li>新增 NetBSD 支持</li></ul><h3>Changes</h3><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake%2Fpull%2F4484" target="_blank">#4484</a>: 改进 swig 规则</li><li>改进 Haiku 支持</li></ul><h3>Bugs 修复</h3><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake%2Fissues%2F4372" target="_blank">#4372</a>: 修复 protobuf 规则</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fxmake-io%2Fxmake%2Fissues%2F4439" target="_blank">#4439</a>: 修复 asn1c 规则</li></ul></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 03:29:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272755/xmake-2-8-6-released</guid>
            <link>https://www.oschina.net/news/272755/xmake-2-8-6-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[DBCart 多语言跨境商城系统 V3.1 Release 231225 发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">DBCart 企业级开源 (多语言) 商城系统，使用 PHP 语言基于 Laminas + Doctrine 2 组合框架开发完成。可定制、多终端、多场景、多支付、多语言、多货币等特性。</p><ul><li>严谨的安全机制，可靠稳定；</li><li>方便的操作管理，节约时间；</li><li>清晰的权限分配，责任分明；</li><li>便捷的更新处理，一键搞定；</li><li>丰富的插件市场，扩展无限。</li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">默认支持：简体中文、繁体中文、英文、日文、韩文。<br><strong>后台配置好智能翻译，可以方便的在后台输入框翻译成对应语言内容，再优化修改。省时省力。</strong><br> 前台可任意切换不同语言内容。</p><h2>系统框架</h2><ul><li>Laminas （Zendframework 3）</li><li>Doctrine 2</li></ul><h2>环境要求</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>服务器系统</strong>&nbsp;Linux、Unix、Mac、Windows、其他</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>web 服务器</strong>&nbsp;Apache、Nginx、IIS、其他</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>MySQL 版本</strong>&nbsp;&gt;= 5.6</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>PHP 版本</strong>&nbsp;&gt;= 7.4</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>PHP 扩展 | 库</strong></p><ul><li>PDO</li><li>SSL（openssl）</li><li>Fileinfo</li><li>intl</li><li>Curl</li><li>GD2</li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>系统空间</strong>&nbsp;&gt;= 500M</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>更新日志：</strong><br> 优化，插件功能<br> 优化，优惠码，加入百分比优惠<br> 优化，优惠码和充值码的生成，去掉容易混淆的字母<br> 优化，商品添加与编辑，加入规格商品的不启用选择</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><span style="background-color:#ffffff; color:#e74c3c">珑大官方全新发布&nbsp;</span><strong>语言包个性化定制扩展平台&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdocs.loongdom.com.cn%2Fcloud%2Ftrans.html" target="_blank">https://docs.loongdom.com.cn/cloud/trans.htm</a></strong></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>在线文档地址：</strong><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdocs-dbcart.loongdom.com.cn%2F" target="_blank">https://docs-dbcart.loongdom.com.cn/</a></p><p style="color:#2c3e50; text-align:start"><strong>前台测试：</strong><span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fceshi.dbcart.loongdom.cn%2F" target="_blank">https://ceshi.dbcart.loongdom.cn/</a></p><p style="color:#2c3e50; text-align:start"><strong>后台测试：</strong><span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fceshi.dbcart.loongdom.cn%2Fadmin" target="_blank">https://ceshi.dbcart.loongdom.cn/admin</a></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://oscimg.oschina.net/oscnet/up-603635b2b3ee3c73e4aa09c7e9b76d3b126.png" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://oscimg.oschina.net/oscnet/up-b30e9e5073a8a315dd568014b192271bfbf.png" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://oscimg.oschina.net/oscnet/up-13a80c9b0c368adb47c0f9f3dc7560755b7.png" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://oscimg.oschina.net/oscnet/up-0b29bbfbe78d73a836170a11699f464d2c5.png" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://oscimg.oschina.net/oscnet/up-34f0b327045cf071393fee0bbc229275c28.png" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://oscimg.oschina.net/oscnet/up-eaac27f476cbb575773f4bb45111268fb5c.png" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">&nbsp;</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>下载地址：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdownload.loongdom.com.cn%2Fdbcart%2FV3.1%2FDBCartV3.1_Release231225.tar.gz" target="_blank">https://download.loongdom.com.cn/dbcart/V3.1/DBCartV3.1_Release231225.tar.gz</a></strong></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 03:18:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272752/dbcart-3-1-231225</guid>
            <link>https://www.oschina.net/news/272752/dbcart-3-1-231225</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[DBShop 商城系统 V3.3 Release 231225 发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:start">DBShop 企业级商城系统，使用 PHP 语言基于 Laminas（Zendframework 3） + Doctrine 2 组合框架开发完成。可定制、多终端、多场景、多支付、多货币；严谨的安全机制，可靠稳定；方便的操作管理，节约时间；清晰的权限分配，责任分明；便捷的更新处理，一键搞定；丰富的插件市场，扩展无限。</p><h2>系统框架</h2><ul><li>Laminas （Zendframework 3）</li><li>Doctrine 2</li></ul><h2>环境要求</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>服务器系统</strong>&nbsp;Linux、Unix、Mac、Windows、其他</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>web 服务器</strong>&nbsp;Apache、Nginx、IIS、其他</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>MySQL 版本</strong>&nbsp;&gt;= 5.6</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>PHP 版本</strong>&nbsp;&gt;= 7.4</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>PHP 扩展 | 库</strong></p><ul><li>PDO</li><li>SSL（openssl）</li><li>Fileinfo</li><li>intl</li><li>Curl</li><li>GD2</li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>系统空间</strong>&nbsp;&gt;= 500M</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>更新日志：</strong><br> 新增，公安备案显示设置功能<br> 优化，插件扩展<br> 优化，优惠码加入百分比优惠<br> 优化，优惠码和充值码的生成，去掉容易混淆的字母<br> 优化，商品添加与编辑，加入对规格商品的不启用选择<br> 优化，语言包</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="color:#e74c3c">珑大官方全新发布&nbsp;<strong>语言包个性化定制扩展平台&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdocs.loongdom.com.cn%2Fcloud%2Ftrans.html" target="_blank">https://docs.loongdom.com.cn/cloud/trans.html</a></strong></span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>在线文档地址：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdocs.loongdom.com.cn" target="_blank">https://docs.loongdom.com.cn/</a></strong></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>前台演示地址：</strong><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fv3.dbshop.net%2F" target="_blank">http://v3.dbshop.net</a><br><strong>后台演示地址：</strong><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fv3.dbshop.net%2Fadmin" target="_blank">http://v3.dbshop.net/admin</a><br><strong>后台登录账号：</strong>dbshop<br><strong>后台登录密码：</strong>123456</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><img alt="" height="318" src="https://oscimg.oschina.net/oscnet/up-935399731889136addb4890704783bb91b2.png" width="700" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><img alt="" height="438" src="https://oscimg.oschina.net/oscnet/up-2a10d87169518ff3590a641b918e95a2814.png" width="700" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><img alt="" height="306" src="https://oscimg.oschina.net/oscnet/up-4c99aa3bc36cd815ba6585a6c400b726bb7.png" width="700" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><img alt="" height="404" src="https://oscimg.oschina.net/oscnet/up-21a7773040bd4fab00897a97c87e3d9c188.png" width="700" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><img alt="" height="396" src="https://oscimg.oschina.net/oscnet/up-4bc8e4e8bc97e0f0855e8337dce22da947c.png" width="700" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><img alt="" height="410" src="https://oscimg.oschina.net/oscnet/up-fdec0119a9a8bdc28c9cf30e11f42cafd3b.png" width="700" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><strong>下载地址：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdownload.loongdom.com.cn/dbshop/V3.3/DBShopV3.3_Release231225.tar.gz" target="_blank">&nbsp;https://download.loongdom.com.cn/dbshop/V3.3/DBShopV3.3_Release231225.tar.gz</a></strong></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 02:59:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272748/dbshop-3-3-231225</guid>
            <link>https://www.oschina.net/news/272748/dbshop-3-3-231225</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Electron v28.1.0 发布，跨平台桌面应用开发工具]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>Electron 是一个使用 JavaScript、HTML 和 CSS 构建跨平台的桌面应用程序。它基于 Node.js 和 Chromium，被 Atom 编辑器和许多其他应用程序使用。Electron 兼容 Mac、Windows 和 Linux，可以构建出三个平台的应用程序。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">Electron<span>&nbsp;v28.1.0<span>&nbsp;</span></span><span style="color:#333333">更新内容如下：</span></p><p style="text-align:start"><strong>Features</strong></p><ul><li>在<code>protocol.registerSchemesAsPrivileged</code>中添加了一个选项，允许在自定义方案中使用 V8 代码缓存。<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Felectron%2Felectron%2Fpull%2F40709" target="_blank">#40709</a></li></ul><p style="text-align:start"><strong><span><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Fixes</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p><ul><li>修复了默认<code>--inspect</code>port 的文档。<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Felectron%2Felectron%2Fpull%2F40743" target="_blank">#40743</a></li><li>防止 macOS 上的其他应用程序将 node 模式用作脚本运行程序。<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Felectron%2Felectron%2Fpull%2F40710" target="_blank">#&nbsp;</a><span><span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Felectron%2Felectron%2Fpull%2F40737" target="_blank">40710</a></span></span></li></ul><p style="text-align:start"><strong><span><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>Other Changes</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p><ul><li>安全性：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fadvisories%2FGHSA-7c6v-f3h8-2x89" target="_blank">CVE-2023-7024</a>&nbsp;的向后移植修复。<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Felectron%2Felectron%2Fpull%2F40806" target="_blank">#40806</a></li><li>将 Chromium 更新为 120.0.6099.71。<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Felectron%2Felectron%2Fpull%2F40722" target="_blank">#40722</a></li></ul><p>更新说明：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Felectron%2Felectron%2Freleases%2Ftag%2Fv28.1.0" target="_blank">https://github.com/electron/electron/releases/tag/v28.1.0</a></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 02:24:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272725/electron-28-1-0-released</guid>
            <link>https://www.oschina.net/news/272725/electron-28-1-0-released</link>
            <author>
                <![CDATA[来源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[⚡ 比 rz / sz 更好用的文件传输工具发布 v1.1.7]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>trzsz ( trz / tsz ) 是支持 tmux 的 rz / sz，支持目录传输，支持拖动上传，支持进度条，支持各种终端……</p><p>Go 版 trzsz 发布 v1.1.7，支持文件权限保持，支持原生的 rz / sz 服务端。</p><hr><h2>安装方法</h2><ul><li><p style="margin-left:0; margin-right:0">Ubuntu 可用 apt 安装</p><code>sudo apt install trzsz</code><div><div><pre><code><span style="color:#0086b3">sudo </span>apt <span style="color:#d73a49">update</span><strong>&amp;&amp;</strong><span style="color:#0086b3">sudo </span>apt <span style="color:#0086b3"><span style="color:#d73a49">install</span></span>software-properties-common
<span style="color:#0086b3">sudo </span><span style="color:#d73a49">add</span>-apt-repository ppa:trzsz/ppa <strong>&amp;&amp;</strong><span style="color:#0086b3">sudo </span>apt <span style="color:#d73a49">update</span><span style="color:#0086b3">sudo </span>apt <span style="color:#0086b3"><span style="color:#d73a49">install</span></span>trzsz
</code></pre></div></div></li><li><p style="margin-left:0; margin-right:0">Debian 可用 apt 安装</p><code>sudo apt install trzsz</code><div><div><pre><code><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">apt </span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">curl gpg</span><span style="color:#6f42c1">curl</span><span style="color:#000080"><span style="color:#032f62">-s</span></span><span style="color:#032f62"></span><span style="color:#dd1144"><span style="color:#032f62">'https://keyserver.ubuntu.com/pks/lookup?op=get&amp;search=0x7074ce75da7cc691c1ae1a7c7e51d1ad956055ca'</span></span><span style="color:#032f62"></span><span style="color:#dd1144"><span style="color:#032f62">\</span></span><span style="color:#032f62">
    | gpg </span><span style="color:#000080"><span style="color:#032f62">--dearmor</span></span><span style="color:#032f62"></span><span style="color:#000080"><span style="color:#032f62">-o</span></span><span style="color:#032f62"> /usr/share/keyrings/trzsz.gpg</span><span style="color:#0086b3"><span style="color:#6f42c1">echo</span></span><span style="color:#dd1144"><span style="color:#032f62">'deb [signed-by=/usr/share/keyrings/trzsz.gpg] https://ppa.launchpadcontent.net/trzsz/ppa/ubuntu jammy main'</span></span><span style="color:#032f62"></span><span style="color:#dd1144"><span style="color:#032f62">\</span></span><span style="color:#032f62">
    | </span><span style="color:#0086b3"><span style="color:#032f62">sudo tee</span></span><span style="color:#032f62"> /etc/apt/sources.list.d/trzsz.list</span><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">apt update</span><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">apt </span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">trzsz</span></code></pre></div></div></li><li><p style="margin-left:0; margin-right:0">Linux 可用 yum 安装</p><code>sudo yum install trzsz</code><ul><li><p style="margin-left:0; margin-right:0">国内推荐使用<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.wlnmp.com%2Finstall" target="_blank">wlnmp</a><span>&nbsp;</span>源，安装 trzsz 只需要添加 wlnmp 源（ 配置 epel 源不是必须的 ）：</p><div><div><pre><code><span style="color:#0086b3"><span style="color:#6f42c1">curl</span><span style="color:#032f62">-fsSL "https://sh.wlnmp.com/wlnmp.sh" | bash</span></span><span style="color:#0086b3"><span style="color:#6f42c1">sudo</span></span><span style="color:#032f62">yum </span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">trzsz</span></code></pre></div></div></li><li><p style="margin-left:0; margin-right:0">也可使用<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgemfury.com%2F" target="_blank">gemfury</a><span>&nbsp;</span>源（ 只要网络通，所有操作系统通用 ）</p><div><div><pre><code><span style="color:#0086b3">echo</span><span style="color:#dd1144">'[trzsz]
name=Trzsz Repo
baseurl=https://yum.fury.io/trzsz/
enabled=1
gpgcheck=0'</span> | <span style="color:#0086b3">sudo tee</span> /etc/yum.repos.d/trzsz.repo

<span style="color:#0086b3">sudo </span>yum <span style="color:#0086b3">install </span>trzsz
</code></pre></div></div></li></ul></li><li><p style="margin-left:0; margin-right:0">ArchLinux 可用<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FJguer%2Fyay" target="_blank">yay</a><span>&nbsp;</span>安装</p><code>yay -S trzsz</code><div><div><pre><code><span style="color:#6f42c1">yay</span><span style="color:#000080"><span style="color:#032f62">-Syu</span></span><span style="color:#6f42c1">yay</span><span style="color:#000080"><span style="color:#032f62">-S</span></span><span style="color:#032f62"> trzsz</span></code></pre></div></div></li><li><p style="margin-left:0; margin-right:0">MacOS 可用<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fbrew.sh%2F" target="_blank">homebrew</a><span>&nbsp;</span>安装</p><code>brew install trzsz-go</code><div><div><pre><code>brew <span style="color:#d73a49">update</span>
brew <span style="color:#0086b3"><span style="color:#d73a49">install</span></span>trzsz-<span style="color:#d73a49">go</span></code></pre></div></div></li><li><p style="margin-left:0; margin-right:0">Windows 可用<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fscoop.sh%2F" target="_blank">scoop</a><span>&nbsp;</span>/<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flearn.microsoft.com%2Fzh-cn%2Fwindows%2Fpackage-manager%2Fwinget%2F" target="_blank">winget</a><span>&nbsp;</span>/<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fcommunity.chocolatey.org%2F" target="_blank">choco</a><span>&nbsp;</span>安装</p><code>scoop install trzsz</code><span>&nbsp;</span>/<span>&nbsp;</span><code>winget install trzsz</code><span>&nbsp;</span>/<span>&nbsp;</span><code>choco install trzsz</code><div><div><pre><code><span style="color:#6f42c1">scoop</span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">trzsz</span></code></pre></div></div><div><div><pre><code><span style="color:#6f42c1">winget</span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">trzsz</span></code></pre></div></div><div><div><pre><code><span style="color:#6f42c1">choco</span><span style="color:#0086b3"><span style="color:#032f62">install </span></span><span style="color:#032f62">trzsz</span></code></pre></div></div></li><li><p style="margin-left:0; margin-right:0">用 Go 直接安装（ 要求 go 1.20 以上 ）</p><code>go install github.com/trzsz/trzsz-go/cmd/...@latest</code><div><div><pre><code>go <span style="color:#0086b3"><span style="color:#d73a49">install</span></span>github.com/trzsz/trzsz-<span style="color:#d73a49">go</span>/cmd/trz@latest
<span style="color:#d73a49">go</span><span style="color:#0086b3"><span style="color:#d73a49">install</span></span>github.com/trzsz/trzsz-<span style="color:#d73a49">go</span>/cmd/tsz@latest
<span style="color:#d73a49">go</span><span style="color:#0086b3"><span style="color:#d73a49">install</span></span>github.com/trzsz/trzsz-<span style="color:#d73a49">go</span>/cmd/trzsz@latest
</code></pre></div></div><p style="margin-left:0; margin-right:0">安装后，<code>trzsz</code><span>&nbsp;</span>程序一般位于<span>&nbsp;</span><code>~/go/bin/</code><span>&nbsp;</span>目录下（ Windows 一般在<span>&nbsp;</span><code>C:\Users\your_name\go\bin\</code><span>&nbsp;</span>）。</p></li><li><p style="margin-left:0; margin-right:0">可从<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Ftrzsz%2Ftrzsz-go%2Freleases" target="_blank">Releases</a><span>&nbsp;</span>中直接下载适用的版本</p><code>或者用 Go 编译（ 要求 go 1.20 以上 ）</code><div><div><pre><code>git clone https:<span style="color:#6a737d">//github.com/trzsz/trzsz-go.git</span><span style="color:#0086b3">cd </span>trzsz-<span style="color:#d73a49">go</span><span>make</span><span style="color:#0086b3">sudo </span><span>make</span><span style="color:#0086b3">install</span></code></pre></div></div></li></ul><h2>使用方法</h2><h3>在本地电脑使用</h3><ul><li><p style="margin-left:0; margin-right:0">在命令前添加<span>&nbsp;</span><code>trzsz</code>，就可以支持 trzsz (trz /tsz) 上传和下载了，如：</p><div><div><pre><code><span style="color:#6f42c1">trzsz</span><span style="color:#032f62">bash</span><span style="color:#6f42c1">trzsz</span><span style="color:#032f62">PowerShell</span><span style="color:#6f42c1">trzsz</span><span style="color:#032f62">ssh x.x.x.x</span></code></pre></div></div></li><li><p style="margin-left:0; margin-right:0">在命令前添加<span>&nbsp;</span><code>trzsz --dragfile</code>，就可以启用拖拽上传功能，如：</p><div><div><pre><code><span style="color:#d73a49">trzsz</span><span style="color:#000080"><span style="color:#d73a49">-d</span></span><span style="color:#d73a49">ssh</span><span style="color:#d73a49">x</span><span style="color:#6f42c1">.x</span><span style="color:#6f42c1">.x</span><span style="color:#6f42c1">.x</span><span style="color:#d73a49">trzsz</span><span style="color:#000080"><span style="color:#d73a49">--dragfile</span></span><span style="color:#d73a49">ssh</span><span style="color:#d73a49">x</span><span style="color:#6f42c1">.x</span><span style="color:#6f42c1">.x</span><span style="color:#6f42c1">.x</span></code></pre></div></div></li></ul><h3>在跳板机上使用</h3><ul><li><p style="margin-left:0; margin-right:0">如果在跳板机上使用<span>&nbsp;</span><code>tmux</code>，则需要再使用<span>&nbsp;</span><code>trzsz --relay ssh</code><span>&nbsp;</span>登录远程服务器，如：</p><div><div><pre><code><span style="color:#6f42c1">trzsz</span><span style="color:#032f62">ssh jump_server</span><span style="color:#6f42c1">tmux</span><span style="color:#6f42c1">trzsz</span><span style="color:#000080"><span style="color:#032f62">--relay</span></span><span style="color:#032f62"> ssh remote_server</span></code></pre></div></div></li></ul><h3>在服务器上使用</h3><ul><li><p style="margin-left:0; margin-right:0">与 lrzsz (rz /sz) 类似，使用<span>&nbsp;</span><code>trz</code><span>&nbsp;</span>命令上传文件，使用<span>&nbsp;</span><code>tsz /path/to/file</code><span>&nbsp;</span>命令下载文件。</p></li><li><p style="margin-left:0; margin-right:0">有关<span>&nbsp;</span><code>trzsz</code><span>&nbsp;</span>更详细的文档，请查看<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftrzsz.github.io%2Fcn%2F" target="_blank">https://trzsz.github.io/cn/</a>。</p></li></ul><h2>使用建议</h2><ul><li><p style="margin-left:0; margin-right:0">为了使用方便，可以设置<span>&nbsp;</span><code>alias</code><span>&nbsp;</span>，例如<span>&nbsp;</span><code>alias ssh="trzsz ssh"</code>，又或者<span>&nbsp;</span><code>alias ssh="trzsz -d ssh"</code><span>&nbsp;</span>支持拖文件上传。</p></li><li><p style="margin-left:0; margin-right:0">如果在本地电脑使用<span>&nbsp;</span><code>tmux</code>，先不带<span>&nbsp;</span><code>trzsz</code><span>&nbsp;</span>运行<span>&nbsp;</span><code>tmux</code>，然后再使用<span>&nbsp;</span><code>trzsz ssh</code><span>&nbsp;</span>登录远程服务器。</p></li></ul><h2>可配置项</h2><p style="color:#606c71; margin-left:0; margin-right:0; text-align:start"><code>trzsz</code><span>&nbsp;</span>使用的配置文件是<span>&nbsp;</span><code>~/.trzsz.conf</code>（ Windows 是<span>&nbsp;</span><code>C:\Users\your_name\.trzsz.conf</code><span>&nbsp;</span>）。注意路径必须包含<span>&nbsp;</span><code>/</code><span>&nbsp;</span>结尾，如：</p><pre><code>DefaultUploadPath =
DefaultDownloadPath = /Users/username/Downloads/
</code></pre><ul><li><p style="margin-left:0; margin-right:0">如果<span>&nbsp;</span><code>DefaultUploadPath</code><span>&nbsp;</span>不为空，上传选择文件时会默认打开此目录。</p></li><li><p style="margin-left:0; margin-right:0">如果<span>&nbsp;</span><code>DefaultDownloadPath</code><span>&nbsp;</span>不为空，下载文件时会自动下载到此目录（ 不需要再弹窗选择路径 ）。</p></li></ul><h2>支持 Zmodem</h2><ul><li><p style="margin-left:0; margin-right:0">使用<span>&nbsp;</span><code>-z</code><span>&nbsp;</span>或<span>&nbsp;</span><code>--zmodem</code><span>&nbsp;</span>启用<span>&nbsp;</span><code>rz / sz</code><span>&nbsp;</span>功能，例如<span>&nbsp;</span><code>trzsz -z ssh remote_server</code>。</p></li><li><p style="margin-left:0; margin-right:0">需要在客户端（ 本地电脑 ）上安装<span>&nbsp;</span><code>lrzsz</code>，例如<span>&nbsp;</span><code>brew install lrzsz</code>、<code>apt install lrzsz</code><span>&nbsp;</span>等。</p></li><li><p style="margin-left:0; margin-right:0"><code>trzsz --zmodem ssh xxx</code><span>&nbsp;</span>不兼容 Windows，你可以使用<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftrzsz.github.io%2Fcn%2Fssh" target="_blank">trzsz-ssh ( tssh )</a><span>&nbsp;</span>代替，如<span>&nbsp;</span><code>tssh --zmodem xxx</code>。</p></li><li><p style="margin-left:0; margin-right:0">关于进度条，己传文件大小和传输速度不是精确值，会有一些偏差，它的主要作用只是指示传输正在进行中。</p></li></ul><h2>常见问题</h2><ul><li><p style="margin-left:0; margin-right:0">如果<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.msys2.org%2F" target="_blank">MSYS2</a><span>&nbsp;</span>或<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.atlassian.com%2Fgit%2Ftutorials%2Fgit-bash" target="_blank">Git Bash</a><span>&nbsp;</span>遇到错误<span>&nbsp;</span><code>The handle is invalid</code>。</p><ul><li>在<span>&nbsp;</span><code>trzsz</code><span>&nbsp;</span>前面加上<span>&nbsp;</span><code>winpty</code><span>&nbsp;</span>即可，如<span>&nbsp;</span><code>winpty trzsz ssh x.x.x.x</code><span>&nbsp;</span>这样登录服务器。</li><li><code>Git Bash</code><span>&nbsp;</span>已默认安装有<span>&nbsp;</span><code>winpty</code>，<code>MSYS2</code><span>&nbsp;</span>需要手工安装<span>&nbsp;</span><code>pacman -S winpty</code>。</li></ul></li><li><p style="margin-left:0; margin-right:0">在<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.msys2.org%2F" target="_blank">MSYS2</a><span>&nbsp;</span>和<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.cygwin.com%2F" target="_blank">Cygwin</a><span>&nbsp;</span>等，不支持直接使用<span>&nbsp;</span><code>/usr/bin/ssh</code><span>&nbsp;</span>那个<span>&nbsp;</span><code>ssh</code>，可能会传输失败。需要使用 Windows 自带的<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fwindows-server%2Fadministration%2Fopenssh%2Fopenssh_install_firstuse" target="_blank">OpenSSH</a>。</p><ul><li><code>MSYS2</code><span>&nbsp;</span>中用法<span>&nbsp;</span><code>winpty trzsz /c/Windows/System32/OpenSSH/ssh.exe x.x.x.x</code>。</li><li><code>Cygwin</code><span>&nbsp;</span>中用法<span>&nbsp;</span><code>trzsz "C:\Windows\System32\OpenSSH\ssh.exe" x.x.x.x</code>。</li><li>⭐ 推荐使用<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftrzsz.github.io%2Fcn%2Fssh" target="_blank">trzsz-ssh</a><span>&nbsp;</span>( tssh )，<code>tssh</code><span>&nbsp;</span>等同于<span>&nbsp;</span><code>trzsz ssh</code>。</li></ul></li><li><p style="margin-left:0; margin-right:0">拖文件或目录到终端后，没有自动上传？</p><ul><li>检查<span>&nbsp;</span><code>ssh</code><span>&nbsp;</span>登录时有没有加上<span>&nbsp;</span><code>--dragfile</code><span>&nbsp;</span>选项，如<span>&nbsp;</span><code>trzsz --dragfile ssh x.x.x.x</code><span>&nbsp;</span>。</li><li>检查服务器上有没有安装<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftrzsz.github.io%2F" target="_blank">trzsz</a>，<code>trz</code><span>&nbsp;</span>应在某个<span>&nbsp;</span><code>PATH</code><span>&nbsp;</span>路径下。</li><li>在 Windows 中，检查标题有没有<code>管理员</code>三个字，<code>以管理员运行</code><span>&nbsp;</span>时可能会由于 UAC 设置的原因导致拖不了文件。</li><li>在 Windows Terminal 中，需要将文件或目录拖到左上角，显示<code>粘贴文件路径</code><span>&nbsp;</span>时再放开。</li><li>在 Windows 的<span>&nbsp;</span><code>cmd</code><span>&nbsp;</span>和<span>&nbsp;</span><code>PowerShell</code><span>&nbsp;</span>中，一次只能拖一个文件或目录，拖多个也只有鼠标正对着的那个是生效的。</li></ul></li></ul><h2>开发指引</h2><p style="color:#606c71; margin-left:0; margin-right:0; text-align:start">想要让你自己开发的 ssh 客户端支持 trzsz ？请参考<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Ftrzsz%2Ftrzsz-go%2Fblob%2Fmain%2Fexamples%2Fssh_client.go" target="_blank">go ssh client example</a>。</p><h2>录屏演示</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">在 windows 的 cmd 使用示例：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img height="500" src="https://oscimg.oschina.net/oscnet/up-a89db2d8017d9dc13594649a3ee31d756fb.gif" width="800" referrerpolicy="no-referrer"></p><hr><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">在 Ubuntu 原生终端使用示例：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img height="500" src="https://oscimg.oschina.net/oscnet/up-0cfc7533b2690d884e6464ae804a074a206.gif" width="800" referrerpolicy="no-referrer"></p><hr><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">在 Mac 原生终端拖文件上传的示例：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img height="500" src="https://oscimg.oschina.net/oscnet/up-1272a927e74f74368f43bfc310739b5e6b4.gif" width="800" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 02:17:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272724/trzsz-go-1-1-7-released</guid>
            <link>https://www.oschina.net/news/272724/trzsz-go-1-1-7-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[开放签开源电子签章 1.0 版本上线一周的总结]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="color:#4272ef"><strong><span>上线后的反馈</span></strong></span>&nbsp; &nbsp; &nbsp; &nbsp;</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp; 开放签 1.0 版本于 12 月 15 日上线发布后，给我们带来了很多惊喜，也矫正了我们很多错误的观点。</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp; 好的地方是我们开源工具版、企业版共有数百个用户在使用。在开源社区获取了 40 多个 start（感谢肯定），官网每天都有六七十的访问量。这些小成绩更加坚定了我们之前的判断。</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp; 不太好的是我们没有想明白企业版的收费逻辑，很多用户咨询企业版的收费方式，我们目前也没啥标准，可能会给早期客户带来不好的感受。不瞒大家说，其实企业版的收费逻辑我们也没有想好，因为我们产品出来前也没有真实付费的用户，所以收费这方面我们先跑跑再说。在没有明确的收费逻辑前，我们先让早期用户免费用起来也是挺好的方式，最起码能证明产品能力对用户来说是有价值的，怎么收费慢慢来吧。</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp; 两个版本用户反馈最多的问题主要有：</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp;<span>&nbsp;</span><strong>开源工具版：</strong>支持 SM2 算法、OFD 文件签署、分辨率兼容等；</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp;<span>&nbsp;</span><strong>企业版：</strong>标准收费逻辑是什么？（希望大家可以提供些建议）</p><h1><span style="color:#4272ef"><strong><span>下一步工作计划</span></strong></span></h1><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp;<span>&nbsp;</span><strong>开源工具版：</strong></p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; （1）支持 SM2 算法、OFD 文件签署、分辨率兼容等；</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; （2）前端页面支持移动端的相关操作；</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp;<span>&nbsp;</span><strong>企业版：</strong></p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; （1）增加 CA 机构数字证书，支持具有法律效力的电子签名；</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; （2）增加业务线功能模块，满足各种签署场景的灵活配置；</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; （3）增加文件模板功能，满足在线编辑文件模板；</p><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; （4）梳理企业版收费标准；</p><h1><strong><span style="color:#4272ef">总结</span></strong></h1><p style="color:#2c3e50; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp; 开放签 1.0 版本上线后确实给我们带来了很多惊喜，也快速的验证了我们很多的想法。接下来还需要以更快的速度迭代出更多好用的功能带给用户，尽快打通与用户的真实互动，让用户早日应用在真实业务环境中。</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 02:12:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272720</guid>
            <link>https://www.oschina.net/news/272720</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[web 通讯平台 webtim 第二版发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><blockquote><span>这是 webtim 版本 v0.0.2 版本，该版本有比较大的界面调整，优化和功能新增</span><br><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftlnet.top%2Fwebtim" target="_blank"><span>webtim 官网</span></a></blockquote><p style="color:#212529; text-align:start"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftim.tlnet.top%2F" target="_blank"><span><strong>webtim 在线访问地址</strong></span></a></p><p style="color:#212529; text-align:start"><strong>以下是更新说明：</strong></p><p><strong>一.解决问题：</strong><br> 解决 webtim 页面聊天记录部分乱序的问题。<br> 引起乱序的原因有两个：</p><ul><li>&nbsp;&nbsp;&nbsp; 数据异步加载导致</li><li>&nbsp;&nbsp;&nbsp; 离线数据比拉取数据先到达后被先加载</li></ul><p>以上两个问题导致的乱序都属于页面处理逻辑问题。<br> 解决方法：去掉同一批有序数据的异步加载.<br><strong>二. 功能优化：</strong><br> 优化视频加载闪烁问题，为了解决该问题，作者写了一个 js 视频组件 <a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fgithub.com%2Fdonnie4w%2Fvideojoin" target="_blank">videojoin </a>，支持视频流，无缝连续的播放。<br><strong>三. 功能更新：</strong></p><ol><li>增加直播间功能</li><li>增加消息撤回功能</li></ol><p><strong>四.&nbsp; webtim 说明：</strong></p><blockquote><span><strong>webtim 是 Web 通讯平台。服务器是<span>&nbsp;</span></strong></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftlnet.top%2Ftim" target="_blank"><span><strong>Tim</strong></span></a><span><strong>。前端使用 tim 的 js 客户端<span>&nbsp;</span></strong></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fdonnie4w%2Ftimjs" target="_blank"><span><strong>timjs</strong></span></a><span><strong><span>&nbsp;</span>调用 tim 服务器接口渲染页面。webtim 开发目的是通过界面来显示表达 tim 接口功能。tim 是去中心化的分布式 IM 引擎。支持基础通讯模式，对端到端的数据流传输支持非常全面，几乎涵盖了所有端到端的通讯需求，所以 webtim 可以非常流畅的实现任意通讯需求。但 tim 的强大并非其通讯模式，而是去中心化的集群功能，tim 的水平扩展能力非常强，可以支持成千上万的节点集群，没有中心依赖和限制，支持数据分布式存储，数据库节点动态扩容。</strong></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftim.tlnet.top%2F" target="_blank"><span><strong>webtim 在线访问地址</strong></span></a></blockquote><p style="color:#212529; text-align:start">webtim 的 im 功能：用户注册，登录，修改资料，用户关系功能系列操作，群功能系列操作，用户状态传输，通信数据传输。</p><p style="color:#212529; text-align:start">webtim 的流实现：实时视频电话，个人直播，视频播放直播，多人视频会议等</p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftlnet.top%2Ftimdoc" target="_blank"><span>TIM 开发使用文档</span></a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftlnet.top%2Ftim" target="_blank"><span>TIM 即时通讯引擎</span></a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fdonnie4w%2Fwebtim" target="_blank"><span>webtim 源码地址</span></a><span><span>&nbsp;</span>&nbsp;</span></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fdonnie4w%2Ftimjs" target="_blank"><span>timjs 源码地址</span></a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftlnet.top%2Ftldb" target="_blank">Tldb 分布式数据库</a></li></ul><p style="color:#212529; text-align:start"><strong>说明：</strong></p><ol><li>webtim 的 im 通讯逻辑功能是在 tim 服务端处理完成的，webtim 用 js 处理 tim 返回的处理结果，并将数据渲染到页面展示。所以，使用 tim 进行 IM 通讯是跨平台的，web 端，安卓，苹果等终端可以通过调用 tim 接口，进行业务上的数据通讯或业务处理。</li><li>webtim 不是专门的直播平台，只对视频进行简单采集。有时卡顿现象主要是采集数据出现错误或数据解析错误导致，更好的视频体验需要对采集数据做更细致的处理</li><li>注册 webtim 的账号是信息安全的。tim 不会记录注册者的账号，tim 是内置账号系统，使用内置账号通讯。而且通讯信息加密，用户资料加密，所以，用户不必担心资料泄密，即使是 tim 作者本人，也没法反向获取用户的账号密码等信息。这一点在开源代码中可以体现 
  <hr><p>&nbsp;</p></li></ol><h4><strong>webtim 功能截图：</strong></h4><p><img alt="" height="860" src="https://oscimg.oschina.net/oscnet/up-be20db0ace2613170d9cdc2a6e81556edd2.jpg" width="1907" referrerpolicy="no-referrer"></p><p><img alt="" height="899" src="https://oscimg.oschina.net/oscnet/up-e1c61d319ef7d2328fa697dd410fdb54b8a.jpg" width="1908" referrerpolicy="no-referrer"></p><p>&nbsp;</p><hr><p><strong>视频直播功能截图：</strong></p><p><strong><img alt="" height="820" src="https://oscimg.oschina.net/oscnet/up-4d9658741c5b0c256e136d122271e9a48e7.jpg" width="1900" referrerpolicy="no-referrer"></strong></p><p><img alt="" height="818" src="https://oscimg.oschina.net/oscnet/up-91c5c5c38b3eccb04e6ecd684637fd42cc4.jpg" width="1897" referrerpolicy="no-referrer"></p><p><img alt="" height="814" src="https://oscimg.oschina.net/oscnet/up-2f92a5d19edd6b5130d35c6d60474b458d3.jpg" width="1901" referrerpolicy="no-referrer"></p><p><img alt="" height="818" src="https://oscimg.oschina.net/oscnet/up-4f12b078a22a95528c5a5ed2381730b63e1.jpg" width="1903" referrerpolicy="no-referrer"></p><hr><p><strong>tim 开发使用</strong></p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftlnet.top%2Ftim" target="_blank">tim 官网</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Ftlnet.top%2Ftimdoc" target="_blank">tim 使用文档</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fdonnie4w%2FTim-Practical-Article" target="_blank">Github 持续更新 tim 系列文章</a></li></ul><hr><p style="color:#212529; text-align:start"><strong>有兴趣跟进 webtim 或 tim 项目可以加作者微信或 tim 微信交流群，或关注作者<span>&nbsp;</span></strong><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fdonnie4w" target="_blank"><strong>github</strong></a></p><hr><hr><p style="color:#212529; text-align:start">&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 01:38:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272710/webtim-0-0-2-released</guid>
            <link>https://www.oschina.net/news/272710/webtim-0-0-2-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[魔豆文库 moredoc v2.2.0 发布，实现广告支持和富文本编辑器增强]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bookstack.cn%2Fprojects%2Fmoredoc%2F25025565fbb0a50a52bcb76e9586ac42.png" target="_blank"><img alt="魔豆文库" src="https://static.sitestack.cn/projects/moredoc/25025565fbb0a50a52bcb76e9586ac42.png" referrerpolicy="no-referrer"></a></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">魔豆文库 MOREDOC，使用 Go 语言开发实现的文库解决方案，<a href="https://gitee.com/truthhun/DocHub">dochub</a>文库的重构版本，支持 office (全部类型)、PDF、TXT、EPUB、MOBI 等多种文档格式的在线阅读浏览，支持<code>无限级分类</code>、<code>文档批量上传</code>、<code>文档批量转换</code>、<code>全文搜索</code>、<code>云存储</code>、<code>网络爬虫</code>、<code>VIP</code>、<code>手机号登录注册</code>以及<code>支付宝</code>和<code>微信支付</code>等功能，拥有简洁美观的用户视觉和功能体验，以及配套的<a href="https://gitee.com/mnt-ltd/moredoc-app">微信小程序</a>。</p><h2>技术栈</h2><ul><li>Golang ：gin + gRPC + GORM</li><li>Vue.js : nuxt2 + element-ui</li><li>Database : MySQL 5.7+</li></ul><h2>升级日志</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>社区版 (开源版) 升级日志</strong></p><ul><li>文档默认预览格式调整为<code>webp</code>，以提升预览加载速度和减少存储空间占用</li><li>更换文章富文本编辑器，由<code>wangEditor</code>更换为<code>tinyMCE</code></li><li>优化图片验证码的获取，以节省服务器资源</li><li>增加广告位功能，可以在网站首页、列表页、搜索页、文档预览页等页面投放广告</li><li>支持按百分比设置最大预览页（在<code>系统设置</code>-&gt;<code>转换配置</code>中设置）</li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>专业版升级日志</strong></p><blockquote><p style="margin-left:0; margin-right:0">专业版升级内容包含社区版升级内容</p></blockquote><ul><li>集成 Google Oauth2 登录</li><li>支持关闭订单功能 (在<code>系统设置</code>-&gt;<code>展示配置</code>设置。适用于非营利机构网站)</li><li>支持微信小程序激励视频广告，用户可以在小程序通过观看激励视频广告获得积分奖励和文档下载（<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bookstack.cn%2Fread%2Fmoredoc%2Frewarded-ad.md" target="_blank">微信小程序激励视频广告配置</a>）</li></ul><h2>演示站点</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">程序新功能体验，一睹为快！</p><ul><li>网址：<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmoredoc.mnt.ltd%2F" target="_blank">https://moredoc.mnt.ltd</a></li><li>管理员账号： admin</li><li>管理员密码： mnt.ltd</li></ul><blockquote><p style="margin-left:0; margin-right:0">演示站点，每天凌晨 1:00 ~ 6:00，每隔一小时重置一次全部数据</p></blockquote><h2>开源地址</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>魔豆文库 MOREDOC</strong></p><ul><li>Gitee -<span>&nbsp;</span><a href="https://gitee.com/mnt-ltd/moredoc">https://gitee.com/mnt-ltd/moredoc</a></li><li>Github -<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fmnt-ltd%2Fmoredoc" target="_blank">https://github.com/mnt-ltd/moredoc</a></li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong>配套小程序 ONEDOC</strong></p><ul><li>Gitee -<span>&nbsp;</span><a href="https://gitee.com/mnt-ltd/onedoc">https://gitee.com/mnt-ltd/onedoc</a></li><li>Github -<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fmnt-ltd%2Fonedoc" target="_blank">https://github.com/mnt-ltd/onedoc</a></li></ul><h2>使用手册</h2><p style="color:#333333; margin-left:0px; margin-right:0px; text-align:left">关于魔豆文库安装部署、二次开发等更详细的教程，详见书栈网<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bookstack.cn%2Fbooks%2Fmoredoc" target="_blank">《魔豆文库使用手册》</a></p></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 01:16:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272709/moredoc-2-2-0-released</guid>
            <link>https://www.oschina.net/news/272709/moredoc-2-2-0-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[CLup 5.0.5 新版本发布：为您的 PostgreSQL/PolarDB 管控平台注入更强动能]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>🎉 CLup 开源仓库已经发布了令人瞩目的 5.0.5 版本。这个全新的版本不仅延续了我们对高可用、监控告警、备份和恢复等功能的极致追求，更引入了两项重大更新，旨在提升您的 PostgreSQL/PolarDB 管控体验。</p><p>👉 首先，我们新增了 VIP 池的特性，可以让您更加灵活、高效地管理您的虚拟 IP 资源，确保服务的稳定性和可靠性达到全新高度。无论是 IP 资源的初次分配，还是回收再利用，VIP 池管理都能为您提供强大的支持，让您在面对复杂环境时游刃有余。</p><p>🌍 其次，我们在创建数据库或集群的过程中，新增了选择 WAL 段文件大小的支持。（友情提示：此功能仅适用于 PG11 及以上版本以及 PolarDB。）这意味着您现在可以根据实际业务需求，精细化调整 WAL 段文件的大小，从而优化存储效率，提高系统性能。这一改进将进一步提升您的数据库环境的自定义能力和适应性。</p><p>🚀 CLup 5.0.5 版本是我们持续创新和精益求精的成果，我们坚信它将为您的 PostgreSQL/PolarDB 管控工作带来前所未有的便利和效率。无论您是数据库管理员、开发者还是运维工程师，CLup 都将成为您不可或缺的得力助手。</p><p>📣 我们诚邀您立即升级到 CLup 5.0.5 版本，亲自体验这些强大新功能带来的改变。同时，我们也期待您的反馈和建议，共同推动 CLup 的发展。如果您觉得 CLup 对您有帮助，请给仓库点一颗星星，让更多的人可以看到这个项目，十分感谢！</p><p style="color:black; margin-left:0; margin-right:0; text-align:left">期待您的反馈，让我们一起见证 CLup 软件的不断成长和进步！</p><p style="color:black; margin-left:0; margin-right:0; text-align:left">产品官网：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.csudata.com%2Fclup">https://www.csudata.com/clup</a></p><p style="color:black; margin-left:0; margin-right:0; text-align:left">官方文档：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.csudata.com%2Fclup%2Fmanual">https://www.csudata.com/clup/manual</a></p><p style="color:black; margin-left:0; margin-right:0; text-align:left">开源版 Gitee 地址：</p><ul><li><p style="margin-left:0; margin-right:0">server: https://gitee.com/csudata/clup</p></li><li><p style="margin-left:0; margin-right:0">agent: https://gitee.com/csudata/clup-agent</p></li></ul><p style="color:black; margin-left:0; margin-right:0; text-align:left">开源版 Github 地址</p><ul><li><p style="margin-left:0; margin-right:0">server：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fcsudata%2Fclup">https://github.com/csudata/clup</a></p></li><li><p style="margin-left:0; margin-right:0">agent：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fcsudata%2Fclup-agent">https://github.com/csudata/clup-agent</a></p></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Tue, 26 Dec 2023 00:03:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272705/clup-5-0-5-released</guid>
            <link>https://www.oschina.net/news/272705/clup-5-0-5-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[DDNS 动态域名工具更新：支持 IPv6]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">DDNS 动态域名工具更新，具体更新内容如下：</p><ul><li>支持 IPv6</li><li>解决 mybatis 代码生成器在 windows 下乱码问题</li><li><p>优化 docker.groovy，使用容器编译，添加 version 参数</p></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Mon, 25 Dec 2023 14:58:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272684/ddns-updated</guid>
            <link>https://www.oschina.net/news/272684/ddns-updated</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Wine runner 3.6.1 已经发布，小白友好型 Wine 运行器]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>Wine runner 3.6.1 已经发布，小白友好型 Wine 运行器</p><p>此版本更新内容包括：</p><blockquote><p>注：spark-deepin-wine-runner 是普通包，spark-deepin-wine-runner-ace 是使用 ace 兼容环境运行的运行器</p></blockquote><h1>3.6.1 更新内容</h1><p><strong>※1、修复应用无法打开的问题</strong></p><h1>3.6.0 更新内容</h1><p><strong>※1、修复高级打包器选择软件适配脚本后无法打包的问题 <a href="https://gitee.com/gfdgd-xi/deep-wine-runner/issues/I8I110" target="_blank">https://gitee.com/gfdgd-xi/deep-wine-runner/issues/I8I110</a></strong><br><strong>※2、支持调用 Deepin Wine8 Stable</strong><br><strong>※3、移除过时的 Wine 安装程序入口</strong><br><strong>※4、Wine 安装器支持根据地区自动选择国内源以及国际源</strong><br><strong>※5、Wine 安装器新增 Sourceforge 源</strong><br><strong>※6、新增 Wine 运行报告生成功能</strong><br><strong>※7、初步英语翻译</strong><br><strong>※8、新增离线安装包（只支持 amd64）</strong><br><strong>※9、支持识别 /opt 文件夹下的 Wine</strong><br> 10、新增 Wine 运行器视频教程的 Youtube 入口</p><p><img alt="图片.png" src="https://storage.deepin.org/thread/202312241003211288_%E5%9B%BE%E7%89%87.png" referrerpolicy="no-referrer"></p><h1>离线版本下载链接</h1><p>123pan：<a href="https://gitee.com/link?target=https%3A%2F%2Fwww.123pan.com%2Fs%2FpDSKVv-pAJWv.html" target="_blank">https://www.123pan.com/s/pDSKVv-pAJWv.html</a> 百度网盘：<a href="https://gitee.com/link?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F1klBw63tw2_ZQLzmi11dDBw%3Fpwd%3D7bu5" target="_blank">https://pan.baidu.com/s/1klBw63tw2_ZQLzmi11dDBw?pwd=7bu5</a> 提取码: 7bu5 诚通网盘：<a href="https://gitee.com/link?target=http%3A%2F%2Fctfile.gfdgdxi.top%2Fd%2F31540479-59254792-909739%3Fp%3D2061" target="_blank">http://ctfile.gfdgdxi.top/d/31540479-59254792-909739?p=2061</a> (访问密码: 2061) Github：<a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Fgfdgd-xi%2Fdeep-wine-runner%2Freleases%2F" target="_blank">https://github.com/gfdgd-xi/deep-wine-runner/releases/</a> Sourceforge：<a href="https://gitee.com/link?target=https%3A%2F%2Fsourceforge.net%2Fprojects%2Fdeep-wine-runner%2Ffiles%2F" target="_blank">https://sourceforge.net/projects/deep-wine-runner/files/</a></p><p>详情查看：<a href="https://gitee.com/gfdgd-xi/deep-wine-runner/releases/3.6.1">https://gitee.com/gfdgd-xi/deep-wine-runner/releases/3.6.1</a></p></div>
                                    ]]>
            </description>
            <pubDate>Mon, 25 Dec 2023 14:20:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272682/wine-runner-3-6-1-released</guid>
            <link>https://www.oschina.net/news/272682/wine-runner-3-6-1-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Java 工具集 Hutool-5.8.24 发布，一起发发牢骚]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img src="https://static.oschina.net/uploads/img/201803/21114512_tLDC.jpg" referrerpolicy="no-referrer"></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fhutool.cn%2F" target="_blank">https://hutool.cn/</a></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="background-color:#f6f6f6">Hutool</span><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span>是一个功能丰富且易用的</span><strong><span>&nbsp;</span>Java 工具库</strong><span style="background-color:#ffffff; color:#40485b">，通过诸多实用工具类的使用，旨在帮助开发者快速、便捷地完成各类开发任务。 这些封装的工具涵盖了字符串、数字、集合、编码、日期、文件、IO、加密、数据库 JDBC、JSON、HTTP 客户端等一系列操作， 可以满足各种不同的开发需求。</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">----------------------------------------------------------------------------</p><p>&nbsp; &nbsp; &nbsp; &nbsp; 此次更新为常规 bug 修复，整体来说 5.x 已经进入一个稳定期，之后的版本主要集中在 bug 修复上，最近的所谓 bug，其实是对 jdk9+的兼容性修复，还有针对 graalvm 的兼容性修复。</p><p>&nbsp; &nbsp; &nbsp; &nbsp; 这里略微发发牢骚，随着 Hutool 使用的广泛，用户群也逐渐扩展开来，甚至到了一些我的知识盲区，没办法，只能是一边修复 bug，一边学习，很多兼容性 bug 有的是用户抽出大量时间帮忙测试，有的是用户 debug 代码直接指明错误位置，甚至提交 PR 直接修复，还热心给出修复的原因以及参考的资料，在此为广大热心的用户表示感谢，你们的负重前行，会让后续的用户少走弯路。</p><p>&nbsp; &nbsp; &nbsp; &nbsp;第二个发牢骚的点就是 JDK 本身了，说实话，可能在大部分人心目中 JDK 是完美的存在的，一出问题不是框架库的问题，就是自己知识太浅薄，事实上根据用户提出的一些 issue，发现是 JDK 本身设计的不合理和 bug，我们需要总是需要通过一些「非常规」手段去绕过那些 bug（比如通过反射修改 JDK 某些参数属性），当然这些蜜汁操作，在升级 JDK9+后会成为用户的噩梦，换来的当然是对工具库和框架的强力吐槽。最后总结是：JDK 有 bug，可以当面试题啊 Spring 有 bug，你摆脱不掉还得继续用啊。其实国内开源环境的优点是沟通渠道顺畅，这也是一把双刃剑，优点是可以将用户的诉求及时反馈和处理，缺点也很明显，用户的情绪传递也很快，也会影响开发者的情绪。</p><p>&nbsp; &nbsp; &nbsp; 「没有银弹」，没有无 bug 的程序和代码，也没有完美的用户，我们也不是考试满分的神童，我们也是普通的开发者和学习者，开源的意义在于「分享」和"沟通"，好的开源项目不只是提供便利的工具，而是传递一种开源精神，一种协作方式和默契精神，从而更快的完成需求和团队协作。</p><p>----------------------------------------------------------------------------</p><p>主要更新如下：</p><h3><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fhutool.cn%2Fdocs%2F%23%2FCHANGELOG%3Fid%3D%25f0%259f%2590%25a3%25e6%2596%25b0%25e7%2589%25b9%25e6%2580%25a7" target="_blank"><span style="color:var(--textColor)">🐣新特性</span></a></h3><ul><li>【cache 】 Cache 增加 get 重载，可自定义超时时间（issue#I8G0DL@Gitee）</li><li>【cache 】 JWT#sign 增加重载，可选是否增加默认的 typ 参数（issue#3386@Github）</li><li>【db 】 增加识别 OpenGauss 的驱动类（issue#I8K6C0@Gitee）</li><li>【core 】 修复 CharSequenceUtil 注释和引用，避免循环引用</li><li>【extra 】 SpringUtil 增加 getProperty 重载（pr#1122@Gitee）</li><li>【core 】 FileTypeUtil 增加 null 判断（issue#3419@Github）</li><li>【core 】 DateUtil.parse 支持毫秒时间戳（issue#I8NMP7@Gitee）</li><li>【extra 】 优化 TokenizerEngine 使用 IK 分词器支持并发（pr#3427@Github）</li><li>【core 】 Opt.ofEmptyAble 支持更多类型（issue#I8OOSY@Gitee）</li><li>【http 】 HTMLFilter 保留 p 标签（issue#3433@Gitee）</li></ul><h3><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fhutool.cn%2Fdocs%2F%23%2FCHANGELOG%3Fid%3D%25f0%259f%2590%259ebug%25e4%25bf%25ae%25e5%25a4%258d" target="_blank"><span style="color:var(--textColor)">🐞Bug 修复</span></a></h3><ul><li>【core 】 修复 LocalDateTime#parseDate 未判断空问题问题（issue#I8FN7F@Gitee）</li><li>【http 】 修复 RootAction send404 抛异常问题（pr#1107@Gitee）</li><li>【extra 】 修复 Archiver 最后一个 Entry 为空文件夹时未关闭 Entry 问题（pr#1123@Gitee）</li><li>【core 】 修复 ImgUtil.convert png 转 jpg 在 jdk9+中失败问题（issue#I8L8UA@Gitee）</li><li>【cache 】 修复 StampedCache 的 get 方法非原子问题（issue#I8MEIX@Gitee）</li><li>【core 】 修复 StrSplitter.splitByRegex 使用空参数导致的 OOM 问题（issue#3421@Github）</li><li>【db 】 修复嵌套 SQL 中 order by 子句错误截断问题（issue#I89RXV@Gitee）</li><li>【http 】 修复 graalvm 编译后，未读取 Content-Length 可能导致的读取时间过长问题（issue#I6Q30X@Gitee）</li><li>【core 】 修复 JavaSourceCompiler.addSource 目录处理错误问题（issue#3425@Github）</li><li>【core 】 修复时间戳转 Bean 时异常问题（issue#I8NMP7@Gitee）</li><li>【core 】 修复 PostgreSQL 使用 upsert 字段大小写问题问题（issue#I8PB4X@Gitee）</li><li>【extra 】 修复 TinyPinyinEngine 可能的空指针问题（issue#3437@Github）</li><li>【core 】 修复 graalvm 原生打包使用 http 工具被转为 file 协议问题（issue#I8PY3Y@Gitee）</li><li>【poi 】 修复 cloneSheet 参数错误导致非 XSSFWorkbook 错误命名问题（issue#I8QIBB@Gitee）</li></ul></div>
                                    ]]>
            </description>
            <pubDate>Mon, 25 Dec 2023 10:49:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272641/hutool-5-8-24-released</guid>
            <link>https://www.oschina.net/news/272641/hutool-5-8-24-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Angular v17 正式发布！]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">原文：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fblog.angular.io%2Fintroducing-angular-v17-4d7033312e4b" target="_blank">Introducing Angular v17</a></p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">上个月是 Angular 红色盾牌诞生 13 周年。 AngularJS（注意是 AngularJS 不是 Angular，也就是 1.x 版本） 是新一波 JavaScript 框架的起点，旨在支持对丰富 Web 体验日益增长的需求。今天，我们凭借新的外观和一系列前瞻性功能，通过 v17 带领大家走向未来，为性能和开发体验奠定了新的基础。</p><div><img alt="" height="405" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225182432043-179844286.webp" width="720" referrerpolicy="no-referrer"></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><strong>在 v17 中，我们很高兴地介绍：</strong></p><ul><li><strong>Deferrable views 可延迟视图将性能和开发体验提升到一个新的水平，从开发预览版正式稳定</strong></li><li><strong>在</strong><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fkrausest.github.io%2Fjs-framework-benchmark%2Fcurrent.html" target="_blank">公共基准测试</a><strong>中，通过内置控制流的循环，运行时间提高了 90%</strong></li><li><strong>混合渲染的构建速度提高了 87%，客户端渲染的构建速度提高了 67%</strong></li><li><strong>全新的外观，代表了 Angular 面向未来的特征</strong></li><li><strong>全新的互动学习教程，从简单到深入，包括在线 Playground</strong></li><li><strong>以及许多其他功能和改进！</strong></li></ul><h2>面向未来的身份</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在过去的几个版本中，Angular 的复兴一直在全力进行。我们一直在通过基于信号（signal-based）的反应性（reactivity）、hydration（水合作用）、独立组件、组合指令和许多其他功能等改进来加快势头。尽管 Angular 发展迅速，但它的品牌却未能跟上 —— 从 AngularJS 早期以来，它几乎一模一样。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><br><strong>今天，你喜爱的、经过数百万开发者考验的框架焕然一新，反映了其面向未来的开发体验和性能！</strong></p><div><div><img alt="" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225182439272-1046899011.gif" referrerpolicy="no-referrer"></div></div><h2>面向未来的文档</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">与新品牌一起，我们还为 Angular 文档开发了一个新家 — angular.dev。对于新的文档网站，我们采用了新的结构、新的指南、改进的内容，并构建了一个交互式学习之旅平台，让你可以直接在浏览器中按照自己的节奏学习 Angular 和 Angular CLI。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><br> 新的交互式学习体验由<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fwebcontainers.io%2F" target="_blank">WebContainers</a><span>&nbsp;</span>提供支持，让你可以在任何现代 Web 浏览器中使用 Angular CLI 的强大功能！</p><div><div><img alt="" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225182816361-167791283.gif" referrerpolicy="no-referrer"><div>
   &nbsp;
  </div></div></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">今天，我们将推出 angular.dev 的 Beta 预览版，并计划在 v18 将其设为 Angular 的默认网站。你可以在<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F665420129" target="_blank">Angular.dev 它来了</a>（原文<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fblog.angular.io%2Fannouncing-angular-dev-1e1205fa3039" target="_blank">Announcing angular.dev</a>）中了解有关 Angular 新外观和 angular.dev 的更多信息。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><br> 现在让我深入了解 v17 的功能，我们迫不及待地想告诉你！</p><h2>内置控制流</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">为了改善开发体验，我们发布了新的块模板语法，通过简单的声明性 API 为你提供强大的功能。在底层，Angular 编译器将语法转换为高效的 JavaScript 指令，可以执行控制流、延迟加载等等。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">我们使用新的块语法来实现一个被优化的内置控制流。在进行用户研究后，我们发现许多开发人员都在使用<span>&nbsp;</span><code>*ngIf</code><span>&nbsp;</span>、<span>&nbsp;</span><code>*ngSwitch</code><span>&nbsp;</span>和<span>&nbsp;</span><code>*ngFor</code><span>&nbsp;</span>时遇到了一些困难。自 2016 年开始使用 Angular 并在过去 5 年里成为 Angular 团队的一员，我个人仍然需要查找<span>&nbsp;</span><code>*ngFor</code><span>&nbsp;</span>和<span>&nbsp;</span><code>trackBy</code><span>&nbsp;</span>的语法。在收集了社区、合作伙伴的反馈并进行用户体验研究后，我们为 Angular 开发了一个新的内置控制流！</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">内置控制流程可以：</p><ul><li>更舒适的语法，更接近 JavaScript，因此更直观，需要更少的文档查找</li><li>得益于优化的类型收窄（type narrowing），可以进行更好的类型检查</li><li>这是一个主要存在于构建时的概念，它可以减少运行时占用空间（使其「消失」），从而可以将你的包大小减少多达 30 KB，并进一步提高你的 Core Web Vital 分数</li><li>它会自动在你的模板中可用，无需额外导入，过去的结构型指令需要在 common 模块导入 NgIf、NgFor 等</li><li>稍后会介绍显著的性能提升</li></ul><h2>条件语句</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">让我们看一下与<code>*ngIf</code>的比较：</p><div><pre><code class="language-html"><span>&lt;</span><span style="color:#093e8b">div</span><span style="color:#d95350">*</span><span style="color:#1772f6">ngIf</span><span>=</span><span style="color:#d95350">"loggedIn; else anonymousUser"</span><span>&gt;</span>
  The user is logged in
<span>&lt;/</span><span style="color:#093e8b">div</span><span>&gt;</span><span>&lt;</span><span style="color:#093e8b">ng-template</span><span style="color:#d95350">#</span><span style="color:#1772f6">anonymousUser</span><span>&gt;</span>
  The user is not logged in
<span>&lt;/</span><span style="color:#093e8b">ng-template</span><span>&gt;</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">使用内置 if 语句，此条件将如下所示：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>if</span><span>(</span><span>loggedIn</span><span>)</span><span>{</span><span>The</span><span>user</span><span>is</span><span>logged</span><span>in</span><span>}</span><span style="color:#d95350">@</span><span>else</span><span>{</span><span>The</span><span>user</span><span>is</span><span>not</span><span>logged</span><span>in</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">与旧版<span>&nbsp;</span><code>*ngIf</code><span>&nbsp;</span>替代方案的 else 子句相比，能够直接在<code>@else</code>中填写模板内容是一项重大简化。当前的控制流也使得<span>&nbsp;</span><code>@else if</code><span>&nbsp;</span>变得可能，过去的结构性指令是不可能做到的。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><code>*ngSwitch</code><span>&nbsp;</span>改进的效果更加明显：</p><div><pre><code class="language-js"><span>&lt;</span><span>div</span><span>[</span><span>ngSwitch</span><span>]</span><span>=</span><span style="color:#d95350">"accessLevel"</span><span>&gt;</span><span>&lt;</span><span>admin</span><span>-</span><span>dashboard</span><span>*</span><span>ngSwitchCase</span><span>=</span><span style="color:#d95350">"admin"</span><span>/&gt;</span><span>&lt;</span><span>moderator</span><span>-</span><span>dashboard</span><span>*</span><span>ngSwitchCase</span><span>=</span><span style="color:#d95350">"moderator"</span><span>/&gt;</span><span>&lt;</span><span>user</span><span>-</span><span>dashboard</span><span>*</span><span>ngSwitchDefault</span><span>/&gt;</span><span>&lt;</span><span style="color:#d95350">/div&gt;</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">通过内置控制流，它变成：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>switch</span><span>(</span><span>accessLevel</span><span>)</span><span>{</span><span style="color:#d95350">@</span><span>case</span><span>(</span><span style="color:#d95350">'admin'</span><span>)</span><span>{</span><span>&lt;</span><span>admin</span><span>-</span><span>dashboard</span><span>/&gt;</span><span>}</span><span style="color:#d95350">@</span><span>case</span><span>(</span><span style="color:#d95350">'moderator'</span><span>)</span><span>{</span><span>&lt;</span><span>moderator</span><span>-</span><span>dashboard</span><span>/&gt;</span><span>}</span><span style="color:#d95350">@</span><span>default</span><span>{</span><span>&lt;</span><span>user</span><span>-</span><span>dashboard</span><span>/&gt;</span><span>}</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">新的控制流可以在<span>&nbsp;</span><code>@switch</code><span>&nbsp;</span>中的各个分支中实现更好的类型收窄，这在<span>&nbsp;</span><code>*ngSwitch</code><span>&nbsp;</span>结构型指令中是不可能做到的。</p><h2>内置 for 循环</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">我最喜欢的更新之一是我们引入的内置 for 循环，它除了开发体验改进之外，还将 Angular 的渲染速度推向了另一个水平！</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">其基本语法是：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>for</span><span>(</span><span>user</span><span>of</span><span>users</span><span>;</span><span>track</span><span>user</span><span>.</span><span>id</span><span>)</span><span>{</span><span>{{</span><span>user</span><span>.</span><span>name</span><span>}}</span><span>}</span><span style="color:#d95350">@</span><span>empty</span><span>{</span><span>Empty</span><span>list</span><span>of</span><span>users</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">我们经常会在应用程序中看到由于<code>*ngFor</code>中缺少<code>trackBy</code>功能而导致的性能问题。<span>&nbsp;</span><code>@for</code>中的一些区别是 track 是强制性的，以确保快速比较性能。此外，它更容易使用，因为它只是一个表达式而不是组件类中的方法。内置的<code>@for</code>循环还具有通过可选的<span>&nbsp;</span><code>@empty</code><span>&nbsp;</span>块进行零项集合的快捷方式。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><code>@for</code><span>&nbsp;</span>语句使用了新的比较算法，并且与<span>&nbsp;</span><code>*ngFor</code><span>&nbsp;</span>相比具有更优化的实现，这使得社区框架基准测试的运行时间提高了 90%！</p><div><img alt="" height="1456" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225182921204-1508718499.webp" width="720" referrerpolicy="no-referrer"></div><h2>试一试！</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><strong>内置控制流现已在 v17 开发者预览版中发布！</strong></p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">内置控制流的设计目标之一是实现完全自动化的迁移。要在现有项目中尝试它，请使用以下 Schematics 一键迁移：</p><div><pre><code class="language-text">ng generate @angular/core:control-flow</code></pre></div><h2>下一步是什么？</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">你已经可以使用带有最新语言服务的内置控制流，我们与 JetBrains 密切合作，以便在他们的产品中提供更好的支持。我们还与 Prettier 的<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fsosukesuzuki" target="_blank">Sosuke Suzuki<span>&nbsp;</span></a>联系，以确保 Angular 模板可以正确格式化。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">与<code>*ngIf</code>、<code>*ngFor</code>和<code>*ngSwitch</code>相比，内置控制流处理内容投影（content projection）的方式仍然存在一些差异，我们将在接下来的几个月里努力解决这些问题。除此之外，我们对内置控制流的实现和稳定性充满信心，所以你今天就可以尝试一下！我们希望将其保留在开发者预览版中，直到下一个主要版本，以便我们可以为潜在的向后不兼容问题进行修复，以防我们找到进一步增强开发体验的机会。</p><h2>延迟视图（Deferrable views）</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">现在让我们谈谈懒加载的未来！利用新的块语法，我们开发了一种新的强大机制，你可以使用它来使你的应用程序更快。在博客文章的开头，我说过可延迟视图将性能和开发体验提升到了一个新的水平，因为它们通过前所未有的舒适的实现了声明性和强大的延迟加载。</p><div><img alt="" height="603" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225182938849-2097420811.webp" width="720" referrerpolicy="no-referrer"></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">假设你有一个博客，并且你想延迟加载用户评论列表。目前，你必须使用<span>&nbsp;</span><code>ViewContainerRef</code><span>&nbsp;</span>，同时还要管理清理、管理加载错误、显示占位符等一系列复杂的问题。处理各种极端情况可能会产生一些复杂代码，这将很难测试和调试。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">新的可延迟视图允许你使用一行声明性代码延迟加载评论列表及其所有的依赖项：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>defer</span><span>{</span><span>&lt;</span><span>comment</span><span>-</span><span>list</span><span>/&gt;</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">最令人难以置信的部分是，这一切都是通过编译时转换发生的：Angular 通过查找<span>&nbsp;</span><code>@defer</code><span>&nbsp;</span>块内部使用的组件、指令和管道、生成动态导入并管理加载过程来抽象所有复杂性以及状态之间的切换。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">当某个 DOM 元素进入视口时开始延迟加载组件涉及许多更重要的逻辑和<code>IntersectionObserver</code><span>&nbsp;</span>API。<span>&nbsp;</span><strong>Angular 使使用<code>IntersectionObservers</code>就像添加可延迟视图触发器一样简单！</strong></p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>defer</span><span>(</span><span>on</span><span>viewport</span><span>)</span><span>{</span><span>&lt;</span><span>comment</span><span>-</span><span>list</span><span>/&gt;</span><span>}</span><span style="color:#d95350">@</span><span>placeholder</span><span>{</span><em>&lt;!--</em><span>A</span><span>placeholder</span><span>content</span><span>to</span><span>show</span><span>until</span><span>the</span><span>comments</span><span>load</span><span>--&gt;</span><span>&lt;</span><span>img</span><span>src</span><span>=</span><span style="color:#d95350">"comments-placeholder.png"</span><span>&gt;</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在上面的示例中，Angular 首先渲染占位符块的内容。当它在可视窗（viewport）中可见时，<span>&nbsp;</span><code>&lt;comment-list/&gt;</code><span>&nbsp;</span>组件就会开始加载。加载完成后，Angular 会删除占位符并渲染组件。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">还有用于加载和错误状态的块：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>defer</span><span>(</span><span>on</span><span>viewport</span><span>)</span><span>{</span><span>&lt;</span><span>comment</span><span>-</span><span>list</span><span>/&gt;</span><span>}</span><span style="color:#d95350">@</span><span>loading</span><span>{</span><span>Loading</span><span style="color:#d95350">…</span><span>}</span><span style="color:#d95350">@</span><span>error</span><span>{</span><span>Loading</span><span>failed</span><span>:</span><span>(</span><span>}</span><span style="color:#d95350">@</span><span>placeholder</span><span>{</span><span>&lt;</span><span>img</span><span>src</span><span>=</span><span style="color:#d95350">"comments-placeholder.png"</span><span>&gt;</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">就是这样！ Angular 为你管理了大量的复杂逻辑。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">可延迟视图提供了更多触发器：</p><ul><li><code>on idle</code><span>&nbsp;</span>- 当浏览器不做任何繁重的工作时延迟加载块</li><li><code>on immediate</code><span>&nbsp;</span>— 自动开始延迟加载，不阻塞浏览器</li><li><code>on timer(&lt;time&gt;)</code><span>&nbsp;</span>— 使用计时器延迟加载</li><li><code>on viewport</code><span>&nbsp;</span>和<span>&nbsp;</span><code>on viewport(&lt;ref&gt;)</code><span>&nbsp;</span>- 可视窗还允许指定锚元素的引用。当锚元素可见时，Angular 将延迟加载组件并渲染它</li><li><code>on interaction</code><span>&nbsp;</span>和<span>&nbsp;</span><code>on interaction(&lt;ref&gt;)</code><span>&nbsp;</span>— 使你能够在用户与特定元素交互时启动延迟加载</li><li><code>on hover</code><span>&nbsp;</span>和<span>&nbsp;</span><code>on hover(&lt;ref&gt;)</code><span>&nbsp;</span>- 当用户悬停元素时触发延迟加载</li><li><code>when &lt;expr&gt;</code><span>&nbsp;</span>— 使你能够通过返回承诺的表达式指定你自己的条件</li></ul><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">可延迟视图还提供了在渲染依赖项之前预取依赖项的能力。添加预取就像向 defer 块添加<span>&nbsp;</span><code>prefetch</code><span>&nbsp;</span>语句一样简单，并且支持所有相同的触发器。</p><div><pre><code class="language-text">@defer (on viewport; prefetch on idle) {
  &lt;comment-list /&gt;
}</code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><strong>今天，可延迟视图在 v17 的开发者预览版中可用！了解有关</strong><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fangular.io%2Fguide%2Fdefer" target="_blank">本指南</a><strong>中该功能的更多信息。</strong></p><h2>下一步是什么？</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">可延迟视图已准备好使用，我们强烈鼓励你尝试一下！我们将它们保留在开发人员预览中的原因是这样我们可以收集更多反馈并在 API 中引入更改，直到我们将它们锁定为像框架的其余部分一样遵循语义版本控制。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">目前，服务器端渲染将渲染指定的占位符。一旦框架加载应用程序并对其进行水合，可延迟视图将按照我们上面描述的方式工作。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">下一步，我们将探索在服务器上渲染延迟块内的内容，并在客户端上启用部分水合。在这种情况下，客户端不会下载延迟视图的代码，直到触发器请求它。此时，Angular 将下载相关的 JavaScript 并仅对视图的这一部分进行水合。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">还将有许多令人兴奋的信号互操作性，敬请期待！</p><h2>改进的混合渲染体验</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">今天，我们通过<code>ng new</code>中的提示，使服务器端渲染 (SSR) 和静态站点生成（SSG 或预渲染）更接近开发人员：</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">这是我们长期以来一直想要做出的改变，但首先我们希望 Angular 的 SSR 开发体验充满信心。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">要不，你可以通过以下方式在新项目中启用 SSR：</p><div><pre><code class="language-text">ng new my-app --ssr</code></pre></div><div><img alt="" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225183105094-1291642340.gif" referrerpolicy="no-referrer"></div><h2>Hydration 从开发者预览版正式稳定</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在过去的 6 个月里，我们看到数千个应用程序采用了水合作用 (hydration)。<strong>今天，我们很高兴地宣布，水合作用已不再是开发者预览版，并且在所有使用服务器端渲染的新应用程序中默认启用！</strong></p><h2>新的 @angular/ssr 包</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">我们将 Angular Universal 仓储移至 Angular CLI 仓储库，并使服务器端渲染成为我们工具中更加不可或缺的一部分！</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">从今天开始，要向现有应用程序添加 Hybrid 渲染支持直接运行：</p><div><pre><code class="language-text">ng add @angular/ssr</code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">此命令将生成服务入口点，添加 SSR 和 SSG 构建功能，并默认启用水合。<span>&nbsp;</span><code>@angular/ssr</code><span>&nbsp;</span>提供与当前处于维护模式的<span>&nbsp;</span><code>@nguniversal/express-engine</code><span>&nbsp;</span>等效的功能。如果你使用的是 express-engine，Angular CLI 会自动将您的代码更新为<code>@angular/ssr</code><span>&nbsp;</span>。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><strong>从旧平台迁移到最新的 Angular 混合渲染解决方案后，Virgin Media O2 的销售额增长了 112%。</strong>通过将<span>&nbsp;</span><code>NgOptimizedImage</code><span>&nbsp;</span>与带有 DOM Hydration 的 Angular SSR 结合使用，累积布局偏移平均减少了 99.4%。</p><h2>使用 SSR 部署你的应用程序</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">为了进一步增强开发体验，我们与云提供商密切合作，以实现顺利部署到他们的平台。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">Firebase 现在将自动识别并以接近零配置部署你的 Angular 应用程序，并提供<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Ffirebase.google.com%2Fdocs%2Fhosting%2Fframeworks%2Fangular" target="_blank">新的框架感知 CLI 提前预览</a>。</p><div><pre><code class="language-text">firebase experiments:enable webframeworks
firebase init hosting
firebase deploy</code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">framework-aware CLI 可识别 SSR、i18n、图像优化等的使用，使你能够在经济高效的无服务器基础设施上提供高性能的 Web 应用程序。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">对于那些拥有复杂 Angular monorepos 或只是喜欢本机工具的人，AngularFire 允许使用<span>&nbsp;</span><code>ng deploy</code><span>&nbsp;</span>部署到 Firebase：</p><div><pre><code class="language-text">ng add @angular/fire
ng deploy</code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">为了能够普通开发人员也可以部署，我们在 Angular 的服务器端渲染中启用了 ECMAScript 模块支持，<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F50247" target="_blank">引入</a>了<span>&nbsp;</span><code>HttpClient</code><span>&nbsp;</span>的获取后端，并与 CloudFlare 合作<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdevelopers.cloudflare.com%2Fpages%2Fframework-guides%2Fdeploy-an-angular-site%2F" target="_blank">简化</a>了流程。</p><h2>新的生命周期钩子</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">为了提高 Angular 的 SSR 和 SSG 的性能，从长远来看，我们希望摆脱 DOM 模拟和直接 DOM 操作。同时，在大多数应用程序的生命周期中，它们需要与元素交互以实例化第三方库、测量元素大小等。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">为了实现这一点，我们开发了一组新的生命周期挂钩：</p><ul><li><code>afterRender</code><span>&nbsp;</span>— 注册一个回调函数，每次应用程序完成渲染时调用</li><li><code>afterNextRender</code><span>&nbsp;</span>— 注册一个回调函数，在下次应用程序完成渲染时调用，注意 Next 一个词表示下一次，也就是只会执行一次</li></ul><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">只有浏览器相关逻辑才会调用这些钩子，这使你能够将自定义 DOM 逻辑安全地直接插入组件中。例如，如果你想实例化图表库，可以使用<span>&nbsp;</span><code>afterNextRender</code><span>&nbsp;</span>：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>Component</span><span>({</span><span>selector</span><span>:</span><span style="color:#d95350">'my-chart-cmp'</span><span>,</span><span>template</span><span>:</span><span style="color:#d95350">`&lt;div #chart&gt;{{ ... }}&lt;/div&gt;`</span><span>,</span><span>})</span><span>export</span><span>class</span><span>MyChartCmp</span><span>{</span><span style="color:#d95350">@</span><span>ViewChild</span><span>(</span><span style="color:#d95350">'chart'</span><span>)</span><span>chartRef</span><span>:</span><span>ElementRef</span><span>;</span><span>chart</span><span>:</span><span>MyChart</span><span>|</span><span>null</span><span>;</span><span>constructor</span><span>()</span><span>{</span><span>afterNextRender</span><span>(()</span><span>=&gt;</span><span>{</span><span>this</span><span>.</span><span>chart</span><span>=</span><span>new</span><span>MyChart</span><span>(</span><span>this</span><span>.</span><span>chartRef</span><span>.</span><span>nativeElement</span><span>);</span><span>},</span><span>{</span><span>phase</span><span>:</span><span>AfterRenderPhase</span><span>.</span><span>Write</span><span>});</span><span>}</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">每个钩子都支持一个阶段值（例如读取、写入），Angular 将使用该阶段值来安排回调以减少布局抖动并提高性能。</p><h2>新项目默认使用 Vite 和 esbuild</h2><div><img alt="" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225183618741-2002323503.webp" referrerpolicy="no-referrer"></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">如果没有对 Angular CLI 的构建管道进行底层的改变，我们从一开始就无法在 Angular 中启用 SSR！</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在 v16 中，我们引入了 esbuild 和 Vite 构建的开发者预览版。从那时起，许多开发人员和一些企业合作伙伴都对其进行了试验，<strong>使他们的一些应用程序的构建时间缩短了 67%！</strong>今天，我们很高兴地宣布，新的应用程序构建器已从开发者预览版中正式稳定，并且默认为所有新应用程序启用！</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">此外，我们还更新了使用混合渲染时的构建管道。通过 SSR 和 SSG，您可以观察到<span>&nbsp;</span><strong><code>ng build</code></strong><span>&nbsp;</span>的速度提高了 87%，<span>&nbsp;</span><strong><code>ng serve</code></strong><span>&nbsp;</span>的编辑刷新循环速度提高了 80%。</p><div><img alt="" height="445" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225183719596-1185793546.webp" width="720" referrerpolicy="no-referrer"></div><p>原图是 bin 文件的动画，当前平台不支持，如果想查看进原文</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在未来的次要版本中，我们将提供原理图，以使用混合渲染（​​使用 SSG 或 SSR 进行客户端渲染）自动迁移现有项目。如果你今天想测试新的应用程序构建器，请查看我们<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fangular.io%2Fguide%2Fesbuild" target="_blank">文档</a>中的本指南。</p><h2>DevTools 中的依赖注入调试</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">去年，我们展示了 Angular DevTools 中依赖注入调试功能的预览。在过去的几个月里，我们实现了全新的调试 API，使我们能够插入框架的运行时并检查注入器树。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">Based on these APIs we built an inspection user interface that allows you to preview the:<br> 基于这些 API，我们构建了一个检查用户界面，允许您预览：</p><ul><li>Dependencies of your components in the component inspector<br> 组件 Inspector 中查看组件的依赖关系</li><li>Injector tree and dependency resolution path<br> 注入器树和依赖解析路径</li><li>Providers declared within the individual injectors<br> 在各个注入器中声明的提供程序</li></ul><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">You can find a quick preview of the features in the animation below. Learn more about<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fangular.io%2Fguide%2Fdevtools" target="_blank">Angular DevTools on angular.io</a>.<br> 你可以在下面的动画中快速预览这些功能。在<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Fangular.io" target="_blank"><span style="color:#3498db"><span style="background-color:transparent">http://</span></span><span>angular.io</span></a><span>&nbsp;</span>上了解有关<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fangular.io%2Fguide%2Fdevtools" target="_blank">Angular DevTools</a><span>&nbsp;</span>的更多信息。</p><div><div><img alt="" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225183907781-1326515808.gif" referrerpolicy="no-referrer"><div>
   &nbsp;
  </div></div></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><br> 下一步，我们将完善 UI 并致力于更好地可视化注入器层次结构、提供程序及其分辨率。</p><h2>从一开始就提供独立 API</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在过去一年半的时间里收集了独立组件、指令和管道的反馈并完善了它们的开发体验后，我们有信心从一开始就在所有新应用程序中启用它们。所有<code>ng generate</code>命令现在都将构建独立组件、指令和管道。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">与此同时，我们还重新审视了<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2FAngular.io" target="_blank"><span style="background-color:transparent; color:transparent">http://</span><span>Angular.io</span></a><span>&nbsp;</span>和 Angular.dev 的整个文档，以确保一致的学习体验、开发实践和建议。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在可预见的未来，我们将保留 NgModules，但看到新的独立 API 的好处，我们强烈建议你逐步将项目迁移到它们。我们还提供了一个示意图，可以为您自动完成大部分工作：</p><div><pre><code class="language-text">ng generate @angular/core:standalone</code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">有关更多信息，请查看我们的<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fangular.io%2Fguide%2Fstandalone-migration" target="_blank">迁移指南</a>。</p><h2>Reactivity 的下一步</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">Angular 新的基于信号的响应式系统是我们在该框架中所做的最大转变之一。为了确保与基于 Zone.js 的变更检测的向后兼容性和互操作性，我们一直在努力制作原型并设计前进的道路。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><strong>今天，我们很高兴地宣布 Angular Signals 从开发者预览版正式稳定</strong>。目前，我们将把<span>&nbsp;</span><code>effect</code><span>&nbsp;</span>函数保留在开发者预览中，以便我们可以进一步迭代它的语义。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在接下来的几个月中，我们将开始推出基于信号的输入、视图查询等功能。到明年 5 月，在 Angular v18 中，我们将提供许多功能来进一步改善开发人员使用 Signals 的体验。</p><h2>测试的下一步</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">我们正在继续试验 Jest，并确保我们构建一个高性能、灵活且直观的解决方案，满足开发人员的需求。我们还开始尝试 Web Test Runner，并为初始实施提供了一个<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fangular%2Fangular-cli%2Fpull%2F25860" target="_blank">PR</a>。在不久的将来，我们可能会首先关注 Web Test Runner，以解锁那些渴望摆脱 Karma 的项目。</p><h2>Material 3 的下一步</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">我们一直在与 Google 的 Material Design 团队努力合作，重构 Angular Material 的内部结构，以纳入<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fm3.material.io%2Ffoundations%2Fdesign-tokens%2Foverview" target="_blank">design tokens</a>，该系统将为组件提供更多的自定义选项并启用<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fm3.material.io%2F" target="_blank">Material 3</a><span>&nbsp;</span>支持。虽然我们还没有准备好为 v17 提供 design token 和 M3 支持，但我们预计很快会在 v17 小版本中提供这些功能。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在 2022 年第四季度，我们宣布推出基于 MDC 的新 Angular Material 组件，并弃用具有相同功能但 DOM 结构和样式不同的旧组件。我们在 v15 中弃用了旧组件，并将在 v17 中删除。即使它们不属于 Angular Material v17 包的一部分，你仍然可以将应用程序更新到 Angular v17 并使用 v16 Angular Material 包。在 v18 之前，这将是一个选项，之后 Angular Material v16 将不再与较新版本的 Angular 兼容。我们还与<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fwww.herodevs.com%2Fsupport" target="_blank">HeroDevs</a><span>&nbsp;</span>的合作伙伴合作，他们将提供无休止的付费支持，以防你暂时无法执行迁移。</p><h2>生活质量提升</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">除了所有这些面向未来的功能之外，我们还从待办事项中提供了一系列较小的开发人员体验增强功能！</p><h2>实验性视图转换支持</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fdeveloper.chrome.com%2Fdocs%2Fweb-platform%2Fview-transitions%2F" target="_blank">View Transitions API</a><span>&nbsp;</span>可在更改 DOM 时实现平滑转换。在 Angular 路由器中，我们现在通过<span>&nbsp;</span><code>withViewTransitions</code><span>&nbsp;</span>功能提供对此 API 的直接支持。使用此功能，不可以使用浏览器的本机功能在路线之间创建动画过渡。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">你现在可以通过在应用启动时通过路由器的提供程序声明配置此功能来将此特性添加到你的应用程序中：</p><div><pre><code class="language-js"><span>bootstrapApplication</span><span>(</span><span>App</span><span>,</span><span>{</span><span>providers</span><span>:</span><span>[</span><span>provideRouter</span><span>(</span><span>routes</span><span>,</span><span>withViewTransitions</span><span>()),</span><span>]</span><span>});</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><code>withViewTransitions</code><span>&nbsp;</span>接受带有属性<span>&nbsp;</span><code>onViewTransitionCreated</code><span>&nbsp;</span>的可选配置对象，这是一个为你提供一些额外控制的回调：</p><ul><li>决定是否要跳过特定动画</li><li>向 Document 添加 Class 以自定义动画并在动画完成时删除这些 Class</li><li>等等。</li></ul><h2>图像指令中的自动预连接</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">Angular 图像指令现在会自动为你作为参数提供给图像加载器的域生成预连接链接。如果图像指令无法自动识别源并且未检测到 LCP 图像的预连接链接，它将在开发过程中发出警告。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fangular.io%2Fguide%2Fimage-directive" target="_blank">图像指令指南中</a>了解有关此功能的更多信息。</p><h2>延迟加载动画模块</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">此功能可以使你的初始捆绑包（压缩后的 16KB）减少 60KB。社区贡献者<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2FJeanMeche" target="_blank">Matthieu Riegler</a><span>&nbsp;</span>提出并实现了一项功能，允许你通过异步提供程序函数延迟加载动画模块：</p><div><pre><code class="language-js"><span>import</span><span>{</span><span>provideAnimationsAsync</span><span>}</span><span>from</span><span style="color:#d95350">'@angular/platform-browser/animations-async'</span><span>;</span><span>bootstrapApplication</span><span>(</span><span>RootCmp</span><span>,</span><span>{</span><span>providers</span><span>:</span><span>[</span><span>provideAnimationsAsync</span><span>()]</span><span>});</span></code></pre></div><h2>输入值变换</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">常见的模式是具有接收布尔输入的组件。然而，这对如何将值传递给此类组件设置了限制。例如，如果我们对 Expander 组件有以下定义：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>Component</span><span>({</span><span>standalone</span><span>:</span><span>true</span><span>,</span><span>selector</span><span>:</span><span style="color:#d95350">'my-expander'</span><span>,</span><span>template</span><span>:</span><span style="color:#d95350">`…`</span><span>})</span><span>export</span><span>class</span><span>Expander</span><span>{</span><span style="color:#d95350">@</span><span>Input</span><span>()</span><span>expanded</span><span>:</span><span>boolean</span><span>=</span><span>false</span><span>;</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">...我们尝试将其用作：</p><div><pre><code class="language-js"><span>&lt;</span><span>my</span><span>-</span><span>expander</span><span>expanded</span><span>/&gt;</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">你会得到一个错误「字符串不能分配给布尔值」。输入值转换允许你通过配置输入装饰器来解决此问题：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>Component</span><span>({</span><span>standalone</span><span>:</span><span>true</span><span>,</span><span>selector</span><span>:</span><span style="color:#d95350">'my-expander'</span><span>,</span><span>template</span><span>:</span><span style="color:#d95350">`…`</span><span>})</span><span>export</span><span>class</span><span>Expander</span><span>{</span><span style="color:#d95350">@</span><span>Input</span><span>({</span><span>transform</span><span>:</span><span>booleanAttribute</span><span>})</span><span>expanded</span><span>:</span><span>boolean</span><span>=</span><span>false</span><span>;</span><span>}</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">可以在 GitHub 上找到原始功能请求 - 作为 HTML<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fangular%2Fangular%2Fissues%2F14761" target="_blank">二进制属性的布尔属性</a>和<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fangular%2Fangular%2Fissues%2F14761" target="_blank">作为 HTML 二进制属性的布尔属性。</a></p><h2>作为字符串的 styles 和 styleUrls</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">Angular 组件支持每个组件多个样式表。然而，绝大多数情况下，当我想要设置组件的样式时，我会创建一个数组，其中包含指向内联样式或引用外部样式表的单个元素。一项新功能使你你可以切换</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>Component</span><span>({</span><span>styles</span><span>:</span><span>[</span><span style="color:#d95350">`
</span><span style="color:#d95350">    ...
</span><span style="color:#d95350">  `</span><span>]</span><span>})</span><span>...</span><span style="color:#d95350">@</span><span>Component</span><span>({</span><span>styleUrls</span><span>:</span><span>[</span><span style="color:#d95350">'styles.css'</span><span>]</span><span>})...</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">到更简单、更符合逻辑：</p><div><pre><code class="language-js"><span style="color:#d95350">@</span><span>Component</span><span>({</span><span>styles</span><span>:</span><span style="color:#d95350">`
</span><span style="color:#d95350">    ...
</span><span style="color:#d95350">  `</span><span>})</span><span>...</span><span style="color:#d95350">@</span><span>Component</span><span>({</span><span>styleUrl</span><span>:</span><span style="color:#d95350">'styles.css'</span><span>})</span><span>...</span></code></pre></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">当你使用数组时，我们仍然支持多个样式表。这更简单，更直观，并且与自动格式化工具配合使用效果更好。</p><h2>社区原理图 Schematics</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">为了支持社区原理图的开发，我们提供了一些实用方法作为<span>&nbsp;</span><code>@schematics/angular/utility</code><span>&nbsp;</span>的一部分。现在，你可以将表达式直接导入到 Angular 应用程序的根目录中，并将提供程序添加到 Angular 应用程序的根目录中，以及向<span>&nbsp;</span><code>package.json</code><span>&nbsp;</span>添加依赖项的现有功能。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">你可以在<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fangular.io%2Fguide%2Fschematics-for-libraries" target="_blank">文档中的原理图指南</a>中了解更多信息。</p><h2>Angular 开发者培训</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">我们与交互式 EdTech 平台 SoloLearn 合作，基于我们最近开发的「<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fwww.youtube.com%2Fwatch%253Fv%253DxAT0lHYhHMY%2526list%253DPL1w1q3fL4pmj9k1FrJ3Pe91EPub2_h4jF" target="_blank">Angular 介绍</a>」课程开发了新的 Angular 培训。他们创建了一个互动学习之旅，在过去两个月内覆盖了超过 7 万人！</p><div><img alt="" height="405" src="https://img2023.cnblogs.com/blog/999445/202312/999445-20231225183954852-1286944851.webp" width="720" referrerpolicy="no-referrer"></div><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">请在我们<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fblog.angular.io%2Fnew-free-interactive-angular-course-for-beginners-on-sololearn-7a4c4f91810a" target="_blank">最近的公告中</a>了解更多信息。</p><h2>社区亮点</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start"><strong>我们要感谢 346 位贡献者，是他们让 Angular v17 变得如此特别！</strong>我们想列出的一些亮点：</p><ul><li><code>HttpClient</code><span>&nbsp;</span>now can<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F50247" target="_blank">use fetch as a backend</a><span>&nbsp;</span>which is one of the features enabling Angular to run in an edge worker. We’d like to thank to<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2FJeanMeche" target="_blank">Matthieu Riegler</a><span>&nbsp;</span>for the help<br><code>HttpClient</code><span>&nbsp;</span>现在可以<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F50247" target="_blank">使用 fetch 作为后端</a>，这是使 Angular 能够在 edge 工作线程中运行的功能之一。我们要感谢 Matthieu Riegler 的帮助</li><li>Matthieu 还启用了<span>&nbsp;</span><code>HttpTransferCache</code><span>&nbsp;</span>的<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fangular%2Fangular%2Fpull%2F52029" target="_blank">自定义</a>，它允许为 post 请求指定标头、过滤器和缓存</li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fcexbrayat" target="_blank">Cédric Exbrayat</a><span>&nbsp;</span>在新的应用程序构建器中引入了对<span>&nbsp;</span><code>namedChunks</code><span>&nbsp;</span>的<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fangular%2Fangular-cli%2Fpull%2F25913" target="_blank">支持</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Ftomalaforge" target="_blank">Thomas Laforge</a><span>&nbsp;</span>的<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fangular-challenges.vercel.app%2F" target="_blank">Angular Challenges</a><span>&nbsp;</span>是一个优秀的资源，一直在帮助 Angular 开发人员更上一层楼</li><li>AnalogJS 一直在稳步发展并接近 1.0。祝贺<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fbrandonroberts" target="_blank">Brandon Roberts</a><span>&nbsp;</span>所做的出色工作！</li><li>祝贺<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2Fsantoshyadavdev" target="_blank">Santosh Yadav</a><span>&nbsp;</span>的<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fwww.youtube.com%2Fwatch%253Fv%253D3qBXWUpoPHo" target="_blank"><span>&nbsp;</span>Angular 初学者课程</a>浏览量达到 100 万次</li></ul><h2>用 Angular 构建未来</h2><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在过去的六个月里，我们一直在继续 Angular 的复兴，发布了一些功能，以提供更好的开发体验和性能。今天，我们很高兴在 Angular 的全新品牌和<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttp%253A%2F%2Fangular.dev%2F" target="_blank">angular.dev</a>.学习体验中体现出这一势头。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">在下一个发布周期中，预计 Angular 基于信号的响应式、Hybrid 渲染和学习之旅将发生大量演变。</p><p style="color:#191b1f; margin-left:0; margin-right:0; text-align:start">我们很荣幸能够成为你使用 Angular 构建未来的旅程的一部分！谢谢你！</p></div>
                                    ]]>
            </description>
            <pubDate>Mon, 25 Dec 2023 10:40:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272640/angular-17-released</guid>
            <link>https://www.oschina.net/news/272640/angular-17-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[开源 AI 聊天、绘图软件 AIdea 1.0.10 支持 Gemini、GPT-4V 等]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>AIdea 最新版本的 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fmylxsw%2Faidea%2Freleases%2Ftag%2F1.0.10" target="_blank">1.0.10</a> 发布啦，大家快来体验体验！</p><blockquote><p>如果你还不知道这款 APP，那么可以简单看看这篇文章 <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzA3NTU1NDk4Mg%3D%3D%26mid%3D2454663369%26idx%3D1%26sn%3Dfc5ae7e09e5da885fecbe90747900bc9%26chksm%3D88d55900bfa2d016578008ec30550acbab49cf9ed5cd0b454c3ce8d308ff7cc1ab9416637f19%23rd" target="_blank">花了小半年开发了一个 AI 套壳 APP，然而大势已过，直接开源了</a>。</p></blockquote><p>下载体验地址：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Faidea.aicode.cc" target="_blank">https://aidea.aicode.cc</a> 。</p><p><img alt="" src="https://ssl.aicode.cc/mweb/20231225/17034940908941.jpg" referrerpolicy="no-referrer"></p><p>本次更新内容如下</p><ul><li>新增了几个视觉模型的支持 
  <ul><li>GPT-4V</li><li>Google Gemini Pro Vision</li><li>通义千问 VL</li></ul></li><li>新增了几个大模型 
  <ul><li>Google Gemini Pro</li><li>通义千问 Max</li><li>天工 MegaVerse</li><li>零一万物的 Yi 34B</li></ul></li><li>创作岛增加艺术字、艺术二维码生成</li><li>群聊默认由所有成员同时回答（之前是随机选择一个）</li><li>朗读采用 OpenAI 的 TSS 模型输出（目前响应速度很慢）</li></ul><p>AIdea 是一款集成了主流大语言模型以及绘图模型的 APP，采用 Flutter + Golang 开发，代码完全开源，目前已经支持以下大语言模型</p><p><img alt="" src="https://ssl.aicode.cc/mweb/20231225/17034908007422.jpg" referrerpolicy="no-referrer"></p><p>整体技术栈如下图</p><p><img alt="" src="https://ssl.aicode.cc/mweb/20231225/17034970421740.jpg" referrerpolicy="no-referrer"></p><p>如果你对 AIdea 项目感兴趣，以下是 Github 地址，赶紧去 Star 一下吧！</p><ul><li>客户端（ Flutter ）： <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fmylxsw%2Faidea" target="_blank">https://github.com/mylxsw/aidea</a></li><li>服务端（ Golang ）： <a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fmylxsw%2Faidea-server" target="_blank">https://github.com/mylxsw/aidea-server</a></li><li>Docker 一键部署安装包：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fmylxsw%2Faidea-docker" target="_blank">https://github.com/mylxsw/aidea-docker</a></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Mon, 25 Dec 2023 09:58:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272634/aidea-1-0-10-released</guid>
            <link>https://www.oschina.net/news/272634/aidea-1-0-10-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Ruby 3.3.0 正式发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="color:#000000">Ruby 3.3.0 现已正式<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.ruby-lang.org%2Fen%2Fnews%2F2023%2F12%2F25%2Fruby-3-3-0-released%2F" target="_blank">发布</a>。新版本<span style="background-color:#ffffff">添加了一个名为 Prism 的新解析器，使用 Lrama 作为解析器生成器，添加了一个名为 RJIT 的新纯 Ruby JIT 编译器，以及许多性能改进，尤其是 YJIT。</span></span></p><p><span style="background-color:#ffffff; color:#333333">具体更新内容如下：</span></p><h4 style="margin-left:0px; margin-right:0px; text-align:left"><strong><span style="color:#000000"><span style="background-color:#ffffff">Prism</span></span></strong></h4><ul style="margin-left:0; margin-right:0"><li>引入&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fruby%2Fprism" target="_blank">Prism 解析器</a>作为默认 gem 
  <ul style="margin-left:0; margin-right:0"><li>Prism 是一个可移植、容错且可维护的 Ruby 语言递归下降解析器</li></ul></li><li>Prism 已做好生产准备并积极维护，用户可以使用它代替 Ripper 
  <ul style="margin-left:0; margin-right:0"><li>具体介绍可查看&nbsp;Prism 的<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fruby.github.io%2Fprism%2F" target="_blank">文档</a>。</li><li>Prism 既是一个由 CRuby 内部使用的 C 库，又是一个可供任何需要解析 Ruby 代码的工具使用的 Ruby gem</li><li>Prism API 中值得注意的方法有： 
    <ul style="margin-left:0; margin-right:0"><li><code class="language-plaintext">Prism.parse(source)</code>返回 AST 作为解析结果对象的一部分</li><li><code class="language-plaintext">Prism.parse_comments(source)</code>返回&nbsp;comments</li><li><code class="language-plaintext">Prism.parse_success?(source)</code>如果没有错误，则返回 true</li></ul></li></ul></li><li>现在可以使用<code class="language-plaintext">ruby --parser=prism</code>或<code class="language-plaintext">RUBYOPT="--parser=prism"</code>尝试使用&nbsp; Prism 编译器。值得注意的是，该 flag 仅用于调试。</li></ul><h4 style="margin-left:0px; margin-right:0px; text-align:left"><strong><span style="color:#000000"><span style="background-color:#ffffff">使用 Lrama 代替 Bison</span></span></strong></h4><ul style="margin-left:0; margin-right:0"><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fruby%2Flrama" target="_blank">用 Lrama LALR 解析器生成器</a>替换 Bison&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fbugs.ruby-lang.org%2Fissues%2F19637" target="_blank">[Feature #19637]</a><ul style="margin-left:0; margin-right:0"><li>更多详情可参阅<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Frubykaigi.org%2F2023%2Fpresentations%2Fspikeolaf.html" target="_blank">Ruby Parser 的未来愿景</a></li><li>为了便于维护，Lrama 内部解析器被替换为 Racc 生成的 LR 解析器</li><li>支持参数化规则<code class="language-plaintext">(?, *, +)</code>，将在 Ruby parse.y 中使用</li></ul></li></ul><h4 style="margin-left:0px; margin-right:0px; text-align:left"><span style="color:#000000"><strong><span style="background-color:#ffffff">YJIT</span></strong></span></h4><ul style="margin-left:0; margin-right:0"><li>相对 Ruby 3.2 的主要性能改进 
  <ul style="margin-left:0; margin-right:0"><li>对 splat 和 rest 参数的支持已得到改进。</li><li>为虚拟机的堆栈操作分配了寄存器。</li><li>编译更多带有可选参数的调用。异常处理程序也被编译。</li><li>不支持的调用类型和<span style="background-color:#ffffff; color:#333333">复态调用点</span>不再退出到解释器。</li><li>Rails <code class="language-plaintext">#blank?</code>和 specialized<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Frails%2Frails%2Fpull%2F49909" target="_blank"><code class="language-plaintext">#present?</code></a>等基本方法都是内联的。</li><li>对<code class="language-plaintext">Integer#*</code>、<code class="language-plaintext">Integer#!=</code>、<code class="language-plaintext">String#!=</code>、<code class="language-plaintext">String#getbyte</code>、&nbsp;<code class="language-plaintext">Kernel#block_given?</code>、<code class="language-plaintext">Kernel#is_a?</code>、<code class="language-plaintext">Kernel#instance_of?</code>和<code class="language-plaintext">Module#===</code>进行了特别优化。</li><li>编译速度现在比 Ruby 3.2 稍快。</li><li>现在比 Optcarrot 上的解释器快 3 倍以上</li></ul></li><li>与 Ruby 3.2 相比显着提高了内存使用率 
  <ul style="margin-left:0; margin-right:0"><li>编译代码的元数据占用内存更少。</li><li>当应用程序的 ISEQ 超过 40,000 个时，<code class="language-plaintext">--yjit-call-threshold</code>会自动从 30 提高到 120。</li><li>添加<code class="language-plaintext">--yjit-cold-threshold</code>以跳过编译 cold&nbsp;ISEQ。</li><li>在 Arm64 上生成更紧凑的代码。</li></ul></li><li>Code GC 现在默认禁用 
  <ul style="margin-left:0; margin-right:0"><li><code class="language-plaintext">--yjit-exec-mem-size</code>被视为新代码编译停止的硬限制。</li><li>不会因 Code GC&nbsp;导致性能突然下降。<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fshopify%2Fpitchfork" target="_blank">使用 Pitchfork</a>&nbsp;重新分叉的服务器上有更好的 copy-on-write&nbsp;行为&nbsp;。</li><li>如果需要，仍然可以使用<code class="language-plaintext">--yjit-code-gc</code>启用&nbsp;code GC</li></ul></li><li>添加<code class="language-plaintext">RubyVM::YJIT.enable</code>以便在运行时启用 YJIT 
  <ul style="margin-left:0; margin-right:0"><li>无需修改​​命令行参数或环境变量即可启动 YJIT。Rails 7.2 将使用此方法<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Frails%2Frails%2Fpull%2F49947" target="_blank">默认启用 YJIT</a>&nbsp;。</li><li>这也可用于仅在应用程序完成启动后启用 YJIT。如果想在启动时禁用 YJIT 的同时使用其他 YJIT 选项，可以使用<code class="language-plaintext">--yjit-disable</code>。</li></ul></li><li>默认情况下提供更多 YJIT stats 
  <ul style="margin-left:0; margin-right:0"><li>现在默认情况下还提供了<code class="language-plaintext">yjit_alloc_size</code>和更多与元数据相关的统计信息。</li><li>由<code class="language-plaintext">--yjit-stats</code>生成的 <code class="language-plaintext">ratio_in_yjit</code>stat 现在可在发行版中使用，不再需要特殊的 stats 或 dev 版本才能访问大多数统计信息。</li></ul></li><li>添加更多 profiling 功能 
  <ul style="margin-left:0; margin-right:0"><li>添加<code class="language-plaintext">--yjit-perf</code>以方便使用 Linux perf 进行分析。</li><li><code class="language-plaintext">--yjit-trace-exits</code>现在支持使用<code class="language-plaintext">--yjit-trace-exits-sample-rate=N</code>进行采样</li></ul></li><li>更全面的测试和多个错误修复</li></ul><h4 style="margin-left:0px; margin-right:0px; text-align:left"><strong><span style="color:#000000"><span style="background-color:#ffffff">RJIT</span></span></strong></h4><ul style="margin-left:0; margin-right:0"><li>引入了纯 Ruby JIT 编译器 RJIT 并取代了 MJIT。 
  <ul style="margin-left:0; margin-right:0"><li>RJIT 仅支持 Unix 平台上的 x86-64 架构。</li><li>与 MJIT 不同，它在运行时不需要 C 编译器。</li></ul></li><li>RJIT 的存在仅用于实验目的。 
  <ul style="margin-left:0; margin-right:0"><li>建议用户在生产环境中继续使用 YJIT。</li></ul></li><li>如果对为开发 JIT for Ruby 感兴趣，可查看&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Frubykaigi.org%2F2023%2Fpresentations%2Fk0kubun.html%23day3" target="_blank">k0kubun 在 RubyKaigi 第 3 天的演示</a>。</li></ul><h4 style="margin-left:0px; margin-right:0px; text-align:left"><span style="color:#000000"><strong><span style="background-color:#ffffff">M:N 线程调度器</span></strong></span></h4><ul style="margin-left:0; margin-right:0"><li>引入了 M:N 线程调度程序。<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fbugs.ruby-lang.org%2Fissues%2F19842" target="_blank">[Feature#19842]</a><ul style="margin-left:0; margin-right:0"><li>M 个 Ruby 线程由 N 个本机线程（操作系统线程）管理，因此减少了线程创建和管理成本。</li><li>它可能会破坏 C 扩展兼容性，因此默认情况下会在主 Ractor 上禁用 M:N 线程调度程序。 
    <ul style="margin-left:0; margin-right:0"><li><code class="language-plaintext">RUBY_MN_THREADS=1</code>环境变量可在主 Ractor 上启用 M:N 线程。</li><li>M:N 线程始终在非主 Ractor 上启用。</li></ul></li><li><code class="language-plaintext">RUBY_MAX_CPU=n</code>环境变量用于设置<code class="language-plaintext">N</code>（本地线程的最大数量）的最大值。默认值为 8。 
    <ul style="margin-left:0; margin-right:0"><li>由于每个 Ractor 只能同时运行一个 Ruby 线程，因此将使用的本地线程数是<code class="language-plaintext">RUBY_MAX_CPU</code>中指定的线程数和正在运行的 Ractor 数量中较小的一个。因此，单 Ractor 应用程序（大多数应用程序）将只使用 1 个本地线程。</li><li>为了支持阻塞操作，可以使用<code class="language-plaintext">N</code>个以上的本地线程。</li></ul></li></ul></li></ul><p>更多详情可<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.ruby-lang.org%2Fen%2Fnews%2F2023%2F12%2F25%2Fruby-3-3-0-released%2F" target="_blank">查看官方公告</a>。</p></div>
                                    ]]>
            </description>
            <pubDate>Mon, 25 Dec 2023 08:34:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/272610/ruby-3-3-0-released</guid>
            <link>https://www.oschina.net/news/272610/ruby-3-3-0-released</link>
            <author>
                <![CDATA[来源: OSCHINA]]>
            </author>
        </item>
    </channel>
</rss>
