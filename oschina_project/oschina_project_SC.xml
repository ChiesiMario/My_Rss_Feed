<?xml version="1.0" encoding="UTF-8"?>
<rss
    xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"


>
    <channel>
        <title>
            <![CDATA[开源中国-软件更新资讯]]>
        </title>
        <link>https://www.oschina.net/news/project</link>
        <atom:link href="https://rsshub.app/oschina/news/project" rel="self" type="application/rss+xml" />
        <description>
            <![CDATA[开源中国-软件更新资讯 - Made with love by RSSHub(https://github.com/DIYgod/RSSHub)]]>
        </description>
        <generator>RSSHub</generator>
        <webMaster>i@diygod.me (DIYgod)</webMaster>
        <language>zh-cn</language>
        <lastBuildDate>Fri, 05 Jan 2024 08:29:46 GMT</lastBuildDate>
        <ttl>120</ttl>
        <item>
            <title>
                <![CDATA[Calibre 7.3 发布，功能强大的开源电子书工具]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>Calibre 开源项目是 Calibre 官方出的电子书管理工具。它可以查看，转换，编辑和分类所有主流格式的电子书。Calibre 是个跨平台软件，可以在 Linux、Windows 和 macOS 上运行。</p><p>Calibre 7.3 现已正式发布，此次更新内容如下：</p><p><strong>New features</strong></p><ul><li>Tag browser：允许在带有注释或链接的项目旁边显示按钮，以便于访问。通过 Preferences-&gt;Look &amp; feel-&gt;Tag browser&nbsp;启用。</li><li>Font subsetting：保留所有 OpenType 布局功能。这使得子集字体文件更大，但确保在不同上下文中使用子集字体文件时不会出现视觉效果下降。</li></ul><p><strong>Bug 修复</strong></p><ul><li><p>macOS：修复 Calibre 主窗口在重启时无法记忆其大小的问题</p></li><li><p>Edit book：修复「Show changes」窗口每次打开时向下移动几个像素的问题</p></li><li><p>Amazon metadata download：修复了亚马逊网站标记的各种更改</p></li><li><p>E-book viewer：在欧洲通过 Google 查找单词时预先批准 GDPR 同意 cookie</p></li><li><p>Windows：Content server：修复先前版本中破坏本地连接测试的回归</p></li><li><p>Windows：修复导致图书详细信息面板中的选择不可见的回归</p></li></ul><p>更新说明：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fcalibre-ebook.com%2Fwhats-new" target="_blank">https://calibre-ebook.com/whats-new</a></p></div>
                                    ]]>
            </description>
            <pubDate>Fri, 05 Jan 2024 06:12:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274320/calibre-7-3-released</guid>
            <link>https://www.oschina.net/news/274320/calibre-7-3-released</link>
            <author>
                <![CDATA[来源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[mybatis-mp - 亮点五：mapWithKey（把查询转成一个 map）]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>有很多开发者不想使用 join 连表，通过 for 循环去加载数据；于是 mybatis-mp 作者给大家开发一个 mapWithKey 方法；mapWithKey</p><p>方法的作用是，开发自己指定一个 key，然后通过此方法，可以把查询转成一个 map；这样 for 循环时，可以很容易就把数据装载到 list 里 item 对象里</p><p>例如：</p><blockquote><p>1：List&lt;SysUser&gt; voList=sysUserMapper.list(where-&gt;where.like(SysUser::getName,'xx'););</p></blockquote><blockquote><p>2:&nbsp; &nbsp;List&lt;Integer&gt; roleIds=voList.map(sysUser-&gt;sysUser::getRoleId).toList();</p></blockquote><blockquote><p>3:&nbsp; &nbsp;Map&lt;Integer, SysRole&gt; rolesMap= sysRoleMapper.mapWithKey(SysRole::getId, roleIds);</p></blockquote><blockquote><p>4:&nbsp; &nbsp;voList.foreach(item-&gt;item.setSysRole(rolesMap.get(item.getRoleId()));</p></blockquote><p>这样就可以在用户信息里 ，装载角色的信息；是不是很方便 ？！</p></div>
                                    ]]>
            </description>
            <pubDate>Fri, 05 Jan 2024 05:53:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274317</guid>
            <link>https://www.oschina.net/news/274317</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[信创就用国产的生态，Solon v2.6.4 发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><h2>Solon 是什么框架？</h2><p style="color:#24292e; text-align:start"><strong>Java 新的"生态级"应用开发框架</strong>。从零开始构建，有自己的标准规范与开放生态（历时六年，具备全球第二级别的生态规模）。</p><h2>相对于 Spring，有什么特点？</h2><ul><li>国产！国产！国产！</li><li>启动快 5 ～ 10 倍。<span>&nbsp;</span><strong>（更快）</strong></li><li>qps 高 2～ 3 倍。<span>&nbsp;</span><strong>（更高）</strong></li><li>低流量内存节省 1/3 ~ 1/2。<span>&nbsp;</span><strong>（更少）</strong></li><li>打包可以缩小到 1/2 ~ 1/10；比如，300Mb 的变成了 23Mb。<span>&nbsp;</span><strong>（更小）</strong></li><li>同时支持 jdk8, jdk11, jdk17, jdk21,<span>&nbsp;</span><strong>graalvm native image</strong></li></ul><h2>入门探索视频（用户录制）：</h2><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><iframe frameborder="0" height="400" scrolling="no" src="https://player.bilibili.com/player.html?aid=938467339&amp;bvid=BV1RT4y1a7U5&amp;cid=583394292&amp;page=1" style="box-sizing: border-box; color: rgb(36, 41, 46); font-family: -apple-system, &quot;system-ui&quot;, &quot;Segoe UI&quot;, Helvetica, Arial, sans-serif, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; white-space: normal; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;" width="700" referrerpolicy="no-referrer"></iframe></p><h2>最近更新了什么？</h2><ul><li>新增 graphql-solon-plugin 插件（欢迎试用）</li><li>修复 @Header 与 @Body 同时注入时，@Header 会失效的问题</li><li>修复 LocalCacheService 时间过大时会超界的问题</li><li>添加 local-solon-cloud-plugin 对描述信息的获取</li><li>fastjson2 升为 2.0.44</li><li>log4j 升为 2.22.1</li><li>logback 升为 1.3.14</li><li>sqltoy 升为 5.2.88</li><li>mybatis-flex 升为 1.7.6</li><li>beetlsql 升为 3.27.4-RELEASE</li><li>fastmybatis 升为 2.10.0</li><li>socket.d 升为 2.2.2</li><li>folkmq 升为 1.0.26</li></ul><h2>项目仓库地址？</h2><ul><li>gitee：<a href="https://gitee.com/noear/solon">https://gitee.com/noear/solon</a></li><li>github：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fnoear%2Fsolon" target="_blank">https://github.com/noear/solon</a></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Fri, 05 Jan 2024 05:34:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274315/solon-2-6-4-released</guid>
            <link>https://www.oschina.net/news/274315/solon-2-6-4-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[基于 mybatis 的 orm：mybatis-mp 1.3.2 发布 - 超丰富的 api！]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">mybatis-mp 包含丰富的 api：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">1：基于注解，映射数据库；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">2：支持多表 join 和返回；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">3：api 采用 lambda 和 stream 流式设计；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">4：内置分页以及超强的 sql 优化功能；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">5：稳定且性能极优；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">6：轻量级封装 mybatis，几乎没有侵入；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">7：api 丰富，支持数据库函数、多表、乐观锁、多租户、逻辑删除、默认值（可动态值） 等众多功能；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">8：零学习成本，和写 sql 一样方便。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">9：支持复杂的返回关系映射：例如一对一 ，一对多，多对多；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">10：支持自定义 sql 模板，再也不用担心框架支持不足；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">11：内置代码生成器，通过配置，可定制自身规范；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">12：全新的框架，全新的设计理念，新的就是好！</p></div>
                                    ]]>
            </description>
            <pubDate>Fri, 05 Jan 2024 01:45:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274269/mybatis-mp-1-3-2-released</guid>
            <link>https://www.oschina.net/news/274269/mybatis-mp-1-3-2-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[MyBatis-Flex v1.7.7 发布，一个优雅的 MyBatis 增强框架]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:center"><img alt="" height="265" src="https://oscimg.oschina.net/oscnet/up-0d6ec96d8070deb116566704fcc7bfd1291.png" width="500" referrerpolicy="no-referrer"></p><h1>MyBatis-Flex： 一个优雅的 MyBatis 增强框架</h1><h1>特征</h1><h4>1、很轻量</h4><blockquote><p style="margin-left:0; margin-right:0">MyBatis-Flex 整个框架只依赖 MyBatis，再无其他任何第三方依赖。</p></blockquote><h4>2、只增强</h4><blockquote><p style="margin-left:0; margin-right:0">MyBatis-Flex 支持 CRUD、分页查询、多表查询、批量操作，但不丢失 MyBatis 原有的任何功能。</p></blockquote><h4>3、高性能</h4><blockquote><p style="margin-left:0; margin-right:0">MyBatis-Flex 采用独特的技术架构、相比许多同类框架，MyBatis-Flex 的在增删改查等方面的性能均超越其 5~10 倍或以上。</p></blockquote><h4>4、更灵动</h4><blockquote><p style="margin-left:0; margin-right:0">MyBatis-Flex 支持多主键、多表查询、逻辑删除、乐观锁、数据脱敏、数据加密、多数据源、分库分表、字段权限、 字段加密、多租户、事务管理、SQL 审计... 等等等等。 这一切，免费且灵动。</p></blockquote><p style="margin-left:0px; margin-right:0px; text-align:left">&nbsp;</p><p style="margin-left:0px; margin-right:0px; text-align:left"><strong>MyBatis-Flex 2024 的第一个版本，不知不觉，MyBatis-Flex 已经发布了 177 个版本，120+ 位小伙伴参与贡献，感谢大家的付出，才能让 MyBatis-FLex 茁壮成长。</strong></p><p style="margin-left:0px; margin-right:0px; text-align:left">&nbsp;</p><h4><strong>MyBatis-Flex v.1.7.7 更新细节如下：</strong></h4><div><ul><li>新增：添加 spring-boot3 新模块，用于 springboot v3 下使用，感谢<span>&nbsp;</span><a href="https://gitee.com/Suomm" target="_blank">@王帅</a></li><li>新增：QueryMethods 添加 NOT (column) 函数，感谢<span>&nbsp;</span><a href="https://gitee.com/wittplus" target="_blank">@witt</a></li><li>优化：更新 Solon 下的 @ProxyComponent 为 @Component，感谢<span>&nbsp;</span><a href="https://gitee.com/citysoft" target="_blank">@Lionel</a></li><li>优化：修改 com.mybatisflex.annotation.SetListener 的注释错误，感谢<span>&nbsp;</span><a href="https://gitee.com/whzzone" target="_blank">@weihuazhou</a></li><li>优化：修改 GBase_8s 数据库类型 sql 语句无反义处理</li><li>优化：升级 MyBatis 到 3.5.15 最新版本<span>&nbsp;</span><a href="https://gitee.com/mybatis-flex/mybatis-flex/issues/I8PQLC">#I8PQLC:[Bug]: mybatis 3.5.15 出错</a></li><li>修复：IService.getOne 没有添加 limit 1 的问题</li><li>修复：Db.updateEntitiesBatch 更新部分字段时报错的问题，感谢<span>&nbsp;</span><a href="https://gitee.com/codetangxin" target="_blank">@tangxin</a></li><li>文档：更新在 Kotlin 下使用的相关文档，感谢<span>&nbsp;</span><a href="https://gitee.com/kamo-sama" target="_blank">@卡莫 sama</a></li><li>文档：优化示例代码提交语言标识，感谢<span>&nbsp;</span><a href="https://gitee.com/bf109f" target="_blank">@bf109f</a></li><li>文档：更新存在一个为 is_deleted 的字段中拼写错误，感谢<span>&nbsp;</span><a href="https://gitee.com/shuangtao" target="_blank">@涛声依旧</a></li></ul><p style="margin-left:0; margin-right:0">&nbsp;</p><p style="margin-left:0; margin-right:0">代码贡献者，请参考：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fintro%2Fwhat-is-mybatisflex.html%23%25E8%25B4%25A1%25E7%258C%25AE%25E8%2580%2585" target="_blank">https://mybatis-flex.com/zh/intro/what-is-mybatisflex.html#%E8%B4%A1%E7%8C%AE%E8%80%85</a></p><p style="margin-left:0; margin-right:0">&nbsp;</p></div><h4><strong>进一步了解 MyBatis-Flex 框架，请参考一下链接：</strong></h4><ul><li>1、快速开始：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fintro%2Fgetting-started.html" target="_blank">https://mybatis-flex.com/zh/intro/getting-started.html</a></li><li>2、多表关联查询：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fbase%2Fquery.html%23%25E5%2585%25B3%25E8%2581%2594%25E6%259F%25A5%25E8%25AF%25A2-%25E6%2588%2596%25E5%25A4%259A%25E8%25A1%25A8%25E6%259F%25A5%25E8%25AF%25A2" target="_blank">https://mybatis-flex.com/zh/base/query.html</a></li><li>3、一对多、多对一：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fbase%2Frelations-query.html" target="_blank">https://mybatis-flex.com/zh/base/relations-query.html</a></li><li>4、灵活的 QueryWrapper：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fbase%2Fquerywrapper.html" target="_blank">https://mybatis-flex.com/zh/base/querywrapper.html</a></li><li>5、逻辑删除：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Flogic-delete.html" target="_blank">https://mybatis-flex.com/zh/core/logic-delete.html</a></li><li>6、乐观锁：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fversion.html" target="_blank">https://mybatis-flex.com/zh/core/version.html</a></li><li>7、数据填充：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Ffill.html" target="_blank">https://mybatis-flex.com/zh/core/fill.html</a></li><li>6、数据脱敏：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fmask.html" target="_blank">https://mybatis-flex.com/zh/core/mask.html</a></li><li>7、SQL 审计：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Faudit.html" target="_blank">https://mybatis-flex.com/zh/core/audit.html</a></li><li>8、多数据源：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fmulti-datasource.html" target="_blank">https://mybatis-flex.com/zh/core/multi-datasource.htm</a></li><li>9、数据源加密：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fdatasource-encryption.html" target="_blank">https://mybatis-flex.com/zh/core/datasource-encryption.html</a></li><li>10、动态表名：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fdynamic-table.html" target="_blank">https://mybatis-flex.com/zh/core/dynamic-table.html</a></li><li>11、事务管理：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Ftx.html" target="_blank">https://mybatis-flex.com/zh/core/tx.html</a></li><li>12、数据权限：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fdata-permission.html" target="_blank">https://mybatis-flex.com/zh/core/data-permission.html</a></li><li>13、字段权限：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fcolumns-permission.html" target="_blank">https://mybatis-flex.com/zh/core/columns-permission.html</a></li><li>14、字段加密：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fcolumns-encrypt.html" target="_blank">https://mybatis-flex.com/zh/core/columns-encrypt.html</a></li><li>15、字典回写：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fcolumns-dict.html" target="_blank">https://mybatis-flex.com/zh/core/columns-dict.html</a></li><li>16、枚举属性：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fenum-property.html" target="_blank">https://mybatis-flex.com/zh/core/enum-property.html</a></li><li>17、多租户：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fcore%2Fmulti-tenancy.html" target="_blank">https://mybatis-flex.com/zh/core/multi-tenancy.html</a></li><li>18、代码生成器：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fothers%2Fcodegen.html" target="_blank">https://mybatis-flex.com/zh/others/codegen.html</a></li><li>19、QQ 交流群：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com%2Fzh%2Fintro%2Fqq-group.html" target="_blank">https://mybatis-flex.com/zh/intro/qq-group.html</a></li><li>20、更好用的功能正在路上：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fmybatis-flex.com" target="_blank">https://mybatis-flex.com</a></li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">&nbsp;</p><h4><strong>bilibili 视频教程（免费）：</strong></h4><p style="color:#3c3c43; margin-left:0; margin-right:0; text-align:start"><strong>课程 ：《MyBatis-Flex 视频教程》</strong></p><blockquote><p style="color:var(--vp-c-text-2); margin-left:0; margin-right:0">课程简介：该课程由<span>&nbsp;</span><a href="https://gitee.com/Suomm" target="_blank">王帅</a><span>&nbsp;</span>老师录制主讲，<span>&nbsp;</span><a href="https://gitee.com/Suomm" target="_blank">王帅</a><span>&nbsp;</span>老师也是除了作者以外，对 MyBatis-Flex 代码贡献最大的 committer。 其无论对 MyBatis 还是 MyBatis-Flex，都有非常深入的理解。</p></blockquote><p style="color:#3c3c43; margin-left:0; margin-right:0; text-align:start">课程地址：</p><p style="color:#3c3c43; margin-left:0; margin-right:0; text-align:start"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV11h411A7cU" target="_blank">https://www.bilibili.com/video/BV11h411A7cU</a></p></div>
                                    ]]>
            </description>
            <pubDate>Fri, 05 Jan 2024 01:11:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274262/mybatis-flex-1-7-7-released</guid>
            <link>https://www.oschina.net/news/274262/mybatis-flex-1-7-7-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[UJCMS 9.0.3 发布，国内开源 Java CMS]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#24292e; text-align:left">本次更新将许可协议改为<code>Apache-2.0</code>，方便需要做商业化的用户进行集成。</p><p style="color:#24292e; text-align:left">增加了数据库备份、上传备份、上传增量备份、一键格式化、工作量统计、绩效统计等功能。</p><h2>升级日志（9.0.3）</h2><ul><li>许可协议改为 Apache-2.0</li><li>新增 webp 图片格式支持</li><li>新增一键排版功能</li><li>新增重复标题检测</li><li>新增文章排序功能</li><li>新增数据库备份</li><li>新增上传备份</li><li>新增上传增量备份</li><li>新增模板备份功能</li><li>新增文章工作量统计</li><li>新增角色所有状态权限</li><li>新增绩效统计功能</li><li>新增留言类型管理功能</li><li>新增待办事宜功能</li><li>新增文章定时上下线功能</li><li>新增文章指定过期时间</li><li>新增限制储存点 file:开头的目录的功能</li><li>新增留言板和文章排行榜 API</li><li>新增站点列表 API 及标签</li><li>优化大数据量下栏目的性能</li><li>优化 pdf.js 性能</li></ul><h2>简介</h2><p style="color:#24292e; text-align:left">Java 开源内容管理系统 (java cms)。使用 SpringBoot、MyBatis、Spring Security、Lucene、FreeMarker、TypeScript、Vue3、ElementPlus 等技术开发。</p><p style="color:#24292e; text-align:left">技术上尽量选择主流、先进、简单的架构，方便用户进行二次开发。设计上强调「简单」、「灵活」，避免繁杂的设计和实现，降低系统维护成本和二次开发难度。功能使用上也要求「简单」，避免复杂的使用逻辑。</p><p style="color:#24292e; text-align:left">支持信创适配，支持国产服务器、国产操作系统、国产数据库、国产中间件。</p><ul><li>官网地址：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.ujcms.com%2F" target="_blank">https://www.ujcms.com</a></li><li>下载地址：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.ujcms.com%2Fdownload%2F" target="_blank">https://www.ujcms.com/download/</a><span>&nbsp;</span>提供安装包下载。</li><li>演示站前台：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdemo.ujcms.com%2F" target="_blank">https://demo.ujcms.com</a><span>&nbsp;</span>使用手机访问或者浏览器手机模式访问前台，会自动呈现手机页面。</li><li>演示站后台：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdemo.ujcms.com%2Fcp%2F" target="_blank">https://demo.ujcms.com/cp/</a><span>&nbsp;</span>演示用户登录后只拥有后台浏览功能，所有操作功能点击后都会显示无权访问（403）。如需进行操作测试，可以下载软件到本地安装。</li></ul><h2>技术及功能亮点</h2><p style="color:#24292e; text-align:left"><strong>自定义字段可查询</strong>：所有的自定义字段都可查询增强了系统的灵活性。</p><p style="color:#24292e; text-align:left"><strong>自定义字段可视化设计</strong>：自定义字段使用拖拽式的可视化设计，所见即所得。</p><p style="color:#24292e; text-align:left"><strong>URL 地址 SEO 优化</strong>：栏目和文章的动态地址可以通过系统的全局设置功能进行修改。默认的栏目和文章 URL 地址前缀为<code>/channel</code>和<code>/article</code>，可以根据自己的需要修改，如改为<code>/categories</code>和<code>/archives</code>。多站点的情况下，子站点 URL 地址可为目录形式 (<code>www.example.com/abc</code>) 或次级域名形式 (<code>abc.example.com</code>)。</p><p style="color:#24292e; text-align:left"><strong>清理垃圾附件</strong>：系统使用时，可能会多传、误传图片等附件；在删除文章后，文章中的图片还保留在系统中，产生大量的未使用的垃圾图片和附件。系统中的附件管理可以查看所有未使用的图片和附件，并可对其进行删除。</p><p style="color:#24292e; text-align:left"><strong>附件、模板、索引文件独立部署</strong>：系统运行时产生的文件可以和程序分开，部署到独立的目录，方便系统备份、升级和管理。比如上传的图片和附件、前台的模板、索引文件，都可以部署到程序以外的目录。</p><p style="color:#24292e; text-align:left"><strong>模板文件和 CSS、JS 在同一目录</strong>：模板文件和 CSS、JS 分开的目录结构，会给模板制作和部署带来很大的不便性。而将模板文件和 CSS、JS 放在一起的设计，会方便很多。</p><p style="color:#24292e; text-align:left"><strong>MyBatis 参数化查询</strong>：后台数据通常会需要通过不同字段进行搜索，对每个表都写大量的查询，无疑是一项繁重的工作。MyBatis 参数化查询功能通过前台传递查询参数，即可实现任意字段及关联表的查询功能（如：Q_title=abc，Q_user-username=test），无需后台编写代码，大幅减少后端的开发工作量。</p><p style="color:#24292e; text-align:left"><strong>主副表拆分</strong>：对查询量大的复杂表进行主副表拆分，把常用的查询字段放到主表，不常用的字段放到副表，提升大数据量下的性能表现。</p><h2>后端技术</h2><ul><li>SpringBoot：提供了对 Spring 开箱即用的功能。简化了 Spring 配置，提供自动配置 auto-configuration 功能。</li><li>SpringMVC：MVC 框架，使用方便，Bug 较少。</li><li>SpringSecurity：安全组件。</li><li>Mybatis：持久化框架。</li><li>FreeMarker：网站前台模板引擎。</li><li>Lucene：全文检索组件。</li><li>Liquibase：数据库跟踪、管理工具。</li></ul><h2>前端技术</h2><ul><li>Vue 3：JavaScript 框架。</li><li>ElementPlus 2：Vue 3 UI 框架。</li><li>Vite: 下一代前端开发与构建工具。</li><li>TypeScript: JavaScript 的一个超集。</li><li>TailwindCSS: 功能类优先的 CSS 框架。</li><li>Tinymce: 富文本编辑器。</li></ul><h2>功能列表</h2><ul><li>内容 
  <ul><li>文章管理</li><li>文章审核</li><li>栏目管理</li><li>区块管理</li><li>字典管理</li><li>TAG 管理</li><li>附件管理</li><li>生成管理</li></ul></li><li>互动 
  <ul><li>留言管理</li><li>投票管理</li><li>调查问卷</li></ul></li><li>文件 
  <ul><li>模板文件</li><li>上传文件</li><li>HTML 文件</li><li>模板备份</li><li>上传备份</li><li>上传增量备份</li><li>数据库备份</li></ul></li><li>配置 
  <ul><li>全局设置</li><li>站点设置</li><li>模型管理</li><li>区块设置</li><li>字典设置</li><li>绩效类型</li><li>留言类型</li></ul></li><li>统计 
  <ul><li>访问分析 
    <ul><li>访问趋势</li><li>受访页面</li><li>入口页面</li><li>访问来源</li></ul></li><li>访客分析 
    <ul><li>新老访客</li><li>地域分布</li><li>访客环境</li></ul></li><li>文章统计 
    <ul><li>按用户统计</li><li>按组织统计</li><li>按栏目统计</li></ul></li><li>绩效统计 
    <ul><li>用户绩效</li><li>组织绩效</li></ul></li></ul></li><li>用户 
  <ul><li>用户管理</li><li>角色管理</li><li>用户组管理</li><li>组织管理</li></ul></li><li>日志 
  <ul><li>短信日志</li><li>登录日志</li><li>操作日志</li></ul></li><li>系统 
  <ul><li>站点管理</li><li>流程模型</li><li>流程实例</li><li>历史流程</li><li>敏感词管理</li><li>易错词管理</li></ul></li></ul><h2>前台模板</h2><p><img alt="" height="1934" src="https://oscimg.oschina.net/oscnet/up-80a0ebd93df8b45fee97e5ee120780e5c78.jpg" width="1351" referrerpolicy="no-referrer"></p><h2>后台界面</h2><p style="color:#24292e; margin-left:0; margin-right:0; text-align:left"><img alt="" height="713" src="https://oscimg.oschina.net/oscnet/up-cfe14e42ecbeb17974c201494ee2c931758.jpg" width="1367" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Fri, 05 Jan 2024 01:02:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274258/ujcms-9-0-3-released</guid>
            <link>https://www.oschina.net/news/274258/ujcms-9-0-3-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[KCL 动态速递 | Crossplane 与 KCL 集成简化云资源配置与抽象]]>
            </title>
            <description>
                <![CDATA[<div class="content"><div><div><div><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fkcl-lang" target="_blank">KCL</a>&nbsp;是一个 CNCF 基金会托管的基于约束的记录及函数语言，期望通过成熟的编程语言技术和实践来改进对大量繁杂配置比如云原生 Kubernetes 配置场景的编写，致力于构建围绕配置的更好的模块化、扩展性和稳定性，更简单的逻辑编写，以及更简单的自动化和生态工具集成。</p><p>本栏目将会双周更新 KCL 语言社区最新动态，包括功能、官网更新和最新的社区动态等，帮助大家更好地了解 KCL 社区！</p><p><em><strong>KCL 官网：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252F" target="_blank">kcl-lang.io</a></strong></em></p><h2>内容概述<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%252586%252585%2525E5%2525AE%2525B9%2525E6%2525A6%252582%2525E8%2525BF%2525B0" target="_blank">​</a></h2><p>感谢所有贡献者过去两周 (2023 12.22 - 2024.01.04) 的杰出工作，以下是重点内容概述</p><p><strong>🔧 工具链更新</strong></p><ul><li><p><strong>包管理工具更新</strong></p><ul><li>支持带&nbsp;<code>-</code>&nbsp;符号的外部包自动转义为 KCL 可以识别的&nbsp;<code>_</code>&nbsp;符号如&nbsp;<code>set-annotation</code>&nbsp;-&gt;&nbsp;<code>set_annotation</code></li><li>修复&nbsp;<code>kcl mod add</code>&nbsp;在 Registry 包版本和本地已有包版本不同时引起的空指针错误</li></ul></li></ul><p><strong>💻 IDE 更新</strong></p><ul><li><p><strong>语义高亮</strong></p><ul><li>KCL IDE 目前支持语义级别的高亮，避免不同 IDE 插件高亮差异</li></ul></li><li><p><strong>补全功能增强</strong></p><ul><li>区分 Schema 类型和实例补全符号</li><li>统一 Schema 注释文档补全的格式</li><li>修复不同语法补全符号类型不统一的问题</li></ul></li></ul><h2>特别鸣谢<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E7%252589%2525B9%2525E5%252588%2525AB%2525E9%2525B8%2525A3%2525E8%2525B0%2525A2" target="_blank">​</a></h2><p>以下排名不分先后</p><ul><li>感谢 @FLAGLORD, @YiuTerran, @flyinox, @steeling, @Anoop, @Phillip Neumann 和 @Even Solberg 在使用 KCL 过程中的交流与宝贵反馈 🙌</li></ul><h2>精选更新<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E7%2525B2%2525BE%2525E9%252580%252589%2525E6%25259B%2525B4%2525E6%252596%2525B0" target="_blank">​</a></h2><h3>使用 KCL 编写 Crossplane 函数<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E4%2525BD%2525BF%2525E7%252594%2525A8-kcl-%2525E7%2525BC%252596%2525E5%252586%252599-crossplane-%2525E5%252587%2525BD%2525E6%252595%2525B0" target="_blank">​</a></h3><p>Crossplane 及其 Composite Function 功能被用于解耦 XR（CompositeResource）和复合资源定义。XR 允许开发者创建更高级别的抽象，这些抽象能够封装和组合来自不同提供商和服务的多种类型云资源。</p><p>使用 Crossplane 的 Composite Function 功能来渲染这些抽象能够有效增强各种提供商资源的模板能力，同时减少所需的 YAML 代码量。</p><p>将 KCL 与 Crossplane Composite Function 功能结合可以获得如下能力</p><ul><li><strong>简化复杂配置</strong>：KCL 作为 DSL 提供了更简洁的语法和结构，可以减少配置的复杂性。当与 Crossplane 的复合资源结合时，可以创建更直观、易于理解的配置模板，比如编写循环和条件语句降低模版，编写 Schema 和 Rule 进行模型抽象和校验，使用 KCL 简化资源的定义和维护，而不是编写重复的 YAML 或者使用 Go 代码编写并部署 Crossplane Function，降低配置和策略的开发及维护成本。此外，因为 Crosssplane Composition 资源本身缺乏强大的模版能力且云 API 丰富且复杂，因此有些 Composition 资源可能需要上千行 YAML 才能完成渲染资源编写，维护成本较高，使用 KCL 可以平替 YAML 提升动态配置能力。</li><li><strong>可重用和模块化</strong>：KCL 通过 OCI Registry 支持模块化和代码复用，这意味着可以创建可重用的配置模型，为 Crossplane Composition 资源带来模块化能力，且可同时在运行时和客户端使用，方便不同的平台团队之间进行协作。</li><li><strong>自动化和策略</strong>：可以使用 KCL 的强大功能来编写策略和约束，与 Crossplane 的声明式资源管理结合使用，并且在集群中自动执行，确保云资源或者 Kubernetes 资源的合规性，而无需引入额外的策略引擎。</li></ul><h4>前置工作<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%252589%25258D%2525E7%2525BD%2525AE%2525E5%2525B7%2525A5%2525E4%2525BD%25259C" target="_blank">​</a></h4><ul><li>准备一个 Kubernetes 集群</li><li>安装 Kubectl</li><li>安装&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fdocs.crossplane.io%252F" target="_blank">Crossplane 及 Crossplane CLI 1.14+</a></li><li>安装 KCL</li><li>安装 Go 1.21+ (可选，需要本地调试函数时才用到)</li></ul><h4>快速开始<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%2525BF%2525AB%2525E9%252580%25259F%2525E5%2525BC%252580%2525E5%2525A7%25258B" target="_blank">​</a></h4><p>我们编写一个&nbsp;<code>Network</code>&nbsp;抽象模型，并使用 KCL 代码对其进行渲染得到托管资源&nbsp;<code>VPC</code>&nbsp;和&nbsp;<code>InternetGateway</code></p><p>1. 安装 Crossplane KCL 函数<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25231-%2525E5%2525AE%252589%2525E8%2525A3%252585-crossplane-kcl-%2525E5%252587%2525BD%2525E6%252595%2525B0" target="_blank">​</a></p><p><code>Function</code>&nbsp;资源会创建一个函数 Pod，当您创建一个 Crossplane Composition Resource 时，Crossplane 会向这个 Pod 发送请求，询问它要创建什么资源。</p><p>通过设置&nbsp;<code>spec.package</code>&nbsp;值为&nbsp;<code>kcllang/crossplane-kcl</code>&nbsp;表示我们这里使用 KCL 函数</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>vbnet</span><div>
      复制代码
     </div></div></div><code class="language-vbnet"><span>kubectl apply -f- &lt;&lt; EOF</span><span><span>apiVersion:</span> pkg.crossplane.io/v1beta1</span><span><span>kind:</span><span>Function</span></span><span><span>metadata:</span></span><span> name: kcl-<span>function</span></span><span><span>spec:</span></span><span> package: kcllang/crossplane-kcl</span><span>EOF</span></code><p>2. 下发 Composition Resource<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25232-%2525E4%2525B8%25258B%2525E5%25258F%252591-composition-resource" target="_blank">​</a></p><p>就像渲染函数一样，在这里我们指定 KCL 如何接受输入&nbsp;<code>Network</code>&nbsp;资源并生成&nbsp;<code>VPC</code>&nbsp;资源和&nbsp;<code>InternetGateway</code>&nbsp;资源。KCL 函数可以引用自 OCI Registry 或者 GitHub 上面的代码，当然也可以直接书写在&nbsp;<code>Composition</code>&nbsp;资源中。</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>ini</span><div>
      复制代码
     </div></div></div><code class="language-ini"><span>kubectl apply -f- &lt;&lt; EOF</span><span>apiVersion: apiextensions.crossplane.io/v1</span><span>kind: Composition</span><span>metadata:</span><span> name: xlabels.fn-demo.crossplane.io</span><span> labels:</span><span> provider: aws</span><span>spec:</span><span> writeConnectionSecretsToNamespace: crossplane-system</span><span> compositeTypeRef:</span><span> apiVersion: fn-demo.crossplane.io/v1alpha1</span><span> kind: XNetwork</span><span> mode: Pipeline</span><span> pipeline:</span><span> - step: normal</span><span> functionRef:</span><span> name: kcl-function</span><span> input:</span><span> apiVersion: krm.kcl.dev/v1alpha1</span><span> kind: KCLRun</span><span> metadata:</span><span> name: basic</span><span> spec:</span><span><span># Generate new resources</span></span><span> target: Resources</span><span><span># OCI, Git or inline source</span></span><span><span># source: oci://ghcr.io/kcl-lang/crossplane-xnetwork-kcl-function</span></span><span><span># source: github.com/kcl-lang/modules/crossplane-xnetwork-kcl-function</span></span><span> source: |</span><span><span># Get the XR spec fields</span></span><span><span>id</span> = option(<span>"params"</span>)?.oxr?.spec.id or <span>""</span></span><span><span># Render XR to crossplane managed resources</span></span><span><span>network_id_labels</span> = {<span>"networks.meta.fn.crossplane.io/network-id"</span> = id} if id else {}</span><span><span>vpc</span> = {</span><span><span>apiVersion</span> = <span>"ec2.aws.upbound.io/v1beta1"</span></span><span><span>kind</span> = <span>"VPC"</span></span><span><span>metadata.name</span> = <span>"vpc"</span></span><span><span>metadata.labels</span> = network_id_labels</span><span><span>spec.forProvider</span> = {</span><span><span>region</span> = <span>"eu-west-1"</span></span><span><span>cidrBlock</span> = <span>"192.168.0.0/16"</span></span><span><span>enableDnsSupport</span> = <span>True</span></span><span><span>enableDnsHostnames</span> = <span>True</span></span><span> }</span><span> }</span><span><span>gateway</span> = {</span><span><span>apiVersion</span> = <span>"ec2.aws.upbound.io/v1beta1"</span></span><span><span>kind</span> = <span>"InternetGateway"</span></span><span><span>metadata.name</span> = <span>"gateway"</span></span><span><span>metadata.labels</span> = network_id_labels</span><span><span>spec.forProvider</span> = {</span><span><span>region</span> = <span>"eu-west-1"</span></span><span><span>vpcIdSelector.matchControllerRef</span> = <span>True</span></span><span> }</span><span> }</span><span><span>items</span> = [vpc, gateway]</span><span>EOF</span></code><p>3. 创建输入资源类型 (Crossplane XRD)<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25233-%2525E5%252588%25259B%2525E5%2525BB%2525BA%2525E8%2525BE%252593%2525E5%252585%2525A5%2525E8%2525B5%252584%2525E6%2525BA%252590%2525E7%2525B1%2525BB%2525E5%25259E%25258B-crossplane-xrd" target="_blank">​</a></p><p>我们使用 Crossplane XRD 为输入资源 Network 定义了一个 Schema，它有一个名为 id 的字段，表示网络 id。</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>yaml</span><div>
      复制代码
     </div></div></div><code class="language-yaml"><span><span>kubectl</span><span>apply</span><span>-f-</span><span>&lt;&lt;</span><span>EOF</span></span><span><span>apiVersion:</span><span>apiextensions.crossplane.io/v1</span></span><span><span>kind:</span><span>CompositeResourceDefinition</span></span><span><span>metadata:</span></span><span><span>name:</span><span>xnetworks.fn-demo.crossplane.io</span></span><span><span>spec:</span></span><span><span>group:</span><span>fn-demo.crossplane.io</span></span><span><span>names:</span></span><span><span>kind:</span><span>XNetwork</span></span><span><span>plural:</span><span>xnetworks</span></span><span><span>claimNames:</span></span><span><span>kind:</span><span>Network</span></span><span><span>plural:</span><span>networks</span></span><span><span>versions:</span></span><span><span>-</span><span>name:</span><span>v1alpha1</span></span><span><span>served:</span><span>true</span></span><span><span>referenceable:</span><span>true</span></span><span><span>schema:</span></span><span><span>openAPIV3Schema:</span></span><span><span>type:</span><span>object</span></span><span><span>properties:</span></span><span><span>spec:</span></span><span><span>type:</span><span>object</span></span><span><span>properties:</span></span><span><span>id:</span></span><span><span>type:</span><span>string</span></span><span><span>description:</span><span>ID</span><span>of</span><span>this</span><span>Network</span><span>that</span><span>other</span><span>objects</span><span>will</span><span>use</span><span>to</span><span>refer</span><span>to</span><span>it.</span></span><span><span>required:</span></span><span><span>-</span><span>id</span></span><span><span>EOF</span></span></code><p>4. 下发输入资源 (Crossplane XR)<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25234-%2525E4%2525B8%25258B%2525E5%25258F%252591%2525E8%2525BE%252593%2525E5%252585%2525A5%2525E8%2525B5%252584%2525E6%2525BA%252590-crossplane-xr" target="_blank">​</a></p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>yaml</span><div>
      复制代码
     </div></div></div><code class="language-yaml"><span><span>kubectl</span><span>apply</span><span>-f-</span><span>&lt;&lt;</span><span>EOF</span></span><span><span>apiVersion:</span><span>fn-demo.crossplane.io/v1alpha1</span></span><span><span>kind:</span><span>Network</span></span><span><span>metadata:</span></span><span><span>name:</span><span>network-test-functions</span></span><span><span>namespace:</span><span>default</span></span><span><span>spec:</span></span><span><span>id:</span><span>network-test-functions</span></span><span><span>EOF</span></span></code><p>5. 检查生成的托管资源<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%25235-%2525E6%2525A3%252580%2525E6%25259F%2525A5%2525E7%252594%25259F%2525E6%252588%252590%2525E7%25259A%252584%2525E6%252589%252598%2525E7%2525AE%2525A1%2525E8%2525B5%252584%2525E6%2525BA%252590" target="_blank">​</a></p><ul><li>VPC</li></ul><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>python</span><div>
      复制代码
     </div></div></div><code class="language-python"><span>kubectl get VPC -o yaml | grep network-<span>id</span></span><span> networks.meta.fn.crossplane.io/network-<span>id</span>: network-test-functions</span></code><ul><li>InternetGateway</li></ul><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>python</span><div>
      复制代码
     </div></div></div><code class="language-python"><span>kubectl get InternetGateway -o yaml | grep network-<span>id</span></span><span> networks.meta.fn.crossplane.io/network-<span>id</span>: network-test-functions</span></code><p>可以看到我们确实成功生成了&nbsp;<code>VPC</code>&nbsp;和&nbsp;<code>InternetGateway</code>&nbsp;资源，并且它们的字段符合预期 (接受 XR 输入的 id 字段并转换为&nbsp;<code>VPC</code>&nbsp;资源和&nbsp;<code>InternetGateway</code>&nbsp;资源的标签)。</p><h4>客户端渲染<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%2525AE%2525A2%2525E6%252588%2525B7%2525E7%2525AB%2525AF%2525E6%2525B8%2525B2%2525E6%25259F%252593" target="_blank">​</a></h4><p>可以看到，上述 KCL 抽象代码常常需要 Crossplane 作为控制平面中介，但是我们仍然可以完全摆脱 Crossplane 控制平面在客户端完成抽象，并直接生成 Crossplane 管理的资源，以减轻集群负担和操作成本的同时并获得更好的配置编写体验。</p><p>因为 KCL 模型并不局限于在客户端还是运行时进行使用，因此我们在客户端仅通过一条命令就可以完成上述所有功能:</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>makefile</span><div>
      复制代码
     </div></div></div><code class="language-makefile"><span>kcl run oci://ghcr.io/kcl-lang/crossplane-xnetwork-kcl-function -S items -D params='{<span>"oxr"</span>: {<span>"spec"</span>: {<span>"id"</span>: <span>"network-test-functions"</span>}}}'</span></code><p>输出为:</p><pre>&nbsp;</pre><div><div><div>
      &nbsp;
     </div></div><div><span>yaml</span><div>
      复制代码
     </div></div></div><code class="language-yaml"><span><span>apiVersion:</span><span>ec2.aws.upbound.io/v1beta1</span></span><span><span>kind:</span><span>VPC</span></span><span><span>metadata:</span></span><span><span>name:</span><span>vpc</span></span><span><span>labels:</span></span><span><span>networks.meta.fn.crossplane.io/network-id:</span><span>network-test-functions</span></span><span><span>spec:</span></span><span><span>forProvider:</span></span><span><span>region:</span><span>eu-west-1</span></span><span><span>cidrBlock:</span><span>192.168</span><span>.0</span><span>.0</span><span>/16</span></span><span><span>enableDnsSupport:</span><span>true</span></span><span><span>enableDnsHostnames:</span><span>true</span></span><span><span>---</span></span><span><span>apiVersion:</span><span>ec2.aws.upbound.io/v1beta1</span></span><span><span>kind:</span><span>InternetGateway</span></span><span><span>metadata:</span></span><span><span>name:</span><span>gateway</span></span><span><span>labels:</span></span><span><span>networks.meta.fn.crossplane.io/network-id:</span><span>network-test-functions</span></span><span><span>spec:</span></span><span><span>forProvider:</span></span><span><span>region:</span><span>eu-west-1</span></span><span><span>vpcIdSelector:</span></span><span><span>matchControllerRef:</span><span>true</span></span></code><p>当然，后续我们会结合&nbsp;<code>crossplane-provider-aws</code>&nbsp;等模型库进一步详细介绍如何获得一个更好的客户端抽象，尽情期待!</p><p>此外，可以在这里查看到更多 Crossplane 和 KCL 结合的用例：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fkcl-lang%252Fcrossplane-kcl" target="_blank">github.com/kcl-lang/cr…</a></p><h2>其他资源<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252Fzh-CN%252Fblog%252F2024-01-04-biweekly-newsletter%252F%2523%2525E5%252585%2525B6%2525E4%2525BB%252596%2525E8%2525B5%252584%2525E6%2525BA%252590" target="_blank">​</a></h2><p>❤️ 感谢所有 KCL 用户和社区小伙伴在社区中提出的宝贵反馈与建议。后续我们会发布更多 KCL 云原生模型和工具集成文章，敬请期待! 查看&nbsp;<em><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fkcl-lang%252Fcommunity" target="_blank">KCL 社区</a></em>&nbsp;加入我们。</p><p>更多其他资源请参考：</p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkcl-lang.io%252F" target="_blank">KCL 网站</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fkusionstack.io%252F" target="_blank">KusionStack 网站</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Flink.juejin.cn%3Ftarget%3Dhttps%253A%252F%252Fgithub.com%252Fkcl-lang%252Fkcl%252Fmilestone%252F8" target="_blank">KCL v0.8.0 Milestone</a></li></ul></div></div></div></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 10:58:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274219</guid>
            <link>https://www.oschina.net/news/274219</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[BeeCP-3.5.0 发布，一款高性能 JDBC 连接池]]>
            </title>
            <description>
                <![CDATA[<div class="content"><div><div><p style="text-align:left"><span style="color:#333333"><strong>一：基本介绍</strong></span></p><p style="text-align:left"><span style="color:#333333">BeeCP (小蜜蜂连接池), 一款高性能 JDBC 连接池</span><span style="color:#333333">，</span><span style="color:#333333">下面是它与其他一些连接池的性能对比图</span></p><p style="text-align:left"><img height="467" src="https://oscimg.oschina.net/oscnet/up-2e161d313f95b64730dd9af36aaff25732b.png" width="1036" referrerpolicy="no-referrer"></p><p style="text-align:left"><span style="color:#333333"><strong>测试机器</strong>：CPU:&nbsp; I3-7100，内存: 8G，操作系统：Win7_64&nbsp;</span></p><p style="text-align:left"><strong>测试代码:</strong><span style="color:#333333"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FChris2018998%2FBeeCP%2Fblob%2Fmaster%2Fdoc%2Fperformance%2FHikariCP-benchmark_BeeCP.zip" target="_blank"><strong>&nbsp;</strong> https://github.com/Chris2018998/BeeCP/blob/master/doc/performance/HikariCP-benchmark_BeeCP</a></span></p><p style="text-align:left"><span style="color:#333333"><strong>二：本次修改内容</strong></span></p><p>1：连接对象创建优化，在批量创建初始连接的方法上进行加锁处理<br> 2：增加新的解码器，可支持对 URL,User,Password 解码操作，并移除老的解码器<br> 3：从外部 Properties 集合读取配置信息时，增加代码块式的安全控制<br> 4：调整连接池初始化方法的内部步骤，CAS 成功后再执行后续操作<br> 5：调整池内信息号量上的中断处理</p><p><span style="color:#333333"><strong>三：版本 Maven 座标</strong></span></p><pre><span style="color:#d73a49"><span><span>&lt;</span></span></span><span><span><span><span>dependency</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span><span><span><span>groupId</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span>com<span style="color:#d73a49">.</span>github<span style="color:#d73a49">.</span>chris2018998<span style="color:#d73a49"><span><span>&lt;</span></span></span><span style="color:#d73a49"><span><span>/</span></span></span><span><span><span><span>groupId</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span><span><span><span>artifactId</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span>beecp<span style="color:#d73a49"><span><span>&lt;</span></span></span><span style="color:#d73a49"><span><span>/</span></span></span><span><span><span><span>artifactId</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span><span><span><span>version</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#005cc5">3.5</span><span style="color:#d73a49">.</span><span style="color:#005cc5">0</span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span style="color:#d73a49"><span><span>/</span></span></span><span><span><span><span>version</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span><span style="color:#d73a49"><span><span>&lt;</span></span></span><span style="color:#d73a49"><span><span>/</span></span></span><span><span><span><span>dependency</span></span></span></span><span style="color:#d73a49"><span><span>&gt;</span></span></span></pre><pre><code><span><span>&lt;</span><span><span><span>dependency</span></span></span><span>&gt;</span></span><span><span>&lt;</span><span><span><span>groupId</span></span></span><span>&gt;</span></span>com.github.chris2018998<span><span>&lt;/</span><span><span><span>groupId</span></span></span><span>&gt;</span></span><span><span>&lt;</span><span><span><span>artifactId</span></span></span><span>&gt;</span></span>beecp-spring-boot-starter<span><span>&lt;/</span><span><span><span>artifactId</span></span></span><span>&gt;</span></span><span><span>&lt;</span><span><span><span>version</span></span></span><span>&gt;</span></span>1.7.3<span><span>&lt;/</span><span><span><span>version</span></span></span><span>&gt;</span></span><span><span>&lt;/</span><span><span><span>dependency</span></span></span><span>&gt;</span></span></code></pre><p><strong>四：项目地址</strong></p><ul><li>国内地址：&nbsp;<a href="https://gitee.com/Chris2018998/BeeCP">https://gitee.com/Chris2018998/BeeCP</a></li><li>国外地址：&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FChris2018998%2FBeeCP" target="_blank">https://github.com/Chris2018998/BeeCP</a></li></ul></div></div></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 09:59:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274206/beecp-3-5-0-released</guid>
            <link>https://www.oschina.net/news/274206/beecp-3-5-0-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Semi Design v2.50.1 发布，抖音企业级 UI 库]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="color:#000000">Semi Design 是现代、全面、灵活的设计系统和 UI 库，由字节跳动抖音前端与 UED 团队设计、开发并维护，是一款包含设计语言、React 组件、主题等开箱即用的中后台解决方案，可用于快速搭建美观的 React 应用。</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="color:#000000"><span style="background-color:#ffffff">Semi Design v2.50.1 现已发布，</span>此版本带来如下更新内容：</span></p><ul><li>【Fix】 
  <ul><li>修复 Tree 在支持 showLine 后， renderFullLabel 时缩进错误问题（影响范围：v2.50.0）<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FDouyinFE%2Fsemi-design%2Fpull%2F2007" target="_blank">#2007</a></li><li>修复 Tree 在支持 showLine 后， rtl 模式下连接线和选项文字部分重合问题（影响范围：v2.50.0）<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FDouyinFE%2Fsemi-design%2Fpull%2F2007" target="_blank">#2007</a></li></ul></li><li>【Style】 
  <ul><li>修复 BreadCrumb 中 active 项 font-weight 错误问题 （影响范围 v2.47-2.50）<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FDouyinFE%2Fsemi-design%2Fpull%2F2008" target="_blank">#2008</a></li></ul></li></ul><p>更新说明：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2FDouyinFE%2Fsemi-design%2Freleases%2Ftag%2Fv2.50.1" target="_blank">https://github.com/DouyinFE/semi-design/releases/tag/v2.50.1</a></p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 08:13:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274187/semi-design-2-50-1-released</guid>
            <link>https://www.oschina.net/news/274187/semi-design-2-50-1-released</link>
            <author>
                <![CDATA[来源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[NumPy 1.26.3 发布，Python 科学计算包]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>NumPy 1.26.3 <span style="background-color:#ffffff; color:#333333">现已发布，这是一个维护版本。</span>修复了 1.26.2 发布后发现的错误和回归，最显著的变化是 f2py 的错误修复。此版本支持的 Python 版本为 3.9-3.12。</p><p style="text-align:start"><strong><span><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>兼容性</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p><p style="text-align:start"><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><code>f2py</code>将不再接受不明确的组合<code>-m</code>和<code>.pyf</code>CLI 组合。当传递多个<code>.pyf</code>文件时，会引发错误。当同时传递<code>-m</code>和 a<code>.pyf</code>时，会发出警告并忽略<code>-m</code>提供的名称。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p style="text-align:start"><strong><span><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>改进</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></p><p style="text-align:start"><span><span><span><span style="color:#1f2328"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span><code>f2py</code>现在可以处理具有模块<code>kind</code>规范的<code>common</code>块。这进一步扩展了<code>iso_fortran_env</code>和<code>iso_c_binding</code>等内在函数的可用性。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p style="text-align:start"><span style="background-color:#ffffff; color:#24292f">此版本共合并了 42 个拉取请求，更多详情可<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fnumpy%2Fnumpy%2Freleases%2Ftag%2Fv1.26.3" target="_blank">查看发布说明</a>。</span></p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 06:19:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274160/numpy-1-26-3-released</guid>
            <link>https://www.oschina.net/news/274160/numpy-1-26-3-released</link>
            <author>
                <![CDATA[来源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[SQLAlchemy 2.0.25 发布，Python ORM 框架]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p>SQLAlchemy 2.0.25 现已<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.sqlalchemy.org%2Fblog%2F2024%2F01%2F03%2Fsqlalchemy-2.0.25-released%2F" target="_blank">发布</a>。</p><blockquote><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">SQLAlchemy 是一个 Python 的 SQL 工具包以及数据库对象映射 (ORM) 框架。它包含整套企业级持久化模式，专门用于高效和高性能的数据库访问。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" height="228" src="https://static.oschina.net/uploads/space/2022/1207/071040_PUaS_4252687.png" width="300" referrerpolicy="no-referrer"></p></blockquote><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span style="color:#000000"><span style="background-color:#ffffff">2.0.25 版本修复了在 asyncio 系统中发现的一个问题，即使用 Engine.dispose() 方法处理过的引擎（在跨进程移动引擎时会这样做），然后再次用于新的连接时，会无意中在内部使用线程锁（threading.Lock），这在 asyncio 上下文中使用时可能会导致死锁。</span></span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><span><span><span><span style="color:#110000"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>该版本还包括使用 oracledb&nbsp;DBAPI 库中新引入的 asyncio 支持的 Oracle 异步兼容方言的「preview」backport。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><span><span><span><span style="color:#110000"><span><span><span><span><span><span><span><span><span><span><span><span style="background-color:#ffffff"><span><span><span>更多 2.0.25 的详细变更日志可查看&nbsp;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.sqlalchemy.org%2Fchangelog%2FCHANGES_2_0_25" target="_blank">Changelog</a>。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:start"><span style="background-color:#ffffff; color:#000000"><span style="background-color:#ffffff">下载地址：</span></span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.sqlalchemy.org%2Fdownload.html" target="_blank">https://www.sqlalchemy.org/download.html</a></p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 05:57:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274157/sqlalchemy-2-0-25-released</guid>
            <link>https://www.oschina.net/news/274157/sqlalchemy-2-0-25-released</link>
            <author>
                <![CDATA[来源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[🎉 领域模型即服务 | Wow 2.12.4 发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><a href="https://ahoowang.gitee.io/wow/"><img alt="Wow:基于 DDD、EventSourcing 的现代响应式 CQRS 架构微服务开发框架" src="https://static.oschina.net/uploads/img/202312/13135012_Zb9v.svg" width="150" referrerpolicy="no-referrer"></a></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong>领域驱动</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>事件驱动</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>测试驱动</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>声明式设计</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>响应式编程</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>命令查询职责分离</strong><span>&nbsp;</span>|<span>&nbsp;</span><strong>事件溯源</strong></p><blockquote><p style="margin-left:0; margin-right:0"><strong>官方文档：</strong><img alt="👉" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_right-8d392cf32998e3bca12bb7b4ee10dae0.png" width="14" referrerpolicy="no-referrer"><span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/" target="_blank">https://ahoowang.gitee.io/wow/</a><span>&nbsp;</span><img alt="👈" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_left-4570b6929b8880ab2e8b8031007fef18.png" width="14" referrerpolicy="no-referrer"></p></blockquote><h2>更新内容</h2><ul><li>特性 (core): 支持通过<span>&nbsp;</span><code>ErrorCodeMapping</code><span>&nbsp;</span>自定义异常代码（<code>ErrorCode</code>）</li><li>依赖 (core): 升级<span>&nbsp;</span><code>CosId</code><span>&nbsp;</span>到<span>&nbsp;</span><code>v2.6.4</code></li><li>依赖 (doc): 升级<span>&nbsp;</span><code>angular-cli</code><span>&nbsp;</span>到<span>&nbsp;</span><code>v17.0.9</code></li></ul><h2>简介</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>Wow</em><span>&nbsp;</span>是一个基于领域驱动设计和事件溯源的现代响应式<span>&nbsp;</span><em>CQRS</em><span>&nbsp;</span>微服务开发框架，历经多年生产环境验证。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">旨在帮助开发者构建现代化的、高性能且易于维护的微服务应用程序，充分发挥领域驱动设计和事件溯源等模式优势的同时降低应用的复杂性以及实践成本。</p><blockquote><p style="margin-left:0; margin-right:0">值得一提的是，领域驱动设计和事件溯源并非微服务架构的专属，<em>Wow</em><span>&nbsp;</span>框架不仅适用于微服务开发，同样也可用于构建基于领域驱动设计的单体应用程序。</p></blockquote><h2>快速开始</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://ahoowang.gitee.io/wow/guide/getting-started.html">使用 Wow 项目模板快速创建基于 Wow 框架的 DDD 项目</a></p><h2>特性概览</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-Features" src="https://gitee.com/AhooWang/Wow/raw/main/documentation/docs/public/images/Features.png" referrerpolicy="no-referrer"></p><h2>架构图</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Wow-Architecture" src="https://gitee.com/AhooWang/Wow/raw/main/documentation/docs/public/images/Architecture.svg" referrerpolicy="no-referrer"></p><h2>背景</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">随着业务的发展和复杂性的增加，传统的架构和开发方式逐渐显露出瓶颈。<em>领域驱动设计</em>和<em>事件溯源</em>等理念在提高系统设计的灵活性和可维护性方面表现出色，但在实践中常常需要面对复杂性和学习曲线的挑战。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>Wow</em><span>&nbsp;</span>框架的目标是以简单易用的方式将领域驱动设计和事件溯源等理念融入到微服务应用开发中，降低开发者的学习成本，提高开发效率。 通过提供现代响应式的<span>&nbsp;</span><em>CQRS</em><span>&nbsp;</span>架构和相关组件，<em>Wow</em><span>&nbsp;</span>框架旨在让开发者更专注于业务逻辑的实现，而不必过多关心底层技术细节。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">经过多年的实践和不断的演进，<em>Wow</em><span>&nbsp;</span>框架在生产环境中得到了验证，积累了丰富的经验。这些经验和反馈不仅丰富了框架的功能和性能，也为持续的改进和优化提供了宝贵的指导。</p><h2>对于开发者而言，<em>Wow</em><span>&nbsp;</span>框架意味着什么？</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">我曾告诫我的团队：如果我们过于依赖<em>数据驱动设计</em>而忽视<em>领域驱动设计</em>，我们最终将沦为<span>&nbsp;</span><em>CRUD</em><span>&nbsp;</span>工程师。</p><blockquote><p style="margin-left:0; margin-right:0"><em>CRUD</em><span>&nbsp;</span>工程师的竞争力和可替代性可想而知，这或许是为何会有<span>&nbsp;</span><em>35</em><span>&nbsp;</span>岁效应，企业显然更倾向于招募没有太多生活羁绊、更加廉价的<span>&nbsp;</span><em>25</em><span>&nbsp;</span>岁<span>&nbsp;</span><em>CRUD</em><span>&nbsp;</span>工程师。</p></blockquote><h3>业务价值</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">软件系统的核心价值体现在业务价值上，研发人员不应只关注技术实现上，而是应该更多地关注业务价值的实现。 这其中的好处显而易见，当你开发完一个业务系统之后，你将变成一个业务专家，甚至比跟你合作的领域专家还要专业，因为你需要洞察业务细节。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，意味着你将关注点放在围绕领域模型设计上，与业务专家一起探索业务领域，而不是关注于技术实现上。 你仅需编写领域模型，即可完成服务开发，<em>Wow</em><span>&nbsp;</span>框架自动为你准备好<span>&nbsp;</span><em>OpenAPI</em><span>&nbsp;</span>接口。</p><blockquote><p style="margin-left:0; margin-right:0">在《实现领域驱动设计》一书中，作者 Vaughn Vernon 提到：核心域才值得投入精力进行领域驱动设计， 但如果你使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，你将发现，因为低廉开发成本、快速的开发效率，即使是次要的支撑子域也值得<span>&nbsp;</span><em>DDD</em>。</p></blockquote><h3>性能与伸缩性</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">随着业务的发展，你需要开始思考系统的性能和伸缩性问题。 在传统架构中，这牵扯到数据库关系模式、分片规则等复杂问题，同时你还需要处理因数据库分片导致的跨分片事务问题。 这时，你不得不修改你的业务代码，以适应水平拆分后的数据库架构。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">然而，如果你选择使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，你将不再需要过多关注数据库关系模式、分片规则等问题。你的业务代码无需变更，系统能够轻松实现水平伸缩。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">你可以在这里了解更多关于<span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/guide/perf-test.html">Wow 框架的性能</a>。</p><h3>读写分离与同步延迟</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">读写分离是一种极为普遍的性能优化架构模式。 然而，同步延迟问题常伴随而来，事务执行成功后写库落库成功，但读库同步延迟，用户刷新页面后无法获取最新数据，从而对用户的体验产生影响。例如：</p><ul><li>用户发起下单事务，写库执行成功，但由于某种原因，读库同步延迟，用户刷新页面后发现订单未成功创建。</li><li>商家编辑完商品后，同步到<span>&nbsp;</span><em>Elasticsearch</em><span>&nbsp;</span>索引库，但由于某种原因，同步延迟，导致商家刷新页面后搜索不到该商品。</li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">通常，大家采用最简便的方法，等待 1 秒后刷新页面。 虽然这种方式能解决大多数数据同步延迟的问题，但效率不够高。 因为大多数情况下，同步在 100 毫秒内就已完成，剩余的 900 毫秒成了<em>浪费</em>。 然而，有时 1 秒无法完成同步，这就导致用户获取的数据变得<strong>无效</strong>。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，你可以通过等待<span>&nbsp;</span><em>PROJECTED</em><span>&nbsp;</span>信号完成，然后再将结果返回给用户，以更为优雅和高效的方式处理数据同步延迟的问题。</p><h3>工程质量</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>单元测试</em>是确保代码质量且符合预期业务需求的重要手段，但在传统架构中，单元测试往往是一项相当困难的任务，因为你需要考虑数据库连接、事务管理、数据清理等问题。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">使用<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架，你将会发现基于<span>&nbsp;</span><em>Given-&gt;When-&gt;Expect</em><span>&nbsp;</span>模式的测试套件，使得单元测试变得异常简单。 你只需关注领域模型是否符合预期，而无需为数据库连接等问题烦恼。</p><blockquote><p style="margin-left:0; margin-right:0">在实际应用中，我们将领域模型的单元测试覆盖率下限阈值设置为<span>&nbsp;</span><strong>85%</strong>，也是可以轻松实现的。</p><p style="margin-left:0; margin-right:0">在没有刻意要求的情况下，开发人员甚至自觉地将覆盖率提升至<span>&nbsp;</span><strong>95%</strong>。</p><p style="margin-left:0; margin-right:0">因此，每次提交代码都变得轻松自在，因为你确信你的代码经过了充分的测试，并且真正意义上从单元测试中获得了收益。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">在研发同级别的项目中，我们的测试团队在系统<span>&nbsp;</span><em>API</em><span>&nbsp;</span>测试中发现，基于 Wow 框架的项目，其<span>&nbsp;</span><em>BUG</em><span>&nbsp;</span>数仅为传统架构项目的<span>&nbsp;</span><strong>1/3</strong>。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">你可以在这里了解更多关于<span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/guide/test-suite.html">Wow 单元测试套件</a>。</p><h2>对于企业而言，<em>Wow</em><span>&nbsp;</span>框架意味着什么？</h2><h3>商业智能</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>商业智能</em>是企业决策的关键支持，而数据则是商业智能的分析原料。业务数据越为丰富有价值，商业智能的分析结果越准确，决策也就更加可靠。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">与传统架构有着显著差异，<em>Wow</em><span>&nbsp;</span>提供了实时聚合根状态事件（<code>StateEvent</code>）和聚合命令（<code>Command</code>）作为数据分析的数据源，同时极大降低了实时<span>&nbsp;</span><em>ETL</em>（<code>Extract</code>,<span>&nbsp;</span><code>Transform</code>,<span>&nbsp;</span><code>Load</code>）的难度。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">在传统架构中，实现实时<span>&nbsp;</span><em>ETL</em><span>&nbsp;</span>通常需要经过繁琐的流程，包括<span>&nbsp;</span><code>DB-&gt;CDC-&gt;Process-&gt;DB</code>，而在<span>&nbsp;</span><em>Wow</em><span>&nbsp;</span>框架中，仅需一段简单的<span>&nbsp;</span><em>SQL</em><span>&nbsp;</span>脚本即可完成这一过程。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">另外，在传统架构中，使用<span>&nbsp;</span><em>CDC</em>（<code>MySql Binlog</code>）数据仅记录数据的变化，缺乏明确的业务语义。进行业务分析时，需要基于数据状态的变化推断出业务语义，这往往需要进行大量的数据处理。 相较之下，<em>Wow</em><span>&nbsp;</span>框架直接提供了聚合根状态事件和聚合命令作为数据分析的数据源，极大降低了数据处理的难度。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>Wow</em><span>&nbsp;</span>提供的实时同步机制将数据实时同步至数据仓库（<em>ClickHouse</em>），为实时数据分析提供了极大的便利。这种方法为商业智能提供了强有力的支持，构建了一个实时数据分析系统，使决策制定能够基于及时而准确的信息。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">你可以在这里了解更多关于<span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/guide/bi.html">Wow 商业智能</a>。</p><h3>操作审计</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em>操作审计</em>是企业中保障安全性和合规性的重要组成部分，同时也是对系统操作进行监控和追踪的关键手段。<em>Wow</em><span>&nbsp;</span>框架在这方面为企业带来了显著的优势。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">通过记录聚合命令（<code>Command</code>）作为操作审计的数据源，<em>Wow</em><span>&nbsp;</span>框架能够详细追踪系统中的各种操作。 这些记录不仅包含了操作本身的内容，还涵盖了操作触发的副作用（<em>领域事件</em>），为审计提供了更为全面和准确的数据基础。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">相较于传统审计方法，<em>Wow</em><span>&nbsp;</span>框架的操作审计的数据源具备更加明确的业务语义，以及操作后产生的明确领域事件。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">此外，Wow 框架提供的实时数据同步机制也为操作审计带来了便利，确保了审计数据的及时性和一致性。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">了解更多关于<span>&nbsp;</span><a href="https://ahoowang.gitee.io/wow/guide/bi.html#%E8%81%9A%E5%90%88%E5%91%BD%E4%BB%A4">Wow 操作审计</a>。</p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 04:44:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274149</guid>
            <link>https://www.oschina.net/news/274149</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Golang 通用代码生成器仙童已发布 2.4.0 电音仙女尝鲜版三及视频，详细介绍了 Oracle 代码生成]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><strong>Golang 通用代码生成器仙童已发布 2.4.0 电音仙女尝鲜版三及其介绍视频，详细介绍了 Oracle 代码生成</strong></p><p>Golang 通用代码生成器仙童已发布 2.4.0 电音仙女尝鲜版三及其介绍视频。详细介绍了 Oracle 代码生成。即生成后端数据库为 Oracle 的 golang web 代码。并同时生成对应的 Nodejs 的 ElementUI 的前端项目。<br> 视频请见：<br><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Jc411b7N6%2F" target="_blank">https://www.bilibili.com/video/BV1Jc411b7N6/</a></p><p>三大部分生成功能群即高级定制功能群，部分生成功能群和自动生成差异版本功能群。此三个功能群为用户在整个软件开发周期中多次，迭代式的全程使用通用代码生成器设计。极大的提高了工作效率，欢迎试用。<br> 尝鲜版二的视频请见：</p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV15N4y1x75p%2F" target="_blank">https://www.bilibili.com/video/BV15N4y1x75p/</a></p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1Q64y1H75r%2F" target="_blank">https://www.bilibili.com/video/BV1Q64y1H75r/</a></p><p>尝鲜版一介绍视频请见：</p><p>正常模式：</p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1fw411V77i%2F" target="_blank">https://www.bilibili.com/video/BV1fw411V77i/</a></p><p>哑数据模式：</p><p><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1nu4y1K7sz%2F" target="_blank">https://www.bilibili.com/video/BV1nu4y1K7sz/</a></p><p>电音仙女版本支持日期和日期时间。支持三大部分生成功能群。支持枚举。支持哑数据模式。支持用户管理自己的资料和密码。技术状态和最新版的 Rust 通用代码生成器红莲的技术状态一致。非常便利大家的使用。</p><p><span style="background-color:#ffffff; color:#333333">代码生成器项目地址：</span><a href="https://gitee.com/jerryshensjf/Fairchild">https://gitee.com/jerryshensjf/Fairchild</a><br><span style="background-color:#ffffff; color:#333333">二进制发布包下载地址：</span><a href="https://gitee.com/jerryshensjf/Fairchild/attach_files">https://gitee.com/jerryshensjf/Fairchild/attach_files</a></p><h3>项目图片</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1104/210826_16fb1ca2_1203742.jpeg" referrerpolicy="no-referrer"></p><h3>最新大版本号</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">正在研发的最新大版本号是仙童 2.4.0 电音仙女　TechnoFairy 短名 TF。对标 java 通用代码生成器光 2.4.0 电音之王和 Rust 通用代码生成器红莲。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="输入图片说明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/tf2.jpg" referrerpolicy="no-referrer"></p><h3>百度话题</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">＃通用代码生成器＃</p><h3>代码生成器截图</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1112/202857_c7a40dc0_1203742.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1112/202911_c2b9a341_1203742.png" referrerpolicy="no-referrer"></p><h3>Vue 独立前端截图</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="输入图片说明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/Fc_login.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="输入图片说明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/fc_list.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="输入图片说明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/fc_img.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="输入图片说明" src="https://gitee.com/jerryshensjf/Fairchild/raw/master/fc_mtm2.png" referrerpolicy="no-referrer"></p><h3>代码生成物截图</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1122/151921_f4271962_1203742.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><img alt="Image description" src="https://images.gitee.com/uploads/images/2021/1122/151935_cf6c7223_1203742.png" referrerpolicy="no-referrer"></p><h3>&nbsp;</h3><p>&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 04:31:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274140</guid>
            <link>https://www.oschina.net/news/274140</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[Lazarus 3.0 发布，Pascal 集成开发环境]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><strong>Lazarus</strong><span style="background-color:#ffffff; color:#333333"><span>&nbsp;</span>是以<span>&nbsp;</span></span><a href="http://www.oschina.net/p/freepascal">Free Pascal</a><span style="background-color:#ffffff; color:#333333"><span>&nbsp;</span>编译器为基础的 Pascal 语言的整合开发环境（IDE），和<span>&nbsp;</span></span><a href="http://www.oschina.net/p/delphi">Delphi</a><span style="background-color:#ffffff; color:#333333"><span>&nbsp;</span>高度兼容，被视作后者的开源替代品。目前已有中文界面。</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.getlazarus.org%2Frelease%2F%23minimum_requirements" target="_blank">3.0 版本</a>已经发布，这个版本是用 Free Pascal 3.2.2 构建的，上一个版本 Lazarus2.2.6 也是用 Free Pascal 3.2.2 构建的，以下是 Lazarus 和 Free Pascal 的更改列表：</p><ul><li><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fwiki.lazarus.freepascal.org%2FLazarus_3.0_release_notes" target="_blank">Lazarus 3.0&nbsp;发布说明</a></li><li><a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fwiki.lazarus.freepascal.org%2FUser_Changes_3.2.2" target="_blank">Free Pascal 3.2.2&nbsp;发布详情</a></li></ul><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><img alt="" src="https://video.getlazarus.org/tutorial-intro.mp4" referrerpolicy="no-referrer">视频演示：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fvideo.getlazarus.org%2Ftutorial-intro.mp4" target="_blank">https://video.getlazarus.org/tutorial-intro.mp4</a></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">选择属于自己的 CPU、操作系统、发行版，然后选择 「Lazarus 3.0」 目录，下载地址：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.lazarus-ide.org%2Findex.php%3Fpage%3Dchecksums%233_0" target="_blank">https://www.lazarus-ide.org/index.php?page=checksums#3_0</a></p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 03:47:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274133/lazarus-3-0-released</guid>
            <link>https://www.oschina.net/news/274133/lazarus-3-0-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[凌鲨 0.7.5 版本更新]]>
            </title>
            <description>
                <![CDATA[<div class="content"><h1>凌鲨 0.7.5 版本更新</h1><ul><li>服务端版本: 0.2.21&nbsp;</li><li>新增: 新增注册界面&nbsp;</li><li>新增: GitPro 新增 remote 界面&nbsp;</li><li>新增: GitPro 新增创建标记功能&nbsp;</li><li>新增: GitPro 新增删除标记功能&nbsp;</li><li>新增: GitPro 新增同步远程数据功能&nbsp;</li><li>改进: 调整 GitPro 界面样式</li></ul><h1>相关截图</h1><p><img height="750" src="https://oscimg.oschina.net/oscnet/up-a985b3a8f6fc661521226a5edbadb7681bb.png" width="1300" referrerpolicy="no-referrer"></p><p><img height="639" src="https://oscimg.oschina.net/oscnet/up-7230a4119c55aa6fc19cd739f45f64e4e4d.png" width="1131" referrerpolicy="no-referrer"></p><p><img height="639" src="https://oscimg.oschina.net/oscnet/up-538b2f11edb88b8596861ea259fc7c3cd5d.png" width="1131" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 02:54:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274122</guid>
            <link>https://www.oschina.net/news/274122</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[PureScript v0.15.14 发布，小巧而强大的静态类型语言]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><span style="background-color:#ffffff; color:#333333">PureScript&nbsp; v0.15.14 发布了。PureScript 是个小巧而强大的静态类型语言，可以编译成 JavaScript。PureScript 主要是由 Haskell 和 PureScript 编写的。</span></p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left"><strong style="color:#333333"><span style="background-color:#ffffff; color:#24292f">Bug&nbsp;</span></strong><strong style="color:#333333"><span style="background-color:#ffffff; color:#24292f">修复</span></strong><strong><span style="background-color:#ffffff; color:#24292f">：</span></strong></p><ul><li><p><span><span>修复超大文件的编译内存回归（<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpurescript%2Fpurescript%2Fpull%2F4521" target="_blank">#4521</a>）</span></span></p><p><span><span>编译超大文件（&gt;12K 行）时，CSE pass 可能会导致内存膨胀并导致编译时间增加。</span></span></p><p><span><span>此修复使用了&nbsp;strict Map 而非 lazy Map 来避免在优化过程中构建不必要的 thunk。</span></span></p></li><li><p><span><span>修复编译多个模块时的两个 space leaks 问题（<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpurescript%2Fpurescript%2Fpull%2F4517" target="_blank">#4517</a>）</span></span></p><p><span><span>第一个会同时交错编译太多模块，这会增加内存使用量，特别是对于使用<code>+RTS -N1 -RTS</code>的单线程编译。现在，并发模块的数量受限于&nbsp;<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fdownloads.haskell.org%2Fghc%2Flatest%2Fdocs%2Fusers_guide%2Fusing-concurrent.html%23rts-options-for-smp-parallelism" target="_blank">GHC 运行时系统</a>可用的线程数量。</span></span></p><p><span><span>第二个将保留编译有警告的模块的内存，直到构建结束，打印警告并释放内存。现在已通过额外的<code>NFData</code>实例修复了此问题。</span></span></p></li></ul><p>更新说明：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fgithub.com%2Fpurescript%2Fpurescript%2Freleases%2Ftag%2Fv0.15.14" target="_blank">https://github.com/purescript/purescript/releases/tag/v0.15.14</a></p></div>
                                    ]]>
            </description>
            <pubDate>Thu, 04 Jan 2024 02:28:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274116/purescript-0-15-14-released</guid>
            <link>https://www.oschina.net/news/274116/purescript-0-15-14-released</link>
            <author>
                <![CDATA[来源: OSCHINA]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[👍 JeeSite V5.6.0 发布，Java 快速开发平台，Spring Boot，Vue3]]>
            </title>
            <description>
                <![CDATA[<div class="content"><h4><span>升级内容</span></h4><ul><li><p style="margin-left:.3rem; margin-right:.3rem">升级 spring boot 2.7.18、jackson 2.16.0、mybatis 3.5.14、shiro 1.13.0</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 DataGrid editGridInputFormListIsMap 参数，支持 Map 格式的提交参数</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 DictUtils.setDictList 方法的 List 参数，方便构建字典缓存</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，代码生成模板 Vue 路由表单、Vue 弹窗表单、仅后端模板</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，文件标签管理、标签分配、标签查询、分享点击次数</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，文件管理 upload 表，数据管理更高效</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，大屏轮播功能、轮播选项、排序</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，系统数据库初始化基础数据脚本</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，用户管理，解冻用户功能提示信息</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，不同场景下的修改密码后的跳转页面操作</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，在线用户列表，超时时间数值类型的排序</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，当不设置 adminPath 的时候，oauth2 的地址认证排除</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化 Layer 弹窗后首先关闭获取焦点，防止回车弹出多个</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，登录超时后，导出 Excel，不提示登录界面，则提示超时信息</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，生成模板选择框宽一点，显示更多内容</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化 DataGrid 拖拽行的颜色违和感</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，点击流程图空白处关闭 tip</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，配置类 ShiroConfig 改为 ShiroAutoConfiguration 方便重写</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正，不调用自定义的消息推送类型的 buildReceiveCode 方法的问题</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 Vue 路由 ureport 多个预览文件只显示一个的问题。</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 select2 组件 i18n 显示不正确</p></li></ul><p style="color:#002127; text-align:start"><strong>Spring Boot 3 版本升级</strong></p><ul><li><p style="margin-left:0; margin-right:0">升级 spring boot 3.2.0、jackson 2.16.0、mybatis 3.5.14、shiro 2.0.0-a4、swagger3 2.2.19</p></li><li><p style="margin-left:0; margin-right:0">升级 elasticsearch 8.11.1</p></li><li><p style="margin-left:0; margin-right:0">包含上述的所有升级内容</p></li></ul><p style="color:#002127; text-align:start"><strong>Vue 分离端版本</strong></p><ul><li><p style="margin-left:.3rem; margin-right:.3rem">升级依赖 antdv 4.0.7、axios 1.6.2、vue 3.3.11 等等</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">升级，树表的局部刷新改进，删除、停用、启用、修改父节点的情况下完美体验</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 TreeSelect 增加 returnFullName 和 returnFullNameSplit 属性，支持返回树的全路径名返回</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 ListSelect 组件 configFile 参数，可将选择配置文件放到业务目录，不是组件目录了</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 ListSelect 增加 isShowCode 可设置右侧选择列表中是否显示编码的参数开关</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BasicTable 增加 defaultRowSelection 属性，通过右上角给表格设置复选框的时候加载默认参数</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BasicTable 编辑表格增加 ListSelect、TextArea 组件</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BasicTable 编辑表格组件大小调整为正常</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BasicModal 增加 appendHeader 标题后插槽</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BpmButton 将提交审批信息移动到提交对话框中开关</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 BpmButton 增加 Size 参数，可以调整按钮和边距大小</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增 listToTree 列表到树的转换方法，添加全名字段，方便 TreeSelect 时返回树全路径名</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，用户管理新增批量删除，点击表格右上角设置按钮，选中复选框后，列表行打钩，即可显示删除按钮</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，强化路由表单、可折叠表单示例、用户个性化表单示例、主子表的列表选择示例</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">新增，文件标签管理、标签分配、标签查询 Vue 版</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化 BasicTable 的 reload 增强，支持树表修改父节点情况下的局部刷新</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化 BasicTable 标题后面加按钮的样式美化</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">优化，修改密码后提示成功后，自动跳转到登录页</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正，上传组件文件查看列表黑暗模式下的显示</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 Upload 组件，新增表单某些情况下 dataMap 为字符串的问题</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 BasicTable 下的插槽，必须有 tableTitle 否则，插槽 toolbar 中的内容无法显示</p></li><li><p style="margin-left:.3rem; margin-right:.3rem">修正 BasicTable 指定 rowSelection 的 onChange 事件后，然后在表格设置里关闭和开启复选框一次操作后 onChange 失效问题</p></li></ul><h4><span>升级方法</span></h4><ul><li><p style="margin-left:0; margin-right:0">修改所有&nbsp;<code>pom.xml</code>&nbsp;文件中的&nbsp;<code>jeesite-parent</code>&nbsp;版本号为&nbsp;<code>5.6.0-SNAPSHOT</code></p></li><li><p style="margin-left:0; margin-right:0">如果您修改了&nbsp;<code>parent</code>、<code>common</code>、<code>modules</code>&nbsp;等项目源码，请与&nbsp;<code>git</code>&nbsp;上的代码进行同步</p></li><li><p style="margin-left:0; margin-right:0">配置类 ShiroConfig 改为 ShiroAutoConfiguration 方便重写，请升级该类，两个类保留一个</p></li><li><p style="margin-left:0; margin-right:0">配置参数 spring.data.elasticsearch.enabled 替换为 spring.elasticsearch.enabled</p></li><li><p style="margin-left:0; margin-right:0">如果您是跨版本升级，请注意每一个版本的升级方法，业务上有调整的地方进行修改</p></li><li><p style="margin-left:0; margin-right:0">执行&nbsp;<code>root/package.bat(sh)</code>&nbsp;打包脚本，强制更新依赖。</p></li></ul><p style="color:#002127; text-align:start"><strong>Spring Boot 3 版本升级</strong></p><ul><li><p style="margin-left:0; margin-right:0">修改所有&nbsp;<code>pom.xml</code>&nbsp;文件中的&nbsp;<code>jeesite-parent</code>&nbsp;版本号为&nbsp;<code>5.6.0.springboot3-SNAPSHOT</code></p></li><li><p style="margin-left:0; margin-right:0">如果您修改了&nbsp;<code>parent</code>、<code>common</code>、<code>modules</code>&nbsp;等项目源码，请与&nbsp;<code>git</code>&nbsp;上的代码进行同步</p></li><li><p style="margin-left:0; margin-right:0">配置类 ShiroConfig 改为 ShiroAutoConfiguration 方便重写，请升级该类，两个类保留一个</p></li><li><p style="margin-left:0; margin-right:0">配置参数 spring.data.elasticsearch.enabled 替换为 spring.elasticsearch.enabled</p></li><li><p style="margin-left:0; margin-right:0">Elasticsearch 从 7 升级到 8，会有很多 API 变化，参见 ElasticsearchTest.java</p></li><li><p style="margin-left:0; margin-right:0">如果您是跨版本升级，请注意每一个版本的升级方法，业务上有调整的地方进行修改</p></li><li><p style="margin-left:0; margin-right:0">执行&nbsp;<code>root/package.bat(sh)</code>&nbsp;打包脚本，强制更新依赖。</p></li></ul><p style="color:#002127; text-align:start"><strong>Vue 分离端升级</strong></p><ul><li><p style="margin-left:0; margin-right:0">请与&nbsp;<code>jeesite-vue</code>&nbsp;代码仓库源码进行同步，合并代码，手动解决冲突代码。</p></li><li><p style="margin-left:0; margin-right:0">匹配后端版本为&nbsp;<code>JeeSite v5.6.0</code></p></li></ul><h2>了解更多</h2><ul><li><p style="margin-left:0; margin-right:0">JeeSite 官网地址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fjeesite.com" target="_blank">http://jeesite.com</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 在线文档：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fdocs.jeesite.com" target="_blank">http://docs.jeesite.com</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 演示地址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fdemo.jeesite.com" target="_blank">http://demo.jeesite.com</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite Vue 演示地址：<a href="https://www.oschina.net/action/GoToLink?url=http%3A%2F%2Fvue.jeesite.com" target="_blank">http://vue.jeesite.com</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 源码仓库：<a href="https://gitee.com/thinkgem/jeesite4" target="_blank">https://gitee.com/thinkgem/jeesite4</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite Vue 前端源码：<a href="https://gitee.com/thinkgem/jeesite-vue" target="_blank">https://gitee.com/thinkgem/jeesite-vue</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 跨平台手机端：<a href="https://gitee.com/thinkgem/jeesite-uniapp" target="_blank">https://gitee.com/thinkgem/jeesite-uniapp</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite Cloud 微服务：<a href="https://gitee.com/thinkgem/jeesite-cloud" target="_blank">https://gitee.com/thinkgem/jeesite-cloud</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 客户端安装程序：<a href="https://gitee.com/thinkgem/jeesite-client" target="_blank">https://gitee.com/thinkgem/jeesite-client</a></p></li></ul><h2>JeeSite 生态系统</h2><ul><li><p style="margin-left:0; margin-right:0">分布式微服务（Spring Cloud）：<a href="https://gitee.com/thinkgem/jeesite-cloud">https://gitee.com/thinkgem/jeesite-cloud</a></p></li><li><p style="margin-left:0; margin-right:0">Flowable 业务流程引擎（BPM）：<a href="https://gitee.com/link?target=http%3A%2F%2Fjeesite.com%2Fdocs%2Fbpm%2F">http://jeesite.com/docs/bpm/</a></p></li><li><p style="margin-left:0; margin-right:0">JFlow 工作流引擎：<a href="https://gitee.com/thinkgem/jeesite-jflow">https://gitee.com/thinkgem/jeesite-jflow</a></p></li><li><p style="margin-left:0; margin-right:0">多站点内容管理模块（CMS）：<a href="https://gitee.com/link?target=https%3A%2F%2Fjeesite.com%2Fdocs%2Fcms%2F">https://jeesite.com/docs/cms/</a></p></li><li><p style="margin-left:0; margin-right:0">手机端移动端：<a href="https://gitee.com/thinkgem/jeesite-uniapp">https://gitee.com/thinkgem/jeesite-uniapp</a></p></li><li><p style="margin-left:0; margin-right:0">PC 客户端程序：<a href="https://gitee.com/thinkgem/jeesite-client">https://gitee.com/thinkgem/jeesite-client</a></p></li><li><p style="margin-left:0; margin-right:0">Vue3 分离版本：<a href="https://gitee.com/thinkgem/jeesite-vue">https://gitee.com/thinkgem/jeesite-vue</a></p></li><li><p style="margin-left:0; margin-right:0">JeeSite 统一认证：<a href="https://gitee.com/link?target=https%3A%2F%2Fjeesite.com%2Fdocs%2Foauth2-server">https://jeesite.com/docs/oauth2-server</a></p></li><li><p style="margin-left:0; margin-right:0">TopIAM 统一认证：<a href="https://gitee.com/thinkgem/jeesite-topiam">https://gitee.com/thinkgem/jeesite-topiam</a></p></li><li><p style="margin-left:0; margin-right:0">MaxKey 统一认证：<a href="https://gitee.com/thinkgem/jeesite-maxkey">https://gitee.com/thinkgem/jeesite-maxkey</a></p></li><li><p style="margin-left:0; margin-right:0">MybatisPlus:<span>&nbsp;</span><a href="https://gitee.com/thinkgem/jeesite-mybatisplus">https://gitee.com/thinkgem/jeesite-mybatisplus</a></p></li><li><p style="margin-left:0; margin-right:0">Magic 接口快速开发：<a href="https://gitee.com/thinkgem/jeesite-magic-api">https://gitee.com/thinkgem/jeesite-magic-api</a></p></li><li><p style="margin-left:0; margin-right:0">内外网中间件：<a href="https://gitee.com/link?target=https%3A%2F%2Fmy.oschina.net%2Fthinkgem%2Fblog%2F4624519">https://my.oschina.net/thinkgem/blog/4624519</a></p></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 23:51:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274093</guid>
            <link>https://www.oschina.net/news/274093</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[基于 mybatis 的 orm：mybatis-mp 1.3.1 发布 - 超丰富的 api！]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">mybatis-mp 包含丰富的 api：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">1：基于注解，映射数据库；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">2：支持多表 join 和返回；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">3：api 采用 lambda 和 stream 流式设计；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">4：内置分页以及超强的 sql 优化功能；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">5：稳定且性能极优；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">6：轻量级封装 mybatis，几乎没有侵入；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">7：api 丰富，支持数据库函数、多表、乐观锁、多租户、逻辑删除、默认值（可动态值） 等众多功能；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">8：零学习成本，和写 sql 一样方便。</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">9：支持复杂的返回关系映射：例如一对一 ，一对多，多对多；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">10：支持自定义 sql 模板，再也不用担心框架支持不足；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">11：内置代码生成器，通过配置，可定制自身规范；</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">12：全新的框架，全新的设计理念，新的就是好！</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">本次更新：</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">1.适配无主键实体映射</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">2.兼容多个@TableId 配置</p><p style="color:#333333; margin-left:0; margin-right:0; text-align:left">3.升级 springboot3 至 3.2.1</p><p>&nbsp;</p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 12:26:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274048</guid>
            <link>https://www.oschina.net/news/274048</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[国产数据迁移同步工具 CloudCanal v3.3.3.0 发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p><strong><span style="background-color:#ffffff; color:#333333">CloudCanal<span>&nbsp;免费社区版&nbsp;</span></span></strong><span style="background-color:#ffffff; color:#333333">是<span>&nbsp;</span>ClouGence<span>&nbsp;</span>公司推出的一款<strong>全自研</strong>、<strong>可视化</strong>、<strong>自动化</strong>数据迁移同步工具，具备&nbsp;<strong>结构迁移</strong>、<strong>数据迁移</strong>、<strong>数据同步</strong>、<strong>数据校验</strong>、<strong>数据订正&nbsp;</strong>等功能，支持 <strong>30+ 款</strong>流行关系型数据库、实时数仓、消息中间件、缓存数据库和搜索引擎之间数据互通，其中包含国产数据库&nbsp;<strong>OceanBase</strong>,<strong>PolarDB</strong>, <strong>TiDB</strong>,&nbsp;<strong>StarRocks</strong>, <strong>Doris</strong>, <strong>RocketMQ </strong>等。</span></p><p>结合开源项目&nbsp;<a href="https://gitee.com/clougence/cloudcanal-data-process">CloudCanalProcess</a>&nbsp;，可方便实现如下功能</p><ul><li><strong>wide-table</strong><span>&nbsp;</span>: 打宽表数据处理插件，主要包括事实表和单维表组合处理</li><li><strong>data-transform</strong><span>&nbsp;</span>: 数据通用转换插件，比如做操作变幻、额外加字段、清洗回填数据</li><li><strong>data-gather</strong><span>&nbsp;</span>: 数据汇聚插件，将分库分表、垂直拆分、异地数据进行实时汇聚</li><li><strong>data-compare</strong><span>&nbsp;</span>: 数据对比插件，根据源端数据变化进行业务对账</li><li><strong>business-alert</strong><span>&nbsp;</span>: 业务告警插件，根据数据变化趋势做出相应告警</li></ul><p><strong><span style="background-color:#ffffff; color:#333333">CloudCanal </span></strong><span style="background-color:#ffffff; color:#333333">产品功能对标阿里云 DTS,&nbsp; 亚马逊 DMS,&nbsp; StreamSets, AirByte，助力开发、DBA 或运维同学快速构建在线数据应用。</span></p><p style="text-align:center"><img alt="" height="622" src="https://oscimg.oschina.net/oscnet/up-e272e9fc5e6af50fcf4e5a39da62d43cbef.png" width="1080" referrerpolicy="no-referrer"></p><h1><strong>Release-Note</strong></h1><h2>重点功能</h2><ul><li>支持 Hana 1.x 版本，目前支持 Hana 版本为 1.x、2.x</li><li>支持 Hana 增量任务自定义增量表</li><li>支持 Hana 修改订阅取消表后自动删除触发器</li></ul><h3><img alt="" height="530" src="https://oscimg.oschina.net/oscnet/up-ba445406fc1016df17c5caf33e2db5b430c.png" width="1024" referrerpolicy="no-referrer"></h3><h2>新特性<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FreleaseNote%2Frn-cloudcanal-3-3-3-0%23%25E6%2596%25B0%25E7%2589%25B9%25E6%2580%25A7" target="_blank">​</a></h2><ul><li>支持 MySQL &lt;-&gt; Tunnel &lt;-&gt; MySQL 双向同步，包括增、删、改操作 (不包括 DDL), 此能力为 MySQL 双向同步增强版本，两端数据库均可不开公网地址</li><li>支持<span>&nbsp;阿里云全托管 SelectDB</span></li><li>支持 StarRocks、Doris、SelectDB、Oracle、MariaDB 对端全量前清除数据能力，方便用户重新迁移同步数据</li><li>支持 MySQL、OceanBase、TiDB、StarRocks、Doris、SelectDB、Oracle、MariaDB 对端创建任务或修改订阅重建对端表</li><li>支持 MySQL -&gt; TiDB/OceanBase 链路同步 Online DDL 工具语句</li><li>支持，任务详情 &gt; 更多功能 &gt; 修改任务配置，包括全量前清除对端数据开关、创建任务时重建对端表开关、修改定时全量/增量 Java Cron 表达式</li><li>支持 MySQL -&gt; MySQL 创建任务第二步可勾选 DROP 操作</li><li>支持，任务告警按时间段关闭</li><li>支持，创建任务筛选表可以批量筛选，即选表页面可粘贴 table1;table2;table3;...tableN 进行搜索并自动勾选，解决用户创建任务选表复杂问题</li><li>支持，任务批量调度到另外一台机器，提高手动任务调度效率</li><li>支持 CloudCanal 显示 LicenseID，方便后续用户对照 license 到期提醒信息</li></ul><h2>优化<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FreleaseNote%2Frn-cloudcanal-3-3-3-0%23%25E4%25BC%2598%25E5%258C%2596" target="_blank">​</a></h2><ul><li>优化<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FdataMigrationAndSync%2Fconnection%2Fredis2" target="_blank">Redis &lt;-&gt; Redis</a><span>&nbsp;</span>双向同步防循环策略，且支持更多指令双向同步防循环</li><li>优化<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FdataMigrationAndSync%2Fconnection%2Fredis2" target="_blank">Redis -&gt; Redis</a><span>&nbsp;</span>数据初始化能力，包括 Set、ZSet、List 类型数据初始化</li><li>优化<span>&nbsp;</span><a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FdataMigrationAndSync%2Fconnection%2Fredis2" target="_blank">Redis -&gt; Redis</a><span>&nbsp;</span>指令集 Rename、Incr、Incrby、Hsetnx、Hmset、Lpush、Rpush、Lset、Sadd、Zadd、Zrem、Zremrangebyscore</li><li>优化 Kafka Debezium Json 支持 Bytes 类型（具体参考：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2Freference%2Fdebezium_json_notice" target="_blank">源端 Kafka Debezium Json 使用说明</a><span>&nbsp;</span>）</li><li>优化 TiDB 作为源端 Stub 超时处理逻辑，将超时被动上报调整为主动上报，实现任务不重启，重新订阅 Region</li><li>优化 TiDB 作为源端获取表信息方案，大幅度优化获取多表信息的速度</li><li>优化 TiDB 作为源端维护多版本表结构的策略，实现主动清理过期的表结构</li><li>优化 TiDB 作为源端 DML 事件 sink 条件，使得 DDL 与 DML 消费更有序，降低数据不一致的风险</li><li>优化 TiDB 作为源端 Error 事件的处理方案，降低 Region 增量扫消费时间</li><li>优化 TiDB 作为源端性能指标图，新增 5 个指标（ CDC 提交事件总数、10 秒内 Region 异常总数、10 秒内 Region 活跃总数、任务增量扫阶段 Region 总数、Region 总数）</li><li>优化 MariaDB -&gt; Oracle、Oracle -&gt; Oracle 使用新版本结构迁移</li><li>优化 PostgreSQL/MySQL -&gt; StarRocks Json 类型字段同步（优化映射规则）</li><li>优化，修改订阅时规则映射只应用到新增表</li><li>优化，修改订阅页面防止重复点击</li><li>优化 CloudCanal 未激活时无法显示控制枱监控信息，方便用户在未激活状态下查看当前 Console 状态</li></ul><h2>问题修复<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2FreleaseNote%2Frn-cloudcanal-3-3-3-0%23%25E9%2597%25AE%25E9%25A2%2598%25E4%25BF%25AE%25E5%25A4%258D" target="_blank">​</a></h2><ul><li>修复 Hana 源端表字段过多，导致创建触发器报错问题</li><li>修复 Hana 无主键表创建任务报错的问题</li><li>修复 Hana 小写 Schema/Table/Column 创建任务报错的问题</li><li>修复 Hana 增量同步无主键表重复插入数据的问题</li><li>修复 Hana 源端删除任务时导致多次订阅表的触发器被误删除的问题</li><li>修复 Hana 源端增量阶段数据中存在特殊字符而导致的解析报错问题</li><li>修复，数据校验任务页面显示丢失、不一致和实际不相符的问题</li><li>修复 SQL Server 增量同步 LSN 位点排序时被修改而导致的同步中断问题</li><li>修复 TiDB 作为源端大表多 Region 订阅导致的超时问题，支持设置超时时间</li><li>修复 TiDB 作为源端任务位点小于 GC 安全点导致的数据不一致问题</li><li>修复 TiDB 作为源端 Create Database ... 等非同步业务 DDL 导致的解析异常问题</li><li>修复 TiDB 源端 v6.5.0 以上版本因时间精度导致的增量 GC 安全点检测报错的问题</li><li>修复 MySQL -&gt; Doris 结构迁移注释未同步到对端的问题</li><li>修复 MySQL -&gt; StarRocks DDL 新增列默认值丢失的问题</li><li>修复 MySQL -&gt; StarRocks DDL 修改列属性中带有 Not Null 导致同步失败的问题</li><li>修复 MySQL -&gt; StarRocks DDL 新增 Text 类型字段同步失败的问题</li><li>修复 MySQL -&gt; Oracle 表映射无效的问题</li><li>修复 PostgreSQL -&gt; MySQL 修改订阅对同一张表进行多次加/减操作，导致任务报错的问题</li><li>修复，任务重跑之后增量位点没有重置的问题</li><li>修复 Oracle 对端只有外网 Host 情况下，无法删除任务的问题</li><li>修复 Oracle -&gt; Oracle Schema 不存在映射的情况下修改订阅或创建相似任务默认设置目标端 Schema 为 Public 的问题</li><li>修复 Kafka/MQ -&gt; MySQL 创建任务页面中消息结构展示与实际选择不一致的问题</li><li>修复 PostgreSQL -&gt; StarRocks 修改订阅原映射关系失效的问题</li><li>修复，结构迁移任务创建相似任务报错的问题</li><li>修复，重置文件位点时，时间位点改变不正确的问题</li></ul><h2>免费下载与使用</h2><ul><li>快速上手：<a href="https://www.oschina.net/action/GoToLink?url=https%3A%2F%2Fwww.clougence.com%2Fcc-doc%2Fquick%2Fquick_start" target="_blank">https://www.clougence.com/cc-doc/quick/quick_start</a></li></ul></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 08:43:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274002/cloudcanal-3-3-3-0-released</guid>
            <link>https://www.oschina.net/news/274002/cloudcanal-3-3-3-0-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
        <item>
            <title>
                <![CDATA[🎉 通用、灵活、高性能分布式 ID 生成器 | CosId 2.6.4 发布]]>
            </title>
            <description>
                <![CDATA[<div class="content"><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CosId Logo" height="206" src="https://oscimg.oschina.net/oscnet/up-63e6250bd72c3e4d2dde12bc154ad9f06d2.png" width="300" referrerpolicy="no-referrer"></p><h1>CosId<span>&nbsp;</span>通用、灵活、高性能分布式 ID 生成器</h1><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/link?target=https%3A%2F%2Fwww.apache.org%2Flicenses%2FLICENSE-2.0.html"><img alt="License" src="https://img.shields.io/badge/license-Apache%202-4EB1BA.svg" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId%2Freleases"><img alt="GitHub release" src="https://img.shields.io/github/release/Ahoo-Wang/CosId.svg" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fapp.codacy.com%2Fgh%2FAhoo-Wang%2FCosId%3Futm_source%3Dgithub.com%26utm_medium%3Dreferral%26utm_content%3DAhoo-Wang%2FCosId%26utm_campaign%3DBadge_Grade_Settings"><img alt="Codacy Badge" src="https://api.codacy.com/project/badge/Grade/dfd1d6237a1644409548ebfbca300dc1" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><a href="https://gitee.com/link?target=https%3A%2F%2Fcodecov.io%2Fgh%2FAhoo-Wang%2FCosId"><img alt="codecov" src="https://codecov.io/gh/Ahoo-Wang/CosId/branch/main/graph/badge.svg?token=L0N51NB7ET" referrerpolicy="no-referrer"></a><span style="background-color:#ffffff; color:#40485b"><span>&nbsp;</span></span><img alt="Integration Test Status" src="https://github.com/Ahoo-Wang/CosId/actions/workflows/integration-test.yml/badge.svg" referrerpolicy="no-referrer"></p><h2>更新内容</h2><blockquote><p style="margin-left:0; margin-right:0"><strong>全新的</strong><em>官方文档</em><span>&nbsp;</span>发布！<img alt="🎉" height="14" src="https://cn-assets.gitee.com/assets/emoji/tada-be741eadd68f6c33355db4b50a6c141b.png" width="14" referrerpolicy="no-referrer"><span>&nbsp;</span><img alt="👉" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_right-8d392cf32998e3bca12bb7b4ee10dae0.png" width="14" referrerpolicy="no-referrer"><span>&nbsp;</span><a href="https://ahoowang.gitee.io/cosid/" target="_blank">https://ahoowang.gitee.io/cosid/</a><span>&nbsp;</span><img alt="👈" height="14" src="https://cn-assets.gitee.com/assets/emoji/point_left-4570b6929b8880ab2e8b8031007fef18.png" width="14" referrerpolicy="no-referrer"></p></blockquote><ul><li>特性 (doc): 使用<span>&nbsp;</span><em>VitePress</em><span>&nbsp;</span>替换<span>&nbsp;</span><em>VuePress</em><span>&nbsp;</span>作为静态文档站点生成器</li><li>依赖: 升级<span>&nbsp;</span><code>dependency org.springframework.boot:spring-boot-dependencies</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v3.2.1</code></li><li>依赖: 升级<span>&nbsp;</span><code>com.google.guava:guava</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v33</code></li><li>依赖: 升级<span>&nbsp;</span><code>com.github.spotbugs</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v6.0.4</code></li><li>依赖 (扩展): 升级<span>&nbsp;</span><code>org.axonframework:axon-bom</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v4.9.2</code></li><li>依赖 (扩展): 升级<span>&nbsp;</span><code>org.mybatis:mybatis</code><span>&nbsp;</span>版本<span>&nbsp;</span><code>v3.5.15</code></li></ul><h2>简介</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><em><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId">CosId</a></em><span>&nbsp;</span>旨在提供通用、灵活、高性能的分布式 ID 生成器。</p><ul><li><code>CosIdGenerator</code><span>&nbsp;</span>:<span>&nbsp;</span><em>单机 TPS 性能：1557W/s</em>，三倍于<span>&nbsp;</span><code>UUID.randomUUID()</code>，基于时钟的全局趋势递增 ID。</li><li><code>SnowflakeId</code><span>&nbsp;</span>:<span>&nbsp;</span><em>单机 TPS 性能：409W/s</em><span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fcosid.ahoo.me%2Fguide%2Fperf-test.html">JMH 基准测试</a><span>&nbsp;</span>, 主要解决<span>&nbsp;</span><em>时钟回拨问题</em><span>&nbsp;</span>、<em>机器号分配问题</em>、<em>取模分片不均匀问题</em><span>&nbsp;</span>并且提供更加友好、灵活的使用体验。</li><li><code>SegmentId</code>: 每次获取一段 (<code>Step</code>) ID，来降低号段分发器的网络 IO 请求频次提升性能。 
  <ul><li><code>IdSegmentDistributor</code>: 号段分发器（号段存储器） 
    <ul><li><code>RedisIdSegmentDistributor</code>: 基于<span>&nbsp;</span><em>Redis</em><span>&nbsp;</span>的号段分发器。</li><li><code>JdbcIdSegmentDistributor</code>: 基于<span>&nbsp;</span><em>Jdbc</em><span>&nbsp;</span>的号段分发器，支持各种关系型数据库。</li><li><code>ZookeeperIdSegmentDistributor</code>: 基于<span>&nbsp;</span><em>Zookeeper</em><span>&nbsp;</span>的号段分发器。</li><li><code>MongoIdSegmentDistributor</code>: 基于<span>&nbsp;</span><em>MongoDB</em><span>&nbsp;</span>的号段分发器。</li></ul></li></ul></li><li><code>SegmentChainId</code>(<strong>推荐</strong>):<code>SegmentChainId</code><span>&nbsp;</span>(<em>lock-free</em>) 是对<span>&nbsp;</span><code>SegmentId</code><span>&nbsp;</span>的增强。性能可达到近似<span>&nbsp;</span><code>AtomicLong</code><span>&nbsp;</span>的<span>&nbsp;</span><em>TPS 性能:12743W+/s</em><span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fcosid.ahoo.me%2Fguide%2Fperf-test.html">JMH 基准测试</a><span>&nbsp;</span>。 
  <ul><li><code>PrefetchWorker</code><span>&nbsp;</span>维护安全距离 (<code>safeDistance</code>), 并且支持基于饥饿状态的动态<code>safeDistance</code>扩容/收缩。</li></ul></li></ul><h2><a href="https://ahoowang.gitee.io/cosid/guide/getting-started.html">快速开始</a></h2><h2>背景（为什么需要<em>分布式 ID</em>）</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">在软件系统演进过程中，随着业务规模的增长 (TPS / 存储容量)，我们需要通过集群化部署来分摊计算、存储压力。 应用服务的无状态设计使其具备了伸缩性。在使用<span>&nbsp;</span><strong>Kubernetes</strong><span>&nbsp;</span>部署时我们只需要一行命令即可完成服务伸缩 (<code>kubectl scale --replicas=5 deployment/order-service</code>)。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">但对于有状态的数据库就不那么容易了，此时数据库变成系统的性能瓶颈是显而易见的。</p><h3>分库分表</h3><blockquote><p style="margin-left:0; margin-right:0">从微服务的角度来理解垂直拆分其实就是微服务拆分。以限界上下文来定义服务边界将大服务 / 单体应用拆分成多个自治的粒度更小的服务，因为自治性规范要求，数据库也需要进行业务拆分。 但垂直拆分后的单个微服务依然会面临 TPS / 存储容量，的挑战，所以这里我们重点讨论水平拆分的方式。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="分库分表" src="https://oscimg.oschina.net/oscnet/up-bf3f59559837c87fe828f12113f2ec6269c.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">数据库分库分表方案是逻辑统一，物理分区自治的方案。其核心设计在于中间层映射方案的设计 (上图<span>&nbsp;</span><strong>Mapping</strong>)，即分片算法的设计。 几乎所有编程语言都内置实现了散列表 (java:<code>HashMap</code>/csharp:<code>Dictionary</code>/python:<code>dict</code>/go:<code>map</code><span>&nbsp;</span>...)。分片算法跟散列表高度相似 (<code>hashCode</code>)，都得通过<span>&nbsp;</span><code>key</code>/<code>shardingValue</code><span>&nbsp;</span>映射到对应的槽位 (<code>slot</code>)。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">那么<span>&nbsp;</span><code>shardingValue</code><span>&nbsp;</span>从哪里来呢？<strong>CosId</strong>！！</p><blockquote><p style="margin-left:0; margin-right:0">当然还有很多分布式场景需要<em>分布式 ID</em>，这里不再一一列举。</p></blockquote><h2>分布式 ID 方案的核心指标</h2><ul><li><strong>全局（相同业务）唯一性</strong>：唯一性保证是<span>&nbsp;</span><strong>ID</strong><span>&nbsp;</span>的必要条件，假设 ID 不唯一就会产生主键冲突，这点很容易可以理解。 
  <ul><li>通常所说的全局唯一性并不是指所有业务服务都要唯一，而是相同业务服务不同部署副本唯一。 比如 Order 服务的多个部署副本在生成<span>&nbsp;</span><code>t_order</code><span>&nbsp;</span>这张表的<span>&nbsp;</span><code>Id</code><span>&nbsp;</span>时是要求全局唯一的。至于<span>&nbsp;</span><code>t_order_item</code><span>&nbsp;</span>生成的<span>&nbsp;</span><code>ID</code><span>&nbsp;</span>与<span>&nbsp;</span><code>t_order</code><span>&nbsp;</span>是否唯一，并不影响唯一性约束，也不会产生什么副作用。 不同业务模块间也是同理。即唯一性主要解决的是 ID 冲突问题。</li></ul></li><li><strong>有序性</strong>：有序性保证是面向查询的数据结构算法（除了 Hash 算法）所必须的，是<strong>二分查找法</strong><span>&nbsp;</span>(分而治之) 的前提。 
  <ul><li>MySq-InnoDB B + 树是使用最为广泛的，假设 Id 是无序的，B+ 树，为了维护 ID 的有序性，就会频繁的在索引的中间位置插入而挪动后面节点的位置，甚至导致频繁的页分裂，这对于性能的影响是极大的。那么如果我们能够保证 ID 的有序性这种情况就完全不同了，只需要进行追加写操作。所以 ID 的有序性是非常重要的，也是 ID 设计不可避免的特性。</li></ul></li><li><strong>吞吐量 / 性能 (ops/time)</strong>：即单位时间（每秒）能产生的 ID 数量。生成 ID 是非常高频的操作，也是最为基本的。假设 ID 生成的性能缓慢，那么不管怎么进行系统优化也无法获得更好的性能。 
  <ul><li>一般我们会首先生成 ID，然后再执行写入操作，假设 ID 生成缓慢，那么整体性能上限就会受到限制，这一点应该不难理解。</li></ul></li><li><strong>稳定性 (time/op)</strong>：稳定性指标一般可以采用<strong>每个操作的时间进行百分位采样</strong>来分析，比如<span>&nbsp;</span><em><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId">CosId</a></em><span>&nbsp;</span>百分位采样<span>&nbsp;</span><strong>P9999=0.208 us/op</strong>，即<span>&nbsp;</span><strong>0% ~ 99.99%</strong><span>&nbsp;</span>的单位操作时间小于等于<span>&nbsp;</span><strong>0.208 us/op</strong>。 
  <ul><li><a href="https://gitee.com/link?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E7%2599%25BE%25E5%2588%2586%25E4%25BD%258D%25E6%2595%25B0">百分位数 WIKI</a><span>&nbsp;</span>：统计学术语，若将一组数据从小到大排序，并计算相应的累计百分点，则某百分点所对应数据的值，就称为这百分点的百分位数，以 Pk 表示第 k 百分位数。百分位数是用来比较个体在群体中的相对地位量数。</li><li>为什么不用平均<em>每个操作的时间</em>：马老师的身价跟你的身价能平均么？平均后的值有意义不？</li><li>可以使用最小<em>每个操作的时间</em>、最大<em>每个操作的时间</em>作为参考吗？因为最小、最大值只说明了零界点的情况，虽说可以作为稳定性的参考，但依然不够全面。而且<em>百分位数</em>已经覆盖了这俩个指标。</li></ul></li><li><strong>自治性（依赖）</strong>：主要是指对外部环境有无依赖，比如<strong>号段模式</strong>会强依赖第三方存储中间件来获取<span>&nbsp;</span><code>NexMaxId</code>。自治性还会对可用性造成影响。</li><li><strong>可用性</strong>：分布式 ID 的可用性主要会受到自治性影响，比如<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>会受到时钟回拨影响，导致处于短暂时间的不可用状态。而<strong>号段模式</strong>会受到第三方发号器（<code>NexMaxId</code>）的可用性影响。 
  <ul><li><a href="https://gitee.com/link?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E5%258F%25AF%25E7%2594%25A8%25E6%2580%25A7">可用性 WIKI</a><span>&nbsp;</span>：在一个给定的时间间隔内，对于一个功能个体来讲，总的可用时间所占的比例。</li><li>MTBF：平均故障间隔</li><li>MDT：平均修复 / 恢复时间</li><li>Availability=MTBF/(MTBF+MDT)</li><li>假设 MTBF 为 1 年，MDT 为 1 小时，即<span>&nbsp;</span><code>Availability=(365*24)/(365*24+1)=0.999885857778792≈99.99%</code>，也就是我们通常所说对可用性 4 个 9。</li></ul></li><li><strong>适应性</strong>：是指在面对外部环境变化的自适应能力，这里我们主要说的是面对流量突发时动态伸缩分布式 ID 的性能， 
  <ul><li><strong>SegmentChainId</strong><span>&nbsp;</span>可以基于<strong>饥饿状态</strong>进行<strong>安全距离</strong>的动态伸缩。</li><li><strong>SnowflakeId</strong><span>&nbsp;</span>常规位分配方案性能恒定 409.6W，虽然可以通过调整位分配方案来获得不同的 TPS 性能，但是位分配方法的变更是破坏性的，一般根据业务场景确定位分配方案后不再变更。</li></ul></li><li><strong>存储空间</strong>：还是用 MySq-InnoDB B + 树来举例，普通索引（二级索引）会存储主键值，主键越大占用的内存缓存、磁盘空间也会越大。Page 页存储的数据越少，磁盘 IO 访问的次数会增加。总之在满足业务需求的情况下，尽可能小的存储空间占用在绝大多数场景下都是好的设计原则。</li></ul><h3>不同分布式 ID 方案核心指标对比</h3><table cellspacing="0" style="--darkreader-inline-bgcolor:#181a1b; --darkreader-inline-border-bottom:currentcolor; --darkreader-inline-border-left:currentcolor; --darkreader-inline-border-right:currentcolor; --darkreader-inline-border-top:currentcolor; --darkreader-inline-color:#b7b1a7; -webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; border:medium none; box-sizing:border-box; color:#40485b; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Liberation Sans&quot;,&quot;PingFang SC&quot;,&quot;Microsoft YaHei&quot;,&quot;Hiragino Sans GB&quot;,&quot;Wenquanyi Micro Hei&quot;,&quot;WenQuanYi Zen Hei&quot;,&quot;ST Heiti&quot;,SimHei,SimSun,&quot;WenQuanYi Zen Hei Sharp&quot;,sans-serif; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; line-height:inherit; margin:0px 0px 16px; max-width:100%; orphans:2; overflow:auto; text-align:left; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; word-break:initial; word-spacing:0px"><tbody><tr><th>分布式 ID</th><th>全局唯一性</th><th>有序性</th><th>吞吐量</th><th>稳定性（1s=1000,000us）</th><th>自治性</th><th>可用性</th><th>适应性</th><th>存储空间</th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">UUID/GUID</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">完全无序</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">3078638(ops/s)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">P9999=0.325(us/op)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">完全自治</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">100%</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">否</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">128-bit</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">SnowflakeId</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">本地单调递增，全局趋势递增 (受全局时钟影响)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">4096000(ops/s)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">P9999=0.244(us/op)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">依赖时钟</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">时钟回拨会导致短暂不可用</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">否</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">64-bit</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">SegmentId</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">本地单调递增，全局趋势递增 (受 Step 影响)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">29506073(ops/s)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">P9999=46.624(us/op)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">依赖第三方号段分发器</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">受号段分发器可用性影响</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">否</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">64-bit</td></tr><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">SegmentChainId</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">本地单调递增，全局趋势递增 (受 Step、安全距离影响)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">127439148(ops/s)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">P9999=0.208(us/op)</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">依赖第三方号段分发器</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">受号段分发器可用性影响，但因安全距离存在，预留 ID 段，所以高于 SegmentId</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">是</td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px">64-bit</td></tr></tbody></table><h3>有序性 (要想分而治之・二分查找法，必须要维护我)</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">刚刚我们已经讨论了 ID 有序性的重要性，所以我们设计 ID 算法时应该尽可能地让 ID 是单调递增的，比如像表的自增主键那样。但是很遗憾，因全局时钟、性能等分布式系统问题，我们通常只能选择局部单调递增、全局趋势递增的组合（就像我们在分布式系统中不得不的选择最终一致性那样）以获得多方面的权衡。下面我们来看一下什么是单调递增与趋势递增。</p><h4>有序性之单调递增</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="单调递增" src="https://oscimg.oschina.net/oscnet/up-8ba6ce51f3f87c5ad8768ebf6ef32e854d9.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">单调递增：T 表示全局绝对时点，假设有 Tn+1&gt;Tn（绝对时间总是往前进的，这里不考虑相对论、时间机器等），那么必然有 F (Tn+1)&gt;F (Tn)，数据库自增主键就属于这一类。 另外需要特别说明的是单调递增跟连续性递增是不同的概念。 连续性递增：<code>F(n+1)=(F(n)+step)</code><span>&nbsp;</span>即下一次获取的 ID 一定等于当前<span>&nbsp;</span><code>ID+Step</code>，当<span>&nbsp;</span><code>Step=1</code><span>&nbsp;</span>时类似于这样一个序列:<code>1-&gt;2-&gt;3-&gt;4-&gt;5</code>。</p><blockquote><p style="margin-left:0; margin-right:0">扩展小知识：数据库的自增主键也不是连续性递增的，相信你一定遇到过这种情况，请思考一下数据库为什么这样设计？</p></blockquote><h4>有序性之趋势递增</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="趋势递增" src="https://oscimg.oschina.net/oscnet/up-c1c18e3548c373db0f634c1d0183739b41b.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">趋势递增：Tn&gt;Tn-s，那么大概率有 F (Tn)&gt;F (Tn-s)。虽然在一段时间间隔内有乱序，但是整体趋势是递增。从上图上看，是有上升趋势的（趋势线）。</p><ul><li>在<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>中 n-s 受到全局时钟同步影响。</li><li>在号段模式 (<strong>SegmentId</strong>) 中 n-s 受到号段可用区间 (<code>Step</code>) 影响。</li></ul><h2>分布式 ID 分配方案</h2><h3>UUID/GUID</h3><ul><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer">不依赖任何第三方中间件</li><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer">性能高</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">完全无序</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">空间占用大，需要占用 128 位存储空间。</li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">UUID 最大的缺陷是随机的、无序的，当用于主键时会导致数据库的主键索引效率低下（为了维护索引树，频繁的索引中间位置插入数据，而不是追加写）。这也是 UUID 不适用于数据库主键的最为重要的原因。</p><h3>SnowflakeId</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Snowflake 雪花算法" src="https://oscimg.oschina.net/oscnet/up-8d58346c8e62fdd525df8ed4bc1b1458710.png" referrerpolicy="no-referrer"></p><blockquote><p style="margin-left:0; margin-right:0"><em>SnowflakeId</em><span>&nbsp;</span>使用<span>&nbsp;</span><code>Long</code>（64-bit）位分区来生成 ID 的一种分布式 ID 算法。 通用的位分配方案为：<code>timestamp</code>(41-bit)+<code>machineId</code>(10-bit)+<code>sequence</code>(12-bit)=63-bit。</p></blockquote><ul><li>41-bit<code>timestamp</code>=(1L&lt;&lt;41)/(1000/3600/365)，约可以存储 69 年的时间戳，即可以使用的绝对时间为<span>&nbsp;</span><code>EPOCH</code>+69 年，一般我们需要自定义<span>&nbsp;</span><code>EPOCH</code><span>&nbsp;</span>为产品开发时间，另外还可以通过压缩其他区域的分配位数，来增加时间戳位数来延长可用时间。</li><li>10-bit<code>machineId</code>=(1L&lt;&lt;10)=1024，即相同业务可以部署 1024 个副本 (在 Kubernetes 概念里没有主从副本之分，这里直接沿用 Kubernetes 的定义)。一般情况下没有必要使用这么多位，所以会根据部署规模需要重新定义。</li><li>12-bit<code>sequence</code>=(1L&lt;&lt;12)*1000=4096000，即单机每秒可生成约 409W 的 ID，全局同业务集群可产生<span>&nbsp;</span><code>4096000*1024=419430W=41.9 亿 (TPS)</code>。</li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">从<span>&nbsp;</span><em>SnowflakeId</em><span>&nbsp;</span>设计上可以看出:</p><ul><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer"><code>timestamp</code><span>&nbsp;</span>在高位，单实例<span>&nbsp;</span><em>SnowflakeId</em><span>&nbsp;</span>是会保证时钟总是向前的（校验本机时钟回拨），所以是本机单调递增的。受全局时钟同步 / 时钟回拨影响<span>&nbsp;</span><em>SnowflakeId</em><span>&nbsp;</span>是全局趋势递增的。</li><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer"><em>SnowflakeId</em><span>&nbsp;</span>不对任何第三方中间件有强依赖关系，并且性能也非常高。</li><li><img alt="👍" height="14" src="https://assets.gitee.com/assets/emoji/thumbsup-f866ad23f6584fa15376ddb4738e53cf.png" width="14" referrerpolicy="no-referrer">位分配方案可以按照业务系统需要灵活配置，来达到最优使用效果。</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">强依赖本机时钟，潜在的时钟回拨问题会导致 ID 重复、处于短暂的不可用状态。</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer"><code>machineId</code><span>&nbsp;</span>需要手动设置，实际部署时如果采用手动分配<span>&nbsp;</span><code>machineId</code>，会非常低效。</li></ul><h4>SnowflakeId 之机器号分配问题</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">在<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>中根据业务设计的位分配方案确定了基本上就不再有变更了，也很少需要维护。但是<span>&nbsp;</span><code>machineId</code><span>&nbsp;</span>总是需要配置的，而且集群中是不能重复的，否则分区原则就会被破坏而导致 ID 唯一性原则破坏，当集群规模较大时<span>&nbsp;</span><code>machineId</code><span>&nbsp;</span>的维护工作是非常繁琐，低效的。</p><blockquote><p style="margin-left:0; margin-right:0">有一点需要特别说明的，<strong>SnowflakeId</strong><span>&nbsp;</span>的<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>是逻辑上的概念，而不是物理概念。 想象一下假设<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>是物理上的，那么意味着一台机器拥有只能拥有一个<span>&nbsp;</span><strong>MachineId</strong>，那会产生什么问题呢？</p></blockquote><blockquote><p style="margin-left:0; margin-right:0">目前<span>&nbsp;</span><em><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId">CosId</a></em><span>&nbsp;</span>提供了以下五种<span>&nbsp;</span><code>MachineId</code><span>&nbsp;</span>分配器。</p></blockquote><ul><li>ManualMachineIdDistributor: 手动配置<span>&nbsp;</span><code>machineId</code>，一般只有在集群规模非常小的时候才有可能使用，不推荐。</li><li>StatefulSetMachineIdDistributor: 使用<span>&nbsp;</span><code>Kubernetes</code><span>&nbsp;</span>的<span>&nbsp;</span><code>StatefulSet</code><span>&nbsp;</span>提供的稳定的标识 ID（HOSTNAME=service-01）作为机器号。</li><li>RedisMachineIdDistributor: 使用<span>&nbsp;</span><strong>Redis</strong><span>&nbsp;</span>作为机器号的分发存储，同时还会存储<span>&nbsp;</span><code>MachineId</code><span>&nbsp;</span>的上一次时间戳，用于<strong>启动时时钟回拨</strong>的检查。</li><li>JdbcMachineIdDistributor: 使用<strong>关系型数据库</strong>作为机器号的分发存储，同时还会存储<span>&nbsp;</span><code>MachineId</code><span>&nbsp;</span>的上一次时间戳，用于<strong>启动时时钟回拨</strong>的检查。</li><li>ZookeeperMachineIdDistributor: 使用<span>&nbsp;</span><strong>ZooKeeper</strong><span>&nbsp;</span>作为机器号的分发存储，同时还会存储<span>&nbsp;</span><code>MachineId</code><span>&nbsp;</span>的上一次时间戳，用于<strong>启动时时钟回拨</strong>的检查。</li></ul><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Redis MachineId Distributor" src="https://oscimg.oschina.net/oscnet/up-e5966f62f7f64aff097899743596a6ca385.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Machine Id Safe Guard" src="https://oscimg.oschina.net/oscnet/up-ce3a0238995e354fa22e1d7fcdb5f0e13c1.png" referrerpolicy="no-referrer"></p><h4>SnowflakeId 之时钟回拨问题</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">时钟回拨的致命问题是会导致 ID 重复、冲突（这一点不难理解），ID 重复显然是不能被容忍的。 在<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>算法中，按照<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>分区 ID，我们不难理解的是不同<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>是不可能产生相同 ID 的。所以我们解决的时钟回拨问题是指当前<span>&nbsp;</span><strong>MachineId</strong><span>&nbsp;</span>的时钟回拨问题，而不是所有集群节点的时钟回拨问题。</p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong>MachineId</strong><span>&nbsp;</span>时钟回拨问题大体可以分为俩种情况：</p><ul><li>运行时时钟回拨：即在运行时获取的当前时间戳比上一次获取的时间戳小。这个场景的时钟回拨是很容易处理的，一般<span>&nbsp;</span><strong>SnowflakeId</strong><span>&nbsp;</span>代码实现时都会存储<span>&nbsp;</span><code>lastTimestamp</code><span>&nbsp;</span>用于运行时时钟回拨的检查，并抛出时钟回拨异常。 
  <ul><li>时钟回拨时直接抛出异常是不太好地实践，因为下游使用方几乎没有其他处理方案（噢，我还能怎么办呢，等吧），时钟同步是唯一的选择，当只有一种选择时就不要再让用户选择了。</li><li><code>ClockSyncSnowflakeId</code><span>&nbsp;</span>是<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>的包装器，当发生时钟回拨时会使用<span>&nbsp;</span><code>ClockBackwardsSynchronizer</code><span>&nbsp;</span>主动等待时钟同步来重新生成 ID，提供更加友好的使用体验。</li></ul></li><li>启动时时钟回拨：即在启动服务实例时获取的当前时钟比上次关闭服务时小。此时的<span>&nbsp;</span><code>lastTimestamp</code><span>&nbsp;</span>是无法存储在进程内存中的。当获取的外部存储的<strong>机器状态</strong>大于当前时钟时钟时，会使用<span>&nbsp;</span><code>ClockBackwardsSynchronizer</code><span>&nbsp;</span>主动同步时钟。 
  <ul><li>LocalMachineStateStorage：使用本地文件存储<span>&nbsp;</span><code>MachineState</code>(机器号、最近一次时间戳)。因为使用的是本地文件所以只有当实例的部署环境是稳定的，<code>LocalMachineStateStorage</code><span>&nbsp;</span>才适用。</li><li>RedisMachineIdDistributor：将<span>&nbsp;</span><code>MachineState</code><span>&nbsp;</span>存储在<span>&nbsp;</span><strong>Redis</strong><span>&nbsp;</span>分布式缓存中，这样可以保证总是可以获取到上次服务实例停机时<strong>机器状态</strong>。</li></ul></li></ul><h4>SnowflakeId 之 JavaScript 数值溢出问题</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><code>JavaScript</code><span>&nbsp;</span>的<span>&nbsp;</span><code>Number.MAX_SAFE_INTEGER</code><span>&nbsp;</span>只有 53-bit，如果直接将 63 位的<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>返回给前端，那么会产生值溢出的情况（所以这里我们应该知道后端传给前端的<span>&nbsp;</span><code>long</code><span>&nbsp;</span>值溢出问题，<strong>迟早</strong>会出现，只不过 SnowflakeId 出现得更快而已）。 很显然溢出是不能被接受的，一般可以使用以下俩种处理方案：</p><ul><li>将生成的 63-bit<code>SnowflakeId</code><span>&nbsp;</span>转换为<span>&nbsp;</span><code>String</code><span>&nbsp;</span>类型。 
  <ul><li>直接将<span>&nbsp;</span><code>long</code><span>&nbsp;</span>转换成<span>&nbsp;</span><code>String</code>。</li><li>使用<span>&nbsp;</span><code>SnowflakeFriendlyId</code><span>&nbsp;</span>将<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>转换成比较友好的字符串表示：<code>{timestamp}-{machineId}-{sequence} -&gt; 20210623131730192-1-0</code></li></ul></li><li>自定义<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>位分配来缩短<span>&nbsp;</span><code>SnowflakeId</code><span>&nbsp;</span>的位数（53-bit）使<span>&nbsp;</span><code>ID</code><span>&nbsp;</span>提供给前端时不溢出 
  <ul><li>使用<span>&nbsp;</span><code>SafeJavaScriptSnowflakeId</code>(<code>JavaScript</code><span>&nbsp;</span>安全的<span>&nbsp;</span><code>SnowflakeId</code>)</li></ul></li></ul><h2>号段模式（SegmentId）</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Segment Id" src="https://oscimg.oschina.net/oscnet/up-d91b5939ccc673f26ccdcfbbd9e6aa68535.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left">从上面的设计图中，不难看出<strong>号段模式</strong>基本设计思路是通过每次获取一定长度（Step）的可用 ID（Id 段 / 号段），来降低网络 IO 请求次数，提升性能。</p><ul><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">强依赖第三方号段分发器，可用性受到第三方分发器影响。</li><li><img alt="👎" height="14" src="https://assets.gitee.com/assets/emoji/thumbsdown-da41668c7715a2e470f020d398f74f74.png" width="14" referrerpolicy="no-referrer">每次号段用完时获取<span>&nbsp;</span><code>NextMaxId</code><span>&nbsp;</span>需要进行网络 IO 请求，此时的性能会比较低。</li><li>单实例 ID 单调递增，全局趋势递增。 
  <ul><li>从设计图中不难看出<span>&nbsp;</span><strong>Instance 1</strong><span>&nbsp;</span>每次获取的<span>&nbsp;</span><code>NextMaxId</code>，一定比上一次大，意味着下一次的号段一定比上一次大，所以从单实例上来看是单调递增的。</li><li>多实例各自持有的不同的号段，意味着同一时刻不同实例生成的 ID 是乱序的，但是整体趋势的递增的，所以全局趋势递增。</li></ul></li><li>ID 乱序程度受到 Step 长度以及集群规模影响（从趋势递增图中不难看出）。 
  <ul><li>假设集群中只有一个实例时<strong>号段模式</strong>就是单调递增的。</li><li><code>Step</code><span>&nbsp;</span>越小，乱序程度越小。当<span>&nbsp;</span><code>Step=1</code><span>&nbsp;</span>时，将无限接近单调递增。需要注意的是这里是无限接近而非等於单调递增，具体原因你可以思考一下这样一个场景： 
    <ul><li>号段分发器 T1 时刻给<span>&nbsp;</span><strong>Instance 1</strong><span>&nbsp;</span>分发了<span>&nbsp;</span><code>ID=1</code>,T2 时刻给<span>&nbsp;</span><strong>Instance 2</strong><span>&nbsp;</span>分发了<span>&nbsp;</span><code>ID=2</code>。因为机器性能、网络等原因，<code>Instance 2</code><span>&nbsp;</span>网络 IO 写请求先于<span>&nbsp;</span><code>Instance 1</code><span>&nbsp;</span>到达。那么这个时候对于数据库来说，ID 依然是乱序的。</li></ul></li></ul></li></ul><h2>号段链模式（SegmentChainId）</h2><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><a href="https://gitee.com/link?target=https%3A%2F%2Fcosid.ahoo.me%2Fguide%2Fsegment-chain.html">分布式 ID (CosId) 之号段链模式性能 (1.2 亿 /s) 解析</a></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Segment Chain Id" src="https://oscimg.oschina.net/oscnet/up-d96e7c4f91786832c1345a7228a7c012177.png" referrerpolicy="no-referrer"></p><p style="color:#40485b; margin-left:0; margin-right:0; text-align:left"><strong>SegmentChainId</strong><span>&nbsp;</span>是<span>&nbsp;</span><strong>SegmentId</strong><span>&nbsp;</span>增强版，相比于<span>&nbsp;</span><strong>SegmentId</strong><span>&nbsp;</span>有以下优势：</p><ul><li>稳定性：<strong>SegmentId</strong><span>&nbsp;</span>的稳定性问题（P9999=46.624 (us/op)）主要是因为号段用完之后同步进行<span>&nbsp;</span><code>NextMaxId</code><span>&nbsp;</span>的获取导致的（会产生网络 IO）。 
  <ul><li><strong>SegmentChainId</strong><span>&nbsp;</span>（P9999=0.208 (us/op)）引入了新的角色<span>&nbsp;</span><strong>PrefetchWorker</strong><span>&nbsp;</span>用以维护和保证<strong>安全距离</strong>，理想情况下使得获取 ID 的线程几乎完全不需要进行同步的等待<span>&nbsp;</span><code>NextMaxId</code><span>&nbsp;</span>获取，性能可达到近似<span>&nbsp;</span><code>AtomicLong</code><span>&nbsp;</span>的<span>&nbsp;</span><em>TPS 性能：12743W+/s</em><span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId%2Fblob%2Fmain%2FREADME.zh-CN.md%23jmh-benchmark">JMH 基准测试</a><span>&nbsp;</span>。</li></ul></li><li>适应性：从<span>&nbsp;</span><strong>SegmentId</strong><span>&nbsp;</span>介绍中我们知道了影响<span>&nbsp;</span><strong>ID 乱序</strong>的因素有俩个：集群规模、<code>Step</code><span>&nbsp;</span>大小。集群规模是我们不能控制的，但是<span>&nbsp;</span><code>Step</code><span>&nbsp;</span>是可以调节的。 
  <ul><li><code>Step</code><span>&nbsp;</span>应该近可能小才能使得<span>&nbsp;</span><strong>ID 单调递增</strong>的可能性增大。</li><li><code>Step</code><span>&nbsp;</span>太小会影响吞吐量，那么我们如何合理设置<span>&nbsp;</span><code>Step</code><span>&nbsp;</span>呢？答案是我们无法准确预估所有时点的吞吐量需求，那么最好的办法是吞吐量需求高时，Step 自动增大，吞吐量低时 Step 自动收缩。</li><li><strong>SegmentChainId</strong><span>&nbsp;</span>引入了<strong>饥饿状态</strong>的概念，<strong>PrefetchWorker</strong><span>&nbsp;</span>会根据<strong>饥饿状态</strong>检测当前<strong>安全距离</strong>是否需要膨胀或者收缩，以便获得吞吐量与有序性之间的权衡，这便是<span>&nbsp;</span><strong>SegmentChainId</strong><span>&nbsp;</span>的自适应性。</li></ul></li></ul><h2>集成</h2><h3>CosIdPlugin（MyBatis 插件）</h3><blockquote><p style="margin-left:0; margin-right:0">Kotlin DSL</p></blockquote><div><div><pre><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">implementation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span style="color:#eeeeee">(</span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">"me.ahoo.cosid:cosid-mybatis:${cosidVersion}"</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#eeeeee">)</span></span></pre></div></div><div><div><pre><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49"><span><span style="color:#d73a49">class</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><strong><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1"><span><span style="color:#6f42c1">Order</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>{</span></span><span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">@CosId</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">(</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">value</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">=</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span><span style="color:#6a737d"><span>"order"</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d"><span style="color:#6a737d">)</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">private</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>orderId</span><span>;</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">private</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>userId</span><span>;</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong>getOrderId</strong><span>()</span><span>{</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>orderId</span><span>;</span></span><span><span>}</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong>void</strong><strong>setOrderId</strong><span>(</span><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>orderId</span><span>)</span><span>{</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">this</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>.</span><span style="color:#008080">orderId</span><span>=</span><span>orderId</span><span>;</span></span><span><span>}</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong>getUserId</strong><span>()</span><span>{</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">return</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>userId</span><span>;</span></span><span><span>}</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">public</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><strong>void</strong><strong>setUserId</strong><span>(</span><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>Long</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>userId</span><span>)</span><span>{</span></span><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">this</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span>.</span><span style="color:#008080">userId</span><span>=</span><span>userId</span><span>;</span></span><span><span>}</span></span><span><span>}</span></span></pre></div></div><h3>ShardingSphere 插件</h3><blockquote><p style="margin-left:0; margin-right:0"><code>CosIdKeyGenerateAlgorithm</code>、<code>CosIdModShardingAlgorithm</code>、<code>CosIdIntervalShardingAlgorithm</code><span>&nbsp;</span>已合并至<span>&nbsp;</span><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Fapache%2Fshardingsphere%2Fpull%2F14132">ShardingSphere</a><span>&nbsp;</span>官方，未来<span>&nbsp;</span><em><a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2FAhoo-Wang%2FCosId%2Ftree%2Fmain%2Fcosid-shardingsphere">cosid-shardingsphere</a></em><span>&nbsp;</span>模块的维护可能会以官方为主。</p></blockquote><blockquote><p style="margin-left:0; margin-right:0">Kotlin DSL</p></blockquote><div><div><pre><span><strong><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49"><span style="color:#d73a49">implementation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong><span style="color:#eeeeee">(</span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">"me.ahoo.cosid:cosid-shardingsphere:${cosidVersion}"</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#eeeeee">)</span></span></pre></div></div><h4>CosIdKeyGenerateAlgorithm (分布式主键)</h4><div><div><pre><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">spring</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">shardingsphere</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">rules</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">sharding</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">key-generators</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">cosid</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">type</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span><span style="background-color:transparent; color:#00aadd">COSID</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">props</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span></span><span><span style="color:#008080"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5"><span style="color:#005cc5">id-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span>:</span><span style="background-color:transparent; color:#00aadd">__share__</span></span></pre></div></div><h4>基于间隔的时间范围分片算法</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CosId Interval Sharding Algorithm" src="https://oscimg.oschina.net/oscnet/up-8afd1ee134d5b3cb656d984b86c3c26a2b9.png" referrerpolicy="no-referrer"></p><ul><li>易用性：支持多种数据类型 (<code>Long</code>/<code>LocalDateTime</code>/<code>DATE</code>/<span>&nbsp;</span><code>String</code><span>&nbsp;</span>/<span>&nbsp;</span><code>SnowflakeId</code>)，而官方实现是先转换成字符串再转换成<span>&nbsp;</span><code>LocalDateTime</code>，转换成功率受时间格式化字符影响。</li><li>性能：相比于<span>&nbsp;</span><code>org.apache.shardingsphere.sharding.algorithm.sharding.datetime.IntervalShardingAlgorithm</code><span>&nbsp;</span>性能高出<span>&nbsp;</span><em>1200~4000</em><span>&nbsp;</span>倍。</li></ul><table cellspacing="0" style="--darkreader-inline-bgcolor:#181a1b; --darkreader-inline-border-bottom:currentcolor; --darkreader-inline-border-left:currentcolor; --darkreader-inline-border-right:currentcolor; --darkreader-inline-border-top:currentcolor; --darkreader-inline-color:#b7b1a7; -webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; border:medium none; box-sizing:border-box; color:#40485b; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Liberation Sans&quot;,&quot;PingFang SC&quot;,&quot;Microsoft YaHei&quot;,&quot;Hiragino Sans GB&quot;,&quot;Wenquanyi Micro Hei&quot;,&quot;WenQuanYi Zen Hei&quot;,&quot;ST Heiti&quot;,SimHei,SimSun,&quot;WenQuanYi Zen Hei Sharp&quot;,sans-serif; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; line-height:inherit; margin:0px 0px 16px; max-width:100%; orphans:2; overflow:auto; text-align:left; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; word-break:initial; word-spacing:0px"><tbody><tr><th><strong>PreciseShardingValue</strong></th><th><strong>RangeShardingValue</strong></th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px"><img alt="Throughput Of IntervalShardingAlgorithm - PreciseShardingValue" src="https://oscimg.oschina.net/oscnet/up-2a88161c2346bded68be5270064dcfc8246.png" referrerpolicy="no-referrer"></td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px"><img alt="Throughput Of IntervalShardingAlgorithm - RangeShardingValue" src="https://oscimg.oschina.net/oscnet/up-f31899cf725fa89975be9af664f80617d20.png" referrerpolicy="no-referrer"></td></tr></tbody></table><ul><li>CosIdIntervalShardingAlgorithm 
  <ul><li>type: COSID_INTERVAL</li></ul></li><li>SnowflakeIntervalShardingAlgorithm 
  <ul><li>type: COSID_INTERVAL_SNOWFLAKE</li></ul></li></ul><div><div><pre><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">spring</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">shardingsphere</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">rules</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding-algorithms</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">alg-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">type</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">COSID_INTERVAL_{type_suffix}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">props</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">logic-name-prefix</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">logic-name-prefix</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">id-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">cosid-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">datetime-lower</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>2021</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>-12</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>-08</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>22</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">:00:00</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">datetime-upper</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>2022</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>-12</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>-01</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>00</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">:00:00</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding-suffix-pattern</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">yyyyMM</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">datetime-interval-unit</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">MONTHS</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">datetime-interval-amount</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>1</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></span></pre></div></div><h4>取模分片算法</h4><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CosIdModShardingAlgorithm" src="https://oscimg.oschina.net/oscnet/up-614e23fdac05028408625b0856f2e1163aa.png" referrerpolicy="no-referrer"></p><ul><li>性能：相比于<span>&nbsp;</span><code>org.apache.shardingsphere.sharding.algorithm.sharding.mod.ModShardingAlgorithm</code><span>&nbsp;</span>性能高出<span>&nbsp;</span><em>1200~4000</em><span>&nbsp;</span>倍。并且稳定性更高，不会出现严重的性能退化。</li></ul><table cellspacing="0" style="--darkreader-inline-bgcolor:#181a1b; --darkreader-inline-border-bottom:currentcolor; --darkreader-inline-border-left:currentcolor; --darkreader-inline-border-right:currentcolor; --darkreader-inline-border-top:currentcolor; --darkreader-inline-color:#b7b1a7; -webkit-text-stroke-width:0px; background-color:#ffffff; border-collapse:collapse; border-spacing:0px; border:medium none; box-sizing:border-box; color:#40485b; display:block; font-family:-apple-system,&quot;system-ui&quot;,&quot;Segoe UI&quot;,Helvetica,Arial,&quot;Apple Color Emoji&quot;,&quot;Segoe UI Emoji&quot;,&quot;Segoe UI Symbol&quot;,&quot;Liberation Sans&quot;,&quot;PingFang SC&quot;,&quot;Microsoft YaHei&quot;,&quot;Hiragino Sans GB&quot;,&quot;Wenquanyi Micro Hei&quot;,&quot;WenQuanYi Zen Hei&quot;,&quot;ST Heiti&quot;,SimHei,SimSun,&quot;WenQuanYi Zen Hei Sharp&quot;,sans-serif; font-size:16px; font-style:normal; font-variant-caps:normal; font-variant-ligatures:normal; font-weight:400; letter-spacing:normal; line-height:inherit; margin:0px 0px 16px; max-width:100%; orphans:2; overflow:auto; text-align:left; text-decoration-color:initial; text-decoration-style:initial; text-decoration-thickness:initial; text-transform:none; white-space:normal; widows:2; word-break:initial; word-spacing:0px"><tbody><tr><th><strong>PreciseShardingValue</strong></th><th><strong>RangeShardingValue</strong></th></tr></tbody><tbody><tr><td style="border-color:#dfe2e5; border-style:solid; border-width:1px"><img alt="Throughput Of ModShardingAlgorithm - PreciseShardingValue" src="https://oscimg.oschina.net/oscnet/up-b0509c7b8d072d626c62e6d85006bb4f9ef.png" referrerpolicy="no-referrer"></td><td style="border-color:#dfe2e5; border-style:solid; border-width:1px"><img alt="Throughput Of ModShardingAlgorithm - RangeShardingValue" src="https://oscimg.oschina.net/oscnet/up-37c0d23dabd951f4a00985b74cd20c5a328.png" referrerpolicy="no-referrer"></td></tr></tbody></table><div><div><pre><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">spring</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">shardingsphere</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">rules</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">sharding-algorithms</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">alg-name</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">type</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">COSID_MOD</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">props</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">mod</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><strong><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span><span>4</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></strong></span><span><span style="color:#008080"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">logic-name-prefix</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1"><span style="color:#6f42c1">:</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="background-color:transparent; color:#00aadd"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62"><span style="color:#032f62">t_table_</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></pre></div></div><h2>性能测试报告</h2><h3>SegmentChainId - 吞吐量 (ops/s)</h3><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Throughput-Of-SegmentChainId" src="https://oscimg.oschina.net/oscnet/up-bcdd47563907ba963673c8cd1ee99f3a753.png" referrerpolicy="no-referrer"></p><h3>SegmentChainId - 每次操作耗时的百分位数 (us/op)</h3><blockquote><p style="margin-left:0; margin-right:0"><a href="https://gitee.com/link?target=https%3A%2F%2Fzh.wikipedia.org%2Fwiki%2F%25E7%2599%25BE%25E5%2588%2586%25E4%25BD%258D%25E6%2595%25B0">百分位数</a><span>&nbsp;</span>，统计学术语，若将一组数据从小到大排序，并计算相应的累计百分点，则某百分点所对应数据的值，就称为这百分点的百分位数，以 Pk 表示第 k 百分位数。百分位数是用来比较个体在群体中的相对地位量数。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="Percentile-Sample-Of-SegmentChainId" src="https://oscimg.oschina.net/oscnet/up-bc3e9bb34396489e0da8ec0888151b7d489.png" referrerpolicy="no-referrer"></p><h3>CosId VS 美团 Leaf</h3><blockquote><p style="margin-left:0; margin-right:0">CosId (<code>SegmentChainId</code>) 性能是 Leaf (<code>segment</code>) 的 5 倍。</p></blockquote><p style="color:#40485b; margin-left:0; margin-right:0; text-align:center"><img alt="CosId VS 美团 Leaf" src="https://gitee.com/AhooWang/CosId/raw/main/document/docs/.vuepress/public/assets/perf/CosId-VS-Leaf.png" referrerpolicy="no-referrer"></p></div>
                                    ]]>
            </description>
            <pubDate>Wed, 03 Jan 2024 08:41:00 GMT</pubDate>
            <guid isPermaLink="false">https://www.oschina.net/news/274001/cosid-2-6-4-released</guid>
            <link>https://www.oschina.net/news/274001/cosid-2-6-4-released</link>
            <author>
                <![CDATA[来源: 投稿]]>
            </author>
        </item>
    </channel>
</rss>
